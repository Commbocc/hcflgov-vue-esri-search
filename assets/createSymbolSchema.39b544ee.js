var x=Object.defineProperty,O=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var K=(e,r,t)=>r in e?x(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,a=(e,r)=>{for(var t in r||(r={}))z.call(r,t)&&K(e,t,r[t]);if(d)for(var t of d(r))F.call(r,t)&&K(e,t,r[t]);return e},u=(e,r)=>O(e,b(r));import{E as c}from"./Pipeline.54b0e846.js";import{L as h}from"./SymbolProcessor.f403b835.js";import"./index.1411fdd8.js";import"./TileInfo.e0173162.js";import"./aaBoundingRect.c8ff464f.js";import"./featureConversionUtils.915b67be.js";import"./OptimizedGeometry.c350e543.js";import"./OptimizedFeatureSet.ec9a3456.js";import"./QueryEngine.4b964a3f.js";import"./normalizeUtils.620cd137.js";import"./ItemCache.6f8eaf4f.js";import"./WhereClause.0d250a0e.js";import"./projection.4b52d096.js";import"./json.da51edc4.js";import"./QueryEngineCapabilities.650d7541.js";import"./utils.15139dcd.js";import"./ClassBreaksDefinition.68b236b5.js";import"./quickselect.02d2bace.js";import"./ogcFeatureUtils.a2d45f46.js";import"./geojson.31586015.js";import"./clientSideDefaults.714fb2ac.js";import"./query.1c19b733.js";import"./pbfQueryUtils.759b79e5.js";import"./pbf.919bfdfc.js";import"./enums.94a84b2b.js";import"./enums.8acce53f.js";import"./Texture.9af6e5f6.js";import"./context-util.2405957d.js";import"./TileKey.a18da98b.js";import"./TileClipper.4865707d.js";import"./Geometry.e891c191.js";import"./vec2.06e68032.js";import"./tileUtils.0fdb024d.js";import"./earcut.91e104de.js";import"./devEnvironmentUtils.f51567b1.js";function y(e){if(e.type==="line-marker"){var r;return{type:"line-marker",color:(r=e.color)==null?void 0:r.toJSON(),placement:e.placement,style:e.style}}return e.constructor.fromJSON(e.toJSON()).toJSON()}function f(e){return hydrateKey(e)}function ce(e,r,t){if(!e)return null;switch(e.type){case"simple-fill":case"picture-fill":return E(e,r,t);case"simple-marker":case"picture-marker":return L(e,r,t);case"simple-line":return g(e,r,t);case"text":return N(e,r,t);case"label":return v(e,r,t);case"cim":return{type:"cim",rendererKey:r.vvFlags,data:e.data,maxVVSize:r.maxVVSize};case"CIMSymbolReference":return{type:"cim",rendererKey:r.vvFlags,data:e,maxVVSize:r.maxVVSize};case"web-style":return u(a({},y(e)),{type:"web-style",hash:e.hash(),rendererKey:r.vvFlags,maxVVSize:r.maxVVSize});default:throw new Error(`symbol not supported ${e.type}`)}}function v(e,r,t){const i=e.toJSON(),l=h(c.LABEL,u(a({},r),{placement:i.labelPlacement}));return u(a({materialKey:t?f(l):l,hash:e.hash()},i),{labelPlacement:i.labelPlacement})}function E(e,r,t){const i=r.supportsOutlineFills,l=h(c.FILL,u(a({},r),{isOutlinedFill:i})),o=t?f(l):l,m=e.clone(),n=m.outline;r.supportsOutlineFills||(m.outline=null);const V=a({materialKey:o,hash:m.hash(),isOutlinedFill:!!r.supportsOutlineFills},y(m));if(r.supportsOutlineFills)return V;const s=[];if(s.push(V),n){const p=h(c.LINE,u(a({},r),{isOutline:!0})),S=a({materialKey:t?f(p):p,hash:n.hash()},y(n));s.push(S)}return{type:"composite-symbol",layers:s,hash:s.reduce((p,S)=>S.hash+p,"")}}function g(e,r,t){const i=h(c.LINE,r),l=t?f(i):i,o=e.clone(),m=o.marker;o.marker=null;const n=[];if(n.push(a({materialKey:l,hash:o.hash()},y(o))),m){var V;const s=h(c.MARKER,r),p=t?f(s):s;m.color=(V=m.color)!=null?V:o.color,n.push(a({materialKey:p,hash:m.hash(),lineWidth:o.width},y(m)))}return{type:"composite-symbol",layers:n,hash:n.reduce((s,p)=>p.hash+s,"")}}function L(e,r,t){const i=h(c.MARKER,r),l=t?f(i):i,o=y(e);return u(a({materialKey:l,hash:e.hash()},o),{angle:e.angle,maxVVSize:r.maxVVSize})}function N(e,r,t){const i=h(c.TEXT,r),l=t?f(i):i,o=y(e);return u(a({materialKey:l,hash:e.hash()},o),{angle:e.angle,maxVVSize:r.maxVVSize})}export{ce as createSymbolSchema};
