var x=Object.defineProperty,O=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var K=(e,r,t)=>r in e?x(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,a=(e,r)=>{for(var t in r||(r={}))z.call(r,t)&&K(e,t,r[t]);if(d)for(var t of d(r))F.call(r,t)&&K(e,t,r[t]);return e},u=(e,r)=>O(e,b(r));import{E as c}from"./Pipeline.ada5bc85.js";import{L as h}from"./SymbolProcessor.af4fed16.js";import"./index.32114bf6.js";import"./TileInfo.64c821e4.js";import"./aaBoundingRect.5fdf91a3.js";import"./featureConversionUtils.a0fa4a55.js";import"./OptimizedGeometry.8b0eb5ae.js";import"./OptimizedFeatureSet.ec9a3456.js";import"./QueryEngine.67465c84.js";import"./normalizeUtils.a3d136fe.js";import"./ItemCache.a8b4b60a.js";import"./WhereClause.5e909714.js";import"./projection.ce609a7b.js";import"./json.da51edc4.js";import"./QueryEngineCapabilities.650d7541.js";import"./utils.97a7b6c3.js";import"./ClassBreaksDefinition.f9aae324.js";import"./quickselect.02d2bace.js";import"./ogcFeatureUtils.fb82cd2f.js";import"./geojson.4cdc5faa.js";import"./clientSideDefaults.836210cb.js";import"./query.18f36fe5.js";import"./pbfQueryUtils.f1611ca0.js";import"./pbf.816330f2.js";import"./enums.94a84b2b.js";import"./enums.8acce53f.js";import"./Texture.fabe77f9.js";import"./context-util.ba77401a.js";import"./TileKey.10b9e8d7.js";import"./TileClipper.123aa87d.js";import"./Geometry.e891c191.js";import"./vec2.55419239.js";import"./tileUtils.3e985f74.js";import"./earcut.91e104de.js";import"./devEnvironmentUtils.f51567b1.js";function y(e){if(e.type==="line-marker"){var r;return{type:"line-marker",color:(r=e.color)==null?void 0:r.toJSON(),placement:e.placement,style:e.style}}return e.constructor.fromJSON(e.toJSON()).toJSON()}function f(e){return hydrateKey(e)}function ce(e,r,t){if(!e)return null;switch(e.type){case"simple-fill":case"picture-fill":return E(e,r,t);case"simple-marker":case"picture-marker":return L(e,r,t);case"simple-line":return g(e,r,t);case"text":return N(e,r,t);case"label":return v(e,r,t);case"cim":return{type:"cim",rendererKey:r.vvFlags,data:e.data,maxVVSize:r.maxVVSize};case"CIMSymbolReference":return{type:"cim",rendererKey:r.vvFlags,data:e,maxVVSize:r.maxVVSize};case"web-style":return u(a({},y(e)),{type:"web-style",hash:e.hash(),rendererKey:r.vvFlags,maxVVSize:r.maxVVSize});default:throw new Error(`symbol not supported ${e.type}`)}}function v(e,r,t){const i=e.toJSON(),l=h(c.LABEL,u(a({},r),{placement:i.labelPlacement}));return u(a({materialKey:t?f(l):l,hash:e.hash()},i),{labelPlacement:i.labelPlacement})}function E(e,r,t){const i=r.supportsOutlineFills,l=h(c.FILL,u(a({},r),{isOutlinedFill:i})),o=t?f(l):l,m=e.clone(),n=m.outline;r.supportsOutlineFills||(m.outline=null);const V=a({materialKey:o,hash:m.hash(),isOutlinedFill:!!r.supportsOutlineFills},y(m));if(r.supportsOutlineFills)return V;const s=[];if(s.push(V),n){const p=h(c.LINE,u(a({},r),{isOutline:!0})),S=a({materialKey:t?f(p):p,hash:n.hash()},y(n));s.push(S)}return{type:"composite-symbol",layers:s,hash:s.reduce((p,S)=>S.hash+p,"")}}function g(e,r,t){const i=h(c.LINE,r),l=t?f(i):i,o=e.clone(),m=o.marker;o.marker=null;const n=[];if(n.push(a({materialKey:l,hash:o.hash()},y(o))),m){var V;const s=h(c.MARKER,r),p=t?f(s):s;m.color=(V=m.color)!=null?V:o.color,n.push(a({materialKey:p,hash:m.hash(),lineWidth:o.width},y(m)))}return{type:"composite-symbol",layers:n,hash:n.reduce((s,p)=>p.hash+s,"")}}function L(e,r,t){const i=h(c.MARKER,r),l=t?f(i):i,o=y(e);return u(a({materialKey:l,hash:e.hash()},o),{angle:e.angle,maxVVSize:r.maxVVSize})}function N(e,r,t){const i=h(c.TEXT,r),l=t?f(i):i,o=y(e);return u(a({materialKey:l,hash:e.hash()},o),{angle:e.angle,maxVVSize:r.maxVVSize})}export{ce as createSymbolSchema};
