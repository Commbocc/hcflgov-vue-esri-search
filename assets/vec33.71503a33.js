import{dk as j,f as V}from"./index.32114bf6.js";function E(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function L(r){return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]]}function N(r,e,o,n,u,c,s,d,f,i,l,m,b,h,M,p){return[r,e,o,n,u,c,s,d,f,i,l,m,b,h,M,p]}function R(r,e){return new Float64Array(r,e,16)}const D=E();Object.freeze({__proto__:null,create:E,clone:L,fromValues:N,createView:R,IDENTITY:D});function Q(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r}function Y(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function C(r,e,o,n,u,c,s,d,f,i){return r[0]=e,r[1]=o,r[2]=n,r[3]=u,r[4]=c,r[5]=s,r[6]=d,r[7]=f,r[8]=i,r}function G(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function H(r,e){if(r===e){const o=e[1],n=e[2],u=e[5];r[1]=e[3],r[2]=e[6],r[3]=o,r[5]=e[7],r[6]=n,r[7]=u}else r[0]=e[0],r[1]=e[3],r[2]=e[6],r[3]=e[1],r[4]=e[4],r[5]=e[7],r[6]=e[2],r[7]=e[5],r[8]=e[8];return r}function J(r,e){const o=e[0],n=e[1],u=e[2],c=e[3],s=e[4],d=e[5],f=e[6],i=e[7],l=e[8],m=l*s-d*i,b=-l*c+d*f,h=i*c-s*f;let M=o*m+n*b+u*h;return M?(M=1/M,r[0]=m*M,r[1]=(-l*n+u*i)*M,r[2]=(d*n-u*s)*M,r[3]=b*M,r[4]=(l*o-u*f)*M,r[5]=(-d*o+u*c)*M,r[6]=h*M,r[7]=(-i*o+n*f)*M,r[8]=(s*o-n*c)*M,r):null}function K(r,e){const o=e[0],n=e[1],u=e[2],c=e[3],s=e[4],d=e[5],f=e[6],i=e[7],l=e[8];return r[0]=s*l-d*i,r[1]=u*i-n*l,r[2]=n*d-u*s,r[3]=d*f-c*l,r[4]=o*l-u*f,r[5]=u*c-o*d,r[6]=c*i-s*f,r[7]=n*f-o*i,r[8]=o*s-n*c,r}function P(r){const e=r[0],o=r[1],n=r[2],u=r[3],c=r[4],s=r[5],d=r[6],f=r[7],i=r[8];return e*(i*c-s*f)+o*(-i*u+s*d)+n*(f*u-c*d)}function k(r,e,o){const n=e[0],u=e[1],c=e[2],s=e[3],d=e[4],f=e[5],i=e[6],l=e[7],m=e[8],b=o[0],h=o[1],M=o[2],p=o[3],t=o[4],y=o[5],B=o[6],S=o[7],x=o[8];return r[0]=b*n+h*s+M*i,r[1]=b*u+h*d+M*l,r[2]=b*c+h*f+M*m,r[3]=p*n+t*s+y*i,r[4]=p*u+t*d+y*l,r[5]=p*c+t*f+y*m,r[6]=B*n+S*s+x*i,r[7]=B*u+S*d+x*l,r[8]=B*c+S*f+x*m,r}function U(r,e,o){const n=e[0],u=e[1],c=e[2],s=e[3],d=e[4],f=e[5],i=e[6],l=e[7],m=e[8],b=o[0],h=o[1];return r[0]=n,r[1]=u,r[2]=c,r[3]=s,r[4]=d,r[5]=f,r[6]=b*n+h*s+i,r[7]=b*u+h*d+l,r[8]=b*c+h*f+m,r}function W(r,e,o){const n=e[0],u=e[1],c=e[2],s=e[3],d=e[4],f=e[5],i=e[6],l=e[7],m=e[8],b=Math.sin(o),h=Math.cos(o);return r[0]=h*n+b*s,r[1]=h*u+b*d,r[2]=h*c+b*f,r[3]=h*s-b*n,r[4]=h*d-b*u,r[5]=h*f-b*c,r[6]=i,r[7]=l,r[8]=m,r}function X(r,e,o){const n=o[0],u=o[1],c=o[2];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=u*e[3],r[4]=u*e[4],r[5]=u*e[5],r[6]=c*e[6],r[7]=c*e[7],r[8]=c*e[8],r}function Z(r,e,o){const n=o[0],u=o[1];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=u*e[3],r[4]=u*e[4],r[5]=u*e[5],r}function a(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=e[0],r[7]=e[1],r[8]=1,r}function rr(r,e){const o=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=o,r[2]=0,r[3]=-o,r[4]=n,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function er(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=e[1],r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function or(r,e){return r[0]=e[0],r[1]=e[1],r[2]=0,r[3]=e[2],r[4]=e[3],r[5]=0,r[6]=e[4],r[7]=e[5],r[8]=1,r}function nr(r,e){const o=e[0],n=e[1],u=e[2],c=e[3],s=o+o,d=n+n,f=u+u,i=o*s,l=n*s,m=n*d,b=u*s,h=u*d,M=u*f,p=c*s,t=c*d,y=c*f;return r[0]=1-m-M,r[3]=l-y,r[6]=b+t,r[1]=l+y,r[4]=1-i-M,r[7]=h-p,r[2]=b-t,r[5]=h+p,r[8]=1-i-m,r}function ur(r,e){const o=e[0],n=e[1],u=e[2],c=e[4],s=e[5],d=e[6],f=e[8],i=e[9],l=e[10],m=l*s-d*i,b=-l*c+d*f,h=i*c-s*f,M=o*m+n*b+u*h;if(!M)return null;const p=1/M;return r[0]=m*p,r[1]=(-l*n+u*i)*p,r[2]=(d*n-u*s)*p,r[3]=b*p,r[4]=(l*o-u*f)*p,r[5]=(-d*o+u*c)*p,r[6]=h*p,r[7]=(-i*o+n*f)*p,r[8]=(s*o-n*c)*p,r}function fr(r,e){const o=e[0],n=e[1],u=e[2],c=e[3],s=e[4],d=e[5],f=e[6],i=e[7],l=e[8],m=e[9],b=e[10],h=e[11],M=e[12],p=e[13],t=e[14],y=e[15],B=o*d-n*s,S=o*f-u*s,x=o*i-c*s,v=n*f-u*d,$=n*i-c*d,g=u*i-c*f,z=l*p-m*M,I=l*t-b*M,q=l*y-h*M,F=m*t-b*p,O=m*y-h*p,A=b*y-h*t;let _=B*A-S*O+x*F+v*q-$*I+g*z;return _?(_=1/_,r[0]=(d*A-f*O+i*F)*_,r[1]=(f*q-s*A-i*I)*_,r[2]=(s*O-d*q+i*z)*_,r[3]=(u*O-n*A-c*F)*_,r[4]=(o*A-u*q+c*I)*_,r[5]=(n*q-o*O-c*z)*_,r[6]=(p*g-t*$+y*v)*_,r[7]=(t*x-M*g-y*S)*_,r[8]=(M*$-p*x+y*B)*_,r):null}function cr(r,e,o){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/o,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}function sr(r){return"mat3("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+")"}function ir(r){return Math.sqrt(r[0]**2+r[1]**2+r[2]**2+r[3]**2+r[4]**2+r[5]**2+r[6]**2+r[7]**2+r[8]**2)}function dr(r,e,o){return r[0]=e[0]+o[0],r[1]=e[1]+o[1],r[2]=e[2]+o[2],r[3]=e[3]+o[3],r[4]=e[4]+o[4],r[5]=e[5]+o[5],r[6]=e[6]+o[6],r[7]=e[7]+o[7],r[8]=e[8]+o[8],r}function w(r,e,o){return r[0]=e[0]-o[0],r[1]=e[1]-o[1],r[2]=e[2]-o[2],r[3]=e[3]-o[3],r[4]=e[4]-o[4],r[5]=e[5]-o[5],r[6]=e[6]-o[6],r[7]=e[7]-o[7],r[8]=e[8]-o[8],r}function lr(r,e,o){return r[0]=e[0]*o,r[1]=e[1]*o,r[2]=e[2]*o,r[3]=e[3]*o,r[4]=e[4]*o,r[5]=e[5]*o,r[6]=e[6]*o,r[7]=e[7]*o,r[8]=e[8]*o,r}function hr(r,e,o,n){return r[0]=e[0]+o[0]*n,r[1]=e[1]+o[1]*n,r[2]=e[2]+o[2]*n,r[3]=e[3]+o[3]*n,r[4]=e[4]+o[4]*n,r[5]=e[5]+o[5]*n,r[6]=e[6]+o[6]*n,r[7]=e[7]+o[7]*n,r[8]=e[8]+o[8]*n,r}function Mr(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]}function br(r,e){const o=r[0],n=r[1],u=r[2],c=r[3],s=r[4],d=r[5],f=r[6],i=r[7],l=r[8],m=e[0],b=e[1],h=e[2],M=e[3],p=e[4],t=e[5],y=e[6],B=e[7],S=e[8];return Math.abs(o-m)<=j*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(n-b)<=j*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(u-h)<=j*Math.max(1,Math.abs(u),Math.abs(h))&&Math.abs(c-M)<=j*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(s-p)<=j*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(d-t)<=j*Math.max(1,Math.abs(d),Math.abs(t))&&Math.abs(f-y)<=j*Math.max(1,Math.abs(f),Math.abs(y))&&Math.abs(i-B)<=j*Math.max(1,Math.abs(i),Math.abs(B))&&Math.abs(l-S)<=j*Math.max(1,Math.abs(l),Math.abs(S))}function mr(r){const e=j,o=r[0],n=r[1],u=r[2],c=r[3],s=r[4],d=r[5],f=r[6],i=r[7],l=r[8];return Math.abs(1-(o*o+c*c+f*f))<=e&&Math.abs(1-(n*n+s*s+i*i))<=e&&Math.abs(1-(u*u+d*d+l*l))<=e}const pr=k,yr=w;Object.freeze({__proto__:null,fromMat4:Q,copy:Y,set:C,identity:G,transpose:H,invert:J,adjoint:K,determinant:P,multiply:k,translate:U,rotate:W,scale:X,scaleByVec2:Z,fromTranslation:a,fromRotation:rr,fromScaling:er,fromMat2d:or,fromQuat:nr,normalFromMat4Legacy:ur,normalFromMat4:fr,projection:cr,str:sr,frob:ir,add:dr,subtract:w,multiplyScalar:lr,multiplyScalarAndAdd:hr,exactEquals:Mr,equals:br,isOrthoNormal:mr,mul:pr,sub:yr});const T=V.getLogger("esri.views.3d.support.buffer.math");function tr(r,e,o){if(r.count!==e.count)return void T.error("source and destination buffers need to have the same number of elements");const n=r.count,u=o[0],c=o[1],s=o[2],d=o[4],f=o[5],i=o[6],l=o[8],m=o[9],b=o[10],h=o[12],M=o[13],p=o[14],t=r.typedBuffer,y=r.typedBufferStride,B=e.typedBuffer,S=e.typedBufferStride;for(let x=0;x<n;x++){const v=x*y,$=x*S,g=B[$],z=B[$+1],I=B[$+2];t[v]=u*g+d*z+l*I+h,t[v+1]=c*g+f*z+m*I+M,t[v+2]=s*g+i*z+b*I+p}}function Br(r,e,o){if(r.count!==e.count)return void T.error("source and destination buffers need to have the same number of elements");const n=r.count,u=o[0],c=o[1],s=o[2],d=o[3],f=o[4],i=o[5],l=o[6],m=o[7],b=o[8],h=r.typedBuffer,M=r.typedBufferStride,p=e.typedBuffer,t=e.typedBufferStride;for(let y=0;y<n;y++){const B=y*M,S=y*t,x=p[S],v=p[S+1],$=p[S+2];h[B]=u*x+d*v+l*$,h[B+1]=c*x+f*v+m*$,h[B+2]=s*x+i*v+b*$}}function xr(r,e,o){const n=Math.min(r.count,e.count),u=r.typedBuffer,c=r.typedBufferStride,s=e.typedBuffer,d=e.typedBufferStride;for(let f=0;f<n;f++){const i=f*c,l=f*d;u[i]=o*s[l],u[i+1]=o*s[l+1],u[i+2]=o*s[l+2]}}function Sr(r,e){const o=Math.min(r.count,e.count),n=r.typedBuffer,u=r.typedBufferStride,c=e.typedBuffer,s=e.typedBufferStride;for(let d=0;d<o;d++){const f=d*u,i=d*s,l=c[i],m=c[i+1],b=c[i+2],h=Math.sqrt(l*l+m*m+b*b);if(h>0){const M=1/h;n[f]=M*l,n[f+1]=M*m,n[f+2]=M*b}}}function _r(r,e,o){const n=Math.min(r.count,e.count),u=r.typedBuffer,c=r.typedBufferStride,s=e.typedBuffer,d=e.typedBufferStride;for(let f=0;f<n;f++){const i=f*c,l=f*d;u[i]=s[l]>>o,u[i+1]=s[l+1]>>o,u[i+2]=s[l+2]>>o}}Object.freeze({__proto__:null,transformMat4:tr,transformMat3:Br,scale:xr,normalize:Sr,shiftRight:_r});function $r(r,e,o){const n=r.typedBuffer,u=r.typedBufferStride,c=e.typedBuffer,s=e.typedBufferStride,d=o?o.count:e.count;let f=(o&&o.dstIndex?o.dstIndex:0)*u,i=(o&&o.srcIndex?o.srcIndex:0)*s;for(let l=0;l<d;++l)n[f]=c[i],n[f+1]=c[i+1],n[f+2]=c[i+2],f+=u,i+=s}function vr(r,e,o,n,u){var c,s;const d=r.typedBuffer,f=r.typedBufferStride,i=(c=u==null?void 0:u.count)!=null?c:r.count;let l=((s=u==null?void 0:u.dstIndex)!=null?s:0)*f;for(let m=0;m<i;++m)d[l]=e,d[l+1]=o,d[l+2]=n,l+=f}Object.freeze({__proto__:null,copy:$r,fill:vr});export{mr as B,tr as a,D as b,$r as c,Q as d,E as e,Br as f,Sr as g,T as h,L as i,fr as j,R as k,_r as n,H as o,xr as r,vr as t};
