var FO=Object.defineProperty,kO=Object.defineProperties;var NO=Object.getOwnPropertyDescriptors;var Dc=Object.getOwnPropertySymbols;var lb=Object.prototype.hasOwnProperty,ab=Object.prototype.propertyIsEnumerable;var nb=(e,t,r)=>t in e?FO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,I=(e,t)=>{for(var r in t||(t={}))lb.call(t,r)&&nb(e,r,t[r]);if(Dc)for(var r of Dc(t))ab.call(t,r)&&nb(e,r,t[r]);return e},pe=(e,t)=>kO(e,NO(t));var ub=(e,t)=>{var r={};for(var s in e)lb.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&Dc)for(var s of Dc(e))t.indexOf(s)<0&&ab.call(e,s)&&(r[s]=e[s]);return r};const PO=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}};PO();function r1(e,t){const r=Object.create(null),s=e.split(",");for(let i=0;i<s.length;i++)r[s[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const LO="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",DO=r1(LO);function FS(e){return!!e||e===""}function s1(e){if(we(e)){const t={};for(let r=0;r<e.length;r++){const s=e[r],i=Rt(s)?UO(s):s1(s);if(i)for(const o in i)t[o]=i[o]}return t}else{if(Rt(e))return e;if(xt(e))return e}}const zO=/;(?![^(]*\))/g,VO=/:(.+)/;function UO(e){const t={};return e.split(zO).forEach(r=>{if(r){const s=r.split(VO);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function _h(e){let t="";if(Rt(e))t=e;else if(we(e))for(let r=0;r<e.length;r++){const s=_h(e[r]);s&&(t+=s+" ")}else if(xt(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function qO(e,t){if(e.length!==t.length)return!1;let r=!0;for(let s=0;r&&s<e.length;s++)r=jd(e[s],t[s]);return r}function jd(e,t){if(e===t)return!0;let r=cb(e),s=cb(t);if(r||s)return r&&s?e.getTime()===t.getTime():!1;if(r=we(e),s=we(t),r||s)return r&&s?qO(e,t):!1;if(r=xt(e),s=xt(t),r||s){if(!r||!s)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const l in e){const u=e.hasOwnProperty(l),p=t.hasOwnProperty(l);if(u&&!p||!u&&p||!jd(e[l],t[l]))return!1}}return String(e)===String(t)}const uo=e=>Rt(e)?e:e==null?"":we(e)||xt(e)&&(e.toString===LS||!Te(e.toString))?JSON.stringify(e,kS,2):String(e),kS=(e,t)=>t&&t.__v_isRef?kS(e,t.value):El(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[s,i])=>(r[`${s} =>`]=i,r),{})}:NS(t)?{[`Set(${t.size})`]:[...t.values()]}:xt(t)&&!we(t)&&!DS(t)?String(t):t,He={},Ol=[],ds=()=>{},BO=()=>!1,GO=/^on[^a-z]/,xh=e=>GO.test(e),i1=e=>e.startsWith("onUpdate:"),Xt=Object.assign,o1=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},JO=Object.prototype.hasOwnProperty,Ne=(e,t)=>JO.call(e,t),we=Array.isArray,El=e=>$h(e)==="[object Map]",NS=e=>$h(e)==="[object Set]",cb=e=>e instanceof Date,Te=e=>typeof e=="function",Rt=e=>typeof e=="string",n1=e=>typeof e=="symbol",xt=e=>e!==null&&typeof e=="object",PS=e=>xt(e)&&Te(e.then)&&Te(e.catch),LS=Object.prototype.toString,$h=e=>LS.call(e),WO=e=>$h(e).slice(8,-1),DS=e=>$h(e)==="[object Object]",l1=e=>Rt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Op=r1(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Mh=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},HO=/-(\w)/g,Ll=Mh(e=>e.replace(HO,(t,r)=>r?r.toUpperCase():"")),KO=/\B([A-Z])/g,Ql=Mh(e=>e.replace(KO,"-$1").toLowerCase()),zS=Mh(e=>e.charAt(0).toUpperCase()+e.slice(1)),xf=Mh(e=>e?`on${zS(e)}`:""),Pu=(e,t)=>!Object.is(e,t),Ep=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},Ad=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},yy=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let pb;const QO=()=>pb||(pb=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Zs;class ZO{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Zs&&(this.parent=Zs,this.index=(Zs.scopes||(Zs.scopes=[])).push(this)-1)}run(t){if(this.active)try{return Zs=this,t()}finally{Zs=this.parent}}on(){Zs=this}off(){Zs=this.parent}stop(t){if(this.active){let r,s;for(r=0,s=this.effects.length;r<s;r++)this.effects[r].stop();for(r=0,s=this.cleanups.length;r<s;r++)this.cleanups[r]();if(this.scopes)for(r=0,s=this.scopes.length;r<s;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function YO(e,t=Zs){t&&t.active&&t.effects.push(e)}const a1=e=>{const t=new Set(e);return t.w=0,t.n=0,t},VS=e=>(e.w&bo)>0,US=e=>(e.n&bo)>0,XO=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=bo},e5=e=>{const{deps:t}=e;if(t.length){let r=0;for(let s=0;s<t.length;s++){const i=t[s];VS(i)&&!US(i)?i.delete(e):t[r++]=i,i.w&=~bo,i.n&=~bo}t.length=r}},my=new WeakMap;let Ca=0,bo=1;const gy=30;let Ls;const wn=Symbol(""),vy=Symbol("");class u1{constructor(t,r=null,s){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,YO(this,s)}run(){if(!this.active)return this.fn();let t=Ls,r=mo;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Ls,Ls=this,mo=!0,bo=1<<++Ca,Ca<=gy?XO(this):db(this),this.fn()}finally{Ca<=gy&&e5(this),bo=1<<--Ca,Ls=this.parent,mo=r,this.parent=void 0}}stop(){this.active&&(db(this),this.onStop&&this.onStop(),this.active=!1)}}function db(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let mo=!0;const qS=[];function Zl(){qS.push(mo),mo=!1}function Yl(){const e=qS.pop();mo=e===void 0?!0:e}function wr(e,t,r){if(mo&&Ls){let s=my.get(e);s||my.set(e,s=new Map);let i=s.get(r);i||s.set(r,i=a1()),BS(i)}}function BS(e,t){let r=!1;Ca<=gy?US(e)||(e.n|=bo,r=!VS(e)):r=!e.has(Ls),r&&(e.add(Ls),Ls.deps.push(e))}function wi(e,t,r,s,i,o){const l=my.get(e);if(!l)return;let u=[];if(t==="clear")u=[...l.values()];else if(r==="length"&&we(e))l.forEach((p,d)=>{(d==="length"||d>=s)&&u.push(p)});else switch(r!==void 0&&u.push(l.get(r)),t){case"add":we(e)?l1(r)&&u.push(l.get("length")):(u.push(l.get(wn)),El(e)&&u.push(l.get(vy)));break;case"delete":we(e)||(u.push(l.get(wn)),El(e)&&u.push(l.get(vy)));break;case"set":El(e)&&u.push(l.get(wn));break}if(u.length===1)u[0]&&by(u[0]);else{const p=[];for(const d of u)d&&p.push(...d);by(a1(p))}}function by(e,t){for(const r of we(e)?e:[...e])(r!==Ls||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const t5=r1("__proto__,__v_isRef,__isVue"),GS=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(n1)),r5=c1(),s5=c1(!1,!0),i5=c1(!0),hb=o5();function o5(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const s=qe(this);for(let o=0,l=this.length;o<l;o++)wr(s,"get",o+"");const i=s[t](...r);return i===-1||i===!1?s[t](...r.map(qe)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){Zl();const s=qe(this)[t].apply(this,r);return Yl(),s}}),e}function c1(e=!1,t=!1){return function(s,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?S5:QS:t?KS:HS).get(s))return s;const l=we(s);if(!e&&l&&Ne(hb,i))return Reflect.get(hb,i,o);const u=Reflect.get(s,i,o);return(n1(i)?GS.has(i):t5(i))||(e||wr(s,"get",i),t)?u:Ct(u)?!l||!l1(i)?u.value:u:xt(u)?e?ZS(u):_i(u):u}}const n5=JS(),l5=JS(!0);function JS(e=!1){return function(r,s,i,o){let l=r[s];if(Lu(l)&&Ct(l)&&!Ct(i))return!1;if(!e&&!Lu(i)&&(YS(i)||(i=qe(i),l=qe(l)),!we(r)&&Ct(l)&&!Ct(i)))return l.value=i,!0;const u=we(r)&&l1(s)?Number(s)<r.length:Ne(r,s),p=Reflect.set(r,s,i,o);return r===qe(o)&&(u?Pu(i,l)&&wi(r,"set",s,i):wi(r,"add",s,i)),p}}function a5(e,t){const r=Ne(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&r&&wi(e,"delete",t,void 0),s}function u5(e,t){const r=Reflect.has(e,t);return(!n1(t)||!GS.has(t))&&wr(e,"has",t),r}function c5(e){return wr(e,"iterate",we(e)?"length":wn),Reflect.ownKeys(e)}const WS={get:r5,set:n5,deleteProperty:a5,has:u5,ownKeys:c5},p5={get:i5,set(e,t){return!0},deleteProperty(e,t){return!0}},d5=Xt({},WS,{get:s5,set:l5}),p1=e=>e,Ih=e=>Reflect.getPrototypeOf(e);function zc(e,t,r=!1,s=!1){e=e.__v_raw;const i=qe(e),o=qe(t);t!==o&&!r&&wr(i,"get",t),!r&&wr(i,"get",o);const{has:l}=Ih(i),u=s?p1:r?f1:Du;if(l.call(i,t))return u(e.get(t));if(l.call(i,o))return u(e.get(o));e!==i&&e.get(t)}function Vc(e,t=!1){const r=this.__v_raw,s=qe(r),i=qe(e);return e!==i&&!t&&wr(s,"has",e),!t&&wr(s,"has",i),e===i?r.has(e):r.has(e)||r.has(i)}function Uc(e,t=!1){return e=e.__v_raw,!t&&wr(qe(e),"iterate",wn),Reflect.get(e,"size",e)}function fb(e){e=qe(e);const t=qe(this);return Ih(t).has.call(t,e)||(t.add(e),wi(t,"add",e,e)),this}function yb(e,t){t=qe(t);const r=qe(this),{has:s,get:i}=Ih(r);let o=s.call(r,e);o||(e=qe(e),o=s.call(r,e));const l=i.call(r,e);return r.set(e,t),o?Pu(t,l)&&wi(r,"set",e,t):wi(r,"add",e,t),this}function mb(e){const t=qe(this),{has:r,get:s}=Ih(t);let i=r.call(t,e);i||(e=qe(e),i=r.call(t,e)),s&&s.call(t,e);const o=t.delete(e);return i&&wi(t,"delete",e,void 0),o}function gb(){const e=qe(this),t=e.size!==0,r=e.clear();return t&&wi(e,"clear",void 0,void 0),r}function qc(e,t){return function(s,i){const o=this,l=o.__v_raw,u=qe(l),p=t?p1:e?f1:Du;return!e&&wr(u,"iterate",wn),l.forEach((d,h)=>s.call(i,p(d),p(h),o))}}function Bc(e,t,r){return function(...s){const i=this.__v_raw,o=qe(i),l=El(o),u=e==="entries"||e===Symbol.iterator&&l,p=e==="keys"&&l,d=i[e](...s),h=r?p1:t?f1:Du;return!t&&wr(o,"iterate",p?vy:wn),{next(){const{value:f,done:y}=d.next();return y?{value:f,done:y}:{value:u?[h(f[0]),h(f[1])]:h(f),done:y}},[Symbol.iterator](){return this}}}}function Ci(e){return function(...t){return e==="delete"?!1:this}}function h5(){const e={get(o){return zc(this,o)},get size(){return Uc(this)},has:Vc,add:fb,set:yb,delete:mb,clear:gb,forEach:qc(!1,!1)},t={get(o){return zc(this,o,!1,!0)},get size(){return Uc(this)},has:Vc,add:fb,set:yb,delete:mb,clear:gb,forEach:qc(!1,!0)},r={get(o){return zc(this,o,!0)},get size(){return Uc(this,!0)},has(o){return Vc.call(this,o,!0)},add:Ci("add"),set:Ci("set"),delete:Ci("delete"),clear:Ci("clear"),forEach:qc(!0,!1)},s={get(o){return zc(this,o,!0,!0)},get size(){return Uc(this,!0)},has(o){return Vc.call(this,o,!0)},add:Ci("add"),set:Ci("set"),delete:Ci("delete"),clear:Ci("clear"),forEach:qc(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=Bc(o,!1,!1),r[o]=Bc(o,!0,!1),t[o]=Bc(o,!1,!0),s[o]=Bc(o,!0,!0)}),[e,r,t,s]}const[f5,y5,m5,g5]=h5();function d1(e,t){const r=t?e?g5:m5:e?y5:f5;return(s,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(Ne(r,i)&&i in s?r:s,i,o)}const v5={get:d1(!1,!1)},b5={get:d1(!1,!0)},w5={get:d1(!0,!1)},HS=new WeakMap,KS=new WeakMap,QS=new WeakMap,S5=new WeakMap;function _5(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function x5(e){return e.__v_skip||!Object.isExtensible(e)?0:_5(WO(e))}function _i(e){return Lu(e)?e:h1(e,!1,WS,v5,HS)}function $5(e){return h1(e,!1,d5,b5,KS)}function ZS(e){return h1(e,!0,p5,w5,QS)}function h1(e,t,r,s,i){if(!xt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const l=x5(e);if(l===0)return e;const u=new Proxy(e,l===2?s:r);return i.set(e,u),u}function Tl(e){return Lu(e)?Tl(e.__v_raw):!!(e&&e.__v_isReactive)}function Lu(e){return!!(e&&e.__v_isReadonly)}function YS(e){return!!(e&&e.__v_isShallow)}function XS(e){return Tl(e)||Lu(e)}function qe(e){const t=e&&e.__v_raw;return t?qe(t):e}function e_(e){return Ad(e,"__v_skip",!0),e}const Du=e=>xt(e)?_i(e):e,f1=e=>xt(e)?ZS(e):e;function t_(e){mo&&Ls&&(e=qe(e),BS(e.dep||(e.dep=a1())))}function r_(e,t){e=qe(e),e.dep&&by(e.dep)}function Ct(e){return!!(e&&e.__v_isRef===!0)}function M5(e){return I5(e,!1)}function I5(e,t){return Ct(e)?e:new O5(e,t)}class O5{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:qe(t),this._value=r?t:Du(t)}get value(){return t_(this),this._value}set value(t){t=this.__v_isShallow?t:qe(t),Pu(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Du(t),r_(this))}}function Xe(e){return Ct(e)?e.value:e}const E5={get:(e,t,r)=>Xe(Reflect.get(e,t,r)),set:(e,t,r,s)=>{const i=e[t];return Ct(i)&&!Ct(r)?(i.value=r,!0):Reflect.set(e,t,r,s)}};function s_(e){return Tl(e)?e:new Proxy(e,E5)}class T5{constructor(t,r,s,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new u1(t,()=>{this._dirty||(this._dirty=!0,r_(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=s}get value(){const t=qe(this);return t_(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function j5(e,t,r=!1){let s,i;const o=Te(e);return o?(s=e,i=ds):(s=e.get,i=e.set),new T5(s,i,o||!i,r)}Promise.resolve();function go(e,t,r,s){let i;try{i=s?e(...s):e()}catch(o){Oh(o,t,r)}return i}function hs(e,t,r,s){if(Te(e)){const o=go(e,t,r,s);return o&&PS(o)&&o.catch(l=>{Oh(l,t,r)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(hs(e[o],t,r,s));return i}function Oh(e,t,r,s=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const l=t.proxy,u=r;for(;o;){const d=o.ec;if(d){for(let h=0;h<d.length;h++)if(d[h](e,l,u)===!1)return}o=o.parent}const p=t.appContext.config.errorHandler;if(p){go(p,null,10,[e,l,u]);return}}A5(e,r,i,s)}function A5(e,t,r,s=!0){console.error(e)}let Cd=!1,wy=!1;const gr=[];let yi=0;const vu=[];let Ra=null,Gn=0;const bu=[];let Li=null,Jn=0;const i_=Promise.resolve();let y1=null,Sy=null;function C5(e){const t=y1||i_;return e?t.then(this?e.bind(this):e):t}function R5(e){let t=yi+1,r=gr.length;for(;t<r;){const s=t+r>>>1;zu(gr[s])<e?t=s+1:r=s}return t}function o_(e){(!gr.length||!gr.includes(e,Cd&&e.allowRecurse?yi+1:yi))&&e!==Sy&&(e.id==null?gr.push(e):gr.splice(R5(e.id),0,e),n_())}function n_(){!Cd&&!wy&&(wy=!0,y1=i_.then(u_))}function F5(e){const t=gr.indexOf(e);t>yi&&gr.splice(t,1)}function l_(e,t,r,s){we(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?s+1:s))&&r.push(e),n_()}function k5(e){l_(e,Ra,vu,Gn)}function N5(e){l_(e,Li,bu,Jn)}function m1(e,t=null){if(vu.length){for(Sy=t,Ra=[...new Set(vu)],vu.length=0,Gn=0;Gn<Ra.length;Gn++)Ra[Gn]();Ra=null,Gn=0,Sy=null,m1(e,t)}}function a_(e){if(bu.length){const t=[...new Set(bu)];if(bu.length=0,Li){Li.push(...t);return}for(Li=t,Li.sort((r,s)=>zu(r)-zu(s)),Jn=0;Jn<Li.length;Jn++)Li[Jn]();Li=null,Jn=0}}const zu=e=>e.id==null?1/0:e.id;function u_(e){wy=!1,Cd=!0,m1(e),gr.sort((r,s)=>zu(r)-zu(s));const t=ds;try{for(yi=0;yi<gr.length;yi++){const r=gr[yi];r&&r.active!==!1&&go(r,null,14)}}finally{yi=0,gr.length=0,a_(),Cd=!1,y1=null,(gr.length||vu.length||bu.length)&&u_(e)}}function P5(e,t,...r){const s=e.vnode.props||He;let i=r;const o=t.startsWith("update:"),l=o&&t.slice(7);if(l&&l in s){const h=`${l==="modelValue"?"model":l}Modifiers`,{number:f,trim:y}=s[h]||He;y?i=r.map(m=>m.trim()):f&&(i=r.map(yy))}let u,p=s[u=xf(t)]||s[u=xf(Ll(t))];!p&&o&&(p=s[u=xf(Ql(t))]),p&&hs(p,e,6,i);const d=s[u+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,hs(d,e,6,i)}}function c_(e,t,r=!1){const s=t.emitsCache,i=s.get(e);if(i!==void 0)return i;const o=e.emits;let l={},u=!1;if(!Te(e)){const p=d=>{const h=c_(d,t,!0);h&&(u=!0,Xt(l,h))};!r&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}return!o&&!u?(s.set(e,null),null):(we(o)?o.forEach(p=>l[p]=null):Xt(l,o),s.set(e,l),l)}function g1(e,t){return!e||!xh(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ne(e,t[0].toLowerCase()+t.slice(1))||Ne(e,Ql(t))||Ne(e,t))}let Ds=null,p_=null;function Rd(e){const t=Ds;return Ds=e,p_=e&&e.type.__scopeId||null,t}function L5(e,t=Ds,r){if(!t||e._n)return e;const s=(...i)=>{s._d&&Ib(-1);const o=Rd(t),l=e(...i);return Rd(o),s._d&&Ib(1),l};return s._n=!0,s._c=!0,s._d=!0,s}function $f(e){const{type:t,vnode:r,proxy:s,withProxy:i,props:o,propsOptions:[l],slots:u,attrs:p,emit:d,render:h,renderCache:f,data:y,setupState:m,ctx:v,inheritAttrs:_}=e;let S,M;const k=Rd(e);try{if(r.shapeFlag&4){const P=i||s;S=ks(h.call(P,P,f,o,m,y,v)),M=p}else{const P=t;S=ks(P.length>1?P(o,{attrs:p,slots:u,emit:d}):P(o,null)),M=t.props?p:D5(p)}}catch(P){Su.length=0,Oh(P,e,1),S=zs(In)}let D=S;if(M&&_!==!1){const P=Object.keys(M),{shapeFlag:N}=D;P.length&&N&7&&(l&&P.some(i1)&&(M=z5(M,l)),D=Vu(D,M))}return r.dirs&&(D.dirs=D.dirs?D.dirs.concat(r.dirs):r.dirs),r.transition&&(D.transition=r.transition),S=D,Rd(k),S}const D5=e=>{let t;for(const r in e)(r==="class"||r==="style"||xh(r))&&((t||(t={}))[r]=e[r]);return t},z5=(e,t)=>{const r={};for(const s in e)(!i1(s)||!(s.slice(9)in t))&&(r[s]=e[s]);return r};function V5(e,t,r){const{props:s,children:i,component:o}=e,{props:l,children:u,patchFlag:p}=t,d=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&p>=0){if(p&1024)return!0;if(p&16)return s?vb(s,l,d):!!l;if(p&8){const h=t.dynamicProps;for(let f=0;f<h.length;f++){const y=h[f];if(l[y]!==s[y]&&!g1(d,y))return!0}}}else return(i||u)&&(!u||!u.$stable)?!0:s===l?!1:s?l?vb(s,l,d):!0:!!l;return!1}function vb(e,t,r){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const o=s[i];if(t[o]!==e[o]&&!g1(r,o))return!0}return!1}function U5({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const q5=e=>e.__isSuspense;function B5(e,t){t&&t.pendingBranch?we(e)?t.effects.push(...e):t.effects.push(e):N5(e)}function G5(e,t){if(qt){let r=qt.provides;const s=qt.parent&&qt.parent.provides;s===r&&(r=qt.provides=Object.create(s)),r[e]=t}}function Mf(e,t,r=!1){const s=qt||Ds;if(s){const i=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&Te(t)?t.call(s.proxy):t}}const bb={};function jl(e,t,r){return d_(e,t,r)}function d_(e,t,{immediate:r,deep:s,flush:i,onTrack:o,onTrigger:l}=He){const u=qt;let p,d=!1,h=!1;if(Ct(e)?(p=()=>e.value,d=YS(e)):Tl(e)?(p=()=>e,s=!0):we(e)?(h=!0,d=e.some(Tl),p=()=>e.map(M=>{if(Ct(M))return M.value;if(Tl(M))return yn(M);if(Te(M))return go(M,u,2)})):Te(e)?t?p=()=>go(e,u,2):p=()=>{if(!(u&&u.isUnmounted))return f&&f(),hs(e,u,3,[y])}:p=ds,t&&s){const M=p;p=()=>yn(M())}let f,y=M=>{f=S.onStop=()=>{go(M,u,4)}};if(Uu)return y=ds,t?r&&hs(t,u,3,[p(),h?[]:void 0,y]):p(),ds;let m=h?[]:bb;const v=()=>{if(!!S.active)if(t){const M=S.run();(s||d||(h?M.some((k,D)=>Pu(k,m[D])):Pu(M,m)))&&(f&&f(),hs(t,u,3,[M,m===bb?void 0:m,y]),m=M)}else S.run()};v.allowRecurse=!!t;let _;i==="sync"?_=v:i==="post"?_=()=>or(v,u&&u.suspense):_=()=>{!u||u.isMounted?k5(v):v()};const S=new u1(p,_);return t?r?v():m=S.run():i==="post"?or(S.run.bind(S),u&&u.suspense):S.run(),()=>{S.stop(),u&&u.scope&&o1(u.scope.effects,S)}}function J5(e,t,r){const s=this.proxy,i=Rt(e)?e.includes(".")?h_(s,e):()=>s[e]:e.bind(s,s);let o;Te(t)?o=t:(o=t.handler,r=t);const l=qt;Dl(this);const u=d_(i,o.bind(s),r);return l?Dl(l):_n(),u}function h_(e,t){const r=t.split(".");return()=>{let s=e;for(let i=0;i<r.length&&s;i++)s=s[r[i]];return s}}function yn(e,t){if(!xt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Ct(e))yn(e.value,t);else if(we(e))for(let r=0;r<e.length;r++)yn(e[r],t);else if(NS(e)||El(e))e.forEach(r=>{yn(r,t)});else if(DS(e))for(const r in e)yn(e[r],t);return e}function f_(e){return Te(e)?{setup:e,name:e.name}:e}const _y=e=>!!e.type.__asyncLoader,y_=e=>e.type.__isKeepAlive;function W5(e,t){m_(e,"a",t)}function H5(e,t){m_(e,"da",t)}function m_(e,t,r=qt){const s=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Eh(t,s,r),r){let i=r.parent;for(;i&&i.parent;)y_(i.parent.vnode)&&K5(s,t,r,i),i=i.parent}}function K5(e,t,r,s){const i=Eh(t,e,s,!0);g_(()=>{o1(s[t],i)},r)}function Eh(e,t,r=qt,s=!1){if(r){const i=r[e]||(r[e]=[]),o=t.__weh||(t.__weh=(...l)=>{if(r.isUnmounted)return;Zl(),Dl(r);const u=hs(t,r,e,l);return _n(),Yl(),u});return s?i.unshift(o):i.push(o),o}}const xi=e=>(t,r=qt)=>(!Uu||e==="sp")&&Eh(e,t,r),Q5=xi("bm"),Z5=xi("m"),Y5=xi("bu"),X5=xi("u"),eE=xi("bum"),g_=xi("um"),tE=xi("sp"),rE=xi("rtg"),sE=xi("rtc");function iE(e,t=qt){Eh("ec",e,t)}let xy=!0;function oE(e){const t=b_(e),r=e.proxy,s=e.ctx;xy=!1,t.beforeCreate&&wb(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:l,watch:u,provide:p,inject:d,created:h,beforeMount:f,mounted:y,beforeUpdate:m,updated:v,activated:_,deactivated:S,beforeDestroy:M,beforeUnmount:k,destroyed:D,unmounted:P,render:N,renderTracked:J,renderTriggered:Se,errorCaptured:re,serverPrefetch:de,expose:ie,inheritAttrs:ge,components:Ie,directives:Re,filters:ce}=t;if(d&&nE(d,s,null,e.appContext.config.unwrapInjectedRef),l)for(const Oe in l){const De=l[Oe];Te(De)&&(s[Oe]=De.bind(r))}if(i){const Oe=i.call(r,r);xt(Oe)&&(e.data=_i(Oe))}if(xy=!0,o)for(const Oe in o){const De=o[Oe],tr=Te(De)?De.bind(r,r):Te(De.get)?De.get.bind(r,r):ds,ya=!Te(De)&&Te(De.set)?De.set.bind(r):ds,Ei=jh({get:tr,set:ya});Object.defineProperty(s,Oe,{enumerable:!0,configurable:!0,get:()=>Ei.value,set:Ti=>Ei.value=Ti})}if(u)for(const Oe in u)v_(u[Oe],s,r,Oe);if(p){const Oe=Te(p)?p.call(r):p;Reflect.ownKeys(Oe).forEach(De=>{G5(De,Oe[De])})}h&&wb(h,e,"c");function tt(Oe,De){we(De)?De.forEach(tr=>Oe(tr.bind(r))):De&&Oe(De.bind(r))}if(tt(Q5,f),tt(Z5,y),tt(Y5,m),tt(X5,v),tt(W5,_),tt(H5,S),tt(iE,re),tt(sE,J),tt(rE,Se),tt(eE,k),tt(g_,P),tt(tE,de),we(ie))if(ie.length){const Oe=e.exposed||(e.exposed={});ie.forEach(De=>{Object.defineProperty(Oe,De,{get:()=>r[De],set:tr=>r[De]=tr})})}else e.exposed||(e.exposed={});N&&e.render===ds&&(e.render=N),ge!=null&&(e.inheritAttrs=ge),Ie&&(e.components=Ie),Re&&(e.directives=Re)}function nE(e,t,r=ds,s=!1){we(e)&&(e=$y(e));for(const i in e){const o=e[i];let l;xt(o)?"default"in o?l=Mf(o.from||i,o.default,!0):l=Mf(o.from||i):l=Mf(o),Ct(l)&&s?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>l.value,set:u=>l.value=u}):t[i]=l}}function wb(e,t,r){hs(we(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,r)}function v_(e,t,r,s){const i=s.includes(".")?h_(r,s):()=>r[s];if(Rt(e)){const o=t[e];Te(o)&&jl(i,o)}else if(Te(e))jl(i,e.bind(r));else if(xt(e))if(we(e))e.forEach(o=>v_(o,t,r,s));else{const o=Te(e.handler)?e.handler.bind(r):t[e.handler];Te(o)&&jl(i,o,e)}}function b_(e){const t=e.type,{mixins:r,extends:s}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:l}}=e.appContext,u=o.get(t);let p;return u?p=u:!i.length&&!r&&!s?p=t:(p={},i.length&&i.forEach(d=>Fd(p,d,l,!0)),Fd(p,t,l)),o.set(t,p),p}function Fd(e,t,r,s=!1){const{mixins:i,extends:o}=t;o&&Fd(e,o,r,!0),i&&i.forEach(l=>Fd(e,l,r,!0));for(const l in t)if(!(s&&l==="expose")){const u=lE[l]||r&&r[l];e[l]=u?u(e[l],t[l]):t[l]}return e}const lE={data:Sb,props:ko,emits:ko,methods:ko,computed:ko,beforeCreate:Wt,created:Wt,beforeMount:Wt,mounted:Wt,beforeUpdate:Wt,updated:Wt,beforeDestroy:Wt,beforeUnmount:Wt,destroyed:Wt,unmounted:Wt,activated:Wt,deactivated:Wt,errorCaptured:Wt,serverPrefetch:Wt,components:ko,directives:ko,watch:uE,provide:Sb,inject:aE};function Sb(e,t){return t?e?function(){return Xt(Te(e)?e.call(this,this):e,Te(t)?t.call(this,this):t)}:t:e}function aE(e,t){return ko($y(e),$y(t))}function $y(e){if(we(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Wt(e,t){return e?[...new Set([].concat(e,t))]:t}function ko(e,t){return e?Xt(Xt(Object.create(null),e),t):t}function uE(e,t){if(!e)return t;if(!t)return e;const r=Xt(Object.create(null),e);for(const s in t)r[s]=Wt(e[s],t[s]);return r}function cE(e,t,r,s=!1){const i={},o={};Ad(o,Th,1),e.propsDefaults=Object.create(null),w_(e,t,i,o);for(const l in e.propsOptions[0])l in i||(i[l]=void 0);r?e.props=s?i:$5(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function pE(e,t,r,s){const{props:i,attrs:o,vnode:{patchFlag:l}}=e,u=qe(i),[p]=e.propsOptions;let d=!1;if((s||l>0)&&!(l&16)){if(l&8){const h=e.vnode.dynamicProps;for(let f=0;f<h.length;f++){let y=h[f];const m=t[y];if(p)if(Ne(o,y))m!==o[y]&&(o[y]=m,d=!0);else{const v=Ll(y);i[v]=My(p,u,v,m,e,!1)}else m!==o[y]&&(o[y]=m,d=!0)}}}else{w_(e,t,i,o)&&(d=!0);let h;for(const f in u)(!t||!Ne(t,f)&&((h=Ql(f))===f||!Ne(t,h)))&&(p?r&&(r[f]!==void 0||r[h]!==void 0)&&(i[f]=My(p,u,f,void 0,e,!0)):delete i[f]);if(o!==u)for(const f in o)(!t||!Ne(t,f)&&!0)&&(delete o[f],d=!0)}d&&wi(e,"set","$attrs")}function w_(e,t,r,s){const[i,o]=e.propsOptions;let l=!1,u;if(t)for(let p in t){if(Op(p))continue;const d=t[p];let h;i&&Ne(i,h=Ll(p))?!o||!o.includes(h)?r[h]=d:(u||(u={}))[h]=d:g1(e.emitsOptions,p)||(!(p in s)||d!==s[p])&&(s[p]=d,l=!0)}if(o){const p=qe(r),d=u||He;for(let h=0;h<o.length;h++){const f=o[h];r[f]=My(i,p,f,d[f],e,!Ne(d,f))}}return l}function My(e,t,r,s,i,o){const l=e[r];if(l!=null){const u=Ne(l,"default");if(u&&s===void 0){const p=l.default;if(l.type!==Function&&Te(p)){const{propsDefaults:d}=i;r in d?s=d[r]:(Dl(i),s=d[r]=p.call(null,t),_n())}else s=p}l[0]&&(o&&!u?s=!1:l[1]&&(s===""||s===Ql(r))&&(s=!0))}return s}function S_(e,t,r=!1){const s=t.propsCache,i=s.get(e);if(i)return i;const o=e.props,l={},u=[];let p=!1;if(!Te(e)){const h=f=>{p=!0;const[y,m]=S_(f,t,!0);Xt(l,y),m&&u.push(...m)};!r&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!o&&!p)return s.set(e,Ol),Ol;if(we(o))for(let h=0;h<o.length;h++){const f=Ll(o[h]);_b(f)&&(l[f]=He)}else if(o)for(const h in o){const f=Ll(h);if(_b(f)){const y=o[h],m=l[f]=we(y)||Te(y)?{type:y}:y;if(m){const v=Mb(Boolean,m.type),_=Mb(String,m.type);m[0]=v>-1,m[1]=_<0||v<_,(v>-1||Ne(m,"default"))&&u.push(f)}}}const d=[l,u];return s.set(e,d),d}function _b(e){return e[0]!=="$"}function xb(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function $b(e,t){return xb(e)===xb(t)}function Mb(e,t){return we(t)?t.findIndex(r=>$b(r,e)):Te(t)&&$b(t,e)?0:-1}const __=e=>e[0]==="_"||e==="$stable",v1=e=>we(e)?e.map(ks):[ks(e)],dE=(e,t,r)=>{const s=L5((...i)=>v1(t(...i)),r);return s._c=!1,s},x_=(e,t,r)=>{const s=e._ctx;for(const i in e){if(__(i))continue;const o=e[i];if(Te(o))t[i]=dE(i,o,s);else if(o!=null){const l=v1(o);t[i]=()=>l}}},$_=(e,t)=>{const r=v1(t);e.slots.default=()=>r},hE=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=qe(t),Ad(t,"_",r)):x_(t,e.slots={})}else e.slots={},t&&$_(e,t);Ad(e.slots,Th,1)},fE=(e,t,r)=>{const{vnode:s,slots:i}=e;let o=!0,l=He;if(s.shapeFlag&32){const u=t._;u?r&&u===1?o=!1:(Xt(i,t),!r&&u===1&&delete i._):(o=!t.$stable,x_(t,i)),l=t}else t&&($_(e,t),l={default:1});if(o)for(const u in i)!__(u)&&!(u in l)&&delete i[u]};function wu(e,t){const r=Ds;if(r===null)return e;const s=r.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[l,u,p,d=He]=t[o];Te(l)&&(l={mounted:l,updated:l}),l.deep&&yn(u),i.push({dir:l,instance:s,value:u,oldValue:void 0,arg:p,modifiers:d})}return e}function Ao(e,t,r,s){const i=e.dirs,o=t&&t.dirs;for(let l=0;l<i.length;l++){const u=i[l];o&&(u.oldValue=o[l].value);let p=u.dir[s];p&&(Zl(),hs(p,r,8,[e.el,u,e,t]),Yl())}}function M_(){return{app:null,config:{isNativeTag:BO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yE=0;function mE(e,t){return function(s,i=null){i!=null&&!xt(i)&&(i=null);const o=M_(),l=new Set;let u=!1;const p=o.app={_uid:yE++,_component:s,_props:i,_container:null,_context:o,_instance:null,version:DE,get config(){return o.config},set config(d){},use(d,...h){return l.has(d)||(d&&Te(d.install)?(l.add(d),d.install(p,...h)):Te(d)&&(l.add(d),d(p,...h))),p},mixin(d){return o.mixins.includes(d)||o.mixins.push(d),p},component(d,h){return h?(o.components[d]=h,p):o.components[d]},directive(d,h){return h?(o.directives[d]=h,p):o.directives[d]},mount(d,h,f){if(!u){const y=zs(s,i);return y.appContext=o,h&&t?t(y,d):e(y,d,f),u=!0,p._container=d,d.__vue_app__=p,S1(y.component)||y.component.proxy}},unmount(){u&&(e(null,p._container),delete p._container.__vue_app__)},provide(d,h){return o.provides[d]=h,p}};return p}}function Iy(e,t,r,s,i=!1){if(we(e)){e.forEach((y,m)=>Iy(y,t&&(we(t)?t[m]:t),r,s,i));return}if(_y(s)&&!i)return;const o=s.shapeFlag&4?S1(s.component)||s.component.proxy:s.el,l=i?null:o,{i:u,r:p}=e,d=t&&t.r,h=u.refs===He?u.refs={}:u.refs,f=u.setupState;if(d!=null&&d!==p&&(Rt(d)?(h[d]=null,Ne(f,d)&&(f[d]=null)):Ct(d)&&(d.value=null)),Te(p))go(p,u,12,[l,h]);else{const y=Rt(p),m=Ct(p);if(y||m){const v=()=>{if(e.f){const _=y?h[p]:p.value;i?we(_)&&o1(_,o):we(_)?_.includes(o)||_.push(o):y?h[p]=[o]:(p.value=[o],e.k&&(h[e.k]=p.value))}else y?(h[p]=l,Ne(f,p)&&(f[p]=l)):Ct(p)&&(p.value=l,e.k&&(h[e.k]=l))};l?(v.id=-1,or(v,r)):v()}}}const or=B5;function gE(e){return vE(e)}function vE(e,t){const r=QO();r.__VUE__=!0;const{insert:s,remove:i,patchProp:o,createElement:l,createText:u,createComment:p,setText:d,setElementText:h,parentNode:f,nextSibling:y,setScopeId:m=ds,cloneNode:v,insertStaticContent:_}=e,S=(x,$,A,z=null,L=null,W=null,Q=!1,G=null,H=!!$.dynamicChildren)=>{if(x===$)return;x&&!ba(x,$)&&(z=qn(x),Vr(x,L,W,!0),x=null),$.patchFlag===-2&&(H=!1,$.dynamicChildren=null);const{type:q,ref:ne,shapeFlag:ee}=$;switch(q){case b1:M(x,$,A,z);break;case In:k(x,$,A,z);break;case If:x==null&&D($,A,z,Q);break;case lr:Re(x,$,A,z,L,W,Q,G,H);break;default:ee&1?J(x,$,A,z,L,W,Q,G,H):ee&6?ce(x,$,A,z,L,W,Q,G,H):(ee&64||ee&128)&&q.process(x,$,A,z,L,W,Q,G,H,ji)}ne!=null&&L&&Iy(ne,x&&x.ref,W,$||x,!$)},M=(x,$,A,z)=>{if(x==null)s($.el=u($.children),A,z);else{const L=$.el=x.el;$.children!==x.children&&d(L,$.children)}},k=(x,$,A,z)=>{x==null?s($.el=p($.children||""),A,z):$.el=x.el},D=(x,$,A,z)=>{[x.el,x.anchor]=_(x.children,$,A,z,x.el,x.anchor)},P=({el:x,anchor:$},A,z)=>{let L;for(;x&&x!==$;)L=y(x),s(x,A,z),x=L;s($,A,z)},N=({el:x,anchor:$})=>{let A;for(;x&&x!==$;)A=y(x),i(x),x=A;i($)},J=(x,$,A,z,L,W,Q,G,H)=>{Q=Q||$.type==="svg",x==null?Se($,A,z,L,W,Q,G,H):ie(x,$,L,W,Q,G,H)},Se=(x,$,A,z,L,W,Q,G)=>{let H,q;const{type:ne,props:ee,shapeFlag:oe,transition:he,patchFlag:xe,dirs:Qe}=x;if(x.el&&v!==void 0&&xe===-1)H=x.el=v(x.el);else{if(H=x.el=l(x.type,W,ee&&ee.is,ee),oe&8?h(H,x.children):oe&16&&de(x.children,H,null,z,L,W&&ne!=="foreignObject",Q,G),Qe&&Ao(x,null,z,"created"),ee){for(const We in ee)We!=="value"&&!Op(We)&&o(H,We,null,ee[We],W,x.children,z,L,$r);"value"in ee&&o(H,"value",null,ee.value),(q=ee.onVnodeBeforeMount)&&gs(q,z,x)}re(H,x,x.scopeId,Q,z)}Qe&&Ao(x,null,z,"beforeMount");const Be=(!L||L&&!L.pendingBranch)&&he&&!he.persisted;Be&&he.beforeEnter(H),s(H,$,A),((q=ee&&ee.onVnodeMounted)||Be||Qe)&&or(()=>{q&&gs(q,z,x),Be&&he.enter(H),Qe&&Ao(x,null,z,"mounted")},L)},re=(x,$,A,z,L)=>{if(A&&m(x,A),z)for(let W=0;W<z.length;W++)m(x,z[W]);if(L){let W=L.subTree;if($===W){const Q=L.vnode;re(x,Q,Q.scopeId,Q.slotScopeIds,L.parent)}}},de=(x,$,A,z,L,W,Q,G,H=0)=>{for(let q=H;q<x.length;q++){const ne=x[q]=G?oo(x[q]):ks(x[q]);S(null,ne,$,A,z,L,W,Q,G)}},ie=(x,$,A,z,L,W,Q)=>{const G=$.el=x.el;let{patchFlag:H,dynamicChildren:q,dirs:ne}=$;H|=x.patchFlag&16;const ee=x.props||He,oe=$.props||He;let he;A&&Co(A,!1),(he=oe.onVnodeBeforeUpdate)&&gs(he,A,$,x),ne&&Ao($,x,A,"beforeUpdate"),A&&Co(A,!0);const xe=L&&$.type!=="foreignObject";if(q?ge(x.dynamicChildren,q,G,A,z,xe,W):Q||tr(x,$,G,null,A,z,xe,W,!1),H>0){if(H&16)Ie(G,$,ee,oe,A,z,L);else if(H&2&&ee.class!==oe.class&&o(G,"class",null,oe.class,L),H&4&&o(G,"style",ee.style,oe.style,L),H&8){const Qe=$.dynamicProps;for(let Be=0;Be<Qe.length;Be++){const We=Qe[Be],pr=ee[We],Ai=oe[We];(Ai!==pr||We==="value")&&o(G,We,pr,Ai,L,x.children,A,z,$r)}}H&1&&x.children!==$.children&&h(G,$.children)}else!Q&&q==null&&Ie(G,$,ee,oe,A,z,L);((he=oe.onVnodeUpdated)||ne)&&or(()=>{he&&gs(he,A,$,x),ne&&Ao($,x,A,"updated")},z)},ge=(x,$,A,z,L,W,Q)=>{for(let G=0;G<$.length;G++){const H=x[G],q=$[G],ne=H.el&&(H.type===lr||!ba(H,q)||H.shapeFlag&70)?f(H.el):A;S(H,q,ne,null,z,L,W,Q,!0)}},Ie=(x,$,A,z,L,W,Q)=>{if(A!==z){for(const G in z){if(Op(G))continue;const H=z[G],q=A[G];H!==q&&G!=="value"&&o(x,G,q,H,Q,$.children,L,W,$r)}if(A!==He)for(const G in A)!Op(G)&&!(G in z)&&o(x,G,A[G],null,Q,$.children,L,W,$r);"value"in z&&o(x,"value",A.value,z.value)}},Re=(x,$,A,z,L,W,Q,G,H)=>{const q=$.el=x?x.el:u(""),ne=$.anchor=x?x.anchor:u("");let{patchFlag:ee,dynamicChildren:oe,slotScopeIds:he}=$;he&&(G=G?G.concat(he):he),x==null?(s(q,A,z),s(ne,A,z),de($.children,A,ne,L,W,Q,G,H)):ee>0&&ee&64&&oe&&x.dynamicChildren?(ge(x.dynamicChildren,oe,A,L,W,Q,G),($.key!=null||L&&$===L.subTree)&&I_(x,$,!0)):tr(x,$,A,ne,L,W,Q,G,H)},ce=(x,$,A,z,L,W,Q,G,H)=>{$.slotScopeIds=G,x==null?$.shapeFlag&512?L.ctx.activate($,A,z,Q,H):yt($,A,z,L,W,Q,H):tt(x,$,H)},yt=(x,$,A,z,L,W,Q)=>{const G=x.component=RE(x,z,L);if(y_(x)&&(G.ctx.renderer=ji),FE(G),G.asyncDep){if(L&&L.registerDep(G,Oe),!x.el){const H=G.subTree=zs(In);k(null,H,$,A)}return}Oe(G,x,$,A,L,W,Q)},tt=(x,$,A)=>{const z=$.component=x.component;if(V5(x,$,A))if(z.asyncDep&&!z.asyncResolved){De(z,$,A);return}else z.next=$,F5(z.update),z.update();else $.component=x.component,$.el=x.el,z.vnode=$},Oe=(x,$,A,z,L,W,Q)=>{const G=()=>{if(x.isMounted){let{next:ne,bu:ee,u:oe,parent:he,vnode:xe}=x,Qe=ne,Be;Co(x,!1),ne?(ne.el=xe.el,De(x,ne,Q)):ne=xe,ee&&Ep(ee),(Be=ne.props&&ne.props.onVnodeBeforeUpdate)&&gs(Be,he,ne,xe),Co(x,!0);const We=$f(x),pr=x.subTree;x.subTree=We,S(pr,We,f(pr.el),qn(pr),x,L,W),ne.el=We.el,Qe===null&&U5(x,We.el),oe&&or(oe,L),(Be=ne.props&&ne.props.onVnodeUpdated)&&or(()=>gs(Be,he,ne,xe),L)}else{let ne;const{el:ee,props:oe}=$,{bm:he,m:xe,parent:Qe}=x,Be=_y($);if(Co(x,!1),he&&Ep(he),!Be&&(ne=oe&&oe.onVnodeBeforeMount)&&gs(ne,Qe,$),Co(x,!0),ee&&ga){const We=()=>{x.subTree=$f(x),ga(ee,x.subTree,x,L,null)};Be?$.type.__asyncLoader().then(()=>!x.isUnmounted&&We()):We()}else{const We=x.subTree=$f(x);S(null,We,A,z,x,L,W),$.el=We.el}if(xe&&or(xe,L),!Be&&(ne=oe&&oe.onVnodeMounted)){const We=$;or(()=>gs(ne,Qe,We),L)}$.shapeFlag&256&&x.a&&or(x.a,L),x.isMounted=!0,$=A=z=null}},H=x.effect=new u1(G,()=>o_(x.update),x.scope),q=x.update=H.run.bind(H);q.id=x.uid,Co(x,!0),q()},De=(x,$,A)=>{$.component=x;const z=x.vnode.props;x.vnode=$,x.next=null,pE(x,$.props,z,A),fE(x,$.children,A),Zl(),m1(void 0,x.update),Yl()},tr=(x,$,A,z,L,W,Q,G,H=!1)=>{const q=x&&x.children,ne=x?x.shapeFlag:0,ee=$.children,{patchFlag:oe,shapeFlag:he}=$;if(oe>0){if(oe&128){Ei(q,ee,A,z,L,W,Q,G,H);return}else if(oe&256){ya(q,ee,A,z,L,W,Q,G,H);return}}he&8?(ne&16&&$r(q,L,W),ee!==q&&h(A,ee)):ne&16?he&16?Ei(q,ee,A,z,L,W,Q,G,H):$r(q,L,W,!0):(ne&8&&h(A,""),he&16&&de(ee,A,z,L,W,Q,G,H))},ya=(x,$,A,z,L,W,Q,G,H)=>{x=x||Ol,$=$||Ol;const q=x.length,ne=$.length,ee=Math.min(q,ne);let oe;for(oe=0;oe<ee;oe++){const he=$[oe]=H?oo($[oe]):ks($[oe]);S(x[oe],he,A,null,L,W,Q,G,H)}q>ne?$r(x,L,W,!0,!1,ee):de($,A,z,L,W,Q,G,H,ee)},Ei=(x,$,A,z,L,W,Q,G,H)=>{let q=0;const ne=$.length;let ee=x.length-1,oe=ne-1;for(;q<=ee&&q<=oe;){const he=x[q],xe=$[q]=H?oo($[q]):ks($[q]);if(ba(he,xe))S(he,xe,A,null,L,W,Q,G,H);else break;q++}for(;q<=ee&&q<=oe;){const he=x[ee],xe=$[oe]=H?oo($[oe]):ks($[oe]);if(ba(he,xe))S(he,xe,A,null,L,W,Q,G,H);else break;ee--,oe--}if(q>ee){if(q<=oe){const he=oe+1,xe=he<ne?$[he].el:z;for(;q<=oe;)S(null,$[q]=H?oo($[q]):ks($[q]),A,xe,L,W,Q,G,H),q++}}else if(q>oe)for(;q<=ee;)Vr(x[q],L,W,!0),q++;else{const he=q,xe=q,Qe=new Map;for(q=xe;q<=oe;q++){const Jt=$[q]=H?oo($[q]):ks($[q]);Jt.key!=null&&Qe.set(Jt.key,q)}let Be,We=0;const pr=oe-xe+1;let Ai=!1,Rc=0;const jo=new Array(pr);for(q=0;q<pr;q++)jo[q]=0;for(q=he;q<=ee;q++){const Jt=x[q];if(We>=pr){Vr(Jt,L,W,!0);continue}let Mr;if(Jt.key!=null)Mr=Qe.get(Jt.key);else for(Be=xe;Be<=oe;Be++)if(jo[Be-xe]===0&&ba(Jt,$[Be])){Mr=Be;break}Mr===void 0?Vr(Jt,L,W,!0):(jo[Mr-xe]=q+1,Mr>=Rc?Rc=Mr:Ai=!0,S(Jt,$[Mr],A,null,L,W,Q,G,H),We++)}const Fc=Ai?bE(jo):Ol;for(Be=Fc.length-1,q=pr-1;q>=0;q--){const Jt=xe+q,Mr=$[Jt],kc=Jt+1<ne?$[Jt+1].el:z;jo[q]===0?S(null,Mr,A,kc,L,W,Q,G,H):Ai&&(Be<0||q!==Fc[Be]?Ti(Mr,A,kc,2):Be--)}}},Ti=(x,$,A,z,L=null)=>{const{el:W,type:Q,transition:G,children:H,shapeFlag:q}=x;if(q&6){Ti(x.component.subTree,$,A,z);return}if(q&128){x.suspense.move($,A,z);return}if(q&64){Q.move(x,$,A,ji);return}if(Q===lr){s(W,$,A);for(let ee=0;ee<H.length;ee++)Ti(H[ee],$,A,z);s(x.anchor,$,A);return}if(Q===If){P(x,$,A);return}if(z!==2&&q&1&&G)if(z===0)G.beforeEnter(W),s(W,$,A),or(()=>G.enter(W),L);else{const{leave:ee,delayLeave:oe,afterLeave:he}=G,xe=()=>s(W,$,A),Qe=()=>{ee(W,()=>{xe(),he&&he()})};oe?oe(W,xe,Qe):Qe()}else s(W,$,A)},Vr=(x,$,A,z=!1,L=!1)=>{const{type:W,props:Q,ref:G,children:H,dynamicChildren:q,shapeFlag:ne,patchFlag:ee,dirs:oe}=x;if(G!=null&&Iy(G,null,A,x,!0),ne&256){$.ctx.deactivate(x);return}const he=ne&1&&oe,xe=!_y(x);let Qe;if(xe&&(Qe=Q&&Q.onVnodeBeforeUnmount)&&gs(Qe,$,x),ne&6)bf(x.component,A,z);else{if(ne&128){x.suspense.unmount(A,z);return}he&&Ao(x,null,$,"beforeUnmount"),ne&64?x.type.remove(x,$,A,L,ji,z):q&&(W!==lr||ee>0&&ee&64)?$r(q,$,A,!1,!0):(W===lr&&ee&384||!L&&ne&16)&&$r(H,$,A),z&&Ac(x)}(xe&&(Qe=Q&&Q.onVnodeUnmounted)||he)&&or(()=>{Qe&&gs(Qe,$,x),he&&Ao(x,null,$,"unmounted")},A)},Ac=x=>{const{type:$,el:A,anchor:z,transition:L}=x;if($===lr){vf(A,z);return}if($===If){N(x);return}const W=()=>{i(A),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(x.shapeFlag&1&&L&&!L.persisted){const{leave:Q,delayLeave:G}=L,H=()=>Q(A,W);G?G(x.el,W,H):H()}else W()},vf=(x,$)=>{let A;for(;x!==$;)A=y(x),i(x),x=A;i($)},bf=(x,$,A)=>{const{bum:z,scope:L,update:W,subTree:Q,um:G}=x;z&&Ep(z),L.stop(),W&&(W.active=!1,Vr(Q,x,$,A)),G&&or(G,$),or(()=>{x.isUnmounted=!0},$),$&&$.pendingBranch&&!$.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===$.pendingId&&($.deps--,$.deps===0&&$.resolve())},$r=(x,$,A,z=!1,L=!1,W=0)=>{for(let Q=W;Q<x.length;Q++)Vr(x[Q],$,A,z,L)},qn=x=>x.shapeFlag&6?qn(x.component.subTree):x.shapeFlag&128?x.suspense.next():y(x.anchor||x.el),Cc=(x,$,A)=>{x==null?$._vnode&&Vr($._vnode,null,null,!0):S($._vnode||null,x,$,null,null,null,A),a_(),$._vnode=x},ji={p:S,um:Vr,m:Ti,r:Ac,mt:yt,mc:de,pc:tr,pbc:ge,n:qn,o:e};let ma,ga;return t&&([ma,ga]=t(ji)),{render:Cc,hydrate:ma,createApp:mE(Cc,ma)}}function Co({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function I_(e,t,r=!1){const s=e.children,i=t.children;if(we(s)&&we(i))for(let o=0;o<s.length;o++){const l=s[o];let u=i[o];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=i[o]=oo(i[o]),u.el=l.el),r||I_(l,u))}}function bE(e){const t=e.slice(),r=[0];let s,i,o,l,u;const p=e.length;for(s=0;s<p;s++){const d=e[s];if(d!==0){if(i=r[r.length-1],e[i]<d){t[s]=i,r.push(s);continue}for(o=0,l=r.length-1;o<l;)u=o+l>>1,e[r[u]]<d?o=u+1:l=u;d<e[r[o]]&&(o>0&&(t[s]=r[o-1]),r[o]=s)}}for(o=r.length,l=r[o-1];o-- >0;)r[o]=l,l=t[l];return r}const wE=e=>e.__isTeleport,SE=Symbol(),lr=Symbol(void 0),b1=Symbol(void 0),In=Symbol(void 0),If=Symbol(void 0),Su=[];let Sn=null;function Nr(e=!1){Su.push(Sn=e?null:[])}function _E(){Su.pop(),Sn=Su[Su.length-1]||null}let kd=1;function Ib(e){kd+=e}function O_(e){return e.dynamicChildren=kd>0?Sn||Ol:null,_E(),kd>0&&Sn&&Sn.push(e),e}function is(e,t,r,s,i,o){return O_(Ee(e,t,r,s,i,o,!0))}function xE(e,t,r,s,i){return O_(zs(e,t,r,s,i,!0))}function $E(e){return e?e.__v_isVNode===!0:!1}function ba(e,t){return e.type===t.type&&e.key===t.key}const Th="__vInternal",E_=({key:e})=>e!=null?e:null,Tp=({ref:e,ref_key:t,ref_for:r})=>e!=null?Rt(e)||Ct(e)||Te(e)?{i:Ds,r:e,k:t,f:!!r}:e:null;function Ee(e,t=null,r=null,s=0,i=null,o=e===lr?0:1,l=!1,u=!1){const p={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&E_(t),ref:t&&Tp(t),scopeId:p_,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null};return u?(w1(p,r),o&128&&e.normalize(p)):r&&(p.shapeFlag|=Rt(r)?8:16),kd>0&&!l&&Sn&&(p.patchFlag>0||o&6)&&p.patchFlag!==32&&Sn.push(p),p}const zs=ME;function ME(e,t=null,r=null,s=0,i=null,o=!1){if((!e||e===SE)&&(e=In),$E(e)){const u=Vu(e,t,!0);return r&&w1(u,r),u}if(LE(e)&&(e=e.__vccOpts),t){t=IE(t);let{class:u,style:p}=t;u&&!Rt(u)&&(t.class=_h(u)),xt(p)&&(XS(p)&&!we(p)&&(p=Xt({},p)),t.style=s1(p))}const l=Rt(e)?1:q5(e)?128:wE(e)?64:xt(e)?4:Te(e)?2:0;return Ee(e,t,r,s,i,l,o,!0)}function IE(e){return e?XS(e)||Th in e?Xt({},e):e:null}function Vu(e,t,r=!1){const{props:s,ref:i,patchFlag:o,children:l}=e,u=t?TE(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&E_(u),ref:t&&t.ref?r&&i?we(i)?i.concat(Tp(t)):[i,Tp(t)]:Tp(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==lr?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Vu(e.ssContent),ssFallback:e.ssFallback&&Vu(e.ssFallback),el:e.el,anchor:e.anchor}}function OE(e=" ",t=0){return zs(b1,null,e,t)}function EE(e="",t=!1){return t?(Nr(),xE(In,null,e)):zs(In,null,e)}function ks(e){return e==null||typeof e=="boolean"?zs(In):we(e)?zs(lr,null,e.slice()):typeof e=="object"?oo(e):zs(b1,null,String(e))}function oo(e){return e.el===null||e.memo?e:Vu(e)}function w1(e,t){let r=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(we(t))r=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),w1(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(Th in t)?t._ctx=Ds:i===3&&Ds&&(Ds.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Te(t)?(t={default:t,_ctx:Ds},r=32):(t=String(t),s&64?(r=16,t=[OE(t)]):r=8);e.children=t,e.shapeFlag|=r}function TE(...e){const t={};for(let r=0;r<e.length;r++){const s=e[r];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=_h([t.class,s.class]));else if(i==="style")t.style=s1([t.style,s.style]);else if(xh(i)){const o=t[i],l=s[i];l&&o!==l&&!(we(o)&&o.includes(l))&&(t[i]=o?[].concat(o,l):l)}else i!==""&&(t[i]=s[i])}return t}function gs(e,t,r,s=null){hs(e,t,7,[r,s])}function Nd(e,t,r,s){let i;const o=r&&r[s];if(we(e)||Rt(e)){i=new Array(e.length);for(let l=0,u=e.length;l<u;l++)i[l]=t(e[l],l,void 0,o&&o[l])}else if(typeof e=="number"){i=new Array(e);for(let l=0;l<e;l++)i[l]=t(l+1,l,void 0,o&&o[l])}else if(xt(e))if(e[Symbol.iterator])i=Array.from(e,(l,u)=>t(l,u,void 0,o&&o[u]));else{const l=Object.keys(e);i=new Array(l.length);for(let u=0,p=l.length;u<p;u++){const d=l[u];i[u]=t(e[d],d,u,o&&o[u])}}else i=[];return r&&(r[s]=i),i}const Oy=e=>e?T_(e)?S1(e)||e.proxy:Oy(e.parent):null,Pd=Xt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Oy(e.parent),$root:e=>Oy(e.root),$emit:e=>e.emit,$options:e=>b_(e),$forceUpdate:e=>()=>o_(e.update),$nextTick:e=>C5.bind(e.proxy),$watch:e=>J5.bind(e)}),jE={get({_:e},t){const{ctx:r,setupState:s,data:i,props:o,accessCache:l,type:u,appContext:p}=e;let d;if(t[0]!=="$"){const m=l[t];if(m!==void 0)switch(m){case 1:return s[t];case 2:return i[t];case 4:return r[t];case 3:return o[t]}else{if(s!==He&&Ne(s,t))return l[t]=1,s[t];if(i!==He&&Ne(i,t))return l[t]=2,i[t];if((d=e.propsOptions[0])&&Ne(d,t))return l[t]=3,o[t];if(r!==He&&Ne(r,t))return l[t]=4,r[t];xy&&(l[t]=0)}}const h=Pd[t];let f,y;if(h)return t==="$attrs"&&wr(e,"get",t),h(e);if((f=u.__cssModules)&&(f=f[t]))return f;if(r!==He&&Ne(r,t))return l[t]=4,r[t];if(y=p.config.globalProperties,Ne(y,t))return y[t]},set({_:e},t,r){const{data:s,setupState:i,ctx:o}=e;return i!==He&&Ne(i,t)?(i[t]=r,!0):s!==He&&Ne(s,t)?(s[t]=r,!0):Ne(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:s,appContext:i,propsOptions:o}},l){let u;return!!r[l]||e!==He&&Ne(e,l)||t!==He&&Ne(t,l)||(u=o[0])&&Ne(u,l)||Ne(s,l)||Ne(Pd,l)||Ne(i.config.globalProperties,l)},defineProperty(e,t,r){return r.get!=null?this.set(e,t,r.get(),null):r.value!=null&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}},AE=M_();let CE=0;function RE(e,t,r){const s=e.type,i=(t?t.appContext:e.appContext)||AE,o={uid:CE++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new ZO(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:S_(s,i),emitsOptions:c_(s,i),emit:null,emitted:null,propsDefaults:He,inheritAttrs:s.inheritAttrs,ctx:He,data:He,props:He,attrs:He,slots:He,refs:He,setupState:He,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=P5.bind(null,o),e.ce&&e.ce(o),o}let qt=null;const Dl=e=>{qt=e,e.scope.on()},_n=()=>{qt&&qt.scope.off(),qt=null};function T_(e){return e.vnode.shapeFlag&4}let Uu=!1;function FE(e,t=!1){Uu=t;const{props:r,children:s}=e.vnode,i=T_(e);cE(e,r,i,t),hE(e,s);const o=i?kE(e,t):void 0;return Uu=!1,o}function kE(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=e_(new Proxy(e.ctx,jE));const{setup:s}=r;if(s){const i=e.setupContext=s.length>1?PE(e):null;Dl(e),Zl();const o=go(s,e,0,[e.props,i]);if(Yl(),_n(),PS(o)){if(o.then(_n,_n),t)return o.then(l=>{Ob(e,l,t)}).catch(l=>{Oh(l,e,0)});e.asyncDep=o}else Ob(e,o,t)}else j_(e,t)}function Ob(e,t,r){Te(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:xt(t)&&(e.setupState=s_(t)),j_(e,r)}let Eb;function j_(e,t,r){const s=e.type;if(!e.render){if(!t&&Eb&&!s.render){const i=s.template;if(i){const{isCustomElement:o,compilerOptions:l}=e.appContext.config,{delimiters:u,compilerOptions:p}=s,d=Xt(Xt({isCustomElement:o,delimiters:u},l),p);s.render=Eb(i,d)}}e.render=s.render||ds}Dl(e),Zl(),oE(e),Yl(),_n()}function NE(e){return new Proxy(e.attrs,{get(t,r){return wr(e,"get","$attrs"),t[r]}})}function PE(e){const t=s=>{e.exposed=s||{}};let r;return{get attrs(){return r||(r=NE(e))},slots:e.slots,emit:e.emit,expose:t}}function S1(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(s_(e_(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Pd)return Pd[r](e)}}))}function LE(e){return Te(e)&&"__vccOpts"in e}const jh=(e,t)=>j5(e,t,Uu),DE="3.2.31",zE="http://www.w3.org/2000/svg",cn=typeof document!="undefined"?document:null,Tb=cn&&cn.createElement("template"),VE={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,s)=>{const i=t?cn.createElementNS(zE,e):cn.createElement(e,r?{is:r}:void 0);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>cn.createTextNode(e),createComment:e=>cn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>cn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,s,i,o){const l=r?r.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===o||!(i=i.nextSibling)););else{Tb.innerHTML=s?`<svg>${e}</svg>`:e;const u=Tb.content;if(s){const p=u.firstChild;for(;p.firstChild;)u.appendChild(p.firstChild);u.removeChild(p)}t.insertBefore(u,r)}return[l?l.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function UE(e,t,r){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function qE(e,t,r){const s=e.style,i=Rt(r);if(r&&!i){for(const o in r)Ey(s,o,r[o]);if(t&&!Rt(t))for(const o in t)r[o]==null&&Ey(s,o,"")}else{const o=s.display;i?t!==r&&(s.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=o)}}const jb=/\s*!important$/;function Ey(e,t,r){if(we(r))r.forEach(s=>Ey(e,t,s));else if(t.startsWith("--"))e.setProperty(t,r);else{const s=BE(e,t);jb.test(r)?e.setProperty(Ql(s),r.replace(jb,""),"important"):e[s]=r}}const Ab=["Webkit","Moz","ms"],Of={};function BE(e,t){const r=Of[t];if(r)return r;let s=Ll(t);if(s!=="filter"&&s in e)return Of[t]=s;s=zS(s);for(let i=0;i<Ab.length;i++){const o=Ab[i]+s;if(o in e)return Of[t]=o}return t}const Cb="http://www.w3.org/1999/xlink";function GE(e,t,r,s,i){if(s&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(Cb,t.slice(6,t.length)):e.setAttributeNS(Cb,t,r);else{const o=DO(t);r==null||o&&!FS(r)?e.removeAttribute(t):e.setAttribute(t,o?"":r)}}function JE(e,t,r,s,i,o,l){if(t==="innerHTML"||t==="textContent"){s&&l(s,i,o),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const u=r==null?"":r;(e.value!==u||e.tagName==="OPTION")&&(e.value=u),r==null&&e.removeAttribute(t);return}if(r===""||r==null){const u=typeof e[t];if(u==="boolean"){e[t]=FS(r);return}else if(r==null&&u==="string"){e[t]="",e.removeAttribute(t);return}else if(u==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=r}catch{}}let Ld=Date.now,A_=!1;if(typeof window!="undefined"){Ld()>document.createEvent("Event").timeStamp&&(Ld=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);A_=!!(e&&Number(e[1])<=53)}let Ty=0;const WE=Promise.resolve(),HE=()=>{Ty=0},KE=()=>Ty||(WE.then(HE),Ty=Ld());function pn(e,t,r,s){e.addEventListener(t,r,s)}function QE(e,t,r,s){e.removeEventListener(t,r,s)}function ZE(e,t,r,s,i=null){const o=e._vei||(e._vei={}),l=o[t];if(s&&l)l.value=s;else{const[u,p]=YE(t);if(s){const d=o[t]=XE(s,i);pn(e,u,d,p)}else l&&(QE(e,u,l,p),o[t]=void 0)}}const Rb=/(?:Once|Passive|Capture)$/;function YE(e){let t;if(Rb.test(e)){t={};let r;for(;r=e.match(Rb);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[Ql(e.slice(2)),t]}function XE(e,t){const r=s=>{const i=s.timeStamp||Ld();(A_||i>=r.attached-1)&&hs(eT(s,r.value),t,5,[s])};return r.value=e,r.attached=KE(),r}function eT(e,t){if(we(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const Fb=/^on[a-z]/,tT=(e,t,r,s,i=!1,o,l,u,p)=>{t==="class"?UE(e,s,i):t==="style"?qE(e,r,s):xh(t)?i1(t)||ZE(e,t,r,s,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):rT(e,t,s,i))?JE(e,t,s,o,l,u,p):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),GE(e,t,s,i))};function rT(e,t,r,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&Fb.test(t)&&Te(r)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Fb.test(t)&&Rt(r)?!1:t in e}const Dd=e=>{const t=e.props["onUpdate:modelValue"];return we(t)?r=>Ep(t,r):t};function sT(e){e.target.composing=!0}function kb(e){const t=e.target;t.composing&&(t.composing=!1,iT(t,"input"))}function iT(e,t){const r=document.createEvent("HTMLEvents");r.initEvent(t,!0,!0),e.dispatchEvent(r)}const C_={created(e,{modifiers:{lazy:t,trim:r,number:s}},i){e._assign=Dd(i);const o=s||i.props&&i.props.type==="number";pn(e,t?"change":"input",l=>{if(l.target.composing)return;let u=e.value;r?u=u.trim():o&&(u=yy(u)),e._assign(u)}),r&&pn(e,"change",()=>{e.value=e.value.trim()}),t||(pn(e,"compositionstart",sT),pn(e,"compositionend",kb),pn(e,"change",kb))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:s,number:i}},o){if(e._assign=Dd(o),e.composing||document.activeElement===e&&(r||s&&e.value.trim()===t||(i||e.type==="number")&&yy(e.value)===t))return;const l=t==null?"":t;e.value!==l&&(e.value=l)}},jy={created(e,{value:t},r){e.checked=jd(t,r.props.value),e._assign=Dd(r),pn(e,"change",()=>{e._assign(oT(e))})},beforeUpdate(e,{value:t,oldValue:r},s){e._assign=Dd(s),t!==r&&(e.checked=jd(t,s.props.value))}};function oT(e){return"_value"in e?e._value:e.value}const nT=["ctrl","shift","alt","meta"],lT={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>nT.some(r=>e[`${r}Key`]&&!t.includes(r))},aT=(e,t)=>(r,...s)=>{for(let i=0;i<t.length;i++){const o=lT[t[i]];if(o&&o(r,t))return}return e(r,...s)},uT=Xt({patchProp:tT},VE);let Nb;function cT(){return Nb||(Nb=gE(uT))}const pT=(...e)=>{const t=cT().createApp(...e),{mount:r}=t;return t.mount=s=>{const i=dT(s);if(!i)return;const o=t._component;!Te(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const l=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),l},t};function dT(e){return Rt(e)?document.querySelector(e):e}function hT(e,t=500){let r;return(...s)=>{clearTimeout(r),r=setTimeout(()=>{e(...s)},t)}}const co=_i({error:null,loading:!1,data:[]});jh(()=>[...new Map(co.data.map(e=>[e.key,e])).values()]);async function fT(){if(!!Us.value){co.loading=!0,co.error=null;try{const{results:e}=await nO.value.suggest(Us.value),{results:t}=e[0];co.data=t}catch{}finally{co.loading=!1}}}const Pb=hT(fT);function n(e,t,r,s){var i,o=arguments.length,l=o<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,r):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(e,t,r,s);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(l=(o<3?i(l):o>3?i(t,r,l):i(t,r))||l);return o>3&&l&&Object.defineProperty(t,r,l),l}function yT(e){return e&&e.release&&typeof e.release=="function"}function mT(e){return e&&e.acquire&&typeof e.acquire=="function"}class wo{constructor(t,r,s,i=1,o=0){if(this.ctor=t,this.acquireFunction=r,this.releaseFunction=s,this.allocationSize=i,this._pool=new Array(o),this._initialSize=o,this.ctor)for(let l=0;l<o;l++)this._pool[l]=new this.ctor;this.allocationSize=Math.max(i,1)}destroy(){this.prune(0)}acquire(...t){let r;if(wo.test.disabled)r=new this.ctor;else{if(this._pool.length===0){const s=this.allocationSize;for(let i=0;i<s;i++)this._pool[i]=new this.ctor}r=this._pool.pop()}return this.acquireFunction?this.acquireFunction(r,...t):mT(r)&&r.acquire(...t),r}release(t){t&&!wo.test.disabled&&(this.releaseFunction?this.releaseFunction(t):yT(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const s=this._pool[r];this._dispose(s)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}}wo.test={disabled:!1};function gT(e){e.length=0}class Ns{constructor(t=50,r=50){this._pool=new wo(Array,void 0,gT,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return Ef.acquire()}static release(t){return Ef.release(t)}static prune(){Ef.prune()}}const Ef=new Ns(100);var Lb,Db;let gi;var zb,Vb;(Lb=globalThis.dojoConfig)!=null&&Lb.has||(Db=globalThis.esriConfig)!=null&&Db.has?gi=I(I({},(zb=globalThis.dojoConfig)==null?void 0:zb.has),(Vb=globalThis.esriConfig)==null?void 0:Vb.has):gi={};function R(e){return typeof gi[e]=="function"?gi[e]=gi[e](globalThis):gi[e]}R.add=(e,t,r,s)=>((s||gi[e]===void 0)&&(gi[e]=t),r&&R(e)),R.cache=gi,R.add("esri-deprecation-warnings",!0),(()=>{var e;R.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window!="undefined"&&typeof location!="undefined"&&typeof document!="undefined"&&window.location===location&&window.document===document;if(R.add("host-browser",t),R.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),R.add("dom",t),R("host-browser")){const r=navigator,s=r.userAgent,i=r.appVersion,o=parseFloat(i);if(R.add("wp",parseFloat(s.split("Windows Phone")[1])||void 0),R.add("msapp",parseFloat(s.split("MSAppHost/")[1])||void 0),R.add("khtml",i.includes("Konqueror")?o:void 0),R.add("edge",parseFloat(s.split("Edge/")[1])||void 0),R.add("opr",parseFloat(s.split("OPR/")[1])||void 0),R.add("webkit",!R("wp")&&!R("edge")&&parseFloat(s.split("WebKit/")[1])||void 0),R.add("chrome",!R("edge")&&!R("opr")&&parseFloat(s.split("Chrome/")[1])||void 0),R.add("android",!R("wp")&&parseFloat(s.split("Android ")[1])||void 0),R.add("safari",!i.includes("Safari")||R("wp")||R("chrome")||R("android")||R("edge")||R("opr")?void 0:parseFloat(i.split("Version/")[1])),R.add("mac",i.includes("Macintosh")),!R("wp")&&s.match(/(iPhone|iPod|iPad)/)){const l=RegExp.$1.replace(/P/,"p"),u=s.match(/OS ([\d_]+)/)?RegExp.$1:"1",p=parseFloat(u.replace(/_/,".").replace(/_/g,""));R.add(l,p),R.add("ios",p)}R.add("trident",parseFloat(i.split("Trident/")[1])||void 0),R("webkit")||(!s.includes("Gecko")||R("wp")||R("khtml")||R("trident")||R("edge")||R.add("mozilla",o),R("mozilla")&&R.add("ff",parseFloat(s.split("Firefox/")[1]||s.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&R.add("esri-mobile",t),r&&R.add("esri-iPhone",r),R.add("esri-geolocation",!!navigator.geolocation)}R.add("esri-canvas-svg-support",!R("trident")),R.add("esri-wasm","WebAssembly"in globalThis),R.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),R.add("esri-atomics","Atomics"in globalThis),R.add("esri-workers","Worker"in globalThis),R.add("web-feat:cache","caches"in globalThis),R.add("esri-workers-arraybuffer-transfer",!R("safari")||Number(R("safari"))>=12),R.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),R.add("featurelayer-simplify-payload-size-factors",[1,1,4]),R.add("featurelayer-snapshot-enabled",!0),R.add("featurelayer-snapshot-point-min-threshold",8e4),R.add("featurelayer-snapshot-point-max-threshold",4e5),R.add("featurelayer-snapshot-point-coverage",.1),R.add("featurelayer-advanced-symbols",!1),R.add("featurelayer-pbf",!0),R.add("featurelayer-pbf-statistics",!1),R.add("feature-layers-workers",!0),R.add("feature-polyline-generalization-factor",1),R.add("mapview-transitions-duration",200),R.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),R.add("mapserver-pbf-enabled",!1),R("host-webworker")||R("host-browser")&&(R.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),R.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{R.add("esri-image-decode",!0,!0,!0)}).catch(()=>{R.add("esri-image-decode",!1,!0,!0)})}return!1}),R.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();const Ub=new Set;function vT(e,t,r=!1){r&&Ub.has(t)||(r&&Ub.add(t),e.warn(`\u{1F6D1} DEPRECATED - ${t}`))}function Wn(e,t,r={}){if(R("esri-deprecation-warnings")){const{moduleName:s}=r;_1(e,`Function: ${(s?s+"::":"")+t+"()"}`,r)}}function qu(e,t,r={}){if(R("esri-deprecation-warnings")){const{moduleName:s}=r;_1(e,`Property: ${(s?s+"::":"")+t}`,r)}}function _1(e,t,r={}){if(R("esri-deprecation-warnings")){const{replacement:s,version:i,see:o,warnOnce:l}=r;let u=t;s&&(u+=`
	\u{1F6E0}\uFE0F Replacement: ${s}`),i&&(u+=`
	\u2699\uFE0F Version: ${i}`),o&&(u+=`
	\u{1F517} See ${o} for more details.`),vT(e,u,l)}}const bT=null;function T(e){return e!=null}function X(e){return e==null}function LV(e){return e===void 0}function Ay(e,t){return T(e)?t(e):bT}function DV(e){return e}function wT(e,t){if(X(e))throw new Error(t);return e}function R_(e,t){return T(e)?e:typeof t=="function"?t():t}function zV(e,t){return T(e)?e:t}function Cy(e){return T(e)&&e.destroy(),null}function VV(e){return T(e)&&e.dispose(),null}function Ah(e){return T(e)&&e.remove(),null}function UV(e){return T(e)&&e.release(),null}function ST(e){return null}function qV(e,t){const r=new Array;for(const s of e)r.push(Fa(s,null,t));return r}function BV(e,t){for(const r of e)Ay(r,t)}function Fa(e,t,r){return T(e)?r(e):t}function GV(e){return e.filter(t=>T(t))}function _T(e,...t){let r=e;for(let s=0;s<t.length&&r;++s)r=r[t[s]];return r}function JV(e){return e}class as{constructor(t=1){this._seed=t}set seed(t){this._seed=t==null?Math.random()*as._m:t}getInt(){return this._seed=(as._a*this._seed+as._c)%as._m,this._seed}getFloat(){return this.getInt()/(as._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const s=r-t;return t+this.getInt()/as._m*s}}as._m=2147483647,as._a=48271,as._c=0;function F_(e,t,r){if(X(e)&&X(t))return!0;if(X(e)||X(t)||e.length!==t.length)return!1;if(r){for(let s=0;s<e.length;s++)if(!r(e[s],t[s]))return!1}else for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}function WV(e){return e&&typeof e.length=="number"}const xT=!!Array.prototype.fill;function HV(e,t){if(xT)return new Array(e).fill(t);const r=new Array(e);for(let s=0;s<e;s++)r[s]=t;return r}function KV(e,t){t===void 0&&(t=e,e=0);const r=new Array(t-e);for(let s=e;s<t;s++)r[s-e]=s;return r}class k_{constructor(){this.last=0}}const N_=new k_;function P_(e,t,r,s){s=s||N_;const i=Math.max(0,s.last-10);for(let l=i;l<r;++l)if(e[l]===t)return s.last=l,l;const o=Math.min(i,r);for(let l=0;l<o;++l)if(e[l]===t)return s.last=l,l;return-1}function L_(e,t,r,s){const i=r==null?e.length:r,o=P_(e,t,i,s);if(o!==-1)return e[o]=e[i-1],r==null&&e.pop(),t}const Ur=new Set;function $T(e,t,r=e.length,s=t.length,i,o){if(s===0||r===0)return r;Ur.clear();for(let u=0;u<s;++u)Ur.add(t[u]);i=i||N_;const l=Math.max(0,i.last-10);for(let u=l;u<r;++u)if(Ur.has(e[u])&&(o&&o.push(e[u]),Ur.delete(e[u]),e[u]=e[r-1],--r,--u,Ur.size===0||r===0))return Ur.clear(),r;for(let u=0;u<l;++u)if(Ur.has(e[u])&&(o&&o.push(e[u]),Ur.delete(e[u]),e[u]=e[r-1],--r,--u,Ur.size===0||r===0))return Ur.clear(),r;return Ur.clear(),r}new as;function MT(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function QV(e,t){if(e.forEach)e.forEach(t);else for(let r=0;r<e.length;r++)t(e[r],r,e)}function IT(e,t,r){if(e.slice)return e.slice(t,r);t===void 0?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),r===void 0?r=e.length:(r<0&&(r+=e.length),r=Math.min(e.length,Math.max(0,r)));const s=Math.max(0,r-t),i=new e.constructor(s);for(let o=0;o<s;o++)i[o]=e[t+o];return i}function ZV(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}function OT(e){return e instanceof Int8Array||e&&e.constructor&&e.constructor.name==="Int8Array"}function ET(e){return e instanceof Uint8Array||e&&e.constructor&&e.constructor.name==="Uint8Array"}function TT(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&e.constructor.name==="Uint8ClampedArray"}function jT(e){return e instanceof Int16Array||e&&e.constructor&&e.constructor.name==="Int16Array"}function AT(e){return e instanceof Uint16Array||e&&e.constructor&&e.constructor.name==="Uint16Array"}function CT(e){return e instanceof Int32Array||e&&e.constructor&&e.constructor.name==="Int32Array"}function RT(e){return e instanceof Uint32Array||e&&e.constructor&&e.constructor.name==="Uint32Array"}function FT(e){return e instanceof Float32Array||e&&e.constructor&&e.constructor.name==="Float32Array"}function kT(e){return e instanceof Float64Array||e&&e.constructor&&e.constructor.name==="Float64Array"}function D_(e,t){let r;if(t)for(r in e)e.hasOwnProperty(r)&&(e[r]===void 0?delete e[r]:e[r]instanceof Object&&D_(e[r],!0));else for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function E(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=q_(e);if(T(t))return t;if(z_(e))return e.clone();if(V_(e))return e.map(E);if(U_(e))return e.clone();const r={};for(const s of Object.getOwnPropertyNames(e))r[s]=E(e[s]);return r}function Ry(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=q_(e);if(T(t))return t;if(V_(e)){let r=!0;const s=e.map(i=>{const o=Ry(i);return i!=null&&o==null&&(r=!1),o});return r?s:null}if(z_(e))return e.clone();if(!U_(e)){const r=new(Object.getPrototypeOf(e)).constructor;for(const s of Object.getOwnPropertyNames(e)){const i=e[s],o=Ry(i);if(i!=null&&o==null)return null;r[s]=o}return r}return null}function z_(e){return typeof e.clone=="function"}function V_(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function U_(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function q_(e){if(OT(e)||ET(e)||TT(e)||jT(e)||AT(e)||CT(e)||RT(e)||FT(e)||kT(e))return IT(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;return e.forEach((r,s)=>{t.set(s,E(r))}),t}if(e instanceof Set){const t=new Set;return e.forEach(r=>{t.add(E(r))}),t}return null}function Ch(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function B_(e,t,r=!1){return J_(e,t,r)}function Rh(e,t){if(t!=null)return t[e]||G_(e.split("."),!1,t)}function Sr(e,t,r){const s=e.split("."),i=s.pop(),o=G_(s,!0,r);o&&i&&(o[i]=t)}function G_(e,t,r){let s=r;for(const i of e){if(s==null)return;if(!(i in s)){if(!t)return;s[i]={}}s=s[i]}return s}function J_(e,t,r){return t?Object.keys(t).reduce(function(s,i){let o=s[i],l=t[i];return o===l?s:o===void 0?(s[i]=E(l),s):(Array.isArray(l)||Array.isArray(s)?(o=o?Array.isArray(o)?s[i]=o.concat():s[i]=[o]:s[i]=[],l&&(Array.isArray(l)||(l=[l]),r?l.forEach(u=>{o.indexOf(u)===-1&&o.push(u)}):s[i]=l.concat())):l&&typeof l=="object"?s[i]=J_(o,l,r):s.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(s[i]=l),s)},e||{}):e}var qb;const Ue={apiKey:void 0,applicationUrl:(qb=globalThis.location)==null?void 0:qb.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(B_(Ue,globalThis.esriConfig,!0),delete Ue.has),!Ue.assetsPath){const e="4.23.7";Ue.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}Ue.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(Ue,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),Ue.request.corsEnabledServers=[],Ue.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};const NT=/\{([^\}]+)\}/g;function Bb(e){return e==null?"":e}function Fh(e,t){return e.replace(NT,typeof t=="object"?(r,s)=>Bb(Rh(s,t)):(r,s)=>Bb(t(s)))}function PT(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,r=>t&&t.indexOf(r)!==-1?r:`\\${r}`)}function x1(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}function YV(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}const Gb={info:0,warn:1,error:2,none:3};class Z{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Z._loggers[this.module]=this;const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=Z.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(t={}){const r=Z._loggers;return Z._loggers=t,r},set throttlingDisabled(t){Z._throttlingDisabled=t}}}static getLogger(t){let r=Z._loggers[t];return r||(r=new Z({module:t})),r}_log(t,r,...s){if(!!this._matchLevel(t)){if(r!=="always"&&!Z._throttlingDisabled){const i=this._argsToKey(s),o=this._loggedMessages[t].get(i);if(r==="once"&&o!=null||r==="oncePerTick"&&o&&o>=Z._tickCounter)return;this._loggedMessages[t].set(i,Z._tickCounter),Z._scheduleTickCounterIncrement()}for(const i of Ue.log.interceptors)if(i(t,this.module,...s))return;this._inheritedWriter()(t,this.module,...s)}}_parentWithMember(t,r){let s=this;for(;T(s);){const i=s[t];if(T(i))return i;s=s.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,r,...s){console[t](`[${r}]`,...s)}_matchLevel(t){const r=Ue.log.level?Ue.log.level:"warn";return Gb[this._parentWithMember("level",r)]<=Gb[t]}_argsToKey(...t){const r=(s,i)=>typeof i!="object"||Array.isArray(i)?i:"[Object]";return x1(JSON.stringify(t,r))}static _scheduleTickCounterIncrement(){Z._tickCounterScheduled||(Z._tickCounterScheduled=!0,Promise.resolve().then(()=>{Z._tickCounter++,Z._tickCounterScheduled=!1}))}}Z._loggers={},Z._tickCounter=0,Z._tickCounterScheduled=!1,Z._throttlingDisabled=!1;function kh(e){return Nh(()=>e.forEach(t=>T(t)&&t.remove()))}function Nh(e){return{remove:()=>{e&&(e(),e=void 0)}}}function er(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function LT(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function jp(e,t,r){return r?zd(e,t,{policy:r,path:""}):zd(e,t,null)}function zd(e,t,r){return t?Object.keys(t).reduce(function(s,i){let o=null,l="merge";if(r&&(o=r.path?`${r.path}.${i}`:i,l=r.policy(o)),l==="replace")return s[i]=t[i],s;if(s[i]===void 0)return s[i]=E(t[i]),s;let u=s[i],p=t[i];if(u===p)return s;if(Array.isArray(p)||Array.isArray(s))u=u?Array.isArray(u)?s[i]=u.concat():s[i]=[u]:s[i]=[],p&&(Array.isArray(p)||(p=[p]),p.forEach(d=>{u.indexOf(d)===-1&&u.push(d)}));else if(p&&typeof p=="object")if(r){const d=r.path;r.path=o,s[i]=zd(u,p,r),r.path=d}else s[i]=zd(u,p,null);else s.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(s[i]=p);return s},e||{}):e}function W_(e){return Array.isArray(e)?e:e.split(".")}function Jb(e){return e.indexOf(",")>-1?e.split(",").map(t=>t.trim()):[e.trim()]}function DT(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...Jb(r));return t}return Jb(e)}function H_(e,t,r,s){const i=DT(t);if(i.length!==1){const o=i.map(l=>s(e,l,r));return kh(o)}return s(e,i[0],r)}function K_(e){let t=!1;return()=>{t||(t=!0,e())}}function Q_(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const i=parseInt(r,10);if(!isNaN(i))return Array.isArray(t)?t[i]:t.getItemAt(i)}const s=er(t);return LT(s,r)?s.get(r):t[r]}function Z_(e,t,r){if(e==null)return e;const s=Q_(t[r],e);return!s&&r<t.length-1?void 0:r===t.length-1?s:Z_(s,t,r+1)}function uc(e,t,r=0){return typeof t=="string"&&t.indexOf(".")===-1?Q_(t,e):Z_(e,W_(t),r)}function Vd(e,t){return uc(e,t)}function Wb(e,t){return uc(t,e)!==void 0}var Ps;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(Ps||(Ps={}));class Hb{constructor(t){this.autoDestroy=!1,this.properties=t}}function cc(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){const s=Object.create(t.properties),i=t.autoDestroy;for(const o in s)s[o]=E(s[o]);t=new Hb(s),t.autoDestroy=i,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new Hb({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function zT(e){return cc(e).properties}function Ph(e,t){const r=zT(e);let s=r[t];return s||(s=r[t]={}),s}function VT(e,t){return jp(e,t,qT)}const UT=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function qT(e){return UT.test(e)?"replace":"merge"}var je;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.USER=6]="USER"})(je||(je={}));const Fy=je.USER+1;function po(e){switch(e){case"defaults":return je.DEFAULTS;case"service":return je.SERVICE;case"portal-item":return je.PORTAL_ITEM;case"web-scene":return je.WEB_SCENE;case"web-map":return je.WEB_MAP;case"user":return je.USER}}function Ud(e){switch(e){case je.DEFAULTS:return"defaults";case je.SERVICE:return"service";case je.PORTAL_ITEM:return"portal-item";case je.WEB_SCENE:return"web-scene";case je.WEB_MAP:return"web-map";case je.USER:return"user"}return void 0}function BT(e){return Ud(e)}var Ve;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Ve||(Ve={}));let qd,ka=[];const GT=Z.getLogger("esri.core.Accessor");function be(e){qd!==void 0&&qd.onObservableAccessed(e)}let Ap=!1,Cp=!1;function Si(e,t,r){if(Ap)return $1(e,t,r);Y_(e);const s=t.call(r);return X_(),s}function JT(e,t){return Si(void 0,e,t)}function $1(e,t,r){const s=Ap;Ap=!0,Y_(e);let i=null;try{i=t.call(r)}catch(o){Cp&&GT.error(o)}return X_(),Ap=s,i}function Y_(e){qd=e,ka.push(e)}function X_(){const e=ka.pop();qd=ka.length>0?ka[ka.length-1]:void 0,e!==void 0&&e.onTrackingEnd()}function ex(e,t){if(t.flags&Ve.DepTrackingInitialized)return;const r=Cp;Cp=!1,t.flags&Ve.AutoTracked?$1(t,t.metadata.get,e):tx(e,t),Cp=r}const WT=[];function tx(e,t){t.flags&Ve.ExplicitlyTracking||(t.flags|=Ve.ExplicitlyTracking,$1(t,()=>{const r=t.metadata.dependsOn||WT;for(const s of r)if(typeof s=="string"&&s.indexOf(".")===-1)Kb(e,s,!1);else{const i=W_(s);for(let o=0,l=e;o<i.length&&l!=null&&typeof l=="object";++o)l=Kb(l,i[o],o!==i.length-1)}}),t.flags&=~Ve.ExplicitlyTracking)}function Kb(e,t,r){const s=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const l=parseInt(s,10);if(!isNaN(l))return Array.isArray(e)?e[l]:e.getItemAt(l)}const i=er(e),o=i==null?void 0:i.properties.get(s);return o&&(be(o),ex(e,o)),r?e[s]:void 0}class rx{constructor(t,r){this._observers=t,this._observer=r}remove(){MT(this._observers,this._observer)}}class Qb{constructor(t,r,s){this.properties=t,this.propertyName=r,this.metadata=s,this._observers=null,this._accessed=null,this._handles=null,this.flags=Ve.Dirty|(s.nonNullable?Ve.NonNullable:0)|(s.hasOwnProperty("value")?Ve.HasDefaultValue:0)|(s.get===void 0?Ve.DepTrackingInitialized:0)|(s.dependsOn===void 0?Ve.AutoTracked:0)}destroy(){this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){be(this);const t=this.properties.store,r=this.propertyName,s=this.flags,i=t.get(r);if(s&Ve.Computing||~s&Ve.Dirty&&t.has(r))return i;this.flags|=Ve.Computing;const o=this.properties.host;let l;s&Ve.AutoTracked?l=Si(this,this.metadata.get,o):(tx(o,this),l=this.metadata.get.call(o)),t.set(r,l,je.COMPUTED);const u=t.get(r);return u===i?this.flags&=~Ve.Dirty:JT(this.commit,this),this.flags&=~Ve.Computing,u}onObservableAccessed(t){t!==this&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(t)||this._accessed.push(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=Ve.DepTrackingInitialized;const t=this._accessed;if(t===null)return;let r=this._handles;r===null&&(r=this._handles=[]);for(let s=0;s<t.length;++s)r.push(t[s].observe(this));t.length=0}observe(t){return this._observers===null&&(this._observers=[]),this._observers.includes(t)||this._observers.push(t),new rx(this._observers,t)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&Ve.Overriden&&(this.flags|=Ve.Dirty);const t=this._observers;if(t!==null)for(let r=0;r<t.length;++r)t[r].onInvalidated()}commit(){this.flags&=~Ve.Dirty,this.onCommitted()}onCommitted(){if(this._observers===null)return;const t=this._observers.slice();for(let r=0;r<t.length;++r)t[r].onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let r=0;r<t.length;++r)t[r].remove();t.length=0}}}class M1{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new M1;return this._values.forEach((s,i)=>{t&&t.has(i)||r.set(i,E(s))}),r}get(t){return this._values.get(t)}originOf(){return je.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}function Gc(e,t,r){return e!==void 0}function Zb(e,t,r,s){return e!==void 0&&(!(r==null&&e.flags&Ve.NonNullable)||(s.lifecycle,Ps.INITIALIZING,!1))}function HT(e){return e&&typeof e.destroy=="function"}Z.getLogger("esri.core.accessorSupport.Properties");class KT{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Ps.INITIALIZING,this.store=new M1,this._origin=je.USER;const r=this.host.constructor.__accessorMetadata__,s=r.properties;for(const i in s){const o=new Qb(this,i,s[i]);this.properties.set(i,o)}this.metadatas=s,this._autoDestroy=r.autoDestroy}initialize(){this.lifecycle=Ps.CONSTRUCTING}constructed(){this.lifecycle=Ps.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,r]of this.properties){const s=this.internalGet(t);s&&HT(s)&&(s.destroy(),~r.flags&Ve.NonNullable&&this._internalSet(r,null)),r.destroy()}else for(const[t,r]of this.properties)r.destroy()}get initialized(){return this.lifecycle!==Ps.INITIALIZING}get(t){const r=this.properties.get(t);if(r.metadata.get)return r.getComputed();be(r);const s=this.store;return s.has(t)?s.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const s=this.properties.get(t);if(s!==void 0&&s.flags&Ve.HasDefaultValue)return"defaults"}return Ud(r)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const r=this.properties.get(t);if(Gc(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const s=this.properties.get(t);Gc(s)&&this._internalSet(s,r)}getDependsInfo(t,r,s){const i=this.properties.get(r);if(!Gc(i))return"";const o=new Set,l=Si({onObservableAccessed:p=>o.add(p),onTrackingEnd:()=>{}},()=>{var p;return(p=i.metadata.get)==null?void 0:p.call(t)});let u=`${s}${t.declaredClass.split(".").pop()}.${r}: ${l}
`;if(o.size===0)return u;s+="  ";for(const p of o){if(!(p instanceof Qb))continue;const d=p.properties.host,h=p.propertyName,f=er(d);u+=f?f.getDependsInfo(d,h,s):`${s}${h}: undefined
`}return u}setAtOrigin(t,r,s){const i=this.properties.get(t);if(Gc(i))return this._setAtOrigin(i,r,s)}isOverridden(t){const r=this.properties.get(t);return r!==void 0&&!!(r.flags&Ve.Overriden)}clearOverride(t){const r=this.properties.get(t);r!==void 0&&r.flags&Ve.Overriden&&(r.flags&=~Ve.Overriden,r.notifyChange())}override(t,r){const s=this.properties.get(t);if(!Zb(s,t,r,this))return;const i=s.metadata.cast;if(i){const o=this._cast(i,r),{valid:l,value:u}=o;if(Tf.release(o),!l)return;r=u}s.flags|=Ve.Overriden,this._internalSet(s,r)}set(t,r){const s=this.properties.get(t);if(!Zb(s,t,r,this))return;const i=s.metadata.cast;if(i){const l=this._cast(i,r),{valid:u,value:p}=l;if(Tf.release(l),!u)return;r=p}const o=s.metadata.set;o?o.call(this.host,r):this._internalSet(s,r)}setDefaultOrigin(t){this._origin=po(t)}getDefaultOrigin(){return Ud(this._origin)}notifyChange(t){const r=this.properties.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.properties.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.properties.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const s=this.lifecycle!==Ps.INITIALIZING?this._origin:je.DEFAULTS;this._setAtOrigin(t,r,s)}_setAtOrigin(t,r,s){const i=this.store,o=t.propertyName;i.has(o,s)&&Ch(r,i.get(o))&&~t.flags&Ve.Overriden&&s===i.originOf(o)||(t.invalidate(),i.set(o,r,s),t.commit(),ex(this.host,t))}_cast(t,r){const s=Tf.acquire();return s.valid=!0,s.value=r,t&&(s.value=t.call(this.host,r,s)),s}}class QT{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const Tf=new wo(QT);function ZT(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(r,s){if(s==="")return"$";const i=Rh(s,t),o=i==null?"":i;if(o===void 0)throw new Error(`could not find key "${s}" in template`);return o.toString()})}class Lh{constructor(t,r,s){this.name=t,this.details=s,this.message=void 0,this instanceof Lh&&(this.message=r&&ZT(r,s)||"")}toString(){return"["+this.name+"]: "+this.message}}class C extends Lh{constructor(t,r,s){if(super(t,r,s),!(this instanceof C))return new C(t,r,s)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return E(r)}catch{return"[object]"}}))}}catch(t){throw Z.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new C(t.name,t.message,t.details)}}C.prototype.type="error";function Bd(e,t,r){if(e&&t)if(typeof t=="object")for(const s of Object.getOwnPropertyNames(t))Bd(e,s,t[s]);else{if(t.indexOf(".")!==-1){const i=t.split("."),o=i.splice(i.length-1,1)[0];return void Bd(Vd(e,i),o,r)}const s=e.__accessor__;s!=null&&YT(t,s),e[t]=r}}function YT(e,t){if(R("esri-unknown-property-errors")&&!XT(e,t))throw new C("set:unknown-property",ej(e,t))}function XT(e,t){return t.metadatas[e]!=null}function ej(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}Z.getLogger("esri.core.accessorSupport.set");class tj extends wo{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=ST(this._set)}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}const Jc=[];function Gd(e){Jc.push(e),Jc.length===1&&queueMicrotask(()=>{const t=Jc.slice();Jc.length=0;for(const r of t)r()})}const rj=29;class sx{constructor(t,r=rj){this.name=t,this._counter=0,this._items=new Array(r)}record(t){this._items[++this._counter%this._items.length]=t}get median(){return this._items.slice().sort((t,r)=>t-r)[Math.floor(this._items.length/2)]}get average(){return this._items.reduce((t,r)=>t+r,0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}var ky;(function(e){const t=(o,l,u,p)=>{let d=l,h=l;const f=u>>>1,y=o[d-1];for(;h<=f;){h=d<<1,h<u&&p(o[h-1],o[h])<0&&++h;const m=o[h-1];if(p(m,y)<=0)break;o[d-1]=m,d=h}o[d-1]=y},r=(o,l)=>o<l?-1:o>l?1:0;function s(o,l,u,p){l===void 0&&(l=0),u===void 0&&(u=o.length),p===void 0&&(p=r);for(let h=u>>>1;h>l;h--)t(o,h,u,p);const d=l+1;for(let h=u-1;h>l;h--){const f=o[l];o[l]=o[h],o[h]=f,t(o,d,h,p)}}function*i(o,l,u,p){l===void 0&&(l=0),u===void 0&&(u=o.length),p===void 0&&(p=r);for(let h=u>>>1;h>l;h--)t(o,h,u,p),yield;const d=l+1;for(let h=u-1;h>l;h--){const f=o[l];o[l]=o[h],o[h]=f,t(o,d,h,p),yield}}e.sort=s,e.iterableSort=i})(ky||(ky={}));const Yb=ky,sj=1.5,ij=1.1;class Jd{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new k_,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>Xb(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let s=0;s<this._length;s++){const i=this.data[s];t(i)&&r.push(i)}return r}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let s=0;s<r;s++)this.data[this._length++]=t[s]}fill(t,r){for(let s=0;s<r;s++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,Xb(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=P_(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){const r=L_(this.data,t,this.length,this._hint);return r!==void 0&&(this.length=this.length-1),this._shrink(),r}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,s){this.length=$T(this.data,t,this.length,r,this._hint,s),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){t>=this.length||r>=this.length||t===r||([this.data[t],this.data[r]]=[this.data[r],this.data[t]])}sort(t){Yb.sort(this.data,0,this.length,t)}iterableSort(t){return Yb.iterableSort(this.data,0,this.length,t)}some(t,r){for(let s=0;s<this.length;++s)if(t.call(r,this.data[s],s,this.data))return!0;return!1}filterInPlace(t,r){let s=0;for(let i=0;i<this._length;++i){const o=this.data[i];t.call(r,o,i,this.data)&&(this.data[i]=this.data[s],this.data[s]=o,s++)}if(this._deallocator)for(let i=s;i<this._length;i++)this.data[i]=this._deallocator(this.data[i]);return this._length=s,this._shrink(),this}forAll(t,r){const s=this.length,i=this.data;for(let o=0;o<s;++o)t.call(r,i[o],o,i)}forEach(t,r){for(let s=0;s<this.length;++s)t.call(r,this.data[s],s,this.data)}map(t,r){const s=new Array(this.length);for(let i=0;i<this.length;++i)s[i]=t.call(r,this.data[i],i,this.data);return s}reduce(t,r){let s=r;for(let i=0;i<this.length;++i)s=t(s,this.data[i],i,this.data);return s}has(t){const r=this.length,s=this.data;for(let i=0;i<r;++i)if(s[i]===t)return!0;return!1}}function Xb(e){e.data.length>sj*e.length&&(e.data.length=Math.floor(e.length*ij))}function oj(e){return{setTimeout:(t,r)=>{const s=e.setTimeout(t,r);return{remove:()=>e.clearTimeout(s)}}}}const nj=oj(globalThis);function Dh(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function zh(e,t,r){if(!Dh(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,r);if(Array.isArray(t)){const s=t.slice();for(const i of s)e.addEventListener(i,r);return{remove(){for(const i of s)e.removeEventListener(i,r)}}}return e.addEventListener(t,r),{remove(){e.removeEventListener(t,r)}}}function ix(e,t,r){if(!Dh(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const s=zh(e,t,i=>{s.remove(),r.call(e,i)});return{remove(){s.remove()}}}const lj={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function jf({key:e}){return lj[e]||e}function XV(e){return Promise.all(e)}function aj(e){return new Promise((t,r)=>{try{e(t,r)}catch(s){Promise.resolve().then(()=>r(s))}})}function Gt(e="Aborted"){return new C("AbortError",e)}function qs(e,t="Aborted"){if(On(e))throw Gt(t)}function Vh(e){return T(e)?"aborted"in e?e:e.signal:e}function On(e){const t=Vh(e);return T(t)&&t.aborted}function pc(e){if(Js(e))throw e}function ew(e){if(!Js(e))throw e}function So(e,t){const r=Vh(e);if(!X(r)){if(!r.aborted)return ix(r,"abort",()=>t());t()}}function I1(e,t){const r=Vh(e);if(!X(r))return qs(r),ix(r,"abort",()=>t(Gt()))}function uj(e,t){const r=Vh(t);return X(r)?e:new Promise((s,i)=>{let o=So(t,()=>i(Gt()));const l=()=>o=Ah(o);e.then(l,l),e.then(s,i)})}function Js(e){return e&&e.name==="AbortError"}function cj(e){return e.catch(t=>{if(!Js(t))throw t})}function zl(){let e=null;const t=new Promise((r,s)=>{e={promise:void 0,resolve:r,reject:s}});return e.promise=t,e}function vi(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e);return vi(r.map(s=>e[s])).then(s=>{const i={};return r.forEach((o,l)=>i[o]=s[l]),i})}const t=e;return aj(r=>{const s=[];let i=t.length;i===0&&r(s),t.forEach(o=>{const l={promise:o||Promise.resolve(o)};s.push(l),l.promise.then(u=>{l.value=u}).catch(u=>{l.error=u}).then(()=>{--i,i===0&&r(s)})})})}function eU(e){return vi(e).then(t=>t.filter(r=>!!r.value).map(r=>r.value))}function tU(e){return Promise.reject(e)}function pj(e){return Promise.resolve(e)}function ox(e,t,r){const s=new AbortController;return So(r,()=>s.abort()),new Promise((i,o)=>{let l=setTimeout(()=>{l=0,i(t)},e);So(s,()=>{l&&(clearTimeout(l),o(Gt()))})})}function dc(e){return e&&typeof e.then=="function"}function tw(e){return dc(e)?e:Promise.resolve(e)}function nx(e,t=-1){let r,s,i,o,l=null;const u=(...p)=>{if(r){s=p,o&&o.reject(Gt()),o=zl();const y=o.promise;if(l){const m=l;l=null,m.abort()}return y}if(i=o||zl(),o=null,t>0){const y=new AbortController;r=tw(e(...p,y.signal));const m=r;ox(t).then(()=>{r===m&&(o?y.abort():l=y)})}else r=1,r=tw(e(...p));const d=()=>{const y=s;s=i=r=l=null,y!=null&&u(...y)},h=r,f=i;return h.then(d,d),h.then(f.resolve,f.reject),f.promise};return u}function dj(){let e,t;const r=new Promise((i,o)=>{e=i,t=o}),s=i=>{e(i)};return s.resolve=i=>e(i),s.reject=i=>t(i),s.timeout=(i,o)=>nj.setTimeout(()=>s.reject(o),i),s.promise=r,s}function rU(e,t){let r,s=new AbortController;const i=e(s.signal);let o={promise:i,finished:!1,abort:()=>{s&&(s.abort(),s=null)}};const l=()=>{o&&(o.finished=!0,o=null),T(r)&&(r.remove(),r=null),s=null};return i.then(l,l),r=So(t,()=>{T(o)&&o.abort()}),o}function sU(e){return Promise.resolve().then(()=>{qs(e)})}function iU(e){return e}class hj{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let rw=0;const wa={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},Ny=["prepare","preRender","render","postRender","update","finish"],Py=[],Bu=new Jd,Ly={frameTasks:Bu,willDispatch:!1,clearFrameTasks:fj,dispatch:ax,executeFrameTasks:yj};function O1(e){const t=new hj(e);return Py.push(t),Ly.willDispatch||(Ly.willDispatch=!0,Gd(ax)),t}function fj(e=!1){Bu.forAll(t=>{t.removed=!0}),e&&lx()}function yj(e){const t=e-rw;rw=e;const r=1e3/60,s=Math.max(0,t-r);for(let i=0;i<Ny.length;i++){const o=performance.now(),l=Ny[i];Bu.forAll(u=>{var p;u.paused||u.removed||(i===0&&u.ticks++,u.phases[l]&&(wa.time=e,wa.deltaTime=u.ticks===0?0:t,wa.elapsedFrameTime=performance.now()-e,wa.frameDuration=r-s,(p=u.phases[l])==null||p.call(u,wa)))}),mj[i].record(performance.now()-o)}lx(),gj.record(performance.now()-e)}const Wc=new Jd;function lx(){Bu.forAll(e=>{e.removed&&Wc.push(e)}),Bu.removeUnorderedMany(Wc.data,Wc.length),Wc.clear()}function ax(){for(;Py.length;){const e=Py.shift();e.isActive&&e.callback()}Ly.willDispatch=!1}function oU(e=1,t){const r=dj(),s=()=>{On(t)?r.reject(Gt()):e===0?r():(--e,Gd(()=>s()))};return s(),r.promise}const mj=Ny.map(e=>new sx(e)),gj=new sx("total");let vj=0;function _u(){return++vj}class Uh{constructor(t){this._notify=t,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}onObservableAccessed(t){this._accessed.includes(t)||this._accessed.push(t)}onTrackingEnd(){const t=this._handles,r=this._accessed;for(let s=0;s<r.length;++s)t.push(r[s].observe(this));r.length=0}clear(){const t=this._handles;for(let r=0;r<t.length;++r)t[r].remove();t.length=0}}let Al=!1;const Wd=[];function ux(e,t){let r=new Uh(o),s=null,i=!1;function o(){if(!r||i)return;if(Al)return void px(o);const u=s;r.clear(),Al=!0,i=!0,s=Si(r,e),i=!1,Al=!1,t(s,u),dx()}function l(){r&&(r.destroy(),r=null,s=null)}return i=!0,s=Si(r,e),i=!1,{remove:l}}function cx(e,t){let r=new Uh(i),s=null;function i(){t(s,l)}function o(){r&&(r.destroy(),r=null),s=null}function l(){return r?(r.clear(),s=Si(r,e),s):null}return l(),{remove:o}}function bj(e){let t=new Uh(s),r=!1;function s(){t&&!r&&(Al?px(s):(t.clear(),Al=!0,r=!0,Si(t,e),r=!1,Al=!1,dx()))}function i(){t&&(t.destroy(),t=null)}return r=!0,Si(t,e),r=!1,{remove:i}}function px(e){Wd.includes(e)||Wd.unshift(e)}function dx(){for(;Wd.length;)Wd.pop()()}var xu;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(xu||(xu={}));class Gu{constructor(){this.uid=_u(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,s,i,o){return this.pool.acquire(xu.Untracked,t,r,s,i,o,Ch)}static acquireTracked(t,r,s,i){return this.pool.acquire(xu.Tracked,t,r,s,null,null,i)}notify(t,r){this.type===xu.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r)}acquire(t,r,s,i,o,l,u){this.uid=_u(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=s,this.getValue=i,this.target=o,this.path=l,this.equals=u}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=_u(),this.removed=!0}}Gu.pool=new tj(Gu);const Rp=new Ns,vo=new Set;let Hd;function Kd(e){vo.delete(e),vo.add(e),Hd||(Hd=O1(_j))}function wj(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function Sj(e){for(const t of vo.values())t.target===e&&(t.removed=!0)}function _j(){let e=10;for(;Hd&&e--;){Hd=null;const t=xj(),r=Rp.acquire();for(const s of t){const i=s.uid;wj(s),i===s.uid&&s.removed&&r.push(s)}for(const s of vo)s.removed&&(r.push(s),vo.delete(s));for(const s of r)Gu.pool.release(s);Rp.release(r),Rp.release(t),$j.forEach(s=>s())}}function xj(){const e=Rp.acquire();e.length=vo.size;let t=0;for(const r of vo)e[t]=r,++t;return vo.clear(),e}const $j=new Set;function Mj(e,t,r){let s=H_(e,t,r,(i,o,l)=>{let u,p,d=cx(()=>uc(i,o),(h,f)=>{i.__accessor__.destroyed||u&&u.uid!==p?s.remove():(u||(u=Gu.acquireUntracked(h,l,f,i,o),p=u.uid),Kd(u))});return{remove:K_(()=>{d.remove(),u&&(u.uid!==p||u.removed||(u.removed=!0,Kd(u)),u=null),s=d=null})}});return s}function Ij(e,t,r){const s=H_(e,t,r,(i,o,l)=>{let u=!1;return ux(()=>uc(i,o),(p,d)=>{i.__accessor__.destroyed?s.remove():u||(u=!0,Ch(d,p)||l.call(i,p,d,o,i),u=!1)})});return s}function Oj(e,t,r,s=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:s?Ij(e,t,r):Mj(e,t,r)}function Ej(e,t,r){let s,i,o=cx(e,(l,u)=>{s&&s.uid!==i?o.remove():(s||(s=Gu.acquireTracked(l,t,u,r),i=s.uid),Kd(s))});return{remove:K_(()=>{o.remove(),s&&(s.uid!==i||s.removed||(s.removed=!0,Kd(s)),s=null),o=null})}}function Tj(e,t,r){let s=!1;return ux(e,(i,o)=>{s||(s=!0,r(o,i)||t(i,o),s=!1)})}function jj(e,t,r=!1,s=Ch){return r?Tj(e,t,s):Ej(e,t,s)}function Aj(e,t,r){const s=e.get(t);if(s!==void 0)return s;const i=r();return e.set(t,i),i}const Cl=Z.getLogger("esri.core.Accessor");function Cj(e){return e==null?e:new Date(e)}function Rj(e){return e==null?e:!!e}function hc(e){return e==null?e:e.toString()}function qh(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function E1(e){return e==null?e:Math.round(parseFloat(e))}function hx(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function Qd(e,t){return t!=null&&e&&!(t instanceof e)}function fx(e){return e&&"isCollection"in e}function sw(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function Fj(e,t){if(!t||!t.constructor||!fx(t.constructor))return Dy(e,t)?t:new e(t);const r=sw(e.prototype.itemType),s=sw(t.constructor.prototype.itemType);return r?s?r===s?t:r.prototype.isPrototypeOf(s.prototype)?new e(t):(Dy(e,t),t):new e(t):t}function Dy(e,t){return!!hx(t)&&(Cl.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+Bh(e)+"'"),!0)}function T1(e,t){return t==null?t:fx(e)?Fj(e,t):Qd(e,t)?Dy(e,t)?t:new e(t):t}function Bh(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const kj=new WeakMap;function Nj(e){switch(e){case Number:return qh;case _t:return E1;case Boolean:return Rj;case String:return hc;case Date:return Cj;default:return Aj(kj,e,()=>T1.bind(null,e))}}function Je(e,t){const r=Nj(e);return arguments.length===1?r:r(t)}function Ju(e,t,r){return arguments.length===1?Ju.bind(null,e):t&&(Array.isArray(t)?t.map(s=>e(s,r)):[e(t,r)])}function Pj(e,t){return arguments.length===1?Ju(Je.bind(null,e)):Ju(Je.bind(null,e),t)}function yx(e,t,r){return t!==0&&Array.isArray(r)?r.map(s=>yx(e,t-1,s)):e(r)}function Zd(e,t,r){if(arguments.length===2)return Zd.bind(null,e,t);if(!r)return r;let s=t,i=r=yx(e,t,r);for(;s>0&&Array.isArray(i);)s--,i=i[0];if(i!==void 0)for(let o=0;o<s;o++)r=[r];return r}function Lj(e,t,r){return arguments.length===2?Zd(Je.bind(null,e),t):Zd(Je.bind(null,e),t,r)}function mx(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function zy(e,t){if(arguments.length===2)return zy(e).call(null,t);const r=new Set,s=e.filter(u=>typeof u!="function"),i=e.filter(u=>typeof u=="function");for(const u of e)typeof u!="string"&&typeof u!="number"||r.add(u);let o=null,l=null;return(u,p)=>{if(u==null)return u;const d=typeof u,h=d==="string"||d==="number";return h&&(r.has(u)||i.some(f=>d==="string"&&f===String||d==="number"&&f===Number))||d==="object"&&i.some(f=>!Qd(u,f))?u:(h&&s.length?(o||(o=s.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),Cl.error("Accessor#set",`'${u}' is not a valid value for this property, only the following values are valid: ${o}`)):typeof u=="object"&&i.length?(l||(l=i.map(f=>Bh(f)).join(", ")),Cl.error("Accessor#set",`'${u}' is not a valid value for this property, value must be one of ${l}`)):Cl.error("Accessor#set",`'${u}' is not a valid value for this property`),p&&(p.valid=!1),null)}}function Bs(e,t){if(arguments.length===2)return Bs(e).call(null,t);const r={},s=[],i=[];for(const p in e.typeMap){const d=e.typeMap[p];r[p]=Je(d),s.push(Bh(d)),i.push(p)}const o=()=>`'${s.join("', '")}'`,l=()=>`'${i.join("', '")}'`,u=typeof e.key=="string"?p=>p[e.key]:e.key;return p=>{if(e.base&&!Qd(e.base,p)||p==null)return p;const d=u(p)||e.defaultKeyValue,h=r[d];if(!h)return Cl.error("Accessor#set",`Invalid property value, value needs to be one of ${o()}, or a plain object that can autocast (having .type = ${l()})`),null;if(!Qd(e.typeMap[d],p))return p;if(typeof e.key=="string"&&!hx(p)){const f={};for(const y in p)y!==e.key&&(f[y]=p[y]);return h(f)}return h(p)}}class _t{}const nU={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function Dj(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function gx(e){switch(e.type){case"native":return Je(e.value);case"array":return Ju(gx(e.value));case"one-of":return zj(e);default:return null}}function zj(e){let t=null;return(r,s)=>Uy(r,e)?r:(t==null&&(t=Vy(e)),Cl.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),s&&(s.valid=!1),null)}function Vy(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case _t:return"integer";case Date:return"date";default:return Bh(e.value)}case"array":return`array of ${Vy(e.value)}`;case"one-of":{const t=e.values.map(r=>Vy(r));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function Uy(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case _t:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!Uy(r,t.value));case"one-of":return t.values.some(r=>Uy(e,r))}}function c(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const s=Object.getOwnPropertyDescriptor(t,r),i=Ph(t,r);s&&(s.get||s.set?(i.get=s.get||i.get,i.set=s.set||i.set):"value"in s&&("value"in e&&Z.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),i.value=e.value=s.value)),e.readOnly!=null&&(i.readOnly=e.readOnly);const o=e.aliasOf;if(o){const p=typeof o=="string"?o:o.source,d=typeof o=="string"?null:o.overridable===!0;let h;i.dependsOn=[p],i.get=function(){let f=Vd(this,p);if(typeof f=="function"){h||(h=p.split(".").slice(0,-1).join("."));const y=Vd(this,h);y&&(f=f.bind(y))}return f},i.readOnly||(i.set=d?function(f){f!==void 0?this._override(r,f):this._clearOverride(r)}:function(f){Bd(this,p,f)})}const l=e.type,u=e.types;i.cast||(l?i.cast=Vj(l):u&&(Array.isArray(u)?i.cast=Ju(Bs(u[0])):i.cast=Bs(u))),e.range&&(i.cast=Uj(i.cast,e.range)),VT(i,e)}}function vx(e,t,r){const s=Ph(e,r);s.json||(s.json={});let i=s.json;return t!==void 0&&(i.origins||(i.origins={}),i.origins[t]||(i.origins[t]={}),i=i.origins[t]),i}function Vj(e){let t=0,r=e;if(Dj(e))return gx(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const s=r;if(mx(s))return t===0?zy(s):Zd(zy(s),t);if(t===1)return Pj(s);if(t>1)return Lj(s,t);const i=e;return i.from?i.from:Je(i)}function Uj(e,t){return r=>{let s=+e(r);return t.step!=null&&(s=Math.round(s/t.step)*t.step),t.min!=null&&(s=Math.max(t.min,s)),t.max!=null&&(s=Math.min(t.max,s)),s}}function qj(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const s in r)if(t[s]){const i=t[s];r[s].forEach(o=>{t[o]=i}),delete t[s]}}}class _r extends Lh{constructor(t,r,s){if(super(t,r,s),!(this instanceof _r))return new _r(t,r,s)}}_r.prototype.type="warning";function bx(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const qy=Z.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function iw(e,t,r){var s,i;e&&(!r&&!t.read||(s=t.read)!=null&&s.reader||((i=t.read)==null?void 0:i.enabled)===!1||Jj(e)&&Sr("read.reader",Xl(e),t))}function Xl(e){var t;const r=(t=e.ndimArray)!=null?t:0;if(r>1)return Gj(e);if(r===1)return ow(e);if("type"in e&&Sx(e.type)){var s,i;const o=(s=e.type.prototype)==null||(i=s.itemType)==null?void 0:i.Type,l=ow(typeof o=="function"?{type:o}:{types:o});return(u,p,d)=>{const h=l(u,p,d);return h&&new e.type(h)}}return j1(e)}function j1(e){return"type"in e?Bj(e.type):Wj(e.types)}function Bj(e){return e.prototype.read?(t,r,s)=>{if(t==null)return t;const i=typeof t;if(i!=="object")return void qy.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${i}'`);const o=new e;return o.read(t,s),o}:e.fromJSON}function wx(e,t,r,s){return s!==0&&Array.isArray(t)?t.map(i=>wx(e,i,r,s-1)):e(t,void 0,r)}function Gj(e){var t;const r=j1(e),s=wx.bind(null,r),i=(t=e.ndimArray)!=null?t:0;return(o,l,u)=>{if(o==null)return o;o=s(o,u,i);let p=i,d=o;for(;p>0&&Array.isArray(d);)p--,d=d[0];if(d!==void 0)for(let h=0;h<p;h++)o=[o];return o}}function ow(e){const t=j1(e);return(r,s,i)=>{if(r==null)return r;if(Array.isArray(r)){const l=[];for(const u of r){const p=t(u,void 0,i);p!==void 0&&l.push(p)}return l}const o=t(r,void 0,i);return o!==void 0?[o]:void 0}}function Sx(e){if(!bx(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?A1(t.Type):_x(t.Type))}function Jj(e){return"types"in e?_x(e.types):A1(e.type)}function A1(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||Sx(e))}function _x(e){for(const t in e.typeMap)if(!A1(e.typeMap[t]))return!1;return!0}function Wj(e){var t;let r=null;const s=(t=e.errorContext)!=null?t:"type";return(i,o,l)=>{if(i==null)return i;const u=typeof i;if(u!=="object")return void qy.error(`Expected JSON value of type 'object' to deserialize, but got '${u}'`);r||(r=Hj(e));const p=e.key;if(typeof p!="string")return;const d=i[p],h=d?r[d]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){const y=`Type '${d||"unknown"}' is not supported`;return l&&l.messages&&i&&l.messages.push(new _r(`${s}:unsupported`,y,{definition:i,context:l})),void qy.error(y)}const f=new h;return f.read(i,l),f}}function Hj(e){const t={};for(const i in e.typeMap){var r,s;const o=e.typeMap[i],l=cc(o.prototype);if(typeof e.key=="function")continue;const u=l.properties[e.key];if(!u)continue;(r=u.json)!=null&&r.type&&Array.isArray(u.json.type)&&u.json.type.length===1&&typeof u.json.type[0]=="string"&&(t[u.json.type[0]]=o);const p=(s=u.json)==null?void 0:s.write;if(!p||!p.writer){t[i]=o;continue}const d=p.target,h=typeof d=="string"?d:e.key,f={};p.writer(i,f,h),f[h]&&(t[f[h]]=o)}return t}function Kj(e){if(e.json||(e.json={}),lw(e.json),aw(e.json),nw(e.json),e.json.origins)for(const t in e.json.origins)lw(e.json.origins[t]),aw(e.json.origins[t]),nw(e.json.origins[t]);return!0}function nw(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function lw(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function aw(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}const Qj=Z.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function uw(e,t){var r;if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const s=(r=e==null?void 0:e.ndimArray)!=null?r:0;e&&(s===1||"type"in e&&bx(e.type))?t.write.writer=e4:s>1?t.write.writer=t4(s):t.types?Array.isArray(t.types)?t.write.writer=Yj(t.types[0]):t.write.writer=Zj(t.types):t.write.writer=Wu}function Zj(e){return(t,r,s,i)=>t?xx(t,e,i)?Wu(t,r,s,i):void 0:Wu(t,r,s,i)}function xx(e,t,r){for(const o in t.typeMap)if(e instanceof t.typeMap[o])return!0;if(r!=null&&r.messages){var s,i;const o=(s=t.errorContext)!=null?s:"type",l=`Values of type '${(i=typeof t.key!="function"?e[t.key]:e.declaredClass)!=null?i:"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new C(`${o}:unsupported`,l,{definition:e,context:r})),Qj.error(l)}return!1}function Yj(e){return(t,r,s,i)=>!t||!Array.isArray(t)?Wu(t,r,s,i):Wu(t.filter(o=>xx(o,e,i)),r,s,i)}function Wu(e,t,r,s){Sr(r,Yd(e,s),t)}function Yd(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?Xj(e):e}function Xj(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function e4(e,t,r,s){let i;e===null?i=null:e&&typeof e.map=="function"?(i=e.map(o=>Yd(o,s)),typeof i.toArray=="function"&&(i=i.toArray())):i=[Yd(e,s)],Sr(r,i,t)}function $x(e,t,r){return r!==0&&Array.isArray(e)?e.map(s=>$x(s,t,r-1)):Yd(e,t)}function t4(e){return function(t,r,s,i){let o;if(t===null)o=null;else{o=$x(t,i,e);let l=e,u=o;for(;l>0&&Array.isArray(u);)l--,u=u[0];if(u!==void 0)for(let p=0;p<l;p++)o=[o]}Sr(s,o,r)}}function By(e,t){return C1(e,"read",t)}function Mx(e,t){return C1(e,"write",t)}function C1(e,t,r){let s=e&&e.json;if(e&&e.json&&e.json.origins&&r){const i=e.json.origins[r.origin];i&&(t==="any"||t in i)&&(s=i)}return s}function r4(e){const t=s4(e);if(e.json.origins)for(const r in e.json.origins){const s=e.json.origins[r],i=s.types?i4(s):t;iw(i,s,!1),s.types&&!s.write&&e.json.write&&e.json.write.enabled&&(s.write=I({},e.json.write)),uw(i,s)}iw(t,e.json,!0),uw(t,e.json)}function s4(e){return e.json.types?Gy(e.json):e.type?Ix(e):Gy(e)}function i4(e){return e.type?Ix(e):Gy(e)}function Ix(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!mx(r);)r=r[0],t++;return{type:r,ndimArray:t}}function Gy(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function o4(e){Kj(e)&&(qj(e),r4(e))}const Af=new Set,Cf=new Set;function b(e){return t=>{t.prototype.declaredClass=e,l4(t);const r=[],s=[];let i=t.prototype;for(;i;)i.hasOwnProperty("initialize")&&!Af.has(i.initialize)&&(Af.add(i.initialize),r.push(i.initialize)),i.hasOwnProperty("destroy")&&!Cf.has(i.destroy)&&(Cf.add(i.destroy),s.push(i.destroy)),i=Object.getPrototypeOf(i);Af.clear(),Cf.clear();class o extends t{constructor(...u){if(super(...u),this.constructor===o&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let p=r.length-1;p>=0;p--)r[p].call(this)}}),s.length){let p=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!p){p=!0;for(let d=0;d<s.length;d++)s[d].call(this)}}})}this.postscript(...u)}}}return o.__accessorMetadata__=cc(t.prototype),o.prototype.declaredClass=e,o}}function n4(e,t){return t.get==null?function(){const r=this.__accessor__.properties.get(e);if(r===void 0)return;be(r);const s=this.__accessor__.store;return s.has(e)?s.get(e):r.metadata.value}:function(){const r=this.__accessor__.properties.get(e);if(r!==void 0)return r.getComputed()}}function l4(e){const t=e.prototype,r=cc(t).properties,s={};for(const i of Object.getOwnPropertyNames(r)){const o=r[i];o4(o),s[i]={enumerable:!0,configurable:!0,get:n4(i,o),set(l){const u=this.__accessor__;if(u!==void 0){if(!Object.isFrozen(this)){if(u.initialized&&o.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${i}' of ${this.declaredClass}`);if(u.lifecycle===Ps.CONSTRUCTED&&o.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${i}' of ${this.declaredClass}`);u.set(i,l)}}else Object.defineProperty(this,i,{enumerable:!0,configurable:!0,writable:!0,value:l})}}}Object.defineProperties(e.prototype,s)}function a4(e){if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor&&e.constructor.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}class st{constructor(...t){if(this.constructor===st)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new KT(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:s,constructor:i}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const o=this;class l extends o{constructor(...p){super(...p),this.inherited=null,i&&i.apply(this,p)}}cc(l.prototype);for(const u in t){const p=t[u];l.prototype[u]=typeof p=="function"?function(...d){const h=this.inherited;let f;this.inherited=function(...y){if(o.prototype[u])return o.prototype[u].apply(this,y)};try{f=p.apply(this,d)}catch(y){throw this.inherited=h,y}return this.inherited=h,f}:t[u]}for(const u in r){const p=a4(r[u]);c(p)(l.prototype,u)}return b(s)(l)}postscript(t){const r=this.__accessor__,s=r.ctorArgs||t;r.initialize(),s&&(this.set(s),r.ctorArgs=null),r.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(Sj(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&this.__accessor__.lifecycle===Ps.CONSTRUCTED||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return Vd(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}isInstanceOf(t){return Wn(Z.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof t}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return Bd(this,t,r),this}watch(t,r,s){return Oj(this,t,r,s)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,r){return this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}}class Rl{constructor(){this._emitter=new Rl.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}}(function(e){class t{constructor(i=null){this.target=i,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(i,o){const l=this._listenersMap&&this._listenersMap.get(i);if(!l)return!1;const u=this.target||this;return[...l].forEach(p=>{p.call(u,o)}),l.length>0}on(i,o){if(Array.isArray(i)){const u=i.map(p=>this.on(p,o));return kh(u)}if(i.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const l=this._listenersMap.get(i)||[];return l.push(o),this._listenersMap.set(i,l),{remove:()=>{const u=this._listenersMap&&this._listenersMap.get(i)||[],p=u.indexOf(o);p>=0&&u.splice(p,1)}}}once(i,o){const l=this.on(i,u=>{l.remove(),o.call(null,u)});return l}hasEventListener(i){const o=this._listenersMap&&this._listenersMap.get(i);return o!=null&&o.length>0}}e.EventEmitter=t,e.EventedMixin=s=>{let i=class extends s{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(o,l){return this._emitter.emit(o,l)}on(o,l){return this._emitter.on(o,l)}once(o,l){return this._emitter.once(o,l)}hasEventListener(o){return this._emitter.hasEventListener(o)}};return i=n([b("esri.core.Evented")],i),i};let r=class extends st{constructor(){super(...arguments),this._emitter=new Rl.EventEmitter(this)}destroy(){this._emitter.clear()}emit(s,i){return this._emitter.emit(s,i)}on(s,i){return this._emitter.on(s,i)}once(s,i){return this._emitter.once(s,i)}hasEventListener(s){return this._emitter.hasEventListener(s)}};r=n([b("esri.core.Evented")],r),e.EventedAccessor=r})(Rl||(Rl={}));const Gh=Rl;var ke;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(ke||(ke={}));function Ox(e){return(t,r)=>{t[r]=e}}class u4{constructor(){this._observers=[]}observe(t){return this._observers.includes(t)||this._observers.push(t),new rx(this._observers,t)}notify(){const t=this._observers.slice();for(let r=0;r<t.length;++r){const s=t[r];s.onInvalidated(),s.onCommitted()}}}var fi;class c4{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}}const Er=new wo(c4,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),p4=()=>{};function Rf(e){return e?e instanceof dn?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function Ff(e){if(e&&e.length)return e[0]}function d4(e,t,r,s){const i=Math.min(e.length-r,t.length-s);let o=0;for(;o<i&&e[r+o]===t[s+o];)o++;return o}function Ex(e,t,r,s){t&&t.forEach((i,o,l)=>{e.push(i),Ex(e,r.call(s,i,o,l),r,s)})}const Ri=new Set,Fi=new Set,ki=new Set,kf=new Map;let h4=0,dn=fi=class extends Gh.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new u4,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:h4++})}static isCollection(e){return e!=null&&e instanceof fi}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof fi?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return be(this._observable),this._items}set items(e){this._emitBeforeChanges(ke.ADD)||(this._splice(0,this.length,Rf(e)),this._emitAfterChanges(ke.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const r=this._chgListeners,s={removed:!1,callback:t};return r.push(s),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=p4,s.removed=!0,r.splice(r.indexOf(s),1)}}}return this._emitter.on(e,t)}once(e,t){const r=this.on(e,t);return{remove(){r.remove()}}}add(e,t){if(be(this._observable),this._emitBeforeChanges(ke.ADD))return this;const r=this.getNextIndex(t!=null?t:null);return this._splice(r,0,[e]),this._emitAfterChanges(ke.ADD),this}addMany(e,t=this._items.length){if(be(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(ke.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,Rf(e)),this._emitAfterChanges(ke.ADD),this}at(e){if(be(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(be(this._observable),!this.length||this._emitBeforeChanges(ke.REMOVE))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(ke.REMOVE),e}clone(){return be(this._observable),this._createNewInstance({items:this._items.map(E)})}concat(...e){be(this._observable);const t=e.map(Rf);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(be(this._observable),!this.length||this._emitBeforeChanges(ke.REMOVE))return;const r=this._splice(0,this.length),s=r.length;for(let i=0;i<s;i++)e.call(t,r[i],i,r);this._emitAfterChanges(ke.REMOVE)}every(e,t){return be(this._observable),this._items.every(e,t)}filter(e,t){let r;return be(this._observable),r=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})}find(e,t){return be(this._observable),this._items.find(e,t)}findIndex(e,t){return be(this._observable),this._items.findIndex(e,t)}flatten(e,t){be(this._observable);const r=[];return Ex(r,this,e,t),new fi(r)}forEach(e,t){return be(this._observable),this._items.forEach(e,t)}getItemAt(e){return be(this._observable),this._items[e]}getNextIndex(e){be(this._observable);const t=this.length;return(e=e==null?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return be(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return be(this._observable),this._items.indexOf(e,t)}join(e=","){return be(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return be(this._observable),this._items.lastIndexOf(e,t)}map(e,t){be(this._observable);const r=this._items.map(e,t);return new fi({items:r})}reorder(e,t=this.length-1){be(this._observable);const r=this.indexOf(e);if(r!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(ke.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(ke.MOVE)}return e}}pop(){if(be(this._observable),!this.length||this._emitBeforeChanges(ke.REMOVE))return;const e=Ff(this._splice(this.length-1,1));return this._emitAfterChanges(ke.REMOVE),e}push(...e){return be(this._observable),this._emitBeforeChanges(ke.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(ke.ADD)),this.length}reduce(e,t){be(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){be(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return be(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(be(this._observable),e<0||e>=this.length||this._emitBeforeChanges(ke.REMOVE))return;const t=Ff(this._splice(e,1));return this._emitAfterChanges(ke.REMOVE),t}removeMany(e){if(be(this._observable),!e||!e.length||this._emitBeforeChanges(ke.REMOVE))return[];const t=e instanceof fi?e.toArray():e,r=this._items,s=[],i=t.length;for(let o=0;o<i;o++){const l=t[o],u=r.indexOf(l);if(u>-1){const p=1+d4(t,r,o+1,u+1),d=this._splice(u,p);d&&d.length>0&&s.push.apply(s,d),o+=p-1}}return this._emitAfterChanges(ke.REMOVE),s}reverse(){if(be(this._observable),this._emitBeforeChanges(ke.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(ke.MOVE),this}shift(){if(be(this._observable),!this.length||this._emitBeforeChanges(ke.REMOVE))return;const e=Ff(this._splice(0,1));return this._emitAfterChanges(ke.REMOVE),e}slice(e=0,t=this.length){return be(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return be(this._observable),this._items.some(e,t)}sort(e){if(be(this._observable),!this.length||this._emitBeforeChanges(ke.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(ke.MOVE),this}splice(e,t,...r){be(this._observable);const s=(t?ke.REMOVE:0)|(r.length?ke.ADD:0);if(this._emitBeforeChanges(s))return[];const i=this._splice(e,t,r)||[];return this._emitAfterChanges(s),i}toArray(){return be(this._observable),this._items.slice()}toJSON(){return be(this._observable),this.toArray()}toLocaleString(){return be(this._observable),this._items.toLocaleString()}toString(){return be(this._observable),this._items.toString()}unshift(...e){return be(this._observable),!e.length||this._emitBeforeChanges(ke.ADD)||(this._splice(0,0,e),this._emitAfterChanges(ke.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const s=this._items,i=this.itemType;let o,l;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=O1(()=>this._dispatchChange())),t){if(l=s.splice(e,t),this.hasEventListener("before-remove")){const u=Er.acquire();u.target=this,u.cancellable=!0;for(let p=0,d=l.length;p<d;p++)o=l[p],u.reset(o),this.emit("before-remove",u),u.defaultPrevented&&(l.splice(p,1),s.splice(e,0,o),e+=1,p-=1,d-=1);Er.release(u)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const u=Er.acquire();u.target=this,u.cancellable=!1;const p=l.length;for(let d=0;d<p;d++)u.reset(l[d]),this.emit("after-remove",u);Er.release(u)}}if(r&&r.length){if(i){const h=[];for(const f of r){const y=i.ensureType(f);y==null&&f!=null||h.push(y)}r=h}const u=this.hasEventListener("before-add"),p=this.hasEventListener("after-add"),d=e===this.length;if(u||p){const h=Er.acquire();h.target=this,h.cancellable=!0;const f=Er.acquire();f.target=this,f.cancellable=!1;for(const y of r)u?(h.reset(y),this.emit("before-add",h),h.defaultPrevented||(d?s.push(y):s.splice(e++,0,y),this._set("length",s.length),p&&(f.reset(y),this.emit("after-add",f)))):(d?s.push(y):s.splice(e++,0,y),this._set("length",s.length),f.reset(y),this.emit("after-add",f));Er.release(f),Er.release(h)}else{if(d)for(const h of r)s.push(h);else s.splice(e,0,...r);this._set("length",s.length)}}return(r&&r.length||l&&l.length)&&this._notifyChangeEvent(r,l),l}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=Er.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,Er.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Er.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Er.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const r=t.changes;Ri.clear(),Fi.clear(),ki.clear();for(const{added:p,removed:d}of r){if(p)if(ki.size===0&&Fi.size===0)for(const h of p)Ri.add(h);else for(const h of p)Fi.has(h)?(ki.add(h),Fi.delete(h)):ki.has(h)||Ri.add(h);if(d)if(ki.size===0&&Ri.size===0)for(const h of d)Fi.add(h);else for(const h of d)Ri.has(h)?Ri.delete(h):(ki.delete(h),Fi.add(h))}const s=Ns.acquire();Ri.forEach(p=>{s.push(p)});const i=Ns.acquire();Fi.forEach(p=>{i.push(p)});const o=this._items,l=t.items,u=Ns.acquire();if(ki.forEach(p=>{l.indexOf(p)!==o.indexOf(p)&&u.push(p)}),t.listeners&&(s.length||i.length||u.length)){const p={target:this,added:s,removed:i,moved:u},d=t.listeners.length;for(let h=0;h<d;h++){const f=t.listeners[h];f.removed||f.callback.call(this,p)}}Ns.release(s),Ns.release(i),Ns.release(u)}Ri.clear(),Fi.clear(),ki.clear()}};dn.ofType=e=>{if(!e)return fi;if(kf.has(e))return kf.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const s in e.typeMap){const i=e.typeMap[s].prototype.declaredClass;t?t+=` | ${i}`:t=i}let r=class extends fi{};return n([Ox({Type:e,ensureType:typeof e=="function"?Je(e):Bs(e)})],r.prototype,"itemType",void 0),r=n([b(`esri.core.Collection<${t}>`)],r),kf.set(e,r),r},n([c()],dn.prototype,"length",void 0),n([c()],dn.prototype,"items",null),dn=fi=n([b("esri.core.Collection")],dn);const et=dn;class R1{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new R1;return this._values.forEach((s,i)=>{t&&t.has(i)||r.set(i,E(s.value),s.origin)}),r}get(t,r){r=this._normalizeOrigin(r);const s=this._values.get(t);return r==null||(s==null?void 0:s.origin)===r?s==null?void 0:s.value:void 0}originOf(t){var r,s;return(r=(s=this._values.get(t))==null?void 0:s.origin)!=null?r:je.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter(s=>{var i;return((i=this._values.get(s))==null?void 0:i.origin)===t})}set(t,r,s){if((s=this._normalizeOrigin(s))===je.DEFAULTS){const i=this._values.get(t);if(i&&i.origin!=null&&i.origin>s)return}this._values.set(t,new f4(r,s))}delete(t,r){var s;(r=this._normalizeOrigin(r))!=null&&((s=this._values.get(t))==null?void 0:s.origin)!==r||this._values.delete(t)}has(t,r){var s;return(r=this._normalizeOrigin(r))!=null?((s=this._values.get(t))==null?void 0:s.origin)===r:this._values.has(t)}forEach(t){this._values.forEach(({value:r},s)=>t(r,s))}_normalizeOrigin(t){if(t!=null)return t===je.DEFAULTS?t:je.USER}}class f4{constructor(t,r){this.value=t,this.origin=r}}function Tx(e,t,r){t.keys().forEach(i=>{r.set(i,t.get(i),je.DEFAULTS)});const s=e.metadatas;Object.keys(s).forEach(i=>{e.internalGet(i)&&r.set(i,e.internalGet(i),je.DEFAULTS)})}function y4(e,t,r){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const s=e.read.source;if(typeof s=="string"){if(s===t||s.indexOf(".")>-1&&s.indexOf(t)===0&&Wb(s,r))return!0}else for(const i of s)if(i===t||i.indexOf(".")>-1&&i.indexOf(t)===0&&Wb(i,r))return!0;return!1}function m4(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function g4(e,t,r,s,i){let o=By(t[r],i);m4(o)&&(e[r]=!0);for(const l of Object.getOwnPropertyNames(t))o=By(t[l],i),y4(o,r,s)&&(e[l]=!0)}function v4(e,t,r,s){const i=r.metadatas,o=C1(i[t],"any",s),l=o&&o.default;if(l===void 0)return;const u=typeof l=="function"?l.call(e,t,s):l;u!==void 0&&r.set(t,u)}const jx={origin:"service"};function Ax(e,t,r=jx){if(!t||typeof t!="object")return;const s=er(e),i=s.metadatas,o={};for(const l of Object.getOwnPropertyNames(t))g4(o,i,l,t,r);s.setDefaultOrigin(r.origin);for(const l of Object.getOwnPropertyNames(o)){const u=By(i[l],r).read,p=u&&u.source;let d;d=p&&typeof p=="string"?uc(t,p):t[l],u&&u.reader&&(d=u.reader.call(e,d,t,r)),d!==void 0&&s.set(l,d)}if(!r||!r.ignoreDefaults){s.setDefaultOrigin("defaults");for(const l of Object.getOwnPropertyNames(i))o[l]||v4(e,l,s,r)}s.setDefaultOrigin("user")}function b4(e,t,r,s=jx){var i;const o=pe(I({},s),{messages:[]});r(o),(i=o.messages)==null||i.forEach(l=>{l.type!=="warning"||e.loaded?s&&s.messages&&s.messages.push(l):e.loadWarnings.push(l)})}const w4=Z.getLogger("esri.core.accessorSupport.write");function S4(e,t,r,s,i){var o,l;const u={};return(o=t.write)==null||(l=o.writer)==null||l.call(e,s,u,r,i),u}function Cx(e,t,r,s,i,o){if(!s||!s.write)return!1;const l=e.get(r);if(!i&&s.write.overridePolicy){const u=s.write.overridePolicy.call(e,l,r,o);u!==void 0&&(i=u)}if(i||(i=s.write),!i||i.enabled===!1)return!1;if((l===null&&!i.allowNull&&!i.writerEnsuresNonNull||l===void 0)&&i.isRequired){const u=new C("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return u&&o&&o.messages?o.messages.push(u):u&&!o&&w4.error(u.name,u.message),!1}return!(l===void 0||l===null&&!i.allowNull&&!i.writerEnsuresNonNull||(!t.store.multipleOriginsSupported||t.store.originOf(r)===je.DEFAULTS)&&_4(e,r,o,s,l)||!i.ignoreOrigin&&o&&o.origin&&t.store.multipleOriginsSupported&&t.store.originOf(r)<po(o.origin))}function _4(e,t,r,s,i){const o=s.default;if(o===void 0)return!1;if(s.defaultEquals!=null)return s.defaultEquals(i);if(typeof o=="function"){if(Array.isArray(i)){const l=o.call(e,t,r);return F_(l,i)}return!1}return o===i}function x4(e,t,r,s){const i=er(e),o=i.metadatas,l=Mx(o[t],s);return!!l&&Cx(e,i,t,l,r,s)}function Rx(e,t,r){if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return jp(t,e.toJSON());const s=er(e),i=s.metadatas;for(const u in i){const p=Mx(i[u],r);if(!Cx(e,s,u,p,void 0,r))continue;const d=e.get(u),h=S4(e,p,p.write&&typeof p.write.target=="string"?p.write.target:u,d,r);var o,l;Object.keys(h).length>0&&(t=jp(t,h),r!=null&&(o=r.resources)!=null&&(l=o.pendingOperations)!=null&&l.length&&Promise.all(r.resources.pendingOperations).then(()=>jp(t,h)),r&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:u,oldOrigin:BT(s.store.originOf(u)),newOrigin:r.origin}))}return t}const F1=e=>{let t=class extends e{constructor(...r){super(...r);const s=er(this),i=s.store,o=new R1;s.store=o,Tx(s,i,o)}read(r,s){Ax(this,r,s)}write(r={},s){return Rx(this,r,s)}toJSON(r){return this.write({},r)}static fromJSON(r,s){return $4.call(this,r,s)}};return t=n([b("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function $4(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}let F=class extends F1(st){};F=n([b("esri.core.JSONSupport")],F);const M4=Object.prototype.toString;function I4(e){const t="__accessorMetadata__"in e?Je(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return O4.apply(this,r)}}function O4(e,t,r,s){Ph(e,t).cast=s}function E4(e){return function(t,r){Ph(t,e).cast=t[r]}}function ht(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&M4.call(e[0])==="[object Function]"?I4(e[0]):e.length===1&&typeof e[0]=="string"?E4(e[0]):void 0}function K(e,t,r){let s,i;return t===void 0||Array.isArray(t)?(i=e,r=t,s=[void 0]):(i=t,s=Array.isArray(e)?e:[e]),(o,l)=>{const u=o.constructor.prototype;s.forEach(p=>{const d=vx(o,p,i);d.read&&typeof d.read=="object"||(d.read={}),d.read.reader=u[l],r&&(d.read.source=(d.read.source||[]).concat(r))})}}function Y(e,t,r){let s,i;return t===void 0?(i=e,s=[void 0]):typeof t!="string"?(i=e,s=[void 0],r=t):(i=t,s=Array.isArray(e)?e:[e]),(o,l)=>{const u=o.constructor.prototype;for(const p of s){const d=vx(o,p,i);d.write&&typeof d.write=="object"||(d.write={}),r&&(d.write.target=r),d.write.writer=u[l]}}}var Vl;function T4(e,t){switch(e.type){case"range":{const r="range"in e?e.range[0]:e.minValue,s="range"in e?e.range[1]:e.maxValue;if(+t<r||+t>s)return Vl.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(r=>r==null||r.code!==t))return Vl.INVALID_CODED_VALUE}return null}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Vl||(Vl={}));var Ul;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(Ul||(Ul={}));let a;const g={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(a=2e3;a<=2045;a++)g[a]=0;for(a=2056;a<=2065;a++)g[a]=0;for(a=2067;a<=2135;a++)g[a]=0;for(a=2137;a<=2154;a++)g[a]=0;for(a=2161;a<=2170;a++)g[a]=0;for(a=2172;a<=2193;a++)g[a]=0;for(a=2195;a<=2198;a++)g[a]=0;for(a=2200;a<=2203;a++)g[a]=0;for(a=2205;a<=2217;a++)g[a]=0;for(a=2222;a<=2224;a++)g[a]=1;for(a=2225;a<=2250;a++)g[a]=2;for(a=2251;a<=2253;a++)g[a]=1;for(a=2257;a<=2264;a++)g[a]=2;for(a=2274;a<=2279;a++)g[a]=2;for(a=2280;a<=2282;a++)g[a]=1;for(a=2283;a<=2289;a++)g[a]=2;for(a=2290;a<=2292;a++)g[a]=0;for(a=2308;a<=2313;a++)g[a]=0;for(a=2315;a<=2491;a++)g[a]=0;for(a=2494;a<=2866;a++)g[a]=0;for(a=2867;a<=2869;a++)g[a]=1;for(a=2870;a<=2888;a++)g[a]=2;for(a=2891;a<=2895;a++)g[a]=2;for(a=2896;a<=2898;a++)g[a]=1;for(a=2902;a<=2908;a++)g[a]=2;for(a=2915;a<=2920;a++)g[a]=2;for(a=2921;a<=2923;a++)g[a]=1;for(a=2924;a<=2930;a++)g[a]=2;for(a=2931;a<=2962;a++)g[a]=0;for(a=2964;a<=2968;a++)g[a]=2;for(a=2969;a<=2973;a++)g[a]=0;for(a=2975;a<=2991;a++)g[a]=0;for(a=2995;a<=3051;a++)g[a]=0;for(a=3054;a<=3079;a++)g[a]=0;for(a=3081;a<=3088;a++)g[a]=0;for(a=3092;a<=3101;a++)g[a]=0;for(a=3106;a<=3138;a++)g[a]=0;for(a=3146;a<=3151;a++)g[a]=0;for(a=3153;a<=3166;a++)g[a]=0;for(a=3168;a<=3172;a++)g[a]=0;for(a=3174;a<=3203;a++)g[a]=0;for(a=3294;a<=3358;a++)g[a]=0;for(a=3367;a<=3403;a++)g[a]=0;for(a=3408;a<=3416;a++)g[a]=0;for(a=3417;a<=3438;a++)g[a]=2;for(a=3441;a<=3446;a++)g[a]=2;for(a=3447;a<=3450;a++)g[a]=0;for(a=3451;a<=3459;a++)g[a]=2;for(a=3460;a<=3478;a++)g[a]=0;for(a=3554;a<=3559;a++)g[a]=0;for(a=3560;a<=3570;a++)g[a]=2;for(a=3571;a<=3581;a++)g[a]=0;for(a=3594;a<=3597;a++)g[a]=0;for(a=3601;a<=3604;a++)g[a]=0;for(a=3637;a<=3639;a++)g[a]=0;for(a=3665;a<=3667;a++)g[a]=0;for(a=3693;a<=3695;a++)g[a]=0;for(a=3701;a<=3727;a++)g[a]=0;for(a=3728;a<=3739;a++)g[a]=2;for(a=3740;a<=3751;a++)g[a]=0;for(a=3753;a<=3760;a++)g[a]=2;for(a=3761;a<=3773;a++)g[a]=0;for(a=3775;a<=3777;a++)g[a]=0;for(a=3779;a<=3781;a++)g[a]=0;for(a=3783;a<=3785;a++)g[a]=0;for(a=3788;a<=3791;a++)g[a]=0;for(a=3797;a<=3802;a++)g[a]=0;for(a=3814;a<=3816;a++)g[a]=0;for(a=3825;a<=3829;a++)g[a]=0;for(a=3832;a<=3841;a++)g[a]=0;for(a=3844;a<=3852;a++)g[a]=0;for(a=3873;a<=3885;a++)g[a]=0;for(a=3890;a<=3893;a++)g[a]=0;for(a=3907;a<=3912;a++)g[a]=0;for(a=3942;a<=3950;a++)g[a]=0;for(a=3968;a<=3970;a++)g[a]=0;for(a=3973;a<=3976;a++)g[a]=0;for(a=3986;a<=3989;a++)g[a]=0;for(a=3994;a<=3997;a++)g[a]=0;for(a=4048;a<=4051;a++)g[a]=0;for(a=4056;a<=4063;a++)g[a]=0;for(a=4093;a<=4096;a++)g[a]=0;for(a=4390;a<=4398;a++)g[a]=0;for(a=4399;a<=4413;a++)g[a]=2;for(a=4418;a<=4433;a++)g[a]=2;for(a=4455;a<=4457;a++)g[a]=2;for(a=4484;a<=4489;a++)g[a]=0;for(a=4491;a<=4554;a++)g[a]=0;for(a=4568;a<=4589;a++)g[a]=0;for(a=4652;a<=4656;a++)g[a]=0;for(a=4766;a<=4800;a++)g[a]=0;for(a=5014;a<=5016;a++)g[a]=0;for(a=5069;a<=5072;a++)g[a]=0;for(a=5105;a<=5130;a++)g[a]=0;for(a=5173;a<=5188;a++)g[a]=0;for(a=5253;a<=5259;a++)g[a]=0;for(a=5269;a<=5275;a++)g[a]=0;for(a=5292;a<=5311;a++)g[a]=0;for(a=5329;a<=5331;a++)g[a]=0;for(a=5343;a<=5349;a++)g[a]=0;for(a=5355;a<=5357;a++)g[a]=0;for(a=5387;a<=5389;a++)g[a]=0;for(a=5459;a<=5463;a++)g[a]=0;for(a=5479;a<=5482;a++)g[a]=0;for(a=5518;a<=5520;a++)g[a]=0;for(a=5530;a<=5539;a++)g[a]=0;for(a=5550;a<=5552;a++)g[a]=0;for(a=5562;a<=5583;a++)g[a]=0;for(a=5623;a<=5625;a++)g[a]=2;for(a=5631;a<=5639;a++)g[a]=0;for(a=5649;a<=5653;a++)g[a]=0;for(a=5663;a<=5680;a++)g[a]=0;for(a=5682;a<=5685;a++)g[a]=0;for(a=5875;a<=5877;a++)g[a]=0;for(a=5896;a<=5899;a++)g[a]=0;for(a=5921;a<=5940;a++)g[a]=0;for(a=6050;a<=6125;a++)g[a]=0;for(a=6244;a<=6275;a++)g[a]=0;for(a=6328;a<=6348;a++)g[a]=0;for(a=6350;a<=6356;a++)g[a]=0;for(a=6366;a<=6372;a++)g[a]=0;for(a=6381;a<=6387;a++)g[a]=0;for(a=6393;a<=6404;a++)g[a]=0;for(a=6480;a<=6483;a++)g[a]=0;for(a=6511;a<=6514;a++)g[a]=0;for(a=6579;a<=6581;a++)g[a]=0;for(a=6619;a<=6624;a++)g[a]=0;for(a=6625;a<=6627;a++)g[a]=2;for(a=6628;a<=6632;a++)g[a]=0;for(a=6634;a<=6637;a++)g[a]=0;for(a=6669;a<=6692;a++)g[a]=0;for(a=6707;a<=6709;a++)g[a]=0;for(a=6720;a<=6723;a++)g[a]=0;for(a=6732;a<=6738;a++)g[a]=0;for(a=6931;a<=6933;a++)g[a]=0;for(a=6956;a<=6959;a++)g[a]=0;for(a=7005;a<=7007;a++)g[a]=0;for(a=7057;a<=7070;a++)g[a]=2;for(a=7074;a<=7082;a++)g[a]=0;for(a=7109;a<=7118;a++)g[a]=0;for(a=7119;a<=7127;a++)g[a]=1;for(a=7374;a<=7376;a++)g[a]=0;for(a=7528;a<=7586;a++)g[a]=0;for(a=7587;a<=7645;a++)g[a]=2;for(a=7692;a<=7696;a++)g[a]=0;for(a=7755;a<=7787;a++)g[a]=0;for(a=7791;a<=7795;a++)g[a]=0;for(a=7799;a<=7801;a++)g[a]=0;for(a=7803;a<=7805;a++)g[a]=0;for(a=7825;a<=7831;a++)g[a]=0;for(a=7845;a<=7859;a++)g[a]=0;for(a=8013;a<=8032;a++)g[a]=0;for(a=8065;a<=8068;a++)g[a]=1;for(a=8518;a<=8529;a++)g[a]=2;for(a=8533;a<=8536;a++)g[a]=2;for(a=8538;a<=8540;a++)g[a]=2;for(a=8677;a<=8679;a++)g[a]=0;for(a=8836;a<=8840;a++)g[a]=0;for(a=8857;a<=8859;a++)g[a]=0;for(a=8908;a<=8910;a++)g[a]=0;for(a=9154;a<=9159;a++)g[a]=0;for(a=9205;a<=9218;a++)g[a]=0;for(a=9271;a<=9273;a++)g[a]=0;for(a=9295;a<=9297;a++)g[a]=0;for(a=9356;a<=9360;a++)g[a]=0;for(a=9404;a<=9407;a++)g[a]=0;for(a=9476;a<=9482;a++)g[a]=0;for(a=9487;a<=9494;a++)g[a]=0;for(a=9697;a<=9699;a++)g[a]=0;for(a=20002;a<=20032;a++)g[a]=0;for(a=20062;a<=20092;a++)g[a]=0;for(a=20135;a<=20138;a++)g[a]=0;for(a=20248;a<=20258;a++)g[a]=0;for(a=20348;a<=20358;a++)g[a]=0;for(a=20436;a<=20440;a++)g[a]=0;for(a=20822;a<=20824;a++)g[a]=0;for(a=20904;a<=20932;a++)g[a]=0;for(a=20934;a<=20936;a++)g[a]=0;for(a=21004;a<=21032;a++)g[a]=0;for(a=21035;a<=21037;a++)g[a]=0;for(a=21095;a<=21097;a++)g[a]=0;for(a=21148;a<=21150;a++)g[a]=0;for(a=21207;a<=21264;a++)g[a]=0;for(a=21307;a<=21364;a++)g[a]=0;for(a=21413;a<=21423;a++)g[a]=0;for(a=21453;a<=21463;a++)g[a]=0;for(a=21473;a<=21483;a++)g[a]=0;for(a=21780;a<=21782;a++)g[a]=0;for(a=21891;a<=21894;a++)g[a]=0;for(a=21896;a<=21899;a++)g[a]=0;for(a=22171;a<=22177;a++)g[a]=0;for(a=22181;a<=22187;a++)g[a]=0;for(a=22191;a<=22197;a++)g[a]=0;for(a=22234;a<=22236;a++)g[a]=0;for(a=22521;a<=22525;a++)g[a]=0;for(a=22991;a<=22994;a++)g[a]=0;for(a=23028;a<=23038;a++)g[a]=0;for(a=23830;a<=23853;a++)g[a]=0;for(a=23866;a<=23872;a++)g[a]=0;for(a=23877;a<=23884;a++)g[a]=0;for(a=23886;a<=23894;a++)g[a]=0;for(a=23946;a<=23948;a++)g[a]=0;for(a=24311;a<=24313;a++)g[a]=0;for(a=24342;a<=24347;a++)g[a]=0;for(a=24370;a<=24374;a++)g[a]=10;for(a=24375;a<=24381;a++)g[a]=0;for(a=24718;a<=24721;a++)g[a]=0;for(a=24817;a<=24821;a++)g[a]=0;for(a=24877;a<=24882;a++)g[a]=0;for(a=24891;a<=24893;a++)g[a]=0;for(a=25391;a<=25395;a++)g[a]=0;for(a=25828;a<=25838;a++)g[a]=0;for(a=26191;a<=26195;a++)g[a]=0;for(a=26391;a<=26393;a++)g[a]=0;for(a=26701;a<=26722;a++)g[a]=0;for(a=26729;a<=26799;a++)g[a]=2;for(a=26801;a<=26803;a++)g[a]=2;for(a=26811;a<=26813;a++)g[a]=2;for(a=26847;a<=26870;a++)g[a]=2;for(a=26891;a<=26899;a++)g[a]=0;for(a=26901;a<=26923;a++)g[a]=0;for(a=26929;a<=26946;a++)g[a]=0;for(a=26948;a<=26998;a++)g[a]=0;for(a=27037;a<=27040;a++)g[a]=0;for(a=27205;a<=27232;a++)g[a]=0;for(a=27258;a<=27260;a++)g[a]=0;for(a=27391;a<=27398;a++)g[a]=0;for(a=27561;a<=27564;a++)g[a]=0;for(a=27571;a<=27574;a++)g[a]=0;for(a=27581;a<=27584;a++)g[a]=0;for(a=27591;a<=27594;a++)g[a]=0;for(a=28191;a<=28193;a++)g[a]=0;for(a=28348;a<=28358;a++)g[a]=0;for(a=28402;a<=28432;a++)g[a]=0;for(a=28462;a<=28492;a++)g[a]=0;for(a=29118;a<=29122;a++)g[a]=0;for(a=29168;a<=29172;a++)g[a]=0;for(a=29177;a<=29185;a++)g[a]=0;for(a=29187;a<=29195;a++)g[a]=0;for(a=29900;a<=29903;a++)g[a]=0;for(a=30161;a<=30179;a++)g[a]=0;for(a=30491;a<=30494;a++)g[a]=0;for(a=30729;a<=30732;a++)g[a]=0;for(a=31251;a<=31259;a++)g[a]=0;for(a=31265;a<=31268;a++)g[a]=0;for(a=31275;a<=31279;a++)g[a]=0;for(a=31281;a<=31297;a++)g[a]=0;for(a=31461;a<=31469;a++)g[a]=0;for(a=31491;a<=31495;a++)g[a]=0;for(a=31917;a<=31922;a++)g[a]=0;for(a=31965;a<=32e3;a++)g[a]=0;for(a=32001;a<=32003;a++)g[a]=2;for(a=32005;a<=32031;a++)g[a]=2;for(a=32033;a<=32060;a++)g[a]=2;for(a=32064;a<=32067;a++)g[a]=2;for(a=32074;a<=32077;a++)g[a]=2;for(a=32081;a<=32086;a++)g[a]=0;for(a=32107;a<=32130;a++)g[a]=0;for(a=32133;a<=32158;a++)g[a]=0;for(a=32164;a<=32167;a++)g[a]=2;for(a=32180;a<=32199;a++)g[a]=0;for(a=32201;a<=32260;a++)g[a]=0;for(a=32301;a<=32360;a++)g[a]=0;for(a=32601;a<=32662;a++)g[a]=0;for(a=32664;a<=32667;a++)g[a]=2;for(a=32701;a<=32761;a++)g[a]=0;for(a=53001;a<=53004;a++)g[a]=0;for(a=53008;a<=53019;a++)g[a]=0;for(a=53021;a<=53032;a++)g[a]=0;for(a=53034;a<=53037;a++)g[a]=0;for(a=53042;a<=53046;a++)g[a]=0;for(a=53074;a<=53080;a++)g[a]=0;for(a=54001;a<=54004;a++)g[a]=0;for(a=54008;a<=54019;a++)g[a]=0;for(a=54021;a<=54032;a++)g[a]=0;for(a=54034;a<=54037;a++)g[a]=0;for(a=54042;a<=54046;a++)g[a]=0;for(a=54048;a<=54053;a++)g[a]=0;for(a=54074;a<=54080;a++)g[a]=0;for(a=54098;a<=54101;a++)g[a]=0;for(a=102001;a<=102040;a++)g[a]=0;for(a=102042;a<=102063;a++)g[a]=0;for(a=102065;a<=102067;a++)g[a]=0;for(a=102070;a<=102117;a++)g[a]=0;for(a=102122;a<=102216;a++)g[a]=0;for(a=102221;a<=102377;a++)g[a]=0;for(a=102382;a<=102388;a++)g[a]=0;for(a=102389;a<=102398;a++)g[a]=2;for(a=102399;a<=102444;a++)g[a]=0;for(a=102445;a<=102447;a++)g[a]=2;for(a=102448;a<=102458;a++)g[a]=0;for(a=102459;a<=102468;a++)g[a]=2;for(a=102469;a<=102499;a++)g[a]=0;for(a=102500;a<=102519;a++)g[a]=1;for(a=102520;a<=102524;a++)g[a]=0;for(a=102525;a<=102529;a++)g[a]=2;for(a=102530;a<=102588;a++)g[a]=0;for(a=102590;a<=102598;a++)g[a]=0;for(a=102601;a<=102603;a++)g[a]=0;for(a=102605;a<=102628;a++)g[a]=0;for(a=102629;a<=102646;a++)g[a]=2;for(a=102648;a<=102700;a++)g[a]=2;for(a=102701;a<=102703;a++)g[a]=0;for(a=102707;a<=102730;a++)g[a]=2;for(a=102733;a<=102758;a++)g[a]=2;for(a=102767;a<=102900;a++)g[a]=0;for(a=102901;a<=102933;a++)g[a]=2;for(a=102934;a<=102950;a++)g[a]=13;for(a=102951;a<=102960;a++)g[a]=0;for(a=102965;a<=102969;a++)g[a]=0;for(a=102971;a<=102973;a++)g[a]=0;for(a=102975;a<=102989;a++)g[a]=0;for(a=102990;a<=102992;a++)g[a]=1;for(a=102997;a<=103002;a++)g[a]=0;for(a=103003;a<=103008;a++)g[a]=2;for(a=103009;a<=103011;a++)g[a]=0;for(a=103012;a<=103014;a++)g[a]=2;for(a=103019;a<=103021;a++)g[a]=0;for(a=103022;a<=103024;a++)g[a]=2;for(a=103029;a<=103031;a++)g[a]=0;for(a=103032;a<=103034;a++)g[a]=2;for(a=103065;a<=103068;a++)g[a]=0;for(a=103074;a<=103076;a++)g[a]=0;for(a=103077;a<=103079;a++)g[a]=1;for(a=103080;a<=103082;a++)g[a]=0;for(a=103083;a<=103085;a++)g[a]=2;for(a=103090;a<=103093;a++)g[a]=0;for(a=103097;a<=103099;a++)g[a]=0;for(a=103100;a<=103102;a++)g[a]=2;for(a=103107;a<=103109;a++)g[a]=0;for(a=103110;a<=103112;a++)g[a]=2;for(a=103113;a<=103116;a++)g[a]=0;for(a=103117;a<=103120;a++)g[a]=2;for(a=103153;a<=103157;a++)g[a]=0;for(a=103158;a<=103162;a++)g[a]=2;for(a=103163;a<=103165;a++)g[a]=0;for(a=103166;a<=103168;a++)g[a]=1;for(a=103169;a<=103171;a++)g[a]=2;for(a=103186;a<=103188;a++)g[a]=0;for(a=103189;a<=103191;a++)g[a]=2;for(a=103192;a<=103195;a++)g[a]=0;for(a=103196;a<=103199;a++)g[a]=2;for(a=103200;a<=103224;a++)g[a]=0;for(a=103225;a<=103227;a++)g[a]=1;for(a=103232;a<=103237;a++)g[a]=0;for(a=103238;a<=103243;a++)g[a]=2;for(a=103244;a<=103246;a++)g[a]=0;for(a=103247;a<=103249;a++)g[a]=2;for(a=103254;a<=103256;a++)g[a]=0;for(a=103257;a<=103259;a++)g[a]=2;for(a=103264;a<=103266;a++)g[a]=0;for(a=103267;a<=103269;a++)g[a]=2;for(a=103300;a<=103375;a++)g[a]=0;for(a=103381;a<=103383;a++)g[a]=0;for(a=103384;a<=103386;a++)g[a]=1;for(a=103387;a<=103389;a++)g[a]=0;for(a=103390;a<=103392;a++)g[a]=2;for(a=103397;a<=103399;a++)g[a]=0;for(a=103400;a<=103471;a++)g[a]=2;for(a=103476;a<=103478;a++)g[a]=0;for(a=103479;a<=103481;a++)g[a]=2;for(a=103486;a<=103488;a++)g[a]=0;for(a=103489;a<=103491;a++)g[a]=2;for(a=103492;a<=103495;a++)g[a]=0;for(a=103496;a<=103499;a++)g[a]=2;for(a=103528;a<=103543;a++)g[a]=0;for(a=103544;a<=103548;a++)g[a]=2;for(a=103549;a<=103551;a++)g[a]=0;for(a=103552;a<=103554;a++)g[a]=1;for(a=103555;a<=103557;a++)g[a]=2;for(a=103558;a<=103560;a++)g[a]=0;for(a=103571;a<=103573;a++)g[a]=0;for(a=103574;a<=103576;a++)g[a]=2;for(a=103577;a<=103580;a++)g[a]=0;for(a=103581;a<=103583;a++)g[a]=2;for(a=103595;a<=103694;a++)g[a]=0;for(a=103696;a<=103699;a++)g[a]=0;for(a=103700;a<=103793;a++)g[a]=2;for(a=103794;a<=103872;a++)g[a]=0;for(a=103900;a<=103971;a++)g[a]=2;const j4={102113:!0,102100:!0,3857:!0,3785:!0},A4={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0},cw='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',Hc=[-20037508342788905e-9,20037508342788905e-9],Kc=[-20037508342787e-6,20037508342787e-6],Fx={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Hc,origin:Kc,dx:1e-5},102100:{wkTemplate:cw,valid:Hc,origin:Kc,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Hc,origin:Kc,dx:1e-5},3857:{wkTemplate:cw,valid:Hc,origin:Kc,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function fc(e,t){return!X(e)&&!X(t)&&(e===t||(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||ql(e)&&ql(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))}function Fp(e){return $i(e)&&e.wkid?Fx[e.wkid]:null}function C4(e){return!!$i(e)&&(e.wkid?g[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function R4(e){return!(N1(e)||L1(e))}function Xd(e){return $i(e)&&e.wkid===4326}function lU(e){return $i(e)&&e.wkid===Ul.CGCS2000}function ql(e){return $i(e)&&e.wkid!=null&&j4[e.wkid]===!0}function aU(e){return $i(e)&&e.wkid===32662}function k1(e){return e===Ul.GCSMARS2000||e===Ul.GCSMARS2000_SPHERE}function N1(e){return $i(e)&&e.wkid!=null&&k1(e.wkid)}function P1(e){return e===Ul.GCSMOON2000}function L1(e){return $i(e)&&e.wkid!=null&&P1(e.wkid)}function F4(e){return $i(e)&&e.wkid!=null&&A4[e.wkid]===!0}function $i(e){return T(e)&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const k4={wkid:4326,wkt:Fh(Fx[4326].wkTemplate,{Central_Meridian:"0.0"})},N4={wkid:102100,latestWkid:3857},P4={wkid:32662};var ws;let ze=ws=class extends F{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return ws.WebMercator;if(e.wkid===4326)return ws.WGS84}const t=new ws;return t.read(e),t}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return Xd(this)}get isWebMercator(){return ql(this)}get isGeographic(){return C4(this)}get isWrappable(){return F4(this)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===ws.WGS84)return ws.WGS84;if(this===ws.WebMercator)return ws.WebMercator;const e=new ws;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=E(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:s}=e.imageCoordinateSystem,i=this.imageCoordinateSystem;return t==null||s?JSON.stringify(i)===JSON.stringify(e.imageCoordinateSystem):r?i.id===t&&i.referenceServiceName===r:i.id===t}return fc(this,e)}toJSON(e){return this.write(void 0,e)}};ze.GCS_NAD_1927=null,ze.WGS84=null,ze.WebMercator=null,ze.PlateCarree=null,n([c({readOnly:!0})],ze.prototype,"isWGS84",null),n([c({readOnly:!0})],ze.prototype,"isWebMercator",null),n([c({readOnly:!0})],ze.prototype,"isGeographic",null),n([c({readOnly:!0})],ze.prototype,"isWrappable",null),n([c({type:_t,json:{write:!0}})],ze.prototype,"latestWkid",void 0),n([c({type:_t,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],ze.prototype,"wkid",void 0),n([c({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],ze.prototype,"wkt",void 0),n([Y("wkt"),Y("web-scene","wkt")],ze.prototype,"writeWkt",null),n([c({type:_t,json:{write:!0}})],ze.prototype,"vcsWkid",void 0),n([c({type:_t,json:{write:!0}})],ze.prototype,"latestVcsWkid",void 0),n([c()],ze.prototype,"imageCoordinateSystem",void 0),ze=ws=n([b("esri.geometry.SpatialReference")],ze),ze.prototype.toJSON.isDefaultToJSON=!0,ze.GCS_NAD_1927=new ze({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),ze.WGS84=new ze(k4),ze.WebMercator=new ze(N4),ze.PlateCarree=new ze(P4),Object.freeze&&(Object.freeze(ze.GCS_NAD_1927),Object.freeze(ze.WGS84),Object.freeze(ze.WebMercator));const Ae=ze;let Ss=class extends F{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Ae.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof Ae)return e;if(e!=null){const r=new Ae;return r.read(e,t),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};n([c()],Ss.prototype,"type",void 0),n([c({readOnly:!0})],Ss.prototype,"cache",null),n([c({readOnly:!0})],Ss.prototype,"extent",null),n([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ss.prototype,"hasM",void 0),n([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ss.prototype,"hasZ",void 0),n([c({type:Ae,json:{write:!0}})],Ss.prototype,"spatialReference",void 0),n([K("spatialReference")],Ss.prototype,"readSpatialReference",null),Ss=n([b("esri.geometry.Geometry")],Ss);const Nn=Ss;function L4(e,t,r,s){var i;return e.x=e.x+t,e.y=e.y+r,s!=null&&(e.z=((i=e.z)!=null?i:0)+s),e}function D4(e,t){const r=e.x-t.x,s=e.y-t.y,i=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(r*r+s*s+i*i)}class D1{constructor(t,r,s,i){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=s;const o=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*o,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=i||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const Lr=new D1(6378137,1/298.257223563,3e5,.006694379990137799),Jh=new D1(3396190,1/169.8944472236118,23e4),Wh=new D1(1737400,0,0),z4=57.29577951308232,V4=.017453292519943;function pw(e){return e*z4}function dw(e){return e*V4}function uU(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Lr.radius))}function Jy(e){return e.wkid!=null||e.wkt!=null}const Nf=[0,0];function eh(e,t,r,s,i){const o=e,l=i;if(l.spatialReference=r,"x"in o&&"x"in l)[l.x,l.y]=t(o.x,o.y,Nf,s);else if("xmin"in o&&"xmin"in l)[l.xmin,l.ymin]=t(o.xmin,o.ymin,Nf,s),[l.xmax,l.ymax]=t(o.xmax,o.ymax,Nf,s);else if("paths"in o&&"paths"in l||"rings"in o&&"rings"in l){const u="paths"in o?o.paths:o.rings,p=[];let d;for(let h=0;h<u.length;h++){const f=u[h];d=[],p.push(d);for(let y=0;y<f.length;y++)d.push(t(f[y][0],f[y][1],[0,0],s)),f[y].length>2&&d[y].push(f[y][2]),f[y].length>3&&d[y].push(f[y][3])}"paths"in l?l.paths=p:l.rings=p}else if("points"in o&&"points"in l){const u=o.points,p=[];for(let d=0;d<u.length;d++)p[d]=t(u[d][0],u[d][1],[0,0],s),u[d].length>2&&p[d].push(u[d][2]),u[d].length>3&&p[d].push(u[d][3]);l.points=p}return i}function kp(e,t){const r=e&&(Jy(e)?e:e.spatialReference),s=t&&(Jy(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!s)&&(!!fc(s,r)||ql(s)&&Xd(r)||ql(r)&&Xd(s))}function kx(e,t){if(X(e))return null;const r=e.spatialReference,s=t&&(Jy(t)?t:t.spatialReference);return kp(r,s)?fc(r,s)?E(e):ql(s)?eh(e,bl,Ae.WebMercator,!1,E(e)):Xd(s)?eh(e,$u,Ae.WGS84,!1,E(e)):null:null}function bl(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const s=dw(t);return r[0]=dw(e)*Lr.radius,r[1]=Lr.halfSemiMajorAxis*Math.log((1+Math.sin(s))/(1-Math.sin(s))),r}function $u(e,t,r=[0,0],s=!1){const i=pw(e/Lr.radius);return r[0]=s?i:i-360*Math.floor((i+180)/360),r[1]=pw(Math.PI/2-2*Math.atan(Math.exp(-t/Lr.radius))),r}function Np(e,t=!1,r=E(e)){return eh(e,bl,Ae.WebMercator,t,r)}function Qc(e,t=!1,r=E(e)){return eh(e,$u,Ae.WGS84,t,r)}var Pp;const Sa=[0,0];function hw(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}const Zc=Z.getLogger("esri.geometry.Point");let Ht=Pp=class extends Nn{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(r)?r:r.clone())}normalizeCtorArgs(e,t,r,s,i){let o;if(Array.isArray(e))o=e,i=t,e=o[0],t=o[1],r=o[2],s=o[3];else if(e&&typeof e=="object"){if(o=e,e=o.x!=null?o.x:o.longitude,t=o.y!=null?o.y:o.latitude,r=o.z,s=o.m,(i=o.spatialReference)&&i.declaredClass!=="esri.geometry.SpatialReference"&&(i=new Ae(i)),o.longitude!=null||o.latitude!=null){if(o.longitude==null)Zc.warn(".longitude=","Latitude was defined without longitude");else if(o.latitude==null)Zc.warn(".latitude=","Longitude was defined without latitude");else if(!o.declaredClass&&i&&i.isWebMercator){const u=bl(o.longitude,o.latitude,Sa);e=u[0],t=u[1]}}}else hw(r)?(i=r,r=null):hw(s)&&(i=s,s=null);const l={x:e,y:t};return l.x==null&&l.y!=null?Zc.warn(".y=","Y coordinate was defined without an X coordinate"):l.y==null&&l.x!=null&&Zc.warn(".x=","X coordinate was defined without a Y coordinate"),i!=null&&(l.spatialReference=i),r!=null&&(l.z=r),s!=null&&(l.m=s),l}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:r}=this;if(e){if(e.isWebMercator)return $u(t,r,Sa)[1];if(e.isGeographic)return r}return null}set latitude(e){const{spatialReference:t,x:r}=this;t&&(t.isWebMercator?this._set("y",bl(r,e,Sa)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:r}=this;if(r){if(r.isWebMercator)return $u(e,t,Sa)[0];if(r.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:r}=this;r&&(r.isWebMercator?this._set("x",bl(e,t,Sa)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new Pp;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return Pp.copy(e,this),this}equals(e){if(X(e))return!1;const{x:t,y:r,z:s,m:i,spatialReference:o}=this,{z:l,m:u}=e;let{x:p,y:d,spatialReference:h}=e;if(!o.equals(h))if(o.isWebMercator&&h.isWGS84)[p,d]=bl(p,d),h=o;else{if(!o.isWGS84||!h.isWebMercator)return!1;[p,d]=$u(p,d),h=o}return t===p&&r===d&&s===l&&i===u&&o.wkid===h.wkid}offset(e,t,r){return L4(this,e,t,r)}normalize(){if(!this.spatialReference)return this;const e=Fp(this.spatialReference);if(!e)return this;let t=this.x;const[r,s]=e.valid,i=2*s;let o;return t>s?(o=Math.ceil(Math.abs(t-s)/i),t-=o*i):t<r&&(o=Math.ceil(Math.abs(t-r)/i),t+=o*i),this._set("x",t),this}distance(e){return D4(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};n([c({readOnly:!0})],Ht.prototype,"cache",null),n([c({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Ht.prototype,"hasM",null),n([c({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Ht.prototype,"hasZ",null),n([c({type:Number})],Ht.prototype,"latitude",null),n([c({type:Number})],Ht.prototype,"longitude",null),n([c({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),ht(e=>isNaN(e)?e:qh(e))],Ht.prototype,"x",void 0),n([Y("x")],Ht.prototype,"writeX",null),n([K("x")],Ht.prototype,"readX",null),n([c({type:Number,json:{write:!0}})],Ht.prototype,"y",void 0),n([c({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Ht.prototype,"z",void 0),n([c({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Ht.prototype,"m",void 0),Ht=Pp=n([b("esri.geometry.Point")],Ht),Ht.prototype.toJSON.isDefaultToJSON=!0;const Ke=Ht,Pf=[0,0];function Nx(e,t){return!!T(t)&&Zt(e,t.x,t.y,t.z)}function cU(e,t){if(!t.points||t.points.length)return!1;for(const r of t.points)if(!Bl(e,r))return!1;return!0}function U4(e,t){const{xmin:r,ymin:s,zmin:i,xmax:o,ymax:l,zmax:u}=t;return e.hasZ&&t.hasZ?Zt(e,r,s,i)&&Zt(e,r,l,i)&&Zt(e,o,l,i)&&Zt(e,o,s,i)&&Zt(e,r,s,u)&&Zt(e,r,l,u)&&Zt(e,o,l,u)&&Zt(e,o,s,u):Zt(e,r,s)&&Zt(e,r,l)&&Zt(e,o,l)&&Zt(e,o,s)}function Bl(e,t){return Zt(e,t[0],t[1])}function q4(e,t){return Zt(e,t[0],t[1],t[2])}function Zt(e,t,r,s){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(s==null||!e.hasZ||s>=e.zmin&&s<=e.zmax)}function B4(e,t){return Pf[1]=t.y,Pf[0]=t.x,Px(e,Pf)}function Px(e,t){return G4(e.rings,t)}function G4(e,t){if(!e)return!1;if(J4(e))return fw(!1,e,t);let r=!1;for(let s=0,i=e.length;s<i;s++)r=fw(r,e[s],t);return r}function J4(e){return!Array.isArray(e[0][0])}function fw(e,t,r){const[s,i]=r;let o=e,l=0;for(let u=0,p=t.length;u<p;u++){l++,l===p&&(l=0);const[d,h]=t[u],[f,y]=t[l];(h<i&&y>=i||y<i&&h>=i)&&d+(i-h)/(y-h)*(f-d)<s&&(o=!o)}return o}function W4(e,t){return Nx(e,t)}function H4(e,t){const r=e.hasZ&&t.hasZ;let s,i,o;if(e.xmin<=t.xmin){if(s=t.xmin,e.xmax<s)return!1}else if(s=e.xmin,t.xmax<s)return!1;if(e.ymin<=t.ymin){if(i=t.ymin,e.ymax<i)return!1}else if(i=e.ymin,t.ymax<i)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(o=t.zmin,e.zmax<o)return!1}else if(o=e.zmin,t.zmax<o)return!1}return!0}function K4(e,t){const{points:r,hasZ:s}=t,i=s?q4:Bl;for(const o of r)if(i(e,o))return!0;return!1}const En=[0,0],Tn=[0,0],jn=[0,0],An=[0,0],Q4=[En,Tn,jn,An],Lx=[[jn,En],[En,Tn],[Tn,An],[An,jn]];function Z4(e,t){En[0]=e.xmin,En[1]=e.ymax,Tn[0]=e.xmax,Tn[1]=e.ymax,jn[0]=e.xmin,jn[1]=e.ymin,An[0]=e.xmax,An[1]=e.ymin;for(const r of Q4)if(Px(t,r))return!0;for(const r of t.rings){if(!r.length)continue;let s=r[0];if(Bl(e,s))return!0;for(let i=1;i<r.length;i++){const o=r[i];if(Bl(e,o)||Dx(s,o,Lx))return!0;s=o}}return!1}function Y4(e,t){En[0]=e.xmin,En[1]=e.ymax,Tn[0]=e.xmax,Tn[1]=e.ymax,jn[0]=e.xmin,jn[1]=e.ymin,An[0]=e.xmax,An[1]=e.ymin;const r=t.paths;for(const s of r){if(!r.length)continue;let i=s[0];if(Bl(e,i))return!0;for(let o=1;o<s.length;o++){const l=s[o];if(Bl(e,l)||Dx(i,l,Lx))return!0;i=l}}return!1}const jt=[0,0];function X4(e){for(let t=0;t<e.length;t++){const r=e[t];for(let i=0;i<r.length-1;i++){const o=r[i],l=r[i+1];for(let u=t+1;u<e.length;u++)for(let p=0;p<e[u].length-1;p++){const d=e[u][p],h=e[u][p+1];if(Wy(o,l,d,h,jt)&&!(jt[0]===o[0]&&jt[1]===o[1]||jt[0]===d[0]&&jt[1]===d[1]||jt[0]===l[0]&&jt[1]===l[1]||jt[0]===h[0]&&jt[1]===h[1]))return!0}}const s=r.length;if(!(s<=4))for(let i=0;i<s-3;i++){let o=s-1;i===0&&(o=s-2);const l=r[i],u=r[i+1];for(let p=i+2;p<o;p++){const d=r[p],h=r[p+1];if(Wy(l,u,d,h,jt)&&!(jt[0]===l[0]&&jt[1]===l[1]||jt[0]===d[0]&&jt[1]===d[1]||jt[0]===u[0]&&jt[1]===u[1]||jt[0]===h[0]&&jt[1]===h[1]))return!0}}}return!1}function Dx(e,t,r){for(let s=0;s<r.length;s++)if(Wy(e,t,r[s][0],r[s][1]))return!0;return!1}function Wy(e,t,r,s,i){const[o,l]=e,[u,p]=t,[d,h]=r,[f,y]=s,m=f-d,v=o-d,_=u-o,S=y-h,M=l-h,k=p-l,D=S*_-m*k;if(D===0)return!1;const P=(m*M-S*v)/D,N=(_*M-k*v)/D;return P>=0&&P<=1&&N>=0&&N<=1&&(i&&(i[0]=o+P*(u-o),i[1]=l+P*(p-l)),!0)}function eA(e){switch(e){case"esriGeometryEnvelope":case"extent":return H4;case"esriGeometryMultipoint":case"multipoint":return K4;case"esriGeometryPoint":case"point":return W4;case"esriGeometryPolygon":case"polygon":return Z4;case"esriGeometryPolyline":case"polyline":return Y4}}var Tr;function tA(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Ni(e,t,r){return t==null?r:r==null?t:e(t,r)}let $t=Tr=class extends Nn{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,s,i){return tA(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?Ae.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:s,spatialReference:i==null?Ae.WGS84:i}}static fromBounds(e,t){return new Tr({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new Tr({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new Ke({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Tr;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&kp(t,r)&&(e=t.isWebMercator?Np(e):Qc(e,!0)),e.type==="point"?Nx(this,e):e.type==="extent"&&U4(this,e)}equals(e){if(this===e)return!0;if(X(e))return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&kp(t,r)&&(e=t.isWebMercator?Np(e):Qc(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,s=this.height*t;if(this.xmin+=r,this.ymin+=s,this.xmax-=r,this.ymax-=s,this.hasZ){const i=(this.zmax-this.zmin)*t;this.zmin+=i,this.zmax-=i}if(this.hasM){const i=(this.mmax-this.mmin)*t;this.mmin+=i,this.mmax-=i}return this}intersects(e){if(X(e))return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&kp(t,r)&&(e=t.isWebMercator?Np(e):Qc(e,!0)),eA(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Ni(Math.min,this.zmin,e.zmin),this.zmax=Ni(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Ni(Math.min,this.mmin,e.mmin),this.mmax=Ni(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:X(e)||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Ni(Math.max,this.zmin,e.zmin),this.zmax=Ni(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Ni(Math.max,this.mmin,e.mmin),this.mmax=Ni(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=Fp(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const s=t.isWebMercator?Qc(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(s.x=this._normalizeX(s.x,e).x),this.spatialReference=new Ae(Fh(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(e){let t=null;const[r,s]=e.valid,i=this.xmin,o=this.xmax;return i>=r&&i<=s&&o>=r&&o<=s||(t=this.center),t}_normalize(e,t,r){const s=this.spatialReference;if(!s)return this;if(!(r=r||Fp(s)))return this;const i=this._getParts(r).map(u=>u.extent);if(i.length<2)return i[0]||this;if(i.length>2)return e?this._shiftCM(r):this.set({xmin:r.valid[0],xmax:r.valid[1]});if(e)return this._shiftCM(r);if(t)return i;let o=!0,l=!0;return i.forEach(u=>{u.hasZ||(o=!1),u.hasM||(l=!1)}),{rings:i.map(u=>{const p=[[u.xmin,u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]];if(o){const d=(u.zmax-u.zmin)/2;for(let h=0;h<p.length;h++)p[h].push(d)}if(l){const d=(u.mmax-u.mmin)/2;for(let h=0;h<p.length;h++)p[h].push(d)}return p}),hasZ:o,hasM:l,spatialReference:s}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:i,ymax:o,spatialReference:l}=this,u=this.width,p=this.xmin,d=this.xmax;let h;e=e||Fp(l);const[f,y]=e.valid;h=this._normalizeX(this.xmin,e);const m=h.x,v=h.frameId;h=this._normalizeX(this.xmax,e);const _=h.x,S=h.frameId,M=m===_&&u>0;if(u>2*y){const k=new Tr(p<d?m:_,i,y,o,l),D=new Tr(f,i,p<d?_:m,o,l),P=new Tr(0,i,y,o,l),N=new Tr(f,i,0,o,l),J=[],Se=[];k.contains(P)&&J.push(v),k.contains(N)&&Se.push(v),D.contains(P)&&J.push(S),D.contains(N)&&Se.push(S);for(let re=v+1;re<S;re++)J.push(re),Se.push(re);t.push({extent:k,frameIds:[v]},{extent:D,frameIds:[S]},{extent:P,frameIds:J},{extent:N,frameIds:Se})}else m>_||M?t.push({extent:new Tr(m,i,y,o,l),frameIds:[v]},{extent:new Tr(f,i,_,o,l),frameIds:[S]}):t.push({extent:new Tr(m,i,_,o,l),frameIds:[v]});this.cache._parts=t}const r=this.hasZ,s=this.hasM;if(r||s){const i={};r&&(i.zmin=this.zmin,i.zmax=this.zmax),s&&(i.mmin=this.mmin,i.mmax=this.mmax);for(let o=0;o<t.length;o++)t[o].extent.set(i)}return t}_normalizeX(e,t){const[r,s]=t.valid,i=2*s;let o,l=0;return e>s?(o=Math.ceil(Math.abs(e-s)/i),e-=o*i,l=o):e<r&&(o=Math.ceil(Math.abs(e-r)/i),e+=o*i,l=-o),{x:e,frameId:l}}};n([c({readOnly:!0})],$t.prototype,"cache",null),n([c({readOnly:!0})],$t.prototype,"center",null),n([c({readOnly:!0})],$t.prototype,"extent",null),n([c({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],$t.prototype,"hasM",null),n([c({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],$t.prototype,"hasZ",null),n([c({readOnly:!0})],$t.prototype,"height",null),n([c({readOnly:!0})],$t.prototype,"width",null),n([c({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],$t.prototype,"xmin",void 0),n([c({type:Number,json:{write:!0}})],$t.prototype,"ymin",void 0),n([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],$t.prototype,"mmin",void 0),n([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],$t.prototype,"zmin",void 0),n([c({type:Number,json:{write:!0}})],$t.prototype,"xmax",void 0),n([c({type:Number,json:{write:!0}})],$t.prototype,"ymax",void 0),n([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],$t.prototype,"mmax",void 0),n([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],$t.prototype,"zmax",void 0),$t=Tr=n([b("esri.geometry.Extent")],$t),$t.prototype.toJSON.isDefaultToJSON=!0;const ft=$t;function Gl(e,t,r=!1){let{hasM:s,hasZ:i}=e;Array.isArray(t)?t.length!==4||s||i?t.length===3&&r&&!s?(i=!0,s=!1):t.length===3&&s&&i&&(s=!1,i=!1):(s=!0,i=!0):(i=!i&&t.hasZ&&(!s||t.hasM),s=!s&&t.hasM&&(!i||t.hasZ)),e.hasZ=i,e.hasM=s}var Hy;function yw(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function rA(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Di=Hy=class extends Nn{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return null;const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):rA(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const s=r.points&&r.points[0];return s&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=s.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=s.length>3:r.hasM===void 0&&(r.hasM=s.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new ft,r=this.hasZ,s=this.hasM,i=r?3:2,o=e[0],l=yw(Math.min),u=yw(Math.max);let p,d,h,f,[y,m]=o,[v,_]=o;for(let S=0,M=e.length;S<M;S++){const k=e[S],[D,P]=k;if(y=l(y,D),m=l(m,P),v=u(v,D),_=u(_,P),r&&k.length>2){const N=k[2];p=l(p,N),h=u(h,N)}if(s&&k.length>i){const N=k[i];d=l(d,N),f=u(f,N)}}return t.xmin=y,t.ymin=m,t.xmax=v,t.ymax=_,t.spatialReference=this.spatialReference,r?(t.zmin=p,t.zmax=h):(t.zmin=null,t.zmax=null),s?(t.mmin=d,t.mmax=f):(t.mmin=null,t.mmax=null),t}writePoints(e,t){t.points=E(this.points)}addPoint(e){return Gl(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:E(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new Hy(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let s=2;return this.hasZ&&(r.z=t[2],s=3),this.hasM&&(r.m=t[s]),new Ke(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new Ke(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Gl(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};n([c({readOnly:!0})],Di.prototype,"cache",null),n([c()],Di.prototype,"extent",null),n([c({type:[[Number]],json:{write:{isRequired:!0}}})],Di.prototype,"points",void 0),n([Y("points")],Di.prototype,"writePoints",null),Di=Hy=n([b("esri.geometry.Multipoint")],Di),Di.prototype.toJSON.isDefaultToJSON=!0;const z1=Di;function sA(e,t){const r=t[0]-e[0],s=t[1]-e[1];if(e.length>2&&t.length>2){const i=e[2]-t[2];return Math.sqrt(r*r+s*s+i*i)}return Math.sqrt(r*r+s*s)}function iA(e,t,r){const s=e[0]+r*(t[0]-e[0]),i=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[s,i,e[2]+r*(t[2]-e[2])]:[s,i]}function oA(e,t){return iA(e,t,.5)}function nA(e,t,r){const s=e.length;let i=0,o=0,l=0;for(let u=0;u<s;u++){const p=e[u],d=e[(u+1)%s];let h=2;i+=p[0]*d[1]-d[0]*p[1],p.length>2&&d.length>2&&r&&(o+=p[0]*d[2]-d[0]*p[2],h=3),p.length>h&&d.length>h&&t&&(l+=p[0]*d[h]-d[0]*p[h])}return i<=0&&o<=0&&l<=0}function pU(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function lA(e){return e?aA(e.rings,e.hasZ):null}function aA(e,t){if(!e||!e.length)return null;const r=[],s=[],i=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let o=0,l=e.length;o<l;o++){const u=uA(e[o],t,i);u&&s.push(u)}if(s.sort((o,l)=>{let u=o[2]-l[2];return u===0&&t&&(u=o[4]-l[4]),u}),s.length&&(r[0]=s[0][0],r[1]=s[0][1],t&&(r[2]=s[0][3]),(r[0]<i[0]||r[0]>i[1]||r[1]<i[2]||r[1]>i[3]||t&&(r[2]<i[4]||r[2]>i[5]))&&(r.length=0)),!r.length){const o=e[0]&&e[0].length?cA(e[0],t):null;if(!o)return null;r[0]=o[0],r[1]=o[1],t&&o.length>2&&(r[2]=o[2])}return r}function uA(e,t,r){let s=0,i=0,o=0,l=0,u=0;const p=e.length?e[0][0]:0,d=e.length?e[0][1]:0,h=e.length&&t?e[0][2]:0;for(let y=0;y<e.length;y++){const m=e[y],v=e[(y+1)%e.length],[_,S,M]=m,k=_-p,D=S-d,P=t?M-h:void 0,[N,J,Se]=v,re=N-p,de=J-d,ie=t?Se-h:void 0,ge=k*de-re*D;if(l+=ge,s+=(k+re)*ge,i+=(D+de)*ge,t&&m.length>2&&v.length>2){const Ie=k*ie-re*P;o+=(P+ie)*Ie,u+=Ie}_<r[0]&&(r[0]=_),_>r[1]&&(r[1]=_),S<r[2]&&(r[2]=S),S>r[3]&&(r[3]=S),t&&(M<r[4]&&(r[4]=M),M>r[5]&&(r[5]=M))}if(l>0&&(l*=-1),u>0&&(u*=-1),!l)return null;l*=.5,u*=.5;const f=[s/(6*l)+p,i/(6*l)+d,l];return t&&(r[4]===r[5]||u===0?(f[3]=(r[4]+r[5])/2,f[4]=0):(f[3]=o/(6*u)+h,f[4]=u)),f}function cA(e,t){const r=t?[0,0,0]:[0,0],s=t?[0,0,0]:[0,0];let i=0,o=0,l=0,u=0;for(let p=0,d=e.length;p<d-1;p++){const h=e[p],f=e[p+1];if(h&&f){r[0]=h[0],r[1]=h[1],s[0]=f[0],s[1]=f[1],t&&h.length>2&&f.length>2&&(r[2]=h[2],s[2]=f[2]);const y=sA(r,s);if(y){i+=y;const m=oA(h,f);o+=y*m[0],l+=y*m[1],t&&m.length>2&&(u+=y*m[2])}}}return i>0?t?[o/i,l/i,u/i]:[o/i,l/i]:e.length?e[0]:null}function zx(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Vx(e){return e.points!==void 0}function Ux(e){return e.x!==void 0&&e.y!==void 0}function qx(e){return e.paths!==void 0}function Bx(e){return e.rings!==void 0}function Gx(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}const ho=Gx(Math.min),fo=Gx(Math.max);function dU(e,t){return qx(t)?Jl(e,t.paths,!1,!1):Bx(t)?Jl(e,t.rings,!1,!1):Vx(t)?V1(e,t.points,!1,!1,!1,!1):zx(t)?Jx(e,t):(Ux(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function hU(e,t){return qx(t)?Jl(e,t.paths,!0,!1):Bx(t)?Jl(e,t.rings,!0,!1):Vx(t)?V1(e,t.points,!0,!1,!0,!1):zx(t)?Jx(e,t,!0,!1,!0,!1):(Ux(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Jl(e,t,r,s){const i=r?3:2;if(!t.length||!t[0].length)return null;let o,l,u,p,[d,h]=t[0][0],[f,y]=t[0][0];for(let m=0;m<t.length;m++){const v=t[m];for(let _=0;_<v.length;_++){const S=v[_],[M,k]=S;if(d=ho(d,M),h=ho(h,k),f=fo(f,M),y=fo(y,k),r&&S.length>2){const D=S[2];o=ho(o,D),l=fo(l,D)}if(s&&S.length>i){const D=S[i];u=ho(o,D),p=fo(l,D)}}}return r?s?(e[0]=d,e[1]=h,e[2]=o,e[3]=u,e[4]=f,e[5]=y,e[6]=l,e[7]=p,e.length=8,e):(e[0]=d,e[1]=h,e[2]=o,e[3]=f,e[4]=y,e[5]=l,e.length=6,e):s?(e[0]=d,e[1]=h,e[2]=u,e[3]=f,e[4]=y,e[5]=p,e.length=6,e):(e[0]=d,e[1]=h,e[2]=f,e[3]=y,e.length=4,e)}function Jx(e,t,r,s,i,o){const l=t.xmin,u=t.xmax,p=t.ymin,d=t.ymax;let h=t.zmin,f=t.zmax,y=t.mmin,m=t.mmax;return i?(h=h||0,f=f||0,o?(y=y||0,m=m||0,e[0]=l,e[1]=p,e[2]=h,e[3]=y,e[4]=u,e[5]=d,e[6]=f,e[7]=m,e):(e[0]=l,e[1]=p,e[2]=h,e[3]=u,e[4]=d,e[5]=f,e)):o?(y=y||0,m=m||0,e[0]=l,e[1]=p,e[2]=y,e[3]=u,e[4]=d,e[5]=m,e):(e[0]=l,e[1]=p,e[2]=u,e[3]=d,e)}function V1(e,t,r,s,i,o){const l=r?3:2,u=s&&o,p=r&&i;if(!t.length||!t[0].length)return null;let d,h,f,y,[m,v]=t[0],[_,S]=t[0];for(let M=0;M<t.length;M++){const k=t[M],[D,P]=k;if(m=ho(m,D),v=ho(v,P),_=fo(_,D),S=fo(S,P),p&&k.length>2){const N=k[2];d=ho(d,N),h=fo(h,N)}if(u&&k.length>l){const N=k[l];f=ho(d,N),y=fo(h,N)}}return i?(d=d||0,h=h||0,o?(f=f||0,y=y||0,e[0]=m,e[1]=v,e[2]=d,e[3]=f,e[4]=_,e[5]=S,e[6]=h,e[7]=y,e):(e[0]=m,e[1]=v,e[2]=d,e[3]=_,e[4]=S,e[5]=h,e)):o?(f=f||0,y=y||0,e[0]=m,e[1]=v,e[2]=f,e[3]=_,e[4]=S,e[5]=y,e):(e[0]=m,e[1]=v,e[2]=_,e[3]=S,e)}function pA(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function dA(e){return e.points!==void 0}function hA(e){return e.x!==void 0&&e.y!==void 0}function fA(e){return e.paths!==void 0}function yA(e){return e.rings!==void 0}const U1=[];function Wx(e,t,r,s){return{xmin:e,ymin:t,xmax:r,ymax:s}}function Hx(e,t,r,s,i,o){return{xmin:e,ymin:t,zmin:r,xmax:s,ymax:i,zmax:o}}function Kx(e,t,r,s,i,o){return{xmin:e,ymin:t,mmin:r,xmax:s,ymax:i,mmax:o}}function Qx(e,t,r,s,i,o,l,u){return{xmin:e,ymin:t,zmin:r,mmin:s,xmax:i,ymax:o,zmax:l,mmax:u}}function q1(e,t=!1,r=!1){return t?r?Qx(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):Hx(e[0],e[1],e[2],e[3],e[4],e[5]):r?Kx(e[0],e[1],e[2],e[3],e[4],e[5]):Wx(e[0],e[1],e[2],e[3])}function fU(e){return e?pA(e)?e:hA(e)?gA(e):yA(e)?Zx(e):fA(e)?Yx(e):dA(e)?mA(e):null:null}function mA(e){const{hasZ:t,hasM:r,points:s}=e;return q1(V1(U1,s,t,r),t,r)}function gA(e){const{x:t,y:r,z:s,m:i}=e,o=i!=null;return s!=null?o?Qx(t,r,s,i,t,r,s,i):Hx(t,r,s,t,r,s):o?Kx(t,r,i,t,r,i):Wx(t,r,t,r)}function Zx(e){const{hasZ:t,hasM:r,rings:s}=e,i=Jl(U1,s,t,r);return i?q1(i,t,r):null}function Yx(e){const{hasZ:t,hasM:r,paths:s}=e,i=Jl(U1,s,t,r);return i?q1(i,t,r):null}var Lp;function mw(e){return!Array.isArray(e[0])}let _s=Lp=class extends Nn{constructor(...e){super(...e),this.rings=[],this.type="polygon"}static fromExtent(e){const t=e.clone().normalize(),r=e.spatialReference;let s=!1,i=!1;for(const l of t)l.hasZ&&(s=!0),l.hasM&&(i=!0);const o={rings:t.map(function(l){const u=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(s&&l.hasZ){const p=l.zmin+.5*(l.zmax-l.zmin);for(let d=0;d<u.length;d++)u[d].push(p)}if(i&&l.hasM){const p=l.mmin+.5*(l.mmax-l.mmin);for(let d=0;d<u.length;d++)u[d].push(p)}return u}),spatialReference:r};return s&&(o.hasZ=!0),i&&(o.hasM=!0),new Lp(o)}normalizeCtorArgs(e,t){let r,s,i=null,o=null;return e&&!Array.isArray(e)?(i=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),r=e.hasZ,s=e.hasM):i=e,i=i||[],t=t||Ae.WGS84,i.length&&i[0]&&i[0][0]!=null&&typeof i[0][0]=="number"&&(i=[i]),o=i[0]&&i[0][0],o&&(r===void 0&&s===void 0?(r=o.length>2,s=o.length>3):r===void 0?r=s?o.length>3:o.length>2:s===void 0&&(s=r?o.length>3:o.length>2)),{rings:i,spatialReference:t,hasZ:r,hasM:s}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=lA(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new Ke;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=Zx(this);if(!t)return null;const r=new ft(t);return r.spatialReference=e,r}get isSelfIntersecting(){return X4(this.rings)}writeRings(e,t){t.rings=E(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(mw(e)){const s=[];for(let i=0,o=e.length;i<o;i++)s[i]=e[i].toArray();t[r]=s}else t[r]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new Lp;return e.spatialReference=this.spatialReference,e.rings=E(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(X(e))return!1;const t=this.spatialReference,r=e.spatialReference;if(T(t)!==T(r)||T(t)&&T(r)&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const s=([i,o,l,u],[p,d,h,f])=>i===p&&o===d&&(l==null&&h==null||l===h)&&(u==null&&f==null||u===f);for(let i=0;i<this.rings.length;i++){const o=this.rings[i],l=e.rings[i];if(!F_(o,l,s))return!1}return!0}contains(e){if(!e)return!1;const t=kx(e,this.spatialReference);return B4(this,T(t)?t:e)}isClockwise(e){let t;return t=mw(e)?e.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):e,nA(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],s=this.hasZ,i=this.hasM;return s&&!i?new Ke(r[0],r[1],r[2],void 0,this.spatialReference):i&&!s?new Ke(r[0],r[1],void 0,r[2],this.spatialReference):s&&i?new Ke(r[0],r[1],r[2],r[3],this.spatialReference):new Ke(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(Gl(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new Ke(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,s=t.map(i=>new Ke(i,r));return this.notifyChange("rings"),s}setPoint(e,t,r){return this._validateInputs(e,t)?(Gl(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const s=this.rings[e];if(r&&(t<0||t>s.length)||!r&&(t<0||t>=s.length))return!1}return!0}toJSON(e){return this.write({},e)}};n([c({readOnly:!0})],_s.prototype,"cache",null),n([c({readOnly:!0})],_s.prototype,"centroid",null),n([c({readOnly:!0})],_s.prototype,"extent",null),n([c({readOnly:!0})],_s.prototype,"isSelfIntersecting",null),n([c({type:[[[Number]]],json:{write:{isRequired:!0}}})],_s.prototype,"rings",void 0),n([Y("rings")],_s.prototype,"writeRings",null),_s=Lp=n([b("esri.geometry.Polygon")],_s),_s.prototype.toJSON.isDefaultToJSON=!0;const ea=_s;var Ky;function vA(e){return!Array.isArray(e[0])}let zi=Ky=class extends Nn{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let r,s,i=null,o=null;return e&&!Array.isArray(e)?(i=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),r=e.hasZ,s=e.hasM):i=e,i=i||[],t=t||Ae.WGS84,i.length&&i[0]&&i[0][0]!=null&&typeof i[0][0]=="number"&&(i=[i]),o=i[0]&&i[0][0],o&&(r===void 0&&s===void 0?(r=o.length>2,s=!1):r===void 0?r=!s&&o.length>3:s===void 0&&(s=!r&&o.length>3)),{paths:i,spatialReference:t,hasZ:r,hasM:s}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=Yx(this);if(!t)return null;const r=new ft(t);return r.spatialReference=e,r}writePaths(e,t){t.paths=E(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(vA(e)){const s=[];for(let i=0,o=e.length;i<o;i++)s[i]=e[i].toArray();t[r]=s}else t[r]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new Ky;return e.spatialReference=this.spatialReference,e.paths=E(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],s=this.hasZ,i=this.hasM;return s&&!i?new Ke(r[0],r[1],r[2],void 0,this.spatialReference):i&&!s?new Ke(r[0],r[1],void 0,r[2],this.spatialReference):s&&i?new Ke(r[0],r[1],r[2],r[3],this.spatialReference):new Ke(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(Gl(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,s=t.map(i=>new Ke(i,r));return this.notifyChange("paths"),s}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new Ke(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(Gl(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const s=this.paths[e];if(r&&(t<0||t>s.length)||!r&&(t<0||t>=s.length))return!1}return!0}toJSON(e){return this.write({},e)}};n([c({readOnly:!0})],zi.prototype,"cache",null),n([c({readOnly:!0})],zi.prototype,"extent",null),n([c({type:[[[Number]]],json:{write:{isRequired:!0}}})],zi.prototype,"paths",void 0),n([Y("paths")],zi.prototype,"writePaths",null),zi=Ky=n([b("esri.geometry.Polyline")],zi),zi.prototype.toJSON.isDefaultToJSON=!0;const yc=zi;class ye{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this.jsonToAPI=t,this.options=r,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this.apiToJSON),this.jsonValues=this._getKeysSorted(this.jsonToAPI),this.read=s=>this.fromJSON(s),this.write=(s,i,o)=>{const l=this.toJSON(s);l!==void 0&&Sr(o,l,i)},this.write.isJSONMapWriter=!0}toJSON(t){if(this.apiToJSON.hasOwnProperty(t)){const r=this.apiToJSON[t];return this.options.useNumericKeys?+r:r}return this.options.ignoreUnknown?void 0:t}fromJSON(t){return this.jsonToAPI.hasOwnProperty(t)?this.jsonToAPI[t]:this.options.ignoreUnknown?void 0:t}_invertMap(t){const r={};for(const s in t)r[t[s]]=s;return r}_getKeysSorted(t){const r=[];for(const s in t)r.push(s);return r.sort(),r}}function Lt(){return function(e,t){return new ye(e,I({ignoreUnknown:!0},t))}}const bA=Lt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),gw=Lt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function Xx(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function e$(e){return e.points!==void 0}function t$(e){return e.x!==void 0&&e.y!==void 0}function r$(e){return e.paths!==void 0}function Mu(e){return e.rings!==void 0}function Dr(e){return X(e)?null:e instanceof Nn?e:t$(e)?Ke.fromJSON(e):r$(e)?yc.fromJSON(e):Mu(e)?ea.fromJSON(e):e$(e)?z1.fromJSON(e):Xx(e)?ft.fromJSON(e):null}function Cn(e){return e?t$(e)?"esriGeometryPoint":r$(e)?"esriGeometryPolyline":Mu(e)?"esriGeometryPolygon":Xx(e)?"esriGeometryEnvelope":e$(e)?"esriGeometryMultipoint":null:null}const wA={esriGeometryPoint:Ke,esriGeometryPolyline:yc,esriGeometryPolygon:ea,esriGeometryEnvelope:ft,esriGeometryMultipoint:z1};function SA(e){return e&&wA[e]||null}const ta={base:Nn,key:"type",typeMap:{extent:ft,multipoint:z1,point:Ke,polyline:yc,polygon:ea}};Bs(ta);let Lf;function Rn(){return Lf||(Lf=(async()=>{const e=await import("./arcadeUtils.a60bacfc.js").then(function(t){return t.aA});return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),Lf}const yU=(e,t,r)=>mc.create(e,t,r,null,["$feature"]),mU=(e,t,r)=>mc.create(e,t,r,null,["$feature","$view"]),_A=(e,t,r,s)=>mc.create(e,t,r,s,["$feature","$view"]);class mc{constructor(t,r,s,i,o,l,u,p){this.script=t,this.evaluate=o;const d=Array.isArray(u)?u:u.fields;this.fields=d,this._syntaxTree=i,this._arcade=r,this._arcadeDictionary=s,this._arcadeFeature=l,this._spatialReference=p,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,r,s,i,o,l){const{arcade:u,Feature:p,Dictionary:d}=await Rn(),h=Ae.fromJSON(r),f=u.parseScript(t,l),y=o.reduce((N,J)=>pe(I({},N),{[J]:null}),{});let m=null;T(i)&&(m=new d(i),m.immutable=!0,y.$config=null);const v=u.scriptUsesGeometryEngine(f)&&u.enableGeometrySupport(),_=u.scriptUsesFeatureSet(f)&&u.enableFeatureSetSupport(),S=u.scriptIsAsync(f)&&u.enableAsyncSupport(),M={vars:y,spatialReference:h,useAsync:!!S},k=new d;k.immutable=!1,k.setField("scale",0);const D=u.compileScript(f,M),P=N=>("$view"in N&&N.$view&&(k.setField("scale",N.$view.scale),N.$view=k),m&&(N.$config=m),D({vars:N,spatialReference:h}));return await Promise.all([v,_,S]),new mc(t,u,d,f,P,new p,s,h)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(t){return this._arcade.referencesMember(this._syntaxTree,t)}referencesFunction(t){return this._arcade.referencesFunction(this._syntaxTree,t)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}const xA=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],$A=["field","normalizationField"];function vw(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(bw(xA,r,t),"visualVariables"in r&&r.visualVariables)for(const s of r.visualVariables)bw($A,s,t)}}function bw(e,t,r){if(e)for(const s of e){const i=Rh(s,t),o=i&&typeof i!="function"&&r.get(i);o&&Sr(s,o.name,t)}}function s$(e,t){if(e!=null&&t!=null&&t.fields.length)if("startField"in e){const r=t.get(e.startField),s=t.get(e.endField);e.startField=r&&r.name||null,e.endField=s&&s.name||null}else{const r=t.get(e.startTimeField),s=t.get(e.endTimeField);e.startTimeField=r&&r.name||null,e.endTimeField=s&&s.name||null}}const Df=new Set;function MA(e,t){return e&&t?(Df.clear(),B1(Df,e,t),Array.from(Df).sort()):[]}function B1(e,t,r){var s;if(r)if(t!=null&&(s=t.fields)!=null&&s.length)if(r.includes("*"))for(const{name:i}of t.fields)e.add(i);else for(const i of r)fs(e,t,i);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const i of r)e.add(i)}}function fs(e,t,r){if(typeof r=="string")if(t){const s=t.get(r);s&&e.add(s.name)}else e.add(r)}async function Mi(e,t,r){var s;if(!r)return;const{arcadeUtils:i}=await Rn(),o=i.extractFieldNames(r,t==null||(s=t.fields)==null?void 0:s.map(l=>l.name));for(const l of o)fs(e,t,l)}async function IA(e,t,r){if(r&&r!=="1=1"){const s=(await import("./WhereClause.5e909714.js")).WhereClause.create(r,t);if(!s.isStandardized)throw new C("fieldUtils:collectFilterFields","Where clause is not standardized");B1(e,t,s.fieldNames)}}function OA({displayField:e,fields:t}){return e||(t&&t.length?zf(t,"name-or-title")||zf(t,"unique-identifier")||zf(t,"type-or-category")||EA(t):null)}function EA(e){for(const t of e){if(!t||!t.name)continue;const r=t.name.toLowerCase();if(r.indexOf("name")>-1||r.indexOf("title")>-1)return t.name}return null}function zf(e,t){for(const r of e)if(r&&r.valueType&&r.valueType===t)return r.name;return null}async function gU(e,t){const{labelingInfo:r,fieldsIndex:s}=t;r&&r.length&&await Promise.all(r.map(i=>TA(e,s,i)))}async function TA(e,t,r){if(!r)return;const s=r.getLabelExpression(),i=r.where;if(s.type==="arcade")await Mi(e,t,s.expression);else{const o=s.expression.match(/{[^}]*}/g);o&&o.forEach(l=>{fs(e,t,l.slice(1,-1))})}await IA(e,t,i)}function jA(e){const t=e.defaultValue;return t!==void 0&&n$(e,t)?t:e.nullable?null:void 0}function i$(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function AA(e){return e===null||i$(e)}const G1="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function CA(e){return e===null||G1(e)}function o$(e){return e!=null&&typeof e=="string"}function RA(e){return e===null||o$(e)}function FA(){return!0}function n$(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=e.nullable?CA:G1;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?AA:i$;break;case"string":case"esriFieldTypeString":r=e.nullable?RA:o$;break;default:r=FA}return arguments.length===1?r:r(t)}const kA=["integer","small-integer","single","double"],NA=new Set([...kA,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function l$(e){return e!=null&&NA.has(e.type)}function vU(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}var th,rh;function bU(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function wU(e,t){return e.nullable&&t===null?null:l$(e)&&!PA(e.type,Number(t))?th.OUT_OF_RANGE:n$(e,t)?e.domain?T4(e.domain,t):null:rh.INVALID_TYPE}function PA(e,t){const r=typeof e=="string"?a$(e):e;return!!r&&(r.isInteger?G1(t)&&t>=r.min&&t<=r.max:t>=r.min&&t<=r.max)}function a$(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return LA;case"esriFieldTypeInteger":case"integer":return DA;case"esriFieldTypeSingle":case"single":return zA;case"esriFieldTypeDouble":case"double":return VA}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(th||(th={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(rh||(rh={}));const LA={min:-32768,max:32767,isInteger:!0},DA={min:-2147483648,max:2147483647,isInteger:!0},zA={min:-34e37,max:12e37,isInteger:!1},VA={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function SU(e,t,r){switch(e){case Vl.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Vl.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case rh.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case th.OUT_OF_RANGE:{const{min:s,max:i}=a$(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${s} to ${i}`}}}let Dp=class extends F{constructor(e){super(e),this.type=null}};n([c({type:["attachments","custom","fields","media","text","expression"],readOnly:!0,json:{read:!1,write:!0}})],Dp.prototype,"type",void 0),Dp=n([b("esri.popup.content.Content")],Dp);const Pn=Dp;var Qy;let No=Qy=class extends Pn{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new Qy({description:this.description,displayType:this.displayType,title:this.title})}};n([c({type:String,json:{write:!0}})],No.prototype,"description",void 0),n([c({type:["auto","preview","list"],json:{write:!0}})],No.prototype,"displayType",void 0),n([c({type:String,json:{write:!0}})],No.prototype,"title",void 0),n([c({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],No.prototype,"type",void 0),No=Qy=n([b("esri.popup.content.AttachmentsContent")],No);const Hu=No;var Zy;let Po=Zy=class extends Pn{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new Zy({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?E(this.outFields):null})}};n([c()],Po.prototype,"creator",void 0),n([c()],Po.prototype,"destroyer",void 0),n([c()],Po.prototype,"outFields",void 0),n([c({type:["custom"],readOnly:!0})],Po.prototype,"type",void 0),Po=Zy=n([b("esri.popup.content.CustomContent")],Po);const UA=Po;var Yy;let Hn=Yy=class extends F{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new Yy({title:this.title,expression:this.expression})}};n([c({type:String,json:{write:!0}})],Hn.prototype,"title",void 0),n([c({type:String,json:{write:!0}})],Hn.prototype,"expression",void 0),n([c({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Hn.prototype,"returnType",void 0),Hn=Yy=n([b("esri.popup.ElementExpressionInfo")],Hn);const qA=Hn;var Xy;let Na=Xy=class extends Pn{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new Xy({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};n([c({type:qA,json:{write:!0}})],Na.prototype,"expressionInfo",void 0),n([c({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Na.prototype,"type",void 0),Na=Xy=n([b("esri.popup.content.ExpressionContent")],Na);const J1=Na;function le(e,t={}){var r;const s=e instanceof ye?e:new ye(e,t),i={type:(r=t==null?void 0:t.ignoreUnknown)==null||r?s.apiValues:String,json:{type:s.jsonValues,read:(t==null||!t.readOnly)&&{reader:s.read},write:{writer:s.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(i.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(i.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(i.json.name=t.name),c(i)}const Ku=Lt()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});Ku.toJSON.bind(Ku);Ku.fromJSON.bind(Ku);var ww,Sw,_w;let BA,Iu;const xw=(ww=(Sw=globalThis.esriConfig)==null?void 0:Sw.locale)!=null?ww:(_w=globalThis.dojoConfig)==null?void 0:_w.locale;function u$(){var e,t;return(e=xw!=null?xw:(t=globalThis.navigator)==null?void 0:t.language)!=null?e:"en"}function Vs(){return Iu===void 0&&(Iu=u$()),Iu}const Ou=[];function c$(e){return Ou.push(e),{remove(){Ou.splice(Ou.indexOf(e),1)}}}const em=[];function W1(e){return em.push(e),{remove(){Ou.splice(em.indexOf(e),1)}}}function GA(){var e;const t=(e=BA)!=null?e:u$();Iu!==t&&(Iu=t,[...em].forEach(r=>{r.call(null,t)}),[...Ou].forEach(r=>{r.call(null,t)}))}globalThis.addEventListener==null||globalThis.addEventListener("languagechange",GA);const vs={year:"numeric",month:"numeric",day:"numeric"},_a={year:"numeric",month:"long",day:"numeric"},xa={year:"numeric",month:"short",day:"numeric"},$a={year:"numeric",month:"long",weekday:"long",day:"numeric"},jr={hour:"numeric",minute:"numeric"},qr=pe(I({},jr),{second:"numeric"}),H1={"short-date":vs,"short-date-short-time":I(I({},vs),jr),"short-date-short-time-24":pe(I(I({},vs),jr),{hour12:!1}),"short-date-long-time":I(I({},vs),qr),"short-date-long-time-24":pe(I(I({},vs),qr),{hour12:!1}),"short-date-le":vs,"short-date-le-short-time":I(I({},vs),jr),"short-date-le-short-time-24":pe(I(I({},vs),jr),{hour12:!1}),"short-date-le-long-time":I(I({},vs),qr),"short-date-le-long-time-24":pe(I(I({},vs),qr),{hour12:!1}),"long-month-day-year":_a,"long-month-day-year-short-time":I(I({},_a),jr),"long-month-day-year-short-time-24":pe(I(I({},_a),jr),{hour12:!1}),"long-month-day-year-long-time":I(I({},_a),qr),"long-month-day-year-long-time-24":pe(I(I({},_a),qr),{hour12:!1}),"day-short-month-year":xa,"day-short-month-year-short-time":I(I({},xa),jr),"day-short-month-year-short-time-24":pe(I(I({},xa),jr),{hour12:!1}),"day-short-month-year-long-time":I(I({},xa),qr),"day-short-month-year-long-time-24":pe(I(I({},xa),qr),{hour12:!1}),"long-date":$a,"long-date-short-time":I(I({},$a),jr),"long-date-short-time-24":pe(I(I({},$a),jr),{hour12:!1}),"long-date-long-time":I(I({},$a),qr),"long-date-long-time-24":pe(I(I({},$a),qr),{hour12:!1}),"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":jr,"long-time":qr},Qu=Lt()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});Qu.apiValues;Qu.toJSON.bind(Qu);Qu.fromJSON.bind(Qu);const JA={ar:"ar-u-nu-latn-ca-gregory"};let zp=new WeakMap,p$=H1["short-date-short-time"];function WA(e){const t=e||p$;if(!zp.has(t)){const r=Vs(),s=JA[Vs()]||r;zp.set(t,new Intl.DateTimeFormat(s,t))}return zp.get(t)}function HA(e){return H1[e]||null}function Wl(e,t){return WA(t).format(e)}W1(()=>{zp=new WeakMap,p$=H1["short-date-short-time"]});const KA={ar:"ar-u-nu-latn"};let Vp=new WeakMap,d$={};function QA(e){const t=e||d$;if(!Vp.has(t)){const r=Vs(),s=KA[Vs()]||r;Vp.set(t,new Intl.NumberFormat(s,e))}return Vp.get(t)}function ZA(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Zu(e,t){return QA(t).format(e)}W1(()=>{Vp=new WeakMap,d$={}});var tm;let Lo=tm=class extends F{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new tm({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?Wl(e,I(I({},HA(this.dateFormat)),this.dateTimeFormatOptions)):Zu(e,ZA(this))}};n([le(Ku)],Lo.prototype,"dateFormat",void 0),n([c({type:Object,json:{read:!1}})],Lo.prototype,"dateTimeFormatOptions",void 0),n([c({type:Boolean,json:{write:!0}})],Lo.prototype,"digitSeparator",void 0),n([c({type:_t,json:{write:!0}})],Lo.prototype,"places",void 0),Lo=tm=n([b("esri.popup.support.FieldInfoFormat")],Lo);const Up=Lo;var rm;let Gr=rm=class extends F{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new rm({fieldName:this.fieldName,format:this.format?E(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};n([c({type:String,json:{write:!0}})],Gr.prototype,"fieldName",void 0),n([c({type:Up,json:{write:!0}})],Gr.prototype,"format",void 0),n([c({type:Boolean,json:{write:!0,default:!1}})],Gr.prototype,"isEditable",void 0),n([c({type:String,json:{write:!0}})],Gr.prototype,"label",void 0),n([le(new ye({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Gr.prototype,"stringFieldOption",void 0),n([c({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Gr.prototype,"statisticType",void 0),n([c({type:String,json:{write:!0}})],Gr.prototype,"tooltip",void 0),n([c({type:Boolean,json:{write:!0}})],Gr.prototype,"visible",void 0),Gr=rm=n([b("esri.popup.FieldInfo")],Gr);const K1=Gr;var sm;let Ys=sm=class extends Pn{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(r=>r.toJSON())}clone(){return new sm(E({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};n([c({type:Object,json:{write:!0}})],Ys.prototype,"attributes",void 0),n([c({type:String,json:{write:!0}})],Ys.prototype,"description",void 0),n([c({type:[K1]})],Ys.prototype,"fieldInfos",void 0),n([Y("fieldInfos")],Ys.prototype,"writeFieldInfos",null),n([c({type:String,json:{write:!0}})],Ys.prototype,"title",void 0),n([c({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Ys.prototype,"type",void 0),Ys=sm=n([b("esri.popup.content.FieldsContent")],Ys);const Yu=Ys;let Do=class extends F{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};n([c({type:String,json:{write:!0}})],Do.prototype,"altText",void 0),n([c({type:String,json:{write:!0}})],Do.prototype,"caption",void 0),n([c({type:String,json:{write:!0}})],Do.prototype,"title",void 0),n([c({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Do.prototype,"type",void 0),Do=n([b("esri.popup.content.mixins.MediaInfo")],Do);const Q1=Do;var im;let Pa=im=class extends st{constructor(e){super(e),this.tooltip=null,this.value=null}clone(){return new im({tooltip:this.tooltip,value:this.value})}};n([c()],Pa.prototype,"tooltip",void 0),n([c()],Pa.prototype,"value",void 0),Pa=im=n([b("esri.popup.content.support.ChartMediaInfoValueSeries")],Pa);const YA=Pa;var om;let zo=om=class extends F{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new om({fields:E(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};n([c({type:[String],json:{write:!0}})],zo.prototype,"fields",void 0),n([c({type:String,json:{write:!0}})],zo.prototype,"normalizeField",void 0),n([c({type:[YA],json:{read:!1}})],zo.prototype,"series",void 0),n([c({type:String,json:{write:!0}})],zo.prototype,"tooltipField",void 0),zo=om=n([b("esri.popup.content.support.ChartMediaInfoValue")],zo);const XA=zo;let La=class extends Q1{constructor(e){super(e),this.type=null,this.value=null}};n([c({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],La.prototype,"type",void 0),n([c({type:XA,json:{write:!0}})],La.prototype,"value",void 0),La=n([b("esri.popup.content.mixins.ChartMediaInfo")],La);const Hh=La,Kh=Lt()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var nm;let qp=nm=class extends Hh{constructor(e){super(e),this.type="bar-chart"}clone(){return new nm({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};n([c({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:Kh.write}})],qp.prototype,"type",void 0),qp=nm=n([b("esri.popup.content.BarChartMediaInfo")],qp);const h$=qp;var lm;let Bp=lm=class extends Hh{constructor(e){super(e),this.type="column-chart"}clone(){return new lm({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};n([c({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:Kh.write}})],Bp.prototype,"type",void 0),Bp=lm=n([b("esri.popup.content.ColumnChartMediaInfo")],Bp);const f$=Bp;var am;let Da=am=class extends F{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new am({linkURL:this.linkURL,sourceURL:this.sourceURL})}};n([c({type:String,json:{write:!0}})],Da.prototype,"linkURL",void 0),n([c({type:String,json:{write:!0}})],Da.prototype,"sourceURL",void 0),Da=am=n([b("esri.popup.content.support.ImageMediaInfoValue")],Da);const e6=Da;var um;let Kn=um=class extends Q1{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new um({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};n([c({type:Number,json:{write:!0}})],Kn.prototype,"refreshInterval",void 0),n([c({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Kn.prototype,"type",void 0),n([c({type:e6,json:{write:!0}})],Kn.prototype,"value",void 0),Kn=um=n([b("esri.popup.content.ImageMediaInfo")],Kn);const y$=Kn;var cm;let Gp=cm=class extends Hh{constructor(e){super(e),this.type="line-chart"}clone(){return new cm({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};n([c({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:Kh.write}})],Gp.prototype,"type",void 0),Gp=cm=n([b("esri.popup.content.LineChartMediaInfo")],Gp);const m$=Gp;var pm;let Jp=pm=class extends Hh{constructor(e){super(e),this.type="pie-chart"}clone(){return new pm({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};n([c({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:Kh.write}})],Jp.prototype,"type",void 0),Jp=pm=n([b("esri.popup.content.PieChartMediaInfo")],Jp);const g$=Jp,v$={base:Q1,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":h$,"column-chart":f$,"line-chart":m$,"pie-chart":g$,image:y$}};var dm;let Jr=dm=class extends Pn{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?y$.fromJSON(t):t.type==="barchart"?h$.fromJSON(t):t.type==="columnchart"?f$.fromJSON(t):t.type==="linechart"?m$.fromJSON(t):t.type==="piechart"?g$.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(r=>r.toJSON())}clone(){return new dm(E({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};n([c()],Jr.prototype,"activeMediaInfoIndex",void 0),n([c({type:Object,json:{write:!0}})],Jr.prototype,"attributes",void 0),n([c({type:String,json:{write:!0}})],Jr.prototype,"description",void 0),n([c({types:[v$]})],Jr.prototype,"mediaInfos",void 0),n([K("mediaInfos")],Jr.prototype,"readMediaInfos",null),n([Y("mediaInfos")],Jr.prototype,"writeMediaInfos",null),n([c({type:String,json:{write:!0}})],Jr.prototype,"title",void 0),n([c({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Jr.prototype,"type",void 0),Jr=dm=n([b("esri.popup.content.MediaContent")],Jr);const sh=Jr;var hm;let za=hm=class extends Pn{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new hm({text:this.text})}};n([c({type:String,json:{write:!0}})],za.prototype,"text",void 0),n([c({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],za.prototype,"type",void 0),za=hm=n([b("esri.popup.content.TextContent")],za);const ih=za,t6={base:null,key:"type",typeMap:{attachment:Hu,media:sh,text:ih,expression:J1,field:Yu}};var fm;let Vo=fm=class extends F{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new fm({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};n([c({type:String,json:{write:!0}})],Vo.prototype,"name",void 0),n([c({type:String,json:{write:!0}})],Vo.prototype,"title",void 0),n([c({type:String,json:{write:!0}})],Vo.prototype,"expression",void 0),n([c({type:["string","number"],json:{write:!0}})],Vo.prototype,"returnType",void 0),Vo=fm=n([b("esri.popup.ExpressionInfo")],Vo);const r6=Vo;var ym;let Va=ym=class extends F{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new ym({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};n([c({type:Boolean,json:{write:!0}})],Va.prototype,"returnTopmostRaster",void 0),n([c({type:Boolean,json:{write:!0}})],Va.prototype,"showNoDataRecords",void 0),Va=ym=n([b("esri.popup.LayerOptions")],Va);const s6=Va;var mm;let Ua=mm=class extends F{constructor(e){super(e),this.field=null,this.order=null}clone(){return new mm({field:this.field,order:this.order})}};n([c({type:String,json:{write:!0}})],Ua.prototype,"field",void 0),n([c({type:["asc","desc"],json:{write:!0}})],Ua.prototype,"order",void 0),Ua=mm=n([b("esri.popup.support.RelatedRecordsInfoFieldOrder")],Ua);const b$=Ua;var gm;let qa=gm=class extends F{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new gm({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?E(this.orderByFields):null})}};n([c({type:Boolean,json:{write:!0}})],qa.prototype,"showRelatedRecords",void 0),n([c({type:[b$],json:{write:!0}})],qa.prototype,"orderByFields",void 0),qa=gm=n([b("esri.popup.RelatedRecordsInfo")],qa);const i6=qa;let o6=0;const Qh=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+o6++})}};return t=n([b("esri.core.Identifiable")],t),t};let $w=class extends Qh(class{}){};$w=n([b("esri.core.Identifiable")],$w);var vm;let Wr=vm=class extends Qh(st){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new vm({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};n([c()],Wr.prototype,"active",void 0),n([c()],Wr.prototype,"className",void 0),n([c()],Wr.prototype,"disabled",void 0),n([c()],Wr.prototype,"id",void 0),n([c()],Wr.prototype,"indicator",void 0),n([c()],Wr.prototype,"title",void 0),n([c()],Wr.prototype,"type",void 0),n([c()],Wr.prototype,"visible",void 0),Wr=vm=n([b("esri.support.actions.ActionBase")],Wr);const Z1=Wr;var bm;let Wp=bm=class extends Z1{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new bm({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};n([c()],Wp.prototype,"image",void 0),Wp=bm=n([b("esri.support.Action.ActionButton")],Wp);const n6=Wp;var wm;let Ba=wm=class extends Z1{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new wm({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};n([c()],Ba.prototype,"image",void 0),n([c()],Ba.prototype,"value",void 0),Ba=wm=n([b("esri.support.Action.ActionToggle")],Ba);const l6=Ba;var Sm;const a6=et.ofType({key:"type",defaultKeyValue:"button",base:Z1,typeMap:{button:n6,toggle:l6}}),u6={base:Pn,key:"type",typeMap:{media:sh,custom:UA,text:ih,attachments:Hu,fields:Yu,expression:J1}},w$="esri.PopupTemplate",c6=Z.getLogger(w$),p6=["attachments","fields","media","text","expression"];let bt=Sm=class extends F{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(e){return Array.isArray(e)?e.map(t=>Bs(u6,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||dc(e)?e:(c6.error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:r}=t;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(t):this._readPopupInfo(t)}writeContent(e,t,r,s){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(i=>p6.indexOf(i.type)!==-1).map(i=>i&&i.toJSON(s)),t.popupElements.forEach(i=>{i.type==="attachments"?this._writeAttachmentContent(t):i.type==="media"?this._writeMediaContent(i,t):i.type==="text"&&this._writeTextContent(i,t)})):t.description=e}writeFieldInfos(e,t,r,s){const{content:i}=this,o=Array.isArray(i)?i:null;if(e){const l=o?o.filter(p=>p.type==="fields"):[],u=l.length&&l.every(p=>{var d;return(d=p.fieldInfos)==null?void 0:d.length});t.fieldInfos=e.filter(Boolean).map(p=>{const d=p.toJSON(s);return u&&(d.visible=!1),d})}if(o)for(const l of o)l.type==="fields"&&this._writeFieldsContent(l,t)}writeLayerOptions(e,t,r,s){t[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(s)}writeTitle(e,t){t.title=e||""}clone(){const{actions:e}=this,t=e?E(e.toArray()):[];return new Sm({actions:t,content:Array.isArray(this.content)?E(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?E(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?E(this.fieldInfos):null,layerOptions:this.layerOptions?E(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?E(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?E(this.relatedRecordsInfo):null})}async collectRequiredFields(e,t){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...r,...this._getContentExpressionInfos(this.content,r)]),B1(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=E(e.fieldInfos);Array.isArray(t.fieldInfos)?r.forEach(s=>{const i=t.fieldInfos.find(o=>o.fieldName.toLowerCase()===s.fieldName.toLowerCase());i?i.visible=!0:t.fieldInfos.push(s)}):t.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=E(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...r]:t.mediaInfos=r}_readPopupInfoElements({description:e,mediaInfos:t,popupElements:r}){const s={description:!1,mediaInfos:!1};return r.map(i=>i.type==="media"?(i.mediaInfos||!t||s.mediaInfos||(i.mediaInfos=t,s.mediaInfos=!0),sh.fromJSON(i)):i.type==="text"?(i.text||!e||s.description||(i.text=e,s.description=!0),ih.fromJSON(i)):i.type==="attachments"?Hu.fromJSON(i):i.type==="fields"?Yu.fromJSON(i):i.type==="expression"?J1.fromJSON(i):void 0).filter(Boolean)}_readPopupInfo({description:e,mediaInfos:t,showAttachments:r}){const s=[];return e?s.push(new ih({text:e})):s.push(new Yu),Array.isArray(t)&&t.length&&s.push(sh.fromJSON({mediaInfos:t})),r&&s.push(Hu.fromJSON({displayType:"auto"})),s.length?s:e}_getContentElementFields(e){const t=e==null?void 0:e.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos||this.fieldInfos)];if(t==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((s,i)=>[...s,...this._getMediaInfoFields(i)],[])]}return t==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:r,value:s}=e,i=s||{},{fields:o=[],normalizeField:l,tooltipField:u,sourceURL:p,linkURL:d}=i,h=[...this._extractFieldNames(r),...this._extractFieldNames(t),...this._extractFieldNames(p),...this._extractFieldNames(d),...o];return l&&h.push(l),u&&h.push(u),h}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((r,s)=>[...r,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,r)=>[...t,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,t,r){r&&await Promise.all(r.map(s=>Mi(e,t,s.expression)))}_getFieldInfoFields(e){return e?e.filter(t=>t.visible===void 0||!!t.visible).map(t=>t.fieldName).filter(t=>t.indexOf("relationships/")===-1&&t.indexOf("expression/")===-1):[]}_getActionsFields(e){return e?e.toArray().reduce((t,r)=>[...t,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:t,title:r,type:s}=e,i=s==="button"||s==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(t),...this._extractFieldNames(i)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const t=/{[^}]*}/g,r=e.match(t);if(!r)return[];const s=/\{(\w+):.+\}/,i=r.filter(o=>!(o.indexOf("{relationships/")===0||o.indexOf("{expression/")===0)).map(o=>o.replace(s,"{$1}"));return i?i.map(o=>o.slice(1,-1)):[]}};n([c({type:a6})],bt.prototype,"actions",void 0),n([c()],bt.prototype,"content",void 0),n([ht("content")],bt.prototype,"castContent",null),n([K("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],bt.prototype,"readContent",null),n([Y("content",{popupElements:{type:et.ofType(t6)},showAttachments:{type:Boolean},mediaInfos:{type:et.ofType(v$)},description:{type:String}})],bt.prototype,"writeContent",null),n([c({type:[r6],json:{write:!0}})],bt.prototype,"expressionInfos",void 0),n([c({type:[K1]})],bt.prototype,"fieldInfos",void 0),n([Y("fieldInfos")],bt.prototype,"writeFieldInfos",null),n([c({type:s6})],bt.prototype,"layerOptions",void 0),n([Y("layerOptions")],bt.prototype,"writeLayerOptions",null),n([c({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],bt.prototype,"lastEditInfoEnabled",void 0),n([c()],bt.prototype,"outFields",void 0),n([c()],bt.prototype,"overwriteActions",void 0),n([c()],bt.prototype,"returnGeometry",void 0),n([c({json:{type:String}})],bt.prototype,"title",void 0),n([Y("title")],bt.prototype,"writeTitle",null),n([c({type:i6,json:{write:!0}})],bt.prototype,"relatedRecordsInfo",void 0),bt=Sm=n([b(w$)],bt);const ra=bt,oh={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function S$(e){return oh[e]||oh[e.toLowerCase()]}function Y1(e){var t;return(t=oh[e])!=null?t:oh[e.toLowerCase()]}function d6(e){return[...Y1(e)]}function Vf(e,t,r){r<0&&++r,r>1&&--r;const s=6*r;return s<1?e+(t-e)*s:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function _$(e,t,r,s=1){const i=(e%360+360)%360/360,o=r<=.5?r*(t+1):r+t-r*t,l=2*r-o;return[Math.round(255*Vf(l,o,i+1/3)),Math.round(255*Vf(l,o,i)),Math.round(255*Vf(l,o,i-1/3)),s]}function h6(e){const t=e.length>5,r=t?8:4,s=(1<<r)-1,i=t?1:17,o=t?e.length===9:e.length===5;let l=Number("0x"+e.substr(1));if(isNaN(l))return null;const u=[0,0,0,1];let p;return o&&(p=l&s,l>>=r,u[3]=i*p/255),p=l&s,l>>=r,u[2]=i*p,p=l&s,l>>=r,u[1]=i*p,p=l&s,l>>=r,u[0]=i*p,u}function sa(){return[0,0,0]}function f6(e){return[e[0],e[1],e[2]]}function ia(e,t,r){return[e,t,r]}function y6(e){const t=sa(),r=Math.min(3,e.length);for(let s=0;s<r;++s)t[s]=e[s];return t}function m6(e,t){return new Float64Array(e,t,3)}function x$(){return sa()}function $$(){return ia(1,1,1)}function M$(){return ia(1,0,0)}function I$(){return ia(0,1,0)}function O$(){return ia(0,0,1)}const g6=x$(),v6=$$(),b6=M$(),w6=I$(),S6=O$();Object.freeze({__proto__:null,create:sa,clone:f6,fromValues:ia,fromArray:y6,createView:m6,zeros:x$,ones:$$,unitX:M$,unitY:I$,unitZ:O$,ZEROS:g6,ONES:v6,UNIT_X:b6,UNIT_Y:w6,UNIT_Z:S6});const Le=1e-6,mn=Math.random,_6=Math.PI/180,x6=180/Math.PI;function $6(e){return e*_6}function M6(e){return e*x6}function I6(e,t){return Math.abs(e-t)<=Le*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze({__proto__:null,EPSILON:Le,RANDOM:mn,toRadian:$6,toDegree:M6,equals:I6});function X1(e){const t=e[0],r=e[1],s=e[2];return Math.sqrt(t*t+r*r+s*s)}function _m(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function E$(e,t,r,s){return e[0]=t,e[1]=r,e[2]=s,e}function O6(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function T$(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function j$(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function A$(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function E6(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function T6(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function j6(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function A6(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function C6(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function R6(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function F6(e,t,r,s){return e[0]=t[0]+r[0]*s,e[1]=t[1]+r[1]*s,e[2]=t[2]+r[2]*s,e}function C$(e,t){const r=t[0]-e[0],s=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+s*s+i*i)}function R$(e,t){const r=t[0]-e[0],s=t[1]-e[1],i=t[2]-e[2];return r*r+s*s+i*i}function F$(e){const t=e[0],r=e[1],s=e[2];return t*t+r*r+s*s}function k6(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function N6(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function xm(e,t){const r=t[0],s=t[1],i=t[2];let o=r*r+s*s+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}function k$(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function P6(e,t,r){const s=t[0],i=t[1],o=t[2],l=r[0],u=r[1],p=r[2];return e[0]=i*p-o*u,e[1]=o*l-s*p,e[2]=s*u-i*l,e}function L6(e,t,r,s){const i=t[0],o=t[1],l=t[2];return e[0]=i+s*(r[0]-i),e[1]=o+s*(r[1]-o),e[2]=l+s*(r[2]-l),e}function D6(e,t,r,s,i,o){const l=o*o,u=l*(2*o-3)+1,p=l*(o-2)+o,d=l*(o-1),h=l*(3-2*o);return e[0]=t[0]*u+r[0]*p+s[0]*d+i[0]*h,e[1]=t[1]*u+r[1]*p+s[1]*d+i[1]*h,e[2]=t[2]*u+r[2]*p+s[2]*d+i[2]*h,e}function z6(e,t,r,s,i,o){const l=1-o,u=l*l,p=o*o,d=u*l,h=3*o*u,f=3*p*l,y=p*o;return e[0]=t[0]*d+r[0]*h+s[0]*f+i[0]*y,e[1]=t[1]*d+r[1]*h+s[1]*f+i[1]*y,e[2]=t[2]*d+r[2]*h+s[2]*f+i[2]*y,e}function V6(e,t){t=t||1;const r=2*mn()*Math.PI,s=2*mn()-1,i=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(r)*i,e[1]=Math.sin(r)*i,e[2]=s*t,e}function U6(e,t,r){const s=t[0],i=t[1],o=t[2];return e[0]=r[0]*s+r[4]*i+r[8]*o+r[12],e[1]=r[1]*s+r[5]*i+r[9]*o+r[13],e[2]=r[2]*s+r[6]*i+r[10]*o+r[14],e}function q6(e,t,r){const s=t[0],i=t[1],o=t[2];return e[0]=s*r[0]+i*r[3]+o*r[6],e[1]=s*r[1]+i*r[4]+o*r[7],e[2]=s*r[2]+i*r[5]+o*r[8],e}function B6(e,t,r){const s=r[0],i=r[1],o=r[2],l=r[3],u=t[0],p=t[1],d=t[2];let h=i*d-o*p,f=o*u-s*d,y=s*p-i*u,m=i*y-o*f,v=o*h-s*y,_=s*f-i*h;const S=2*l;return h*=S,f*=S,y*=S,m*=2,v*=2,_*=2,e[0]=u+h+m,e[1]=p+f+v,e[2]=d+y+_,e}function G6(e,t,r,s){const i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(s)-i[2]*Math.sin(s),o[2]=i[1]*Math.sin(s)+i[2]*Math.cos(s),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function J6(e,t,r,s){const i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(s)+i[0]*Math.cos(s),o[1]=i[1],o[2]=i[2]*Math.cos(s)-i[0]*Math.sin(s),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function W6(e,t,r,s){const i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(s)-i[1]*Math.sin(s),o[1]=i[0]*Math.sin(s)+i[1]*Math.cos(s),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function H6(e,t){_m(Yc,e),_m(Xc,t),xm(Yc,Yc),xm(Xc,Xc);const r=k$(Yc,Xc);return r>1?0:r<-1?Math.PI:Math.acos(r)}const Yc=sa(),Xc=sa();function K6(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Q6(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Z6(e,t){if(e===t)return!0;const r=e[0],s=e[1],i=e[2],o=t[0],l=t[1],u=t[2];return Math.abs(r-o)<=Le*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(s-l)<=Le*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(i-u)<=Le*Math.max(1,Math.abs(i),Math.abs(u))}function Y6(e,t,r){const s=r[0]-t[0],i=r[1]-t[1],o=r[2]-t[2];let l=s*s+i*i+o*o;return l>0?(l=1/Math.sqrt(l),e[0]=s*l,e[1]=i*l,e[2]=o*l,e):(e[0]=0,e[1]=0,e[2]=0,e)}const X6=T$,eC=j$,tC=A$,rC=C$,sC=R$,iC=X1,oC=F$;Object.freeze({__proto__:null,length:X1,copy:_m,set:E$,add:O6,subtract:T$,multiply:j$,divide:A$,ceil:E6,floor:T6,min:j6,max:A6,round:C6,scale:R6,scaleAndAdd:F6,distance:C$,squaredDistance:R$,squaredLength:F$,negate:k6,inverse:N6,normalize:xm,dot:k$,cross:P6,lerp:L6,hermite:D6,bezier:z6,random:V6,transformMat4:U6,transformMat3:q6,transformQuat:B6,rotateX:G6,rotateY:J6,rotateZ:W6,angle:H6,str:K6,exactEquals:Q6,equals:Z6,direction:Y6,sub:X6,mul:eC,div:tC,dist:rC,sqrDist:sC,len:iC,sqrLen:oC});function nC(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function lC(e,t,r,s,i){return e[0]=t,e[1]=r,e[2]=s,e[3]=i,e}function aC(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function N$(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function P$(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function L$(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function uC(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function cC(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function pC(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function dC(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function hC(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function fC(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function yC(e,t,r,s){return e[0]=t[0]+r[0]*s,e[1]=t[1]+r[1]*s,e[2]=t[2]+r[2]*s,e[3]=t[3]+r[3]*s,e}function D$(e,t){const r=t[0]-e[0],s=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(r*r+s*s+i*i+o*o)}function z$(e,t){const r=t[0]-e[0],s=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return r*r+s*s+i*i+o*o}function V$(e){const t=e[0],r=e[1],s=e[2],i=e[3];return Math.sqrt(t*t+r*r+s*s+i*i)}function U$(e){const t=e[0],r=e[1],s=e[2],i=e[3];return t*t+r*r+s*s+i*i}function mC(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function gC(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function vC(e,t){const r=t[0],s=t[1],i=t[2],o=t[3];let l=r*r+s*s+i*i+o*o;return l>0&&(l=1/Math.sqrt(l),e[0]=r*l,e[1]=s*l,e[2]=i*l,e[3]=o*l),e}function bC(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function wC(e,t,r,s){const i=t[0],o=t[1],l=t[2],u=t[3];return e[0]=i+s*(r[0]-i),e[1]=o+s*(r[1]-o),e[2]=l+s*(r[2]-l),e[3]=u+s*(r[3]-u),e}function SC(e,t){let r,s,i,o,l,u;t=t||1;do r=2*mn()-1,s=2*mn()-1,l=r*r+s*s;while(l>=1);do i=2*mn()-1,o=2*mn()-1,u=i*i+o*o;while(u>=1);const p=Math.sqrt((1-l)/u);return e[0]=t*r,e[1]=t*s,e[2]=t*i*p,e[3]=t*o*p,e}function _C(e,t,r){const s=t[0],i=t[1],o=t[2],l=t[3];return e[0]=r[0]*s+r[4]*i+r[8]*o+r[12]*l,e[1]=r[1]*s+r[5]*i+r[9]*o+r[13]*l,e[2]=r[2]*s+r[6]*i+r[10]*o+r[14]*l,e[3]=r[3]*s+r[7]*i+r[11]*o+r[15]*l,e}function xC(e,t,r){const s=t[0],i=t[1],o=t[2],l=r[0],u=r[1],p=r[2],d=r[3],h=d*s+u*o-p*i,f=d*i+p*s-l*o,y=d*o+l*i-u*s,m=-l*s-u*i-p*o;return e[0]=h*d+m*-l+f*-p-y*-u,e[1]=f*d+m*-u+y*-l-h*-p,e[2]=y*d+m*-p+h*-u-f*-l,e[3]=t[3],e}function $C(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function MC(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function IC(e,t){const r=e[0],s=e[1],i=e[2],o=e[3],l=t[0],u=t[1],p=t[2],d=t[3];return Math.abs(r-l)<=Le*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(s-u)<=Le*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(i-p)<=Le*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-d)<=Le*Math.max(1,Math.abs(o),Math.abs(d))}const OC=N$,EC=P$,TC=L$,jC=D$,AC=z$,CC=V$,RC=U$;Object.freeze({__proto__:null,copy:nC,set:lC,add:aC,subtract:N$,multiply:P$,divide:L$,ceil:uC,floor:cC,min:pC,max:dC,round:hC,scale:fC,scaleAndAdd:yC,distance:D$,squaredDistance:z$,length:V$,squaredLength:U$,negate:mC,inverse:gC,normalize:vC,dot:bC,lerp:wC,random:SC,transformMat4:_C,transformQuat:xC,str:$C,exactEquals:MC,equals:IC,sub:OC,mul:EC,div:TC,dist:jC,sqrDist:AC,len:CC,sqrLen:RC});const Mw=new Float32Array(1);function _U(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function Zh(e,t,r){return Math.min(Math.max(e,t),r)}function xU(e){return(e&e-1)==0}function $U(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function MU(e,t,r){return e+(t-e)*r}function IU(e){return e*Math.PI/180}function OU(e){return 180*e/Math.PI}function EU(e){return Math.acos(Zh(e,-1,1))}function FC(e){return Math.asin(Zh(e,-1,1))}function TU(e){return q$(Math.max(-Iw,Math.min(e,Iw)))}function q$(e){return Mw[0]=e,Mw[0]}function jU(e,t){const r=X1(e),s=FC(e[2]/r),i=Math.atan2(e[1]/r,e[0]/r);return E$(t,r,s,i),t}const Iw=q$(34028234663852886e22);function ep(e){return Zh(E1(e),0,255)}function tp(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}class vt{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}static blendColors(t,r,s,i=new vt){return i.r=Math.round(t.r+(r.r-t.r)*s),i.g=Math.round(t.g+(r.g-t.g)*s),i.b=Math.round(t.b+(r.b-t.b)*s),i.a=t.a+(r.a-t.a)*s,i._sanitize()}static fromRgb(t,r){const s=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(s){const i=s[2].split(/\s*,\s*/),o=s[1];if(o==="rgb"&&i.length===3||o==="rgba"&&i.length===4){const l=i[0];if(l.charAt(l.length-1)==="%"){const u=i.map(p=>2.56*parseFloat(p));return i.length===4&&(u[3]=parseFloat(i[3])),vt.fromArray(u,r)}return vt.fromArray(i.map(u=>parseFloat(u)),r)}if(o==="hsl"&&i.length===3||o==="hsla"&&i.length===4)return vt.fromArray(_$(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])),r)}return null}static fromHex(t,r=new vt){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const s=t.length===4?4:8,i=(1<<s)-1;let o=Number("0x"+t.substr(1));return isNaN(o)?null:(["b","g","r"].forEach(l=>{const u=o&i;o>>=s,r[l]=s===4?17*u:u}),r.a=1,r)}static fromArray(t,r=new vt){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const s=S$(t)?Y1(t):null;return s&&vt.fromArray(s,r)||vt.fromRgb(t,r)||vt.fromHex(t,r)}static fromJSON(t){return t&&new vt([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return T(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return T(t)?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){if(typeof t=="string")vt.fromString(t,this);else if(Array.isArray(t))vt.fromArray(t,this);else{var r,s,i,o;this._set((r=t.r)!=null?r:0,(s=t.g)!=null?s:0,(i=t.b)!=null?i:0,(o=t.a)!=null?o:1),t instanceof vt||this._sanitize()}return this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),r=this.g.toString(16),s=this.b.toString(16);return`#${t.length<2?"0"+t:t}${r.length<2?"0"+r:r}${s.length<2?"0"+s:s}`}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=vt.AlphaMode.ALWAYS){const r=ep(this.r),s=ep(this.g),i=ep(this.b);return t===vt.AlphaMode.ALWAYS||this.a!==1?[r,s,i,ep(255*this.a)]:[r,s,i]}clone(){return new vt(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return T(t)&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(tp(this.r,0,255)),this.g=Math.round(tp(this.g,0,255)),this.b=Math.round(tp(this.b,0,255)),this.a=tp(this.a,0,1),this}_set(t,r,s,i){this.r=t,this.g=r,this.b=s,this.a=i}}vt.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(vt||(vt={}));const Ce=vt,Ow=new ye({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let kC=0,Qn=class extends F{constructor(e){super(e),this.id="sym"+kC++,this.type=null,this.color=new Ce([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};n([c({type:Ow.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:Ow.write}}})],Qn.prototype,"type",void 0),n([c({type:Ce,json:{write:{allowNull:!0}}})],Qn.prototype,"color",void 0),n([K("color")],Qn.prototype,"readColor",null),Qn=n([b("esri.symbols.Symbol")],Qn);const cr=Qn;var $m;let Vi=$m=class extends cr{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const r in e)t[r]=e[r]}async collectRequiredFields(e,t){if(this.data.type==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const s=r.map(i=>{const o=i.valueExpressionInfo;return Mi(e,t,o.expression)});await Promise.all(s)}}}clone(){return new $m({data:E(this.data)})}hash(){return x1(JSON.stringify(this.data)).toString()}};n([c({json:{write:!1}})],Vi.prototype,"color",void 0),n([c({json:{write:!0}})],Vi.prototype,"data",void 0),n([K("data",["symbol"])],Vi.prototype,"readData",null),n([Y("data",{})],Vi.prototype,"writeData",null),n([le({CIMSymbolReference:"cim"},{readOnly:!0})],Vi.prototype,"type",void 0),Vi=$m=n([b("esri.symbols.CIMSymbol")],Vi);const gc=Vi;let Zn=class extends F{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,t,r){e||(t[r]=e)}};n([c({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Zn.prototype,"enabled",void 0),n([Y("enabled")],Zn.prototype,"writeEnabled",null),n([c({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],Zn.prototype,"type",void 0),Zn=n([b("esri.symbols.Symbol3DLayer")],Zn);const Ws=Zn,NC=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,PC="screenUtils.toPt: input not recognized!",B$=96;function AU(e){return e?e/72*B$:0}function _o(e){return e?72*e/B$:0}function Pe(e){if(typeof e=="string"){const t=e.match(NC);if(t){const r=Number(t[1]),s=t[3]&&t[3].toLowerCase(),i=e.charAt(0)==="-",o=s==="px"?_o(r):r;return i?-o:o}return console.warn(PC),null}return e}function CU(e=0,t=0){return{x:e,y:t}}function G$(e){const t=E1(100*(1-e));return Math.max(0,Math.min(t,100))}function nh(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}function LC(e,t){const r=t.transparency!=null?nh(t.transparency):1,s=t.color;return s&&Array.isArray(s)?new Ce([s[0]||0,s[1]||0,s[2]||0,r]):null}function DC(e,t){t.color=e.toJSON().slice(0,3);const r=G$(e.a);r!==0&&(t.transparency=r)}const Mo={type:Ce,json:{type:[_t],default:null,read:{source:["color","transparency"],reader:LC},write:{target:{color:{type:[_t]},transparency:{type:_t}},writer:DC}}},Gs={type:Number,cast:Pe,json:{write:!0}};let Uo=class extends F{constructor(e){super(e),this.color=new Ce([0,0,0,1]),this.extensionLength=0,this.size=_o(1)}clone(){}cloneProperties(){return{color:E(this.color),size:this.size,extensionLength:this.extensionLength}}};n([c({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Uo.prototype,"type",void 0),n([c(Mo)],Uo.prototype,"color",void 0),n([c(pe(I({},Gs),{json:{write:{overridePolicy:e=>({enabled:!!e})}}}))],Uo.prototype,"extensionLength",void 0),n([c(Gs)],Uo.prototype,"size",void 0),Uo=n([b("esri.symbols.edges.Edges3D")],Uo);const ev=Uo;var Mm;let Hp=Mm=class extends ev{constructor(e){super(e),this.type="sketch"}clone(){return new Mm(this.cloneProperties())}};n([le({sketch:"sketch"},{readOnly:!0})],Hp.prototype,"type",void 0),Hp=Mm=n([b("esri.symbols.edges.SketchEdges3D")],Hp);const zC=Hp;var Im;let Kp=Im=class extends ev{constructor(e){super(e),this.type="solid"}clone(){return new Im(this.cloneProperties())}};n([le({solid:"solid"},{readOnly:!0})],Kp.prototype,"type",void 0),Kp=Im=n([b("esri.symbols.support.SolidEdges3D")],Kp);const VC=Kp,J$={types:{key:"type",base:ev,typeMap:{solid:VC,sketch:zC}},json:{write:!0}};var Om;let Pr=Om=class extends F{constructor(e){super(e),this.color=null}clone(){const e={color:T(this.color)?this.color.clone():null};return new Om(e)}};n([c(Mo)],Pr.prototype,"color",void 0),Pr=Om=n([b("esri.symbols.support.Symbol3DMaterial")],Pr);var Em;let Ui=Em=class extends Ws{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new Em({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:T(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};n([le({Extrude:"extrude"},{readOnly:!0})],Ui.prototype,"type",void 0),n([c({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Ui.prototype,"size",void 0),n([c({type:Pr,json:{write:!0}})],Ui.prototype,"material",void 0),n([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ui.prototype,"castShadows",void 0),n([c(J$)],Ui.prototype,"edges",void 0),Ui=Em=n([b("esri.symbols.ExtrudeSymbol3DLayer")],Ui);const tv=Ui;let Ga=class extends cr{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};n([le({esriSLS:"simple-line"},{readOnly:!0})],Ga.prototype,"type",void 0),n([c({type:Number,cast:Pe,json:{write:!0}})],Ga.prototype,"width",void 0),Ga=n([b("esri.symbols.LineSymbol")],Ga);const UC=Ga,qC=["begin","end","begin-end"],W$=["arrow","circle","square","diamond","cross","x"];var Tm;let xs=Tm=class extends F{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,s){(s==null?void 0:s.origin)==="web-map"?t[r]="arrow":t[r]=e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,s){(s==null?void 0:s.origin)==="web-map"||(t[r]=e)}clone(){return new Tm({color:E(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};n([c({type:["begin","end","begin-end"],json:{write:!0}})],xs.prototype,"placement",void 0),n([le({"line-marker":"line-marker"},{readOnly:!0}),c({json:{origins:{"web-map":{write:!1}}}})],xs.prototype,"type",void 0),n([c({type:W$})],xs.prototype,"style",void 0),n([Y("style")],xs.prototype,"writeStyle",null),n([c({type:Ce,value:null,json:{write:{allowNull:!0}}})],xs.prototype,"color",null),n([K("color")],xs.prototype,"readColor",null),n([Y("color")],xs.prototype,"writeColor",null),xs=Tm=n([b("esri.symbols.LineSymbolMarker")],xs);const BC=xs;var jm;const Uf=new ye({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Xs=jm=class extends UC{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,s,i,o){if(e&&typeof e!="string")return e;const l={};return e!=null&&(l.style=e),t!=null&&(l.color=t),r!=null&&(l.width=Pe(r)),s!=null&&(l.cap=s),i!=null&&(l.join=i),o!=null&&(l.miterLimit=Pe(o)),l}clone(){var e;return new jm({color:E(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};n([le({esriSLS:"simple-line"},{readOnly:!0})],Xs.prototype,"type",void 0),n([c({type:Uf.apiValues,json:{read:Uf.read,write:Uf.write}})],Xs.prototype,"style",void 0),n([c({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null||r.origin==null)})}}})],Xs.prototype,"cap",void 0),n([c({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null||r.origin==null)})}}})],Xs.prototype,"join",void 0),n([c({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":BC}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Xs.prototype,"marker",void 0),n([c({type:Number,json:{read:!1,write:!1}})],Xs.prototype,"miterLimit",void 0),Xs=jm=n([b("esri.symbols.SimpleLineSymbol")],Xs);const zr=Xs;let Ja=class extends cr{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};n([c({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":zr}},json:{default:null,write:!0}})],Ja.prototype,"outline",void 0),n([c({type:["simple-fill","picture-fill"],readOnly:!0})],Ja.prototype,"type",void 0),Ja=n([b("esri.symbols.FillSymbol")],Ja);const H$=Ja;let Qp=class extends F{constructor(e){super(e)}clone(){}};n([c({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Qp.prototype,"type",void 0),Qp=n([b("esri.symbols.patterns.LinePattern3D")],Qp);const K$=Qp,GC=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var Am;const JC=Lt()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Wa=Am=class extends K${constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new Am(e)}};n([c({type:["style"]})],Wa.prototype,"type",void 0),n([le(JC),c({type:GC})],Wa.prototype,"style",void 0),Wa=Am=n([b("esri.symbols.patterns.LineStylePattern3D")],Wa);const rv=Wa;let Zp=class extends F{constructor(e){super(e)}clone(){}};n([c({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Zp.prototype,"type",void 0),Zp=n([b("esri.symbols.patterns.Pattern3D")],Zp);const Q$=Zp,WC=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var Cm;let Ha=Cm=class extends Q${constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new Cm(e)}};n([c({type:["style"]})],Ha.prototype,"type",void 0),n([c({type:WC,json:{read:!0,write:!0}})],Ha.prototype,"style",void 0),Ha=Cm=n([b("esri.symbols.patterns.StylePattern3D")],Ha);const Z$=Ha,HC={types:{key:"type",base:Q$,typeMap:{style:Z$}},json:{write:!0}},Y$={types:{key:"type",base:K$,typeMap:{style:rv}},json:{write:!0}},Eu=new Ce("white");new Ce("black");const KC=new Ce([255,255,255,0]);function QC(e){return e.r===0&&e.g===0&&e.b===0}var Rm;let Tu=Rm=class extends Pr{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:T(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new Rm(e)}};n([le({multiply:"multiply",replace:"replace",tint:"tint"})],Tu.prototype,"colorMixMode",void 0),Tu=Rm=n([b("esri.symbols.support.Symbol3DFillMaterial")],Tu);function sv(e=tR){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function iv(e,t,r,s,i,o,l=sv()){return l[0]=e,l[1]=t,l[2]=r,l[3]=s,l[4]=i,l[5]=o,l}function RU(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function FU(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function ZC(e){return e[0]>=e[3]?0:e[3]-e[0]}function YC(e){return e[1]>=e[4]?0:e[4]-e[1]}function XC(e){return e[2]>=e[5]?0:e[5]-e[2]}function kU(e,t=[0,0,0]){return t[0]=ZC(e),t[1]=YC(e),t[2]=XC(e),t}function NU(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function PU(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function eR(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function LU(e){return e?eR(e,Tw):sv(Tw)}function DU(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function Ew(e){return e.length===6}function zU(e,t,r){if(X(e)||X(t))return e===t;if(!Ew(e)||!Ew(t))return!1;if(r){for(let s=0;s<e.length;s++)if(!r(e[s],t[s]))return!1}else for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}const Tw=[1/0,1/0,1/0,-1/0,-1/0,-1/0],tR=[0,0,0,0,0,0];sv();function VU(e,{isPrimitive:t,width:r,depth:s,height:i}){const o=t?10:1;if(r==null&&i==null&&s==null)return[o*e[0],o*e[1],o*e[2]];const l=ia(r,s,i);let u;for(let p=0;p<3;p++){const d=l[p];if(d!=null){u=d/e[p];break}}for(let p=0;p<3;p++)l[p]==null&&(l[p]=e[p]*u);return l}const rR=iv(-.5,-.5,-.5,.5,.5,.5),sR=iv(-.5,-.5,0,.5,.5,1),iR=iv(-.5,-.5,0,.5,.5,.5);function UU(e){switch(e){case"sphere":case"cube":case"diamond":return rR;case"cylinder":case"cone":case"inverted-cone":return sR;case"tetrahedron":return iR;default:return}}const ov=["butt","square","round"],oR=[...ov,"none"],X$=["miter","bevel","round"];var Fm;let qo=Fm=class extends F{constructor(e){super(e),this.color=new Ce([0,0,0,1]),this.size=_o(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:T(this.color)?this.color.clone():null,size:this.size,pattern:T(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new Fm(e)}};n([c(Mo)],qo.prototype,"color",void 0),n([c(Gs)],qo.prototype,"size",void 0),n([c(Y$)],qo.prototype,"pattern",void 0),n([c({type:ov,json:{default:"butt",write:{overridePolicy(){return{enabled:T(this.pattern)}}}}})],qo.prototype,"patternCap",void 0),qo=Fm=n([b("esri.symbols.support.Symbol3DOutline")],qo);var Yp;let ei=Yp=class extends Ws{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:T(this.edges)?this.edges.clone():null,enabled:this.enabled,material:T(this.material)?this.material.clone():null,pattern:T(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:T(this.outline)?this.outline.clone():null};return new Yp(e)}static fromSimpleFillSymbol(e){var t,r,s,i,o,l;const u=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new rv({style:e.outline.style}):null,p={size:(t=(r=e.outline)==null?void 0:r.width)!=null?t:0,color:((s=(i=e.outline)==null?void 0:i.color)!=null?s:Eu).clone(),pattern:u};return u&&(o=e.outline)!=null&&o.cap&&(p.patternCap=e.outline.cap),new Yp({material:new Tu({color:((l=e.color)!=null?l:KC).clone()}),pattern:e.style&&e.style!=="solid"?new Z$({style:e.style}):null,outline:p})}};n([le({Fill:"fill"},{readOnly:!0})],ei.prototype,"type",void 0),n([c({type:Tu,json:{write:!0}})],ei.prototype,"material",void 0),n([c(HC)],ei.prototype,"pattern",void 0),n([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ei.prototype,"castShadows",void 0),n([c({type:qo,json:{write:!0}})],ei.prototype,"outline",void 0),n([c(J$)],ei.prototype,"edges",void 0),ei=Yp=n([b("esri.symbols.FillSymbol3DLayer")],ei);const vc=ei,nR=["none","underline","line-through"],lR=["normal","italic","oblique"],aR=["normal","lighter","bold","bolder"],e3={type:Number,cast:e=>{const t=qh(e);return t===0?1:Zh(t,.1,4)},nonNullable:!0},uR=["left","right","center","justify"],cR=["left","right","center"],pR=["baseline","top","middle","bottom"],dR={type:uR,nonNullable:!0},hR={type:cR,nonNullable:!0},t3={type:pR,nonNullable:!0};var km;let ti=km=class extends F{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Pe(e)}clone(){return new km({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};n([c({type:nR,json:{default:"none",write:!0}})],ti.prototype,"decoration",void 0),n([c({type:String,json:{write:!0}})],ti.prototype,"family",void 0),n([c({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],ti.prototype,"size",void 0),n([ht("size")],ti.prototype,"castSize",null),n([c({type:lR,json:{default:"normal",write:!0}})],ti.prototype,"style",void 0),n([c({type:aR,json:{default:"normal",write:!0}})],ti.prototype,"weight",void 0),ti=km=n([b("esri.symbols.Font")],ti);const Yh=ti,fR=Z.getLogger("esri.core.urlUtils"),oa=Ue.request,jw="esri/config: esriConfig.request.proxyUrl is not set.",r3=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,s3=/^\s*http:/i,yR=/^\s*https:/i,mR=/^\s*file:/i,gR=/:\d+$/,vR=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,bR=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),wR=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class Fl{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(bR);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(wR),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}}const rp={},SR=new Fl(Ue.applicationUrl);let Bt=SR;const _R=xR();let nv=_R;const i3=()=>Bt,qU=()=>nv;function xR(){const e=Bt.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${Bt.scheme}://${Bt.host}${Bt.port!=null?`:${Bt.port}`:""}`}${t}`}function xr(e){const t={path:null,query:null},r=new Fl(e),s=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.substring(0,s),t.query=o3(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.substring(0,t.path.length-(r.fragment.length+1)))),t}function o3(e){const t=e.split("&"),r={};for(const s of t){if(!s)continue;const i=s.indexOf("=");let o,l;i<0?(o=decodeURIComponent(s),l=""):(o=decodeURIComponent(s.slice(0,i)),l=decodeURIComponent(s.slice(i+1)));let u=r[o];typeof u=="string"&&(u=r[o]=[u]),Array.isArray(u)?u.push(l):r[o]=l}return r}function Aw(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function Xu(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(r=>encodeURIComponent(r)+"="+encodeURIComponent(t(r,e[r]))).join("&"):Object.keys(e).map(r=>{const s=e[r];if(s==null)return"";const i=encodeURIComponent(r)+"=",o=t&&t[r];return o?i+encodeURIComponent(o(s)):Array.isArray(s)?s.map(l=>Aw(l)?i+encodeURIComponent(JSON.stringify(l)):i+encodeURIComponent(l)).join("&"):Aw(s)?i+encodeURIComponent(JSON.stringify(s)):i+encodeURIComponent(s)}).filter(r=>r).join("&"):""}function $R(e=!1){let t,r=oa.proxyUrl;if(typeof e=="string"){t=jR(e);const s=Xh(e);s&&(r=s.proxyUrl)}else t=!!e;if(!r)throw fR.warn(jw),new C("urlutils:proxy-not-set",jw);return t&&Nm()&&(r=pv(r)),xr(r)}function BU(e){const t=Xh(e);let r,s;if(t){const i=lv(t.proxyUrl);r=i.path,s=i.query?o3(i.query):null}if(r){const i=xr(e);e=r+"?"+i.path;const o=Xu(I(I({},s),i.query));o&&(e=`${e}?${o}`)}return e}const Ma={path:"",query:""};function lv(e){const t=e.indexOf("?");return t!==-1?(Ma.path=e.slice(0,t),Ma.query=e.slice(t+1)):(Ma.path=e,Ma.query=null),Ma}function n3(e){return e=(e=ah(e=NR(e=lv(e).path),!0)).toLowerCase()}function MR(e){const t={proxyUrl:e.proxyUrl,urlPrefix:n3(e.urlPrefix)},r=oa.proxyRules,s=t.urlPrefix;let i=r.length;for(let o=0;o<r.length;o++){const l=r[o].urlPrefix;if(s.indexOf(l)===0){if(s.length===l.length)return-1;i=o;break}l.indexOf(s)===0&&(i=o+1)}return r.splice(i,0,t),i}function Xh(e){const t=oa.proxyRules,r=n3(e);for(let s=0;s<t.length;s++)if(r.indexOf(t[s].urlPrefix)===0)return t[s]}function l3(e,t){return e=Cw(e),t=Cw(t),ah(e)===ah(t)}function Cw(e){const t=(e=ys(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function a3(e){const t=s=>s==null||s instanceof RegExp&&s.test(e)||typeof s=="string"&&e.startsWith(s),r=oa.interceptors;if(r){for(const s of r)if(Array.isArray(s.urls)){if(s.urls.some(t))return s}else if(t(s.urls))return s}return null}function lh(e,t,r=!1){const s=Lm(e),i=Lm(t);return!(!r&&s.scheme!==i.scheme)&&s.host!=null&&i.host!=null&&s.host.toLowerCase()===i.host.toLowerCase()&&s.port===i.port}function av(e){if(typeof e=="string"){if(!vr(e))return!0;e=Lm(e)}if(lh(e,Bt))return!0;const t=oa.trustedServers||[];for(let r=0;r<t.length;r++){const s=IR(t[r]);for(let i=0;i<s.length;i++)if(lh(e,s[i]))return!0}return!1}function IR(e){return rp[e]||(cv(e)||Io(e)?rp[e]=[new Fl(cs(e))]:rp[e]=[new Fl(`http://${e}`),new Fl(`https://${e}`)]),rp[e]}function cs(e,t=nv,r){return Io(e)?r&&r.preserveProtocolRelative?e:Bt.scheme==="http"&&Bt.authority===na(e).slice(2)?`http:${e}`:`https:${e}`:cv(e)?e:Hl(e[0]==="/"?FR(t):t,e)}function uv(e,t=nv,r){if(!vr(e))return e;const s=ys(e),i=s.toLowerCase(),o=ys(t).toLowerCase().replace(/\/+$/,""),l=r?ys(r).toLowerCase().replace(/\/+$/,""):null;if(l&&o.indexOf(l)!==0)return e;const u=(f,y,m)=>(m=f.indexOf(y,m))===-1?f.length:m;let p=u(i,"/",i.indexOf("//")+2),d=-1;for(;i.slice(0,p+1)===o.slice(0,p)+"/"&&(d=p+1,p!==i.length);)p=u(i,"/",p+1);if(d===-1||l&&d<l.length)return e;e=s.slice(d);const h=o.slice(d-1).replace(/[^/]+/g,"").length;if(h>0)for(let f=0;f<h;f++)e=`../${e}`;else e=`./${e}`;return e}function ys(e){return e=DR(e=LR(e=PR(e=cs(e=e.trim()))))}function Hl(...e){const t=e.filter(T);if(!t||!t.length)return;const r=[];if(vr(t[0])){const i=t[0],o=i.indexOf("//");o!==-1&&(r.push(i.slice(0,o+1)),CR(t[0])&&(r[0]+="/"),t[0]=i.slice(o+2))}else t[0][0]==="/"&&r.push("");const s=t.reduce((i,o)=>o?i.concat(o.split("/")):i,[]);for(let i=0;i<s.length;i++){const o=s[i];o===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!o&&i===s.length-1||o&&(o!=="."||r.length===0))&&r.push(o)}return r.join("/")}function na(e,t=!1){if(ef(e)||Ln(e))return null;let r=e.indexOf("://");if(r===-1&&Io(e))r=2;else{if(r===-1)return null;r+=3}const s=e.indexOf("/",r);return s!==-1&&(e=e.slice(0,s)),t&&(e=ah(e,!0)),e}function vr(e){return Io(e)||cv(e)}function ef(e){return e!=null&&e.slice(0,5)==="blob:"}function Ln(e){return e.slice(0,5)==="data:"}function GU(e){const t=u3(e);if(!t||!t.isBase64)return null;const r=atob(t.data),s=new Uint8Array(r.length);for(let i=0;i<r.length;i++)s[i]=r.charCodeAt(i);return s.buffer}function JU(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const OR=/^data:(.*?)(;base64)?,(.*)$/;function u3(e){const t=e.match(OR);if(!t)return null;const[,r,s,i]=t;return{mediaType:r,isBase64:!!s,data:i}}function c3(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function WU(e,t){ER(e,t)||TR(e,t)}function ER(e,t){if(!e)return!1;const r=document.createElement("a");if(!("download"in r))return!1;const s=URL.createObjectURL(e);return r.download=t,r.href=s,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s),!0}function TR(e,t){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(e,t)}function Io(e){return e!=null&&e!==void 0&&e[0]==="/"&&e[1]==="/"}function cv(e){return r3.test(e)}function jR(e){return yR.test(e)||Bt.scheme==="https"&&Io(e)}function AR(e){return s3.test(e)||Bt.scheme==="http"&&Io(e)}function CR(e){return mR.test(e)}function pv(e){return Io(e)?`https:${e}`:e.replace(s3,"https:")}function RR(){return Bt.scheme==="http"}function Nm(){return Bt.scheme==="https"}function ah(e,t=!1){return Io(e)?e.slice(2):(e=e.replace(r3,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function FR(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function kR(e){let t=0;if(vr(e)){const s=e.indexOf("//");s!==-1&&(t=s+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function HU(e,t){if(!e)return"";const r=xr(e).path.replace(/\/+$/,""),s=r.substring(r.lastIndexOf("/")+1);if(t==null||!t.length)return s;const i=new RegExp(`.(${t.join("|")})$`,"ig");return s.replace(i,"")}function NR(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function p3(e){return e.replace(/\/+$/,"")}function PR(e){if(/^https?:\/\//i.test(e)){const t=lv(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function LR(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function DR(e){const t=oa.httpsDomains;if(!AR(e))return e;const r=e.indexOf("/",7);let s;if(s=r===-1?e:e.slice(0,r),s=s.toLowerCase().slice(7),gR.test(s)){if(!s.endsWith(":80"))return e;s=s.slice(0,-3),e=e.replace(":80","")}return RR()&&s===Bt.authority&&!vR.test(e)||(Nm()&&s===Bt.authority||t&&t.some(i=>s===i||s.endsWith(`.${i}`))||Nm()&&!Xh(e))&&(e=pv(e)),e}function Pm(e,t,r){if(!(t&&r&&e&&vr(e)))return e;const s=e.indexOf("//"),i=e.indexOf("/",s+2),o=e.indexOf(":",s+2),l=Math.min(i<0?e.length:i,o<0?e.length:o);return e.slice(s+2,l).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,s+2)}${r}${e.slice(l)}`}function Lm(e){return typeof e=="string"?new Fl(cs(e)):(e.scheme||(e.scheme=Bt.scheme),e)}function d3(e,t){const r=xr(e),s=Object.keys(r.query||{});return s.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${s.join(", ")}.`),r.path}function h3(e,t,r){const s=xr(e),i=s.query||{};return i[t]=String(r),`${s.path}?${Xu(i)}`}function Rw(e,t){const r=xr(e),s=r.query||{};for(const o in t)s[o]=t[o];const i=Xu(s);return i?`${r.path}?${i}`:r.path}function KU(e){if(X(e))return null;const t=e.match(zR);return t?t[1]:null}const zR=/.*?\.([^\/]*)$/;function la(e,t){const r=t&&t.url&&t.url.path;if(e&&r&&(e=cs(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const s=uv(e,t.portalItem.itemUrl);UR.test(s)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(s).path)}return Dm(e,t&&t.portal)}function bc(e,t,r=ec.YES){if(!e)return e;!vr(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let s=cs(e);if(t){const i=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(i){const o=Dm(i,t.portal);s=uv(Dm(s,t.portal),o,o),s!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(s)}}return s=BR(s,t&&t.portal),vr(s)&&(s=ys(s)),t!=null&&t.resources&&t!=null&&t.portalItem&&!vr(s)&&!Ln(s)&&r===ec.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(s)}),s}function dv(e,t,r){return la(e,r)}function Fn(e,t,r,s){const i=bc(e,s);i!==void 0&&(t[r]=i)}const VR=/\/items\/([^\/]+)\/resources\//,UR=/^\.\/resources\//;function qR(e){const t=T(e)?e.match(VR):null;return T(t)?t[1]:null}function BR(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?Pm(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function Dm(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,s=i3();return lh(s,`${s.scheme}://${r}`)?Pm(e,t.portalHostname,r):Pm(e,r,t.portalHostname)}var ec;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(ec||(ec={}));const QU=Object.freeze({__proto__:null,fromJSON:la,toJSON:bc,read:dv,write:Fn,itemIdFromResourceUrl:qR,get MarkKeep(){return ec}});var zm;const GR=Lt()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Bo=zm=class extends F{constructor(e){super(e)}readHref(e,t,r){return e?la(e,r):t.dataURI}writeHref(e,t,r,s){e&&(Ln(e)?t.dataURI=e:(t.href=bc(e,s),vr(t.href)&&(t.href=ys(t.href))))}clone(){return new zm({href:this.href,primitive:this.primitive})}};n([c({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Bo.prototype,"href",void 0),n([K("href")],Bo.prototype,"readHref",null),n([Y("href",{href:{type:String},dataURI:{type:String}})],Bo.prototype,"writeHref",null),n([le(GR)],Bo.prototype,"primitive",void 0),Bo=zm=n([b("esri.symbols.support.IconSymbol3DLayerResource")],Bo);var Vm;let wl=Vm=class extends st{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new Vm({x:this.x,y:this.y})}};n([c({type:Number})],wl.prototype,"x",void 0),n([c({type:Number})],wl.prototype,"y",void 0),wl=Vm=n([b("esri.symbols.support.Symbol3DAnchorPosition2D")],wl);var Um;let Ka=Um=class extends F{constructor(e){super(e),this.color=new Ce([0,0,0,1]),this.size=_o(1)}clone(){const e={color:T(this.color)?this.color.clone():null,size:this.size};return new Um(e)}};n([c(Mo)],Ka.prototype,"color",void 0),n([c(Gs)],Ka.prototype,"size",void 0),Ka=Um=n([b("esri.symbols.support.Symbol3DIconOutline")],Ka);var Yn;const JR=Z.getLogger("esri.symbols.IconSymbol3DLayer");let $s=Yn=class extends Ws{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new Yn({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:T(this.material)?this.material.clone():null,outline:T(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Eu,r=Fw(e),s=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Eu).clone()}:null;return new Yn({size:e.size,resource:{primitive:HR(e.style)},material:{color:t},outline:s,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const t=!e.color||QC(e.color)?Eu:e.color,r=Fw(e);return new Yn({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new Yn({resource:{href:c3({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function Fw(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,s=kw(e.xoffset),i=kw(e.yoffset);return(s||i)&&t&&r?{x:-s/t,y:i/r}:null}function kw(e){return isFinite(e)?e:0}n([c({type:Pr,json:{write:!0}})],$s.prototype,"material",void 0),n([c({type:Bo,json:{write:!0}})],$s.prototype,"resource",void 0),n([le({Icon:"icon"},{readOnly:!0})],$s.prototype,"type",void 0),n([c(Gs)],$s.prototype,"size",void 0),n([le({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),c({json:{default:"center"}})],$s.prototype,"anchor",void 0),n([c({type:wl,json:{type:[Number],read:{reader:e=>new wl({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],$s.prototype,"anchorPosition",void 0),n([c({type:Ka,json:{write:!0}})],$s.prototype,"outline",void 0),$s=Yn=n([b("esri.symbols.IconSymbol3DLayer")],$s);const WR={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function HR(e){return WR[e]||(JR.warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const yo=$s;function KR(e,t,r=et){return t||(t=new r),t===e||(t.removeAll(),ZR(e)?t.addMany(e):e&&t.add(e)),t}function QR(e){return e}function ZR(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}const f3="20220404",y3="ecb69ff5e08a61c162de0ddc0b1f397ed5d4071b",m3="4.23",YR={async request(e,t){var r;const{default:s}=await Promise.resolve().then(function(){return d8}),i=e.options,o=i.responseType;i.signal=t==null?void 0:t.signal,i.responseType=o==="native"||o==="native-request-init"?"native-request-init":["blob","json","text"].includes(o)&&(r=a3(e.url))!=null&&r.after?o:"array-buffer";const l=await s(e.url,i),u={data:l.data,ssl:l.ssl};switch(l.requestOptions.responseType){case"native-request-init":return delete u.data.signal,u;case"blob":u.data=await u.data.arrayBuffer();break;case"json":u.data=new TextEncoder().encode(JSON.stringify(u.data)).buffer;break;case"text":u.data=new TextEncoder().encode(u.data).buffer}return{result:u,transferList:[u.data]}}};let dt;function ZU(e){dt=e}function YU(e){const t=dt&&dt.findCredential(e);return t&&t.token?h3(e,"token",t.token):e}R("host-webworker")||(R("edge")||R("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");const XR=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function g3(e){const t=na(e,!0);return t&&t.endsWith(".arcgis.com")&&!XR.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function e8(e,t,r=!1,s){return new Promise((i,o)=>{if(On(s))return void o(Nw());let l=()=>{d(),o(new Error(`Unable to load ${t}`))},u=()=>{const h=e;d(),i(h)},p=()=>{if(!e)return;const h=e;d(),h.src="",o(Nw())};const d=()=>{R("esri-image-decode")||(e.removeEventListener("error",l),e.removeEventListener("load",u)),l=null,u=null,e=null,T(s)&&s.removeEventListener("abort",p),p=null,r&&URL.revokeObjectURL(t)};T(s)&&s.addEventListener("abort",p),R("esri-image-decode")?e.decode().then(u,l):(e.addEventListener("error",l),e.addEventListener("load",u))})}function Nw(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}async function at(e,t){var r;const s=Ln(e),i=ef(e);i||s||(e=ys(e));const o={url:e,requestOptions:I({},t)};let l=a3(e);if(l){const h=await a8(l,o);if(h!=null)return{data:h,getHeader:hv,requestOptions:o.requestOptions,url:o.url};l.after||l.error||(l=null)}if(e=o.url,(t=o.requestOptions).responseType==="image"){if(R("host-webworker")||R("host-node"))throw ps("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),o)}else if(s)throw ps("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),o);if(t.method==="head"){if(t.body)throw ps("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),o);if(s||i)throw ps("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),o)}if(await o8(),uh)return uh.execute(e,t);const u=new AbortController;So(t,()=>u.abort());const p={controller:u,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:l,params:o,redoRequest:!1,useIdentity:di.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},d=await c8(p);return(r=l)==null||r.after==null||r.after(d),d}let uh;const di=Ue.request,v3="FormData"in globalThis,t8=[499,498,403,401],r8=["COM_0056","COM_0057","SB_0008"],s8=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],hv=()=>null,qm=Symbol();function i8(e){const t=na(e);t&&!at._corsServers.includes(t)&&at._corsServers.push(t)}function Pw(e){const t=na(e);return!t||t.endsWith(".arcgis.com")||at._corsServers.includes(t)||av(t)}function ps(e,t,r,s){let i="Error";const o={url:r.url,requestOptions:r.requestOptions,getHeader:hv,ssl:!1};if(t instanceof C)return t.details?(t.details=E(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=o,t;if(t){const l=s&&(d=>s.headers.get(d)),u=s&&s.status,p=t.message;p&&(i=p),l&&(o.getHeader=l),o.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||u||0,o.subCode=t.subcode,o.messageCode=t.messageCode,typeof t.details=="string"?o.messages=[t.details]:o.messages=t.details,o.raw=qm in t?t[qm]:t}return Js(t)?Gt():new C(e,i,o)}async function o8(){R("host-webworker")?uh||(uh=await import("./request.8742a176.js")):at._abortableFetch||(at._abortableFetch=globalThis.fetch.bind(globalThis))}async function Bm(){dt||await import("./IdentityManager.5eea553a.js")}async function n8(e){const t=e.params.url,r=e.params.requestOptions,s=e.controller.signal,i=r.body;let o=null,l=null,u=null;if(v3&&"HTMLFormElement"in globalThis&&(i instanceof FormData?o=i:i instanceof HTMLFormElement&&(l=i,o=new FormData(l))),typeof i=="string"&&(u=i),e.fetchOptions={cache:r.cacheBust&&!at._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",redirect:"follow",signal:s},(o||u)&&(e.fetchOptions.body=o||u),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||r.query&&r.query.token||o&&o.get&&o.get("token")||l&&l.elements.token),!e.hasToken&&Ue.apiKey&&g3(t)&&(r.query||(r.query={}),r.query.token=Ue.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!b3(t)&&!On(s)){let p;r.authMode==="immediate"?(await Bm(),p=await dt.getCredential(t,{signal:s}),e.credential=p):r.authMode==="no-prompt"?(await Bm(),p=await dt.getCredential(t,{prompt:!1,signal:s}).catch(()=>{}),e.credential=p):dt&&(p=dt.findCredential(t)),p&&(e.credentialToken=p.token,e.useSSL=!!p.ssl)}}function b3(e){return s8.some(t=>t.test(e))}async function l8(e){let t=e.params.url;const r=e.params.requestOptions,s=e.fetchOptions,i=ef(t)||Ln(t),o=r.responseType||"json",l=i?0:r.timeout!=null?r.timeout:di.timeout;let u=!1;if(!i){e.useSSL&&(t=pv(t)),r.cacheBust&&s.cache==="default"&&(t=h3(t,"request.preventCache",Date.now()));let y=I({},r.query);e.credentialToken&&(y.token=e.credentialToken);let m=Xu(y);R("esri-url-encodes-apostrophe")&&(m=m.replace(/'/g,"%27"));const v=t.length+1+m.length;let _;u=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||v>di.maxUrlLength;const S=r.useProxy||!!Xh(t);if(S){const M=$R(t);_=M.path,!u&&_.length+1+v>di.maxUrlLength&&(u=!0),M.query&&(y=I(I({},M.query),y))}if(s.method==="HEAD"&&(u||S)){if(u)throw v>di.maxUrlLength?ps("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):ps("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(S)throw ps("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(u?(s.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=Rw(t,y):(s.body=Xu(y),s.headers["Content-Type"]="application/x-www-form-urlencoded")):t=Rw(t,y),S&&(e.useProxy=!0,t=`${_}?${t}`),y.token&&v3&&s.body instanceof FormData){const M=s.body;M.set?M.set("token",y.token):M.append("token",y.token)}if(r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!lh(t,i3())){if(av(t))e.withCredentials=!0;else if(dt){const M=dt.findServerInfo(t);M&&M.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(s.credentials="include")}let p,d,h=0,f=!1;l>0&&(h=setTimeout(()=>{f=!0,e.controller.abort()},l));try{if(r.responseType==="native-request-init")d=s,d.url=t;else if(r.responseType!=="image"||s.cache!=="default"||s.method!=="GET"||u||u8(r.headers)||!i&&!e.useProxy&&di.proxyUrl&&!Pw(t)){if(p=await at._abortableFetch(t,s),e.useProxy||i8(t),r.responseType==="native")d=p;else if(s.method!=="HEAD")if(p.ok){switch(o){case"array-buffer":d=await p.arrayBuffer();break;case"blob":case"image":d=await p.blob();break;default:d=await p.text()}if(h&&(clearTimeout(h),h=0),o==="json"||o==="xml"||o==="document")if(d)switch(o){case"json":d=JSON.parse(d);break;case"xml":d=Lw(d,"application/xml");break;case"document":d=Lw(d,"text/html")}else d=null;if(d){if(o==="array-buffer"||o==="blob"){const y=p.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(y)&&d[o==="blob"?"size":"byteLength"]<=750)try{const m=await new Response(d).json();m.error&&(d=m)}catch{}}o==="image"&&d instanceof Blob&&(d=await Dw(URL.createObjectURL(d),e,!0))}}else d=await p.text()}else d=await Dw(t,e)}catch(y){if(y.name==="AbortError")throw f?new Error("Timeout exceeded"):Gt("Request canceled");if(!(!p&&y instanceof TypeError&&di.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||Pw(t))throw y;e.redoRequest=!0,MR({proxyUrl:di.proxyUrl,urlPrefix:na(t)})}finally{h&&clearTimeout(h)}return[p,d]}async function a8(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers=I(I({},t.requestOptions.headers),e.headers)),e.query&&(t.requestOptions.query=I(I({},t.requestOptions.query),e.query)),e.before){let r,s;try{s=await e.before(t)}catch(i){r=ps("request:interceptor",i,t)}if((s instanceof Error||s instanceof C)&&(r=ps("request:interceptor",s,t)),r)throw e.error&&e.error(r),r;return s}}function u8(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function Lw(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function c8(e){var t,r;let s,i;await n8(e);try{do[s,i]=await l8(e);while(!await p8(e,s,i))}catch(u){const p=ps("request:server",u,e.params,s);throw p.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(p),p}const o=e.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(o)&&!e.hasToken&&!e.credentialToken&&(t=i)!=null&&(r=t.user)!=null&&r.username&&!av(o)){const u=na(o,!0);u&&di.trustedServers.push(u)}const l=e.credential;if(l&&dt){const u=dt.findServerInfo(l.server);let p=u&&u.owningSystemUrl;if(p){p=p.replace(/\/?$/,"/sharing");const d=dt.findCredential(p,l.userId);d&&dt._getIdenticalSvcIdx(p,d)===-1&&d.resources.unshift(p)}}return{data:i,getHeader:s?u=>s.headers.get(u):hv,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function p8(e,t,r){if(e.redoRequest)return e.redoRequest=!1,!1;const s=e.params.requestOptions;if(!t||s.responseType==="native"||s.responseType==="native-request-init")return!0;let i,o,l,u;if(!t.ok)throw i=new Error(`Unable to load ${t.url} status: ${t.status}`),i[qm]=r,i;r!=null&&r.error&&(i=r.error),i&&(o=Number(i.code),l=i.hasOwnProperty("subcode")?Number(i.subcode):null,u=i.messageCode,u=u&&u.toUpperCase());const p=s.authMode;if(o===403&&(l===4||i.message&&i.message.toLowerCase().indexOf("ssl")>-1&&i.message.toLowerCase().indexOf("permission")===-1)){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(p!=="no-prompt"||o===498)&&t8.indexOf(o)!==-1&&!b3(e.params.url)&&(o!==403||r8.indexOf(u)===-1&&(l==null||l===2&&e.credentialToken))){await Bm();try{const d=await dt.getCredential(e.params.url,{error:ps("request:server",i,e.params),prompt:p!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=d,e.credentialToken=d.token,e.useSSL=e.useSSL||d.ssl,!1}catch(d){if(p==="no-prompt")return e.credential=null,e.credentialToken=null,!1;i=d}}if(i)throw i;return!0}function Dw(e,t,r=!1){const s=t.controller.signal,i=new Image;return t.withCredentials?i.crossOrigin="use-credentials":i.crossOrigin="anonymous",i.alt="",i.src=e,e8(i,e,r,s)}at._abortableFetch=null,at._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];var d8=Object.freeze(Object.defineProperty({__proto__:null,default:at},Symbol.toStringTag,{value:"Module"})),no;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(no||(no={}));class h8{constructor(t){this.instance=t,this._resolver=zl(),this._status=no.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=no.RESOLVED,this._cleanUp()},()=>{this._status=no.REJECTED,this._cleanUp()})}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===no.RESOLVED}isRejected(){return this._status===no.REJECTED}isFulfilled(){return this._status!==no.PENDING}abort(){this._resolver.reject(Gt())}when(t,r){return this._resolver.promise.then(t,r)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const t=zl(),r=[...this._resolvingPromises,t.promise],s=this._allPromise=Promise.all(r);s.then(()=>{this.isFulfilled()||this._allPromise!==s||this._resolver.resolve(this.instance)},i=>{this.isFulfilled()||this._allPromise!==s||Js(i)||this._resolver.reject(i)}),t.resolve()}}const fv=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new h8(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,s){return new Promise((i,o)=>{this._promiseProps.when(i,o)}).then(r,s)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=n([b("esri.core.Promise")],t),t};let Gm=class extends fv(st){};Gm=n([b("esri.core.Promise")],Gm);const f8="not-loaded",y8="loading",m8="failed",zw="loaded",w3=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(s=>{const i=this.load.bind(this);this.load=o=>{const l=new Promise((u,p)=>{const d=I1(o,p);this.destroyed&&p(new C("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(u,p).finally(()=>{d&&d.remove()})});if(this.loadStatus===f8){this._set("loadStatus",y8);const u=this._loadController=new AbortController;i({signal:u.signal}),So(u.signal,()=>{this._promiseProps.abort()})}return s(),l}})),this.when(()=>{this._set("loadStatus",zw),this._loadController=null},s=>{this._set("loadStatus",m8),this._set("loadError",s),this._loadController=null})}get loaded(){return this.loadStatus===zw}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new C("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort()),this}};return n([c({readOnly:!0})],t.prototype,"loaded",null),n([c({readOnly:!0})],t.prototype,"loadError",void 0),n([c({clonable:!1})],t.prototype,"loadStatus",void 0),n([c({type:[_r],readOnly:!0})],t.prototype,"loadWarnings",null),t=n([b("esri.core.Loadable")],t),t};let Qa=class extends w3(Gm){};Qa=n([b("esri.core.Loadable")],Qa),function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=w3,e.isLoadable=t}(Qa||(Qa={}));const tf=Qa;var Jm;const g8=new ye({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Ar=Jm=class extends st{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new Jm({categories:this.categories?E(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r,s;if(this.categories&&(r=this.categories.map(l=>Array.isArray(l)?JSON.stringify(l):l)),this.extent){const l=kx(this.extent,Ae.WGS84);T(l)&&(s=`${l.xmin},${l.ymin},${l.xmax},${l.ymax}`)}let i=this.query;!this.disableExtraQuery&&e.extraQuery&&(i="("+i+")"+e.extraQuery);const o={categories:r,bbox:s,q:i,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(o.sortField=this.sortField.split(",").map(l=>g8.toJSON(l.trim())).join(","),o.sortOrder=this.sortOrder),{query:I(I({},t),o)}}};n([c()],Ar.prototype,"categories",void 0),n([c()],Ar.prototype,"disableExtraQuery",void 0),n([c({type:ft})],Ar.prototype,"extent",void 0),n([c()],Ar.prototype,"filter",void 0),n([c()],Ar.prototype,"num",void 0),n([c()],Ar.prototype,"query",void 0),n([c()],Ar.prototype,"sortField",void 0),n([c()],Ar.prototype,"sortOrder",null),n([c()],Ar.prototype,"start",void 0),Ar=Jm=n([b("esri.portal.PortalQueryParams")],Ar);const mi=Ar;let Go=class extends st{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};n([c()],Go.prototype,"nextQueryParams",void 0),n([c()],Go.prototype,"queryParams",void 0),n([c()],Go.prototype,"results",void 0),n([c()],Go.prototype,"total",void 0),Go=n([b("esri.portal.PortalQueryResult")],Go);const v8=Go;let ri=class extends F{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new C("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};n([c({type:Date})],ri.prototype,"created",void 0),n([c()],ri.prototype,"id",void 0),n([c()],ri.prototype,"portal",void 0),n([c()],ri.prototype,"title",void 0),n([c({readOnly:!0})],ri.prototype,"url",null),n([c()],ri.prototype,"username",void 0),ri=n([b("esri.portal.PortalFolder")],ri);const b8=ri;let Mt=class extends F{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal._request(this.url+"/categorySchema",e).then(t=>{const r=t.categorySchema||[];return r.some(s=>s.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return this.portal._request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new C("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){let r=Je(mi,e);return parseFloat(this.portal.currentVersion)>5?(r=r||new mi,this.portal._queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new mi,r.query="group:"+this.id+(r.query?" "+r.query:""),this.portal.queryItems(r,t))}_fetchCategorySchemaSet(e,t){return this.portal._fetchSelf(this.portal.authMode,!0,t).then(r=>{const s=r.contentCategorySetsGroupQuery;if(s){const i=new mi;return i.disableExtraQuery=!0,i.num=1,i.query=s,this.portal.queryGroups(i,t)}throw new C("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const s=r.results[0],i=new mi;return i.num=1,i.query=`typekeywords:"${e}"`,s.queryItems(i,t)}throw new C("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",t).then(s=>{const i=s&&s.categorySchema;return i&&i.length?i:[]}):[])}};n([c()],Mt.prototype,"access",void 0),n([c({type:Date})],Mt.prototype,"created",void 0),n([c()],Mt.prototype,"description",void 0),n([c()],Mt.prototype,"id",void 0),n([c()],Mt.prototype,"isInvitationOnly",void 0),n([c({type:Date})],Mt.prototype,"modified",void 0),n([c()],Mt.prototype,"owner",void 0),n([c()],Mt.prototype,"portal",void 0),n([c()],Mt.prototype,"snippet",void 0),n([c()],Mt.prototype,"sortField",void 0),n([c()],Mt.prototype,"sortOrder",void 0),n([c()],Mt.prototype,"tags",void 0),n([c()],Mt.prototype,"thumbnail",void 0),n([c({readOnly:!0})],Mt.prototype,"thumbnailUrl",null),n([c()],Mt.prototype,"title",void 0),n([c({readOnly:!0})],Mt.prototype,"url",null),Mt=n([b("esri.portal.PortalGroup")],Mt);const Wm=Mt;var w8=Object.freeze(Object.defineProperty({__proto__:null,default:Wm},Symbol.toStringTag,{value:"Module"})),Hm;let Ze=Hm=class extends F{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,r=e&&e.data,s=e&&e.folder,i={method:"post"};t&&(i.query=t.createPostQuery(),r!=null&&(typeof r=="string"?i.query.text=r:typeof r=="object"&&(i.query.text=JSON.stringify(r))));let o=this.userContentUrl;return s&&(o+="/"+(typeof s=="string"?s:s.id)),this.portal._request(o+"/addItem",i).then(l=>(t.id=l.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",r=e.map(s=>s.id);if(r.length){const s={method:"post",query:{items:r.join(",")}};return this.portal._request(t,s).then(()=>{e.forEach(i=>{i.id=null,i.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal._request(this.userContentUrl,e).then(t=>{let r;return r=t&&t.folders?t.folders.map(s=>{const i=b8.fromJSON(s);return i.portal=this.portal,i}):[],r})}fetchGroups(){return this.portal._request(this.url).then(e=>{let t;return t=e&&e.groups?e.groups.map(r=>{const s=Wm.fromJSON(r);return s.portal=this.portal,s}):[],t})}fetchItems(e){e||(e={});let t,r=this.userContentUrl;return e.folder&&(r+="/"+e.folder.id),Promise.resolve().then(function(){return JM}).then(({default:s})=>{t=s;const i={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal._request(r,{query:i})}).then(s=>{let i;return s&&s.items?(i=s.items.map(o=>{const l=t.fromJSON(o);return l.portal=this.portal,l}),Promise.all(i.map(o=>o.load())).catch(o=>o).then(()=>({items:i,nextStart:s.nextStart,total:s.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new Wm({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new C("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new C("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new Hm;return t.sourceJSON=e,t.read(e),t}};n([c()],Ze.prototype,"access",void 0),n([c({type:Date})],Ze.prototype,"created",void 0),n([c()],Ze.prototype,"culture",void 0),n([c()],Ze.prototype,"description",void 0),n([c()],Ze.prototype,"email",void 0),n([c()],Ze.prototype,"favGroupId",void 0),n([c()],Ze.prototype,"fullName",void 0),n([c({type:Date})],Ze.prototype,"modified",void 0),n([c()],Ze.prototype,"orgId",void 0),n([c()],Ze.prototype,"portal",void 0),n([c()],Ze.prototype,"preferredView",void 0),n([c()],Ze.prototype,"privileges",void 0),n([c()],Ze.prototype,"region",void 0),n([c()],Ze.prototype,"role",void 0),n([c()],Ze.prototype,"roleId",void 0),n([c()],Ze.prototype,"sourceJSON",void 0),n([c()],Ze.prototype,"thumbnail",void 0),n([c({readOnly:!0})],Ze.prototype,"thumbnailUrl",null),n([c()],Ze.prototype,"units",void 0),n([c({readOnly:!0})],Ze.prototype,"userContentUrl",null),n([c({readOnly:!0})],Ze.prototype,"url",null),n([c()],Ze.prototype,"username",void 0),n([c()],Ze.prototype,"userType",void 0),Ze=Hm=n([b("esri.portal.PortalUser")],Ze);const yv=Ze;var S8=Object.freeze(Object.defineProperty({__proto__:null,default:yv},Symbol.toStringTag,{value:"Module"})),dr;let qf;const Vw={PortalGroup:()=>Promise.resolve().then(function(){return w8}),PortalItem:()=>Promise.resolve().then(function(){return JM}),PortalUser:()=>Promise.resolve().then(function(){return S8})};let B=dr=class extends F1(tf){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Ue.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Ue.request.trustedServers.indexOf(t)===-1&&Ue.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get stylesGroupQuery(){return qu(Z.getLogger(this.declaredClass),"stylesGroupQuery",{replacement:"stylesGroupQuery3d",version:"4.21"}),this.stylesGroupQuery3d}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=yv.fromJSON(e),t.portal=this),t}load(e){const t=import("./Basemap.b16ce50e.js").then(({default:r})=>{qs(e),qf=r}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e)).then(r=>{if(dt){const s=dt;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==dr.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=s.on("credential-create",()=>{s.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}async createClosestFacilityTask(){Wn(Z.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/closestFacility",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("closestFacility");return new(await import("./ClosestFacilityTask.108f4b45.js")).default(e)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await import("./ElevationLayer.4e142bf9.js")).default;return e?e.map(r=>new t({id:r.id,url:r.url})):[]}async createGeometryService(){Wn(Z.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/geometryService",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("geometry");return new(await import("./GeometryService.5932ceae.js")).default({url:e})}async createPrintTask(){Wn(Z.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/print",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("printTask");return new(await import("./PrintTask.9ff1a30e.js")).default(e)}async createRouteTask(){Wn(Z.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/route",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("route");return new(await import("./RouteTask.7f4e10d8.js")).default(e)}async createServiceAreaTask(){Wn(Z.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/serviceArea",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("serviceArea");return new(await import("./ServiceAreaTask.4ac9dedd.js")).default(e)}fetchBasemaps(e,t){const r=new mi;return r.query=e||(Ue.apiKey&&g3(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0,this.queryGroups(r,t).then(s=>{if(r.num=100,r.query='type:"Web Map" -type:"Web Application"',s.total){const i=s.results[0];return r.sortField=i.sortField||"name",r.sortOrder=i.sortOrder||"desc",i.queryItems(r,t)}return null}).then(s=>{let i;return i=s&&s.total?s.results.filter(o=>o.type==="Web Map").map(o=>new qf({portalItem:o})):[],i})}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):On(e)?Promise.reject(Gt()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new mi;if(r.num=100,r.sortField="title",t&&t.length){const s=[];for(const i of t)s.push(`(title:"${i.title}" AND owner:${i.owner})`);return r.query=s.join(" OR "),this.queryGroups(r,e).then(i=>i.results)}return On(e)?Promise.reject(Gt()):Promise.resolve([])}fetchRegions(e){var t;const r=((t=this.user)==null?void 0:t.culture)||this.culture||Vs();return this._request(this.restUrl+"/portals/regions",pe(I({},e),{query:{culture:r}}))}fetchSettings(e){var t;const r=((t=this.user)==null?void 0:t.culture)||this.culture||Vs();return this._request(this.restUrl+"/portals/self/settings",pe(I({},e),{query:{culture:r}}))}static getDefault(){return dr._default&&!dr._default.destroyed||(dr._default=new dr),dr._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new C("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new dr({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new C("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new C("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,r){const s=this.restUrl+"/portals/self",i=I({authMode:e,query:{culture:Vs().toLowerCase()}},r);return i.authMode==="auto"&&(i.authMode="no-prompt"),t&&(i.query.default=!0),this._request(s,i)}_queryPortal(e,t,r,s){const i=Je(mi,t),o=l=>this._request(this.restUrl+e,I(I({},i.toRequestOptions(this)),s)).then(u=>{const p=i.clone();return p.start=u.nextStart,new v8({nextQueryParams:p,queryParams:i,total:u.total,results:dr._resultsToTypedArray(l,{portal:this},u,s)})}).then(u=>Promise.all(u.results.map(p=>typeof p.when=="function"?p.when():u)).then(()=>u,p=>(pc(p),u)));return r&&Vw[r]?Vw[r]().then(({default:l})=>(qs(s),o(l))):o()}_signIn(){if(this.authMode===dr.AUTH_MODE_ANONYMOUS)return Promise.reject(new C("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this._fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this._fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return dt?dt.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.indexOf("?")>-1?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,r){return this._request(e,t).then(s=>{const i=dr._resultsToTypedArray(r,{portal:this},s);return Promise.all(i.map(o=>typeof o.when=="function"?o.when():s)).then(()=>i,()=>i)})}_readBasemap(e){if(e){const t=qf.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const r=I({f:"json"},t.query),{authMode:s=this.authMode===dr.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:i=null,cacheBust:o=!1,method:l="auto",responseType:u="json",signal:p}=t,d={authMode:s,body:i,cacheBust:o,method:l,query:r,responseType:u,timeout:0,signal:p};return at(this._normalizeSSL(e),d).then(h=>h.data)}static _resultsToTypedArray(e,t,r,s){let i;if(r){const o=T(s)?s.signal:null;i=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(i=i.map(l=>{const u=Object.assign(e?e.fromJSON(l):l,t);return typeof u.load=="function"&&u.load(o),u}))}else i=[];return i}};B.AUTH_MODE_ANONYMOUS="anonymous",B.AUTH_MODE_AUTO="auto",B.AUTH_MODE_IMMEDIATE="immediate",n([c()],B.prototype,"access",void 0),n([c()],B.prototype,"allSSL",void 0),n([c()],B.prototype,"authMode",void 0),n([c()],B.prototype,"authorizedCrossOriginDomains",void 0),n([K("authorizedCrossOriginDomains")],B.prototype,"readAuthorizedCrossOriginDomains",null),n([c()],B.prototype,"basemapGalleryGroupQuery",void 0),n([c()],B.prototype,"bingKey",void 0),n([c()],B.prototype,"canListApps",void 0),n([c()],B.prototype,"canListData",void 0),n([c()],B.prototype,"canListPreProvisionedItems",void 0),n([c()],B.prototype,"canProvisionDirectPurchase",void 0),n([c()],B.prototype,"canSearchPublic",void 0),n([c()],B.prototype,"canShareBingPublic",void 0),n([c()],B.prototype,"canSharePublic",void 0),n([c()],B.prototype,"canSignInArcGIS",void 0),n([c()],B.prototype,"canSignInIDP",void 0),n([c()],B.prototype,"colorSetsGroupQuery",void 0),n([c()],B.prototype,"commentsEnabled",void 0),n([c({type:Date})],B.prototype,"created",void 0),n([c()],B.prototype,"credential",void 0),n([c()],B.prototype,"culture",void 0),n([c()],B.prototype,"currentVersion",void 0),n([c()],B.prototype,"customBaseUrl",void 0),n([c()],B.prototype,"defaultBasemap",void 0),n([K("defaultBasemap")],B.prototype,"readDefaultBasemap",null),n([c()],B.prototype,"defaultDevBasemap",void 0),n([K("defaultDevBasemap")],B.prototype,"readDefaultDevBasemap",null),n([c({type:ft})],B.prototype,"defaultExtent",void 0),n([c()],B.prototype,"defaultVectorBasemap",void 0),n([K("defaultVectorBasemap")],B.prototype,"readDefaultVectorBasemap",null),n([c()],B.prototype,"description",void 0),n([c()],B.prototype,"devBasemapGalleryGroupQuery",void 0),n([c()],B.prototype,"eueiEnabled",void 0),n([c({readOnly:!0})],B.prototype,"extraQuery",null),n([c()],B.prototype,"featuredGroups",void 0),n([c()],B.prototype,"featuredItemsGroupQuery",void 0),n([c()],B.prototype,"galleryTemplatesGroupQuery",void 0),n([c()],B.prototype,"livingAtlasGroupQuery",void 0),n([c()],B.prototype,"hasCategorySchema",void 0),n([c()],B.prototype,"helpBase",void 0),n([c()],B.prototype,"helperServices",void 0),n([c()],B.prototype,"helpMap",void 0),n([c()],B.prototype,"homePageFeaturedContent",void 0),n([c()],B.prototype,"homePageFeaturedContentCount",void 0),n([c()],B.prototype,"httpPort",void 0),n([c()],B.prototype,"httpsPort",void 0),n([c()],B.prototype,"id",void 0),n([c()],B.prototype,"ipCntryCode",void 0),n([c({readOnly:!0})],B.prototype,"isOrganization",null),n([c()],B.prototype,"isPortal",void 0),n([c()],B.prototype,"isReadOnly",void 0),n([c()],B.prototype,"layerTemplatesGroupQuery",void 0),n([c()],B.prototype,"maxTokenExpirationMinutes",void 0),n([c({type:Date})],B.prototype,"modified",void 0),n([c()],B.prototype,"name",void 0),n([c()],B.prototype,"portalHostname",void 0),n([c()],B.prototype,"portalMode",void 0),n([c()],B.prototype,"portalProperties",void 0),n([c()],B.prototype,"region",void 0),n([c({readOnly:!0})],B.prototype,"restUrl",null),n([c()],B.prototype,"rotatorPanels",void 0),n([c()],B.prototype,"showHomePageDescription",void 0),n([c()],B.prototype,"sourceJSON",void 0),n([c()],B.prototype,"staticImagesUrl",void 0),n([c({readOnly:!0,json:{read:!1}})],B.prototype,"stylesGroupQuery",null),n([c({json:{name:"2DStylesGroupQuery"}})],B.prototype,"stylesGroupQuery2d",void 0),n([c({json:{name:"stylesGroupQuery"}})],B.prototype,"stylesGroupQuery3d",void 0),n([c()],B.prototype,"supportsHostedServices",void 0),n([c()],B.prototype,"symbolSetsGroupQuery",void 0),n([c()],B.prototype,"templatesGroupQuery",void 0),n([c()],B.prototype,"thumbnail",void 0),n([c({readOnly:!0})],B.prototype,"thumbnailUrl",null),n([c()],B.prototype,"units",void 0),n([c()],B.prototype,"url",void 0),n([c()],B.prototype,"urlKey",void 0),n([K("urlKey")],B.prototype,"readUrlKey",null),n([c()],B.prototype,"user",void 0),n([K("user")],B.prototype,"readUser",null),n([c()],B.prototype,"useStandardizedQuery",void 0),n([c()],B.prototype,"useVectorBasemaps",void 0),n([c()],B.prototype,"vectorBasemapGalleryGroupQuery",void 0),B=dr=n([b("esri.portal.Portal")],B);const ur=B;Z.getLogger("esri.core.Clonable");const Ii=e=>{let t=class extends e{clone(){const r=wT(er(this),"unable to clone instance of non-accessor class"),s=r.metadatas,i=r.store,o={},l=new Map;for(const d in s){const h=s[d],f=i==null?void 0:i.originOf(d),y=h.clonable;if(h.readOnly||y===!1||f!==je.USER&&f!==je.DEFAULTS&&f!==je.WEB_MAP&&f!==je.WEB_SCENE)continue;const m=this[d];let v=null;v=typeof y=="function"?y(m):y==="reference"?m:Ry(m),m!=null&&v==null||(f===je.DEFAULTS?l.set(d,v):o[d]=v)}const u=new(Object.getPrototypeOf(this)).constructor(o);if(l.size){var p;const d=(p=er(u))==null?void 0:p.store;if(d)for(const[h,f]of l)d.set(h,f,je.DEFAULTS)}return u}};return t=n([b("esri.core.Clonable")],t),t};let Uw=class extends Ii(st){};Uw=n([b("esri.core.Clonable")],Uw);let Jo=class extends Ii(F){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return T(e)&&e.placement===this.placement&&e.style===this.style&&(X(this.color)&&X(e.color)||T(this.color)&&T(e.color)&&this.color.toJSON()===e.color.toJSON())}};n([c({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Jo.prototype,"type",void 0),n([c({type:qC,json:{default:"begin-end",write:!0}})],Jo.prototype,"placement",void 0),n([c({type:W$,json:{default:"arrow",write:!0}})],Jo.prototype,"style",void 0),n([c({type:Ce,json:{type:[_t],default:null,write:!0}})],Jo.prototype,"color",void 0),Jo=n([b("esri.symbols.LineStyleMarker3D")],Jo);const Km=Jo;var Xp;let Ms=Xp=class extends Ws{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=_o(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:T(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:T(this.pattern)?this.pattern.clone():null,marker:T(this.marker)?this.marker.clone():null};return new Xp(e)}static fromSimpleLineSymbol(e){var t,r,s;const i={enabled:!0,size:(t=e.width)!=null?t:_o(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new rv({style:e.style}):null,material:new Pr({color:(e.color||Eu).clone()}),marker:e.marker?new Km({placement:e.marker.placement,style:e.marker.style,color:(r=(s=e.marker.color)==null?void 0:s.clone())!=null?r:null}):null};return new Xp(i)}};n([c({type:Pr,json:{write:!0}})],Ms.prototype,"material",void 0),n([le({Line:"line"},{readOnly:!0})],Ms.prototype,"type",void 0),n([c({type:X$,json:{write:!0,default:"miter"}})],Ms.prototype,"join",void 0),n([c({type:ov,json:{write:!0,default:"butt"}})],Ms.prototype,"cap",void 0),n([c(Gs)],Ms.prototype,"size",void 0),n([c(Y$)],Ms.prototype,"pattern",void 0),n([c({types:{key:"type",base:Km,typeMap:{style:Km}},json:{write:!0}})],Ms.prototype,"marker",void 0),Ms=Xp=n([b("esri.symbols.LineSymbol3DLayer")],Ms);const aa=Ms;var Qm;const _8=Lt()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Za=Qm=class extends F{clone(){return new Qm({href:this.href,primitive:this.primitive})}};n([c({type:String,json:{read:dv,write:Fn}})],Za.prototype,"href",void 0),n([le(_8)],Za.prototype,"primitive",void 0),Za=Qm=n([b("esri.symbols.support.ObjectSymbol3DLayerResource")],Za);var Zm;let hn=Zm=class extends st{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new Zm({x:this.x,y:this.y,z:this.z})}};n([c({type:Number})],hn.prototype,"x",void 0),n([c({type:Number})],hn.prototype,"y",void 0),n([c({type:Number})],hn.prototype,"z",void 0),hn=Zm=n([b("esri.symbols.support.Symbol3DAnchorPosition3D")],hn);var Ym;let zt=Ym=class extends Ws{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new Ym({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:T(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};n([c({type:Pr,json:{write:!0}})],zt.prototype,"material",void 0),n([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],zt.prototype,"castShadows",void 0),n([c({type:Za,json:{write:!0}})],zt.prototype,"resource",void 0),n([le({Object:"object"},{readOnly:!0})],zt.prototype,"type",void 0),n([c({type:Number,json:{write:!0}})],zt.prototype,"width",void 0),n([c({type:Number,json:{write:!0}})],zt.prototype,"height",void 0),n([c({type:Number,json:{write:!0}})],zt.prototype,"depth",void 0),n([le({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),c({json:{default:"origin"}})],zt.prototype,"anchor",void 0),n([c({type:hn,json:{type:[Number],read:{reader:e=>new hn({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],zt.prototype,"anchorPosition",void 0),n([c({type:Number,json:{write:!0}})],zt.prototype,"heading",void 0),n([c({type:Number,json:{write:!0}})],zt.prototype,"tilt",void 0),n([c({type:Number,json:{write:!0}})],zt.prototype,"roll",void 0),n([c({readOnly:!0})],zt.prototype,"isPrimitive",null),zt=Ym=n([b("esri.symbols.ObjectSymbol3DLayer")],zt);const rf=zt;var Xm;let Kt=Xm=class extends Ws{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e!=null?e:t.height==null&&t.size!=null?t.size:void 0}readHeight(e,t){return e!=null?e:t.width==null&&t.size!=null?t.size:void 0}clone(){return new Xm({enabled:this.enabled,material:T(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};n([c({type:Pr,json:{write:!0}})],Kt.prototype,"material",void 0),n([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Kt.prototype,"castShadows",void 0),n([le({Path:"path"},{readOnly:!0})],Kt.prototype,"type",void 0),n([c({type:["circle","quad"],json:{write:!0,default:"circle"}})],Kt.prototype,"profile",void 0),n([c({type:X$,json:{write:!0,default:"miter"}})],Kt.prototype,"join",void 0),n([c({type:oR,json:{write:!0,default:"butt"}})],Kt.prototype,"cap",void 0),n([c({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Kt.prototype,"width",void 0),n([K("width",["width","size","height"])],Kt.prototype,"readWidth",null),n([c({type:Number,json:{write:!0}})],Kt.prototype,"height",void 0),n([K("height",["height","size","width"])],Kt.prototype,"readHeight",null),n([c({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Kt.prototype,"anchor",void 0),n([c({type:["heading","all"],json:{write:!0,default:"all"}})],Kt.prototype,"profileRotation",void 0),Kt=Xm=n([b("esri.symbols.PathSymbol3DLayer")],Kt);const mv=Kt;var e0;let Sl=e0=class extends F{constructor(){super(...arguments),this.color=new Ce([0,0,0,1]),this.size=0}clone(){const e={color:E(this.color),size:this.size};return new e0(e)}};n([c(Mo)],Sl.prototype,"color",void 0),n([c(Gs)],Sl.prototype,"size",void 0),Sl=e0=n([b("esri.symbols.support.Symbol3DHalo")],Sl);let ju=class extends Ii(F){constructor(e){super(e),this.color=null}};n([c(Mo)],ju.prototype,"color",void 0),ju=n([b("esri.symbols.support.Symbol3DTextBackground")],ju);var ed;let rr=ed=class extends Ws{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){T(e)&&T(this._userSize)&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,s){const i=pe(I({},s),{textSymbol3D:!0});t.font=e.write({},i),delete t.font.size}get size(){return T(this._userSize)?this._userSize:T(this.font)&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,T(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new ed({enabled:this.enabled,font:this.font&&E(this.font),halo:this.halo&&E(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:T(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:E(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new ed({font:T(e.font)?e.font.clone():new Yh,halo:x8(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Pr({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new ju({color:e.backgroundColor.clone()}):null})}};function x8(e,t){return e&&t>0?new Sl({color:E(e),size:t}):null}n([c({type:Yh,json:{write:!0}})],rr.prototype,"font",null),n([Y("font")],rr.prototype,"writeFont",null),n([c({type:Sl,json:{write:!0}})],rr.prototype,"halo",void 0),n([c(pe(I({},hR),{json:{default:"center",write:!0}}))],rr.prototype,"horizontalAlignment",void 0),n([c(pe(I({},e3),{json:{default:1,write:!0}}))],rr.prototype,"lineHeight",void 0),n([c({type:Pr,json:{write:!0}})],rr.prototype,"material",void 0),n([c({type:ju,json:{write:!0}})],rr.prototype,"background",void 0),n([c(Gs)],rr.prototype,"size",null),n([c({type:String,json:{write:!0}})],rr.prototype,"text",void 0),n([le({Text:"text"},{readOnly:!0})],rr.prototype,"type",void 0),n([c(pe(I({},t3),{json:{default:"baseline",write:!0}}))],rr.prototype,"verticalAlignment",void 0),rr=ed=n([b("esri.symbols.TextSymbol3DLayer")],rr);const ua=rr;var t0;let qi=t0=class extends Ws{constructor(e){super(e),this.color=r0.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new t0({color:E(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};n([c({type:Ce,nonNullable:!0,json:{type:[_t],write:(e,t,r)=>t[r]=e.toArray(Ce.AlphaMode.UNLESS_OPAQUE),default:()=>r0.clone(),defaultEquals:e=>e.toCss(!0)===r0.toCss(!0)}})],qi.prototype,"color",void 0),n([le({Water:"water"},{readOnly:!0})],qi.prototype,"type",void 0),n([c({type:["small","medium","large"],json:{write:!0,default:"medium"}})],qi.prototype,"waterbodySize",void 0),n([c({type:Number,json:{write:!0,default:null}})],qi.prototype,"waveDirection",void 0),n([c({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],qi.prototype,"waveStrength",void 0),qi=t0=n([b("esri.symbols.WaterSymbol3DLayer")],qi);const r0=new Ce([0,119,190]),gv=qi;var s0;let Wo=s0=class extends st{constructor(){super(...arguments),this.portal=null}clone(){return new s0({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};n([c({type:String})],Wo.prototype,"name",void 0),n([c({type:String})],Wo.prototype,"styleUrl",void 0),n([c({type:String})],Wo.prototype,"styleName",void 0),n([c({type:ur})],Wo.prototype,"portal",void 0),Wo=s0=n([b("esri.symbols.support.StyleOrigin")],Wo);const i0=Wo;var o0;let Au=o0=class extends st{clone(){return new o0({url:this.url})}};n([c({type:String})],Au.prototype,"url",void 0),Au=o0=n([b("esri.symbols.support.Thumbnail")],Au);const S3={icon:yo,object:rf,line:aa,path:mv,fill:vc,extrude:tv,text:ua,water:gv},$8=et.ofType({base:Ws,key:"type",typeMap:S3,errorContext:"symbol-layer"}),M8=Z.getLogger("esri.symbols.Symbol3D");let Is=class extends cr{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,r=t&&t.type||et;this._set("symbolLayers",new r)}get color(){return null}set color(e){this.initialized&&M8.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){KR(e,this._get("symbolLayers"))}readStyleOrigin(e,t,r){if(e.styleUrl&&e.name){const s=la(e.styleUrl,r);return new i0({styleUrl:s,name:e.name})}if(e.styleName&&e.name)return new i0({portal:r&&r.portal||ur.getDefault(),styleName:e.styleName,name:e.name});r&&r.messages&&r.messages.push(new _r("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,t,r,s){if(e.styleUrl&&e.name){let i=bc(e.styleUrl,s);vr(i)&&(i=ys(i)),t.styleOrigin={styleUrl:i,name:e.name}}else e.styleName&&e.name&&(e.portal&&s&&s.portal&&!l3(e.portal.restUrl,s.portal.restUrl)?s&&s.messages&&s.messages.push(new _r("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Ws||e&&S3[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};n([c({json:{read:!1,write:!1}})],Is.prototype,"color",null),n([c({type:$8,nonNullable:!0,json:{write:!0}}),ht(QR)],Is.prototype,"symbolLayers",null),n([c({type:i0})],Is.prototype,"styleOrigin",void 0),n([K("styleOrigin")],Is.prototype,"readStyleOrigin",null),n([Y("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Is.prototype,"writeStyleOrigin",null),n([c({type:Au,json:{read:!1}})],Is.prototype,"thumbnail",void 0),n([c({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Is.prototype,"type",void 0),Is=n([b("esri.symbols.Symbol3D")],Is);const ca=Is;let Ya=class extends F{constructor(e){super(e),this.visible=!0}clone(){}};n([c({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],Ya.prototype,"type",void 0),n([c({readOnly:!0})],Ya.prototype,"visible",void 0),Ya=n([b("esri.symbols.callouts.Callout3D")],Ya);const _3=Ya;var n0;let Cu=n0=class extends F{constructor(){super(...arguments),this.color=new Ce("white")}clone(){return new n0({color:E(this.color)})}};n([c(Mo)],Cu.prototype,"color",void 0),Cu=n0=n([b("esri.symbols.callouts.LineCallout3DBorder")],Cu);const x3=Cu;Object.freeze({__proto__:null,get LineCallout3DBorder(){return Cu},default:x3});var l0;let Bi=l0=class extends _3{constructor(e){super(e),this.type="line",this.color=new Ce([0,0,0,1]),this.size=_o(1),this.border=null}get visible(){return this.size>0&&T(this.color)&&this.color.a>0}clone(){return new l0({color:E(this.color),size:this.size,border:E(this.border)})}};n([le({line:"line"},{readOnly:!0})],Bi.prototype,"type",void 0),n([c(Mo)],Bi.prototype,"color",void 0),n([c(Gs)],Bi.prototype,"size",void 0),n([c({type:x3,json:{write:!0}})],Bi.prototype,"border",void 0),n([c({readOnly:!0})],Bi.prototype,"visible",null),Bi=l0=n([b("esri.symbols.callouts.LineCallout3D")],Bi);const I8=Bi;function vv(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength<=0)}function $3(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!vv(e)}const M3={types:{key:"type",base:_3,typeMap:{line:I8}},json:{write:!0}};var a0;let fn=a0=class extends F{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new a0({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};n([c(Gs)],fn.prototype,"screenLength",void 0),n([c({type:Number,json:{write:!0,default:0}})],fn.prototype,"minWorldLength",void 0),n([c({type:Number,json:{write:!0}})],fn.prototype,"maxWorldLength",void 0),fn=a0=n([b("esri.symbols.support.Symbol3DVerticalOffset")],fn);var td;const I3=et.ofType({base:null,key:"type",typeMap:{text:ua}});let Gi=td=class extends ca{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new I3,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return $3(this)}hasVisibleVerticalOffset(){return vv(this)}clone(){return new td({styleOrigin:E(this.styleOrigin),symbolLayers:E(this.symbolLayers),thumbnail:E(this.thumbnail),callout:E(this.callout),verticalOffset:E(this.verticalOffset)})}static fromTextSymbol(e){return new td({symbolLayers:[ua.fromTextSymbol(e)]})}};n([c({type:fn,json:{write:!0}})],Gi.prototype,"verticalOffset",void 0),n([c(M3)],Gi.prototype,"callout",void 0),n([c({json:{read:!1,write:!1}})],Gi.prototype,"styleOrigin",void 0),n([c({type:I3})],Gi.prototype,"symbolLayers",void 0),n([le({LabelSymbol3D:"label-3d"},{readOnly:!0})],Gi.prototype,"type",void 0),Gi=td=n([b("esri.symbols.LabelSymbol3D")],Gi);const sf=Gi;var rd;const O3=et.ofType({base:null,key:"type",typeMap:{line:aa,path:mv}}),O8=et.ofType({base:null,key:"type",typeMap:{line:aa,path:mv}});let Xa=rd=class extends ca{constructor(e){super(e),this.symbolLayers=new O3,this.type="line-3d"}clone(){return new rd({styleOrigin:E(this.styleOrigin),symbolLayers:E(this.symbolLayers),thumbnail:E(this.thumbnail)})}static fromSimpleLineSymbol(e){return new rd({symbolLayers:[aa.fromSimpleLineSymbol(e)]})}};n([c({type:O3,json:{type:O8}})],Xa.prototype,"symbolLayers",void 0),n([le({LineSymbol3D:"line-3d"},{readOnly:!0})],Xa.prototype,"type",void 0),Xa=rd=n([b("esri.symbols.LineSymbol3D")],Xa);const of=Xa;let Ji=class extends cr{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};n([c({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Ji.prototype,"angle",void 0),n([c({type:["simple-marker","picture-marker"],readOnly:!0})],Ji.prototype,"type",void 0),n([c({type:Number,cast:Pe,json:{write:!0}})],Ji.prototype,"xoffset",void 0),n([c({type:Number,cast:Pe,json:{write:!0}})],Ji.prototype,"yoffset",void 0),n([c({type:Number,cast:e=>e==="auto"?e:Pe(e),json:{write:!0}})],Ji.prototype,"size",void 0),Ji=n([b("esri.symbols.MarkerSymbol")],Ji);const E3=Ji;var u0;const T3=et.ofType({base:null,key:"type",typeMap:{fill:vc}});let eu=u0=class extends ca{constructor(e){super(e),this.symbolLayers=new T3,this.type="mesh-3d"}clone(){return new u0({styleOrigin:E(this.styleOrigin),symbolLayers:E(this.symbolLayers),thumbnail:E(this.thumbnail)})}};n([c({type:T3})],eu.prototype,"symbolLayers",void 0),n([le({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],eu.prototype,"type",void 0),eu=u0=n([b("esri.symbols.MeshSymbol3D")],eu);const bv=eu;function E8(e,t,r){return t.imageData?c3({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):j3(t.url,r)}function j3(e,t){return j8(t)&&!vr(e)&&t.layer.parsedUrl?Hl(t.layer.parsedUrl.path,"images",e):la(e,t)}function T8(e,t,r,s){if(Ln(e)){const i=u3(e);t.contentType=i.mediaType,t.imageData=i.data,r&&r.imageData===t.imageData&&r.url&&Fn(r.url,t,"url",s)}else Fn(e,t,"url",s)}const A3={json:{read:{source:["imageData","url"],reader:E8},write:{writer(e,t,r,s){T8(e,t,this.source,s)}}}},C3={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const s={};return t.imageData&&(s.imageData=t.imageData),t.contentType&&(s.contentType=t.contentType),t.url&&(s.url=j3(t.url,r)),s}}}};function j8(e){return e&&(e.origin==="service"||e.origin==="portal-item")&&e.layer&&(e.layer.type==="feature"||e.layer.type==="stream")}var c0;let Cr=c0=class extends H${constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,s){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t&&(i.outline=t),r!=null&&(i.width=Pe(r)),s!=null&&(i.height=Pe(s)),i}clone(){const e=new c0({color:E(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",E(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};n([le({esriPFS:"picture-fill"},{readOnly:!0})],Cr.prototype,"type",void 0),n([c(A3)],Cr.prototype,"url",void 0),n([c({type:Number,json:{write:!0}})],Cr.prototype,"xscale",void 0),n([c({type:Number,json:{write:!0}})],Cr.prototype,"yscale",void 0),n([c({type:Number,cast:Pe,json:{write:!0}})],Cr.prototype,"width",void 0),n([c({type:Number,cast:Pe,json:{write:!0}})],Cr.prototype,"height",void 0),n([c({type:Number,cast:Pe,json:{write:!0}})],Cr.prototype,"xoffset",void 0),n([c({type:Number,cast:Pe,json:{write:!0}})],Cr.prototype,"yoffset",void 0),n([c(C3)],Cr.prototype,"source",void 0),Cr=c0=n([b("esri.symbols.PictureFillSymbol")],Cr);const R3=Cr;var p0;let Hr=p0=class extends E3{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t!=null&&(s.width=Pe(t)),r!=null&&(s.height=Pe(r)),s}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new p0({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",E(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};n([c({json:{write:!1}})],Hr.prototype,"color",void 0),n([le({esriPMS:"picture-marker"},{readOnly:!0})],Hr.prototype,"type",void 0),n([c(A3)],Hr.prototype,"url",void 0),n([c(C3)],Hr.prototype,"source",void 0),n([c({type:Number,cast:Pe,json:{write:!0}})],Hr.prototype,"height",void 0),n([K("height",["height","size"])],Hr.prototype,"readHeight",null),n([c({type:Number,cast:Pe,json:{write:!0}})],Hr.prototype,"width",void 0),n([c({json:{write:!1}})],Hr.prototype,"size",void 0),Hr=p0=n([b("esri.symbols.PictureMarkerSymbol")],Hr);const wc=Hr;var Wi;const F3=et.ofType({base:null,key:"type",typeMap:{icon:yo,object:rf,text:ua}});let Ho=Wi=class extends ca{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new F3,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return $3(this)}hasVisibleVerticalOffset(){return vv(this)}clone(){return new Wi({verticalOffset:E(this.verticalOffset),callout:E(this.callout),styleOrigin:E(this.styleOrigin),symbolLayers:E(this.symbolLayers),thumbnail:E(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Wi({symbolLayers:[yo.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new Wi({symbolLayers:[yo.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var t,r;return((t=e.data)==null||(r=t.symbol)==null?void 0:r.type)!=="CIMPointSymbol"?null:e.data.symbol.callout?new Wi({symbolLayers:[yo.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new Wi({symbolLayers:[yo.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new Wi({symbolLayers:[ua.fromTextSymbol(e)]})}};n([c({type:fn,json:{write:!0}})],Ho.prototype,"verticalOffset",void 0),n([c(M3)],Ho.prototype,"callout",void 0),n([c({type:F3,json:{origins:{"web-scene":{write:!0}}}})],Ho.prototype,"symbolLayers",void 0),n([le({PointSymbol3D:"point-3d"},{readOnly:!0})],Ho.prototype,"type",void 0),Ho=Wi=n([b("esri.symbols.PointSymbol3D")],Ho);const gn=Ho;var tu;const k3=et.ofType({base:null,key:"type",typeMap:{extrude:tv,fill:vc,icon:yo,line:aa,object:rf,text:ua,water:gv}}),A8=et.ofType({base:null,key:"type",typeMap:{extrude:tv,fill:vc,icon:yo,line:aa,object:rf,water:gv}});let Xn=tu=class extends ca{constructor(e){super(e),this.symbolLayers=new k3,this.type="polygon-3d"}writeSymbolLayers(e,t,r,s){const i=e.filter(o=>o.type!=="text");if(s&&s.messages&&i.length<e.length){const o=e.find(l=>l.type==="text");s.messages.push(new C("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:o}))}t[r]=i.map(o=>o.write({},s)).toArray()}clone(){return new tu({styleOrigin:E(this.styleOrigin),symbolLayers:E(this.symbolLayers),thumbnail:E(this.thumbnail)})}static fromJSON(e){const t=new tu;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.getItemAt(0).type==="fill"&&t.symbolLayers.getItemAt(1).type==="line"){const r=t.symbolLayers.getItemAt(0),s=t.symbolLayers.getItemAt(1);!s.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(r.outline={size:s.size,color:T(s.material)?s.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new tu({symbolLayers:[vc.fromSimpleFillSymbol(e)]})}};n([c({type:k3,json:{type:A8}})],Xn.prototype,"symbolLayers",void 0),n([Y("web-scene","symbolLayers")],Xn.prototype,"writeSymbolLayers",null),n([le({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Xn.prototype,"type",void 0),Xn=tu=n([b("esri.symbols.PolygonSymbol3D")],Xn);const Sc=Xn;var d0;const Bf=new ye({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Ko=d0=class extends H${constructor(...e){super(...e),this.color=new Ce([0,0,0,.25]),this.outline=new zr,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t&&(s.outline=t),r&&(s.color=r),s}clone(){return new d0({color:E(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};n([c()],Ko.prototype,"color",void 0),n([c()],Ko.prototype,"outline",void 0),n([le({esriSFS:"simple-fill"},{readOnly:!0})],Ko.prototype,"type",void 0),n([c({type:Bf.apiValues,json:{read:Bf.read,write:Bf.write}})],Ko.prototype,"style",void 0),Ko=d0=n([b("esri.symbols.SimpleFillSymbol")],Ko);const Dn=Ko;var h0;const Gf=new ye({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Os=h0=class extends E3{constructor(...e){super(...e),this.color=new Ce([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new zr}normalizeCtorArgs(e,t,r,s){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t!=null&&(i.size=Pe(t)),r&&(i.outline=r),s&&(i.color=s),i}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new h0({angle:this.angle,color:E(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};n([c()],Os.prototype,"color",void 0),n([Y("color")],Os.prototype,"writeColor",null),n([le({esriSMS:"simple-marker"},{readOnly:!0})],Os.prototype,"type",void 0),n([c()],Os.prototype,"size",void 0),n([c({type:Gf.apiValues,json:{read:Gf.read,write:Gf.write}})],Os.prototype,"style",void 0),n([c({type:String,json:{write:!0}})],Os.prototype,"path",null),n([c({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":zr}},json:{default:null,write:!0}})],Os.prototype,"outline",void 0),Os=h0=n([b("esri.symbols.SimpleMarkerSymbol")],Os);const pa=Os;var f0;let rt=f0=class extends cr{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Yh,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const s={};return e&&(s.text=e),t&&(s.font=t),r&&(s.color=r),s}writeLineWidth(e,t,r,s){s&&typeof s!="string"?s.origin:t[r]=e}castLineWidth(e){return Pe(e)}writeLineHeight(e,t,r,s){s&&typeof s!="string"?s.origin:t[r]=e}clone(){return new f0({angle:this.angle,backgroundColor:E(this.backgroundColor),borderLineColor:E(this.borderLineColor),borderLineSize:this.borderLineSize,color:E(this.color),font:this.font&&this.font.clone(),haloColor:E(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};n([c({type:Ce,json:{write:!0}})],rt.prototype,"backgroundColor",void 0),n([c({type:Ce,json:{write:!0}})],rt.prototype,"borderLineColor",void 0),n([c({type:Number,json:{write:!0}})],rt.prototype,"borderLineSize",void 0),n([c({type:Yh,json:{write:!0}})],rt.prototype,"font",void 0),n([c(pe(I({},dR),{json:{write:!0}}))],rt.prototype,"horizontalAlignment",void 0),n([c({type:Boolean,json:{write:!0}})],rt.prototype,"kerning",void 0),n([c({type:Ce,json:{write:!0}})],rt.prototype,"haloColor",void 0),n([c({type:Number,cast:Pe,json:{write:!0}})],rt.prototype,"haloSize",void 0),n([c({type:Boolean,json:{write:!0}})],rt.prototype,"rightToLeft",void 0),n([c({type:Boolean,json:{write:!0}})],rt.prototype,"rotated",void 0),n([c({type:String,json:{write:!0}})],rt.prototype,"text",void 0),n([le({esriTS:"text"},{readOnly:!0})],rt.prototype,"type",void 0),n([c(pe(I({},t3),{json:{write:!0}}))],rt.prototype,"verticalAlignment",void 0),n([c({type:Number,cast:Pe,json:{write:!0}})],rt.prototype,"xoffset",void 0),n([c({type:Number,cast:Pe,json:{write:!0}})],rt.prototype,"yoffset",void 0),n([c({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],rt.prototype,"angle",void 0),n([c({type:Number,json:{write:!0}})],rt.prototype,"width",void 0),n([c({type:Number})],rt.prototype,"lineWidth",void 0),n([Y("lineWidth")],rt.prototype,"writeLineWidth",null),n([ht("lineWidth")],rt.prototype,"castLineWidth",null),n([c(e3)],rt.prototype,"lineHeight",void 0),n([Y("lineHeight")],rt.prototype,"writeLineHeight",null),rt=f0=n([b("esri.symbols.TextSymbol")],rt);const zn=rt;var y0;const C8=Z.getLogger("esri.symbols.WebStyleSymbol");let Es=y0=class extends cr{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}read(e,t){this.portal=t?t.portal:void 0,super.read(e,t)}clone(){return new y0({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const r=await R8();qs(t);const s=r.resolveWebStyleSymbol(this,{portal:this.portal},e,t);return s.catch(i=>{C8.error("#fetchSymbol()","Failed to create symbol from style",i)}),s}};function R8(){return import("./webStyleSymbolUtils.4b191915.js")}n([c({json:{write:!1}})],Es.prototype,"color",void 0),n([c({type:String,json:{write:!0}})],Es.prototype,"styleName",void 0),n([c({type:ur,json:{write:!1}})],Es.prototype,"portal",void 0),n([c({type:String,json:{read:dv,write:Fn}})],Es.prototype,"styleUrl",void 0),n([c({type:Au,json:{read:!1}})],Es.prototype,"thumbnail",void 0),n([c({type:String,json:{write:!0}})],Es.prototype,"name",void 0),n([le({styleSymbolReference:"web-style"},{readOnly:!0})],Es.prototype,"type",void 0),Es=y0=n([b("esri.symbols.WebStyleSymbol")],Es);const Vn=Es;function XU(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function qw(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const xn={base:cr,key:"type",typeMap:{"simple-fill":Dn,"picture-fill":R3,"picture-marker":wc,"simple-line":zr,"simple-marker":pa,text:zn,"label-3d":sf,"line-3d":of,"mesh-3d":bv,"point-3d":gn,"polygon-3d":Sc,"web-style":Vn,cim:gc},errorContext:"symbol"},F8={base:cr,key:"type",typeMap:{"picture-marker":wc,"simple-marker":pa,text:zn,"web-style":Vn,cim:gc},errorContext:"symbol"},k8=Xl({types:xn}),N3={base:cr,key:"type",typeMap:{"simple-fill":Dn,"picture-fill":R3,"picture-marker":wc,"simple-line":zr,"simple-marker":pa,text:zn,"line-3d":of,"mesh-3d":bv,"point-3d":gn,"polygon-3d":Sc,"web-style":Vn,cim:gc},errorContext:"symbol"},N8={base:cr,key:"type",typeMap:{text:zn,"label-3d":sf},errorContext:"symbol"},Bw={base:cr,key:"type",typeMap:{"line-3d":of,"mesh-3d":bv,"point-3d":gn,"polygon-3d":Sc,"web-style":Vn,cim:gc},errorContext:"symbol"},P8={base:cr,key:"type",typeMap:{"label-3d":sf},errorContext:"symbol"},P3=Bs(xn);var m0;let ru=m0=class extends F{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new m0({minValue:this.minValue,maxValue:this.maxValue})}};n([c({type:Number,json:{write:!0}})],ru.prototype,"minValue",void 0),n([c({type:Number,json:{write:!0}})],ru.prototype,"maxValue",void 0),ru=m0=n([b("esri.renderer.support.AuthoringInfoClassBreakInfo")],ru);const L8=ru;var g0;let Qo=g0=class extends F{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new g0({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:E(this.classBreakInfos)})}};n([c({type:String,json:{write:!0}})],Qo.prototype,"field",void 0),n([c({type:String,json:{write:!0}})],Qo.prototype,"normalizationField",void 0),n([c({type:String,json:{write:!0}})],Qo.prototype,"label",void 0),n([c({type:[L8],json:{write:!0}})],Qo.prototype,"classBreakInfos",void 0),Qo=g0=n([b("esri.renderers.support.AuthoringInfoFieldInfo")],Qo);const Gw=Qo;var v0;const sp=new ye({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),ip=new ye({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),Jw={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},Ww=["high-to-low","above-and-below","centered-on","extremes"],Hw=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],Kw=["seconds","minutes","hours","days","months","years"];let sr=v0=class extends F{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new v0({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};n([c({types:Jw,json:{write:!0}})],sr.prototype,"endTime",void 0),n([ht("endTime")],sr.prototype,"castEndTime",null),n([c({type:String,json:{write:!0}})],sr.prototype,"field",void 0),n([c({type:Number,json:{write:!0}})],sr.prototype,"maxSliderValue",void 0),n([c({type:Number,json:{write:!0}})],sr.prototype,"minSliderValue",void 0),n([c({types:Jw,json:{write:!0}})],sr.prototype,"startTime",void 0),n([ht("startTime")],sr.prototype,"castStartTime",null),n([c({type:sp.apiValues,value:null,json:{type:sp.jsonValues,read:sp.read,write:sp.write}})],sr.prototype,"style",null),n([c({type:Hw,value:null,json:{type:Hw,origins:{"web-scene":{type:Ww,write:{writer:(e,t)=>{Ww.indexOf(e)>-1&&(t.theme=e)}}}},write:!0}})],sr.prototype,"theme",null),n([c({type:ip.apiValues,json:{type:ip.jsonValues,read:ip.read,write:ip.write}})],sr.prototype,"type",void 0),n([c({type:Kw,json:{type:Kw,write:!0}})],sr.prototype,"units",void 0),sr=v0=n([b("esri.renderers.support.AuthoringInfoVisualVariable")],sr);const D8=sr;let sd=class extends F{constructor(e){super(e),this.type=null}};n([c({readOnly:!0,json:{read:!1,write:!0}})],sd.prototype,"type",void 0),sd=n([b("esri.rest.support.ColorRamp")],sd);const wv=sd;var b0;let Zo=b0=class extends wv{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new b0({fromColor:E(this.fromColor),toColor:E(this.toColor),algorithm:this.algorithm})}};n([le({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Zo.prototype,"algorithm",void 0),n([c({type:Ce,json:{type:[_t],write:!0}})],Zo.prototype,"fromColor",void 0),n([c({type:Ce,json:{type:[_t],write:!0}})],Zo.prototype,"toColor",void 0),n([c({type:["algorithmic"]})],Zo.prototype,"type",void 0),Zo=b0=n([b("esri.rest.support.AlgorithmicColorRamp")],Zo);const Sv=Zo;var w0;let su=w0=class extends wv{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new w0({colorRamps:E(this.colorRamps)})}};n([c({type:[Sv],json:{write:!0}})],su.prototype,"colorRamps",void 0),n([c({type:["multipart"]})],su.prototype,"type",void 0),su=w0=n([b("esri.rest.support.MultipartColorRamp")],su);const L3=su,z8={key:"type",base:wv,typeMap:{algorithmic:Sv,multipart:L3}};function V8(e){return e&&e.type?e.type==="algorithmic"?Sv.fromJSON(e):e.type==="multipart"?L3.fromJSON(e):null:null}var S0;const Ro=new ye({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),op=new ye({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),Qw=new ye({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),Zw=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],U8=["high-to-low","above-and-below","above","below","90-10"],q8=["flow-line","wave-front"],B8=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let mt=S0=class extends F{constructor(e){super(e),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){if(e)return V8(e)}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new S0({classificationMethod:this.classificationMethod,colorRamp:E(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:E(this.field1),field2:E(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};n([c({type:Ro.apiValues,value:null,json:{type:Ro.jsonValues,read:Ro.read,write:Ro.write,origins:{"web-document":{default:"manual",type:Ro.jsonValues,read:Ro.read,write:Ro.write}}}})],mt.prototype,"classificationMethod",null),n([c({types:z8,json:{write:!0}})],mt.prototype,"colorRamp",void 0),n([K("colorRamp")],mt.prototype,"readColorRamp",null),n([c({type:[String],value:null,json:{write:!0}})],mt.prototype,"fields",null),n([c({type:Gw,value:null,json:{write:!0}})],mt.prototype,"field1",null),n([c({type:Gw,value:null,json:{write:!0}})],mt.prototype,"field2",null),n([c({type:q8,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],mt.prototype,"flowTheme",null),n([c({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],mt.prototype,"focus",null),n([c({type:Number,value:null,json:{type:_t,write:!0}})],mt.prototype,"numClasses",null),n([c({type:Zw,json:{type:Zw,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],mt.prototype,"lengthUnit",void 0),n([c({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mt.prototype,"maxSliderValue",void 0),n([c({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mt.prototype,"minSliderValue",void 0),n([c({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mt.prototype,"statistics",null),n([c({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],mt.prototype,"standardDeviationInterval",null),n([c({type:op.apiValues,value:null,json:{type:op.jsonValues,read:op.read,write:op.write,origins:{"web-scene":{type:Qw.jsonValues,write:{writer:Qw.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],mt.prototype,"type",null),n([c({type:[D8],json:{write:!0}})],mt.prototype,"visualVariables",void 0),n([c({type:B8,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],mt.prototype,"univariateSymbolStyle",null),n([c({type:U8,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],mt.prototype,"univariateTheme",null),mt=S0=n([b("esri.renderers.support.AuthoringInfo")],mt);const G8=mt,Jf=new ye({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0});let iu=class extends F{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};n([c({type:G8,json:{write:!0}})],iu.prototype,"authoringInfo",void 0),n([c({type:Jf.apiValues,readOnly:!0,json:{type:Jf.jsonValues,read:!1,write:{writer:Jf.write,ignoreOrigin:!0}}})],iu.prototype,"type",void 0),iu=n([b("esri.renderers.Renderer")],iu);const Oo=iu;var _0;let id=_0=class extends F{constructor(){super(...arguments),this.title=null}clone(){return new _0({title:this.title})}};n([c({type:String,json:{write:!0}})],id.prototype,"title",void 0),id=_0=n([b("esri.renderers.support.LegendOptions")],id);const _v=id;var x0;let od=x0=class extends _v{constructor(){super(...arguments),this.showLegend=null}clone(){return new x0({title:this.title,showLegend:this.showLegend})}};n([c({type:Boolean,json:{write:!0}})],od.prototype,"showLegend",void 0),od=x0=n([b("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],od);const D3=od,J8=Z.getLogger("esri.renderers.visualVariables.VisualVariable"),Wf=new ye({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Kr=class extends F{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(J8.error(".field: field must be a string value"),null):hc(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};n([c()],Kr.prototype,"index",void 0),n([c({type:Wf.apiValues,readOnly:!0,json:{read:Wf.read,write:Wf.write}})],Kr.prototype,"type",void 0),n([c({type:String,json:{write:!0}})],Kr.prototype,"field",void 0),n([ht("field")],Kr.prototype,"castField",null),n([c({type:String,json:{write:!0}})],Kr.prototype,"valueExpression",void 0),n([c({type:String,json:{write:!0}})],Kr.prototype,"valueExpressionTitle",void 0),n([c({readOnly:!0})],Kr.prototype,"arcadeRequired",null),n([c({type:D3,json:{write:!0}})],Kr.prototype,"legendOptions",void 0),Kr=n([b("esri.renderers.visualVariables.VisualVariable")],Kr);const _c=Kr;var $0;let Yo=$0=class extends F{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e==null?0:e}clone(){return new $0({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};n([c({type:Ce,json:{type:[_t],write:!0}})],Yo.prototype,"color",void 0),n([c({type:String,json:{write:!0}})],Yo.prototype,"label",void 0),n([c({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Yo.prototype,"value",void 0),n([Y("value")],Yo.prototype,"writeValue",null),Yo=$0=n([b("esri.renderers.visualVariables.support.ColorStop")],Yo);const W8=Yo;var M0;let Xo=M0=class extends _c{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){return new M0({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};n([c({readOnly:!0})],Xo.prototype,"cache",null),n([c({type:["color"],json:{type:["colorInfo"]}})],Xo.prototype,"type",void 0),n([c({type:String,json:{write:!0}})],Xo.prototype,"normalizationField",void 0),n([c({type:[W8],json:{write:!0}})],Xo.prototype,"stops",null),Xo=M0=n([b("esri.renderers.visualVariables.ColorVariable")],Xo);const z3=Xo;var I0;let Hi=I0=class extends F{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return nh(t.transparency)}writeOpacity(e,t,r){t[r]=G$(e)}clone(){return new I0({label:this.label,opacity:this.opacity,value:this.value})}};n([c({type:String,json:{write:!0}})],Hi.prototype,"label",void 0),n([c({type:Number,json:{type:_t,write:{target:"transparency"}}})],Hi.prototype,"opacity",void 0),n([K("opacity",["transparency"])],Hi.prototype,"readOpacity",null),n([Y("opacity")],Hi.prototype,"writeOpacity",null),n([c({type:Number,json:{write:!0}})],Hi.prototype,"value",void 0),Hi=I0=n([b("esri.renderers.visualVariables.support.OpacityStop")],Hi);const H8=Hi;var O0;let en=O0=class extends _c{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){return new O0({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};n([c({readOnly:!0})],en.prototype,"cache",null),n([c({type:["opacity"],json:{type:["transparencyInfo"]}})],en.prototype,"type",void 0),n([c({type:String,json:{write:!0}})],en.prototype,"normalizationField",void 0),n([c({type:[H8],json:{write:!0}})],en.prototype,"stops",null),en=O0=n([b("esri.renderers.visualVariables.OpacityVariable")],en);const V3=en;var E0;let si=E0=class extends _c{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,r,s){if(s&&s.messages){const i=`visualVariables[${this.index}]`;s.messages.push(new C("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:i+".valueExpressionTitle",context:s}))}}clone(){return new E0({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};n([c({readOnly:!0})],si.prototype,"cache",null),n([c({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],si.prototype,"axis",void 0),n([c({type:["rotation"],json:{type:["rotationInfo"]}})],si.prototype,"type",void 0),n([c({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],si.prototype,"rotationType",void 0),n([c({type:String,json:{write:!0}})],si.prototype,"valueExpressionTitle",void 0),n([Y("web-scene","valueExpressionTitle")],si.prototype,"writeValueExpressionTitleWebScene",null),si=E0=n([b("esri.renderers.visualVariables.RotationVariable")],si);const U3=si;var T0;let el=T0=class extends F{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new T0({label:this.label,size:this.size,value:this.value})}};n([c({type:String,json:{write:!0}})],el.prototype,"label",void 0),n([c({type:Number,cast:Pe,json:{write:!0}})],el.prototype,"size",void 0),n([c({type:Number,json:{write:!0}})],el.prototype,"value",void 0),el=T0=n([b("esri.renderers.visualVariables.support.SizeStop")],el);const K8=el;var j0;let nd=j0=class extends D3{constructor(){super(...arguments),this.customValues=null}clone(){return new j0({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};n([c({type:[Number],json:{write:!0}})],nd.prototype,"customValues",void 0),nd=j0=n([b("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],nd);const Q8=nd;var bi,Ot;function _l(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function tc(e){return e!=null&&!isNaN(e)&&isFinite(e)}function q3(e){return e.valueExpression?bi.Expression:e.field&&typeof e.field=="string"?bi.Field:bi.Unknown}function Z8(e,t){const r=t||q3(e),s=e.valueUnit||"unknown";return r===bi.Unknown?Ot.Constant:e.stops?Ot.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Ot.ClampedLinear:s==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Ot.Proportional:Ot.Additive:Ot.Identity:Ot.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(bi||(bi={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(Ot||(Ot={}));function Y8(e){if(!e)return null;const t={};for(const r in e){const s=Dr(e[r]);s&&(t[r]=s)}return Object.keys(t).length!==0?t:null}function X8(e){if(!T(e))return null;const t={};for(const r in e){const s=e[r];s&&(t[r]=s.toJSON())}return Object.keys(t).length!==0?t:null}let ir=class extends Ii(F){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:_u(),configurable:!0})}normalizeCtorArgs(e,t,r,s){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:r,popupTemplate:s}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&T(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:X8(this.aggregateGeometries),geometry:T(this.geometry)?this.geometry.toJSON():null,symbol:T(this.symbol)?this.symbol.toJSON():null,attributes:I({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){T(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,t,r,s){if(!this.layer||!("graphicChanged"in this.layer))return;const i={graphic:this,property:e,oldValue:t,newValue:r};e==="attributes"&&(i.attributeName=s),this.layer.graphicChanged(i)}};n([c({value:null,json:{read:Y8}})],ir.prototype,"aggregateGeometries",null),n([c({value:null})],ir.prototype,"attributes",null),n([c({value:null,types:ta,json:{read:Dr}})],ir.prototype,"geometry",null),n([c({type:Boolean})],ir.prototype,"isAggregate",void 0),n([c({clonable:"reference"})],ir.prototype,"layer",void 0),n([c({type:ra})],ir.prototype,"popupTemplate",void 0),n([c({clonable:"reference"})],ir.prototype,"sourceLayer",void 0),n([c({value:null,types:xn})],ir.prototype,"symbol",null),n([c({type:Boolean,value:!0})],ir.prototype,"visible",null),ir=n([b("esri.Graphic")],ir),function(e){e.generateUID=_u}(ir||(ir={}));const xo=ir;function eq(e){}function xv(e){return new Ae({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const eF=xv(Lr),A0=xv(Jh),C0=xv(Wh),tq=new Ae({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Lr.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function rq(e){return e&&(N1(e)||e===A0)?A0:e&&(L1(e)||e===C0)?C0:eF}function tF(e){return e&&(N1(e)||e===A0)?Jh:e&&(L1(e)||e===C0)?Wh:Lr}function sq(e){return k1(e)?Jh:P1(e)?Wh:Lr}const B3=39.37,rF=Lr.radius*Math.PI/200,G3=/UNIT\[([^\]]+)\]\]$/i,$n=g,J3=/UNIT\[([^\]]+)\]/i,sF=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),iF=Lt()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),bs=e=>e*e,Pi=e=>e*e*e,rc={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:bs(.001)},"square-centimeters":{inBaseUnits:bs(.01)},"square-decimeters":{inBaseUnits:bs(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:bs(1e3)},"square-inches":{inBaseUnits:bs(.0254)},"square-feet":{inBaseUnits:bs(.3048)},"square-yards":{inBaseUnits:bs(.9144)},"square-miles":{inBaseUnits:bs(1609.344)},"square-us-feet":{inBaseUnits:bs(1200/3937)},acres:{inBaseUnits:.0015625*bs(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Pi(.001)},"cubic-centimeters":{inBaseUnits:1e3*Pi(.01)},"cubic-decimeters":{inBaseUnits:1e3*Pi(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Pi(1e3)},"cubic-inches":{inBaseUnits:1e3*Pi(.0254)},"cubic-feet":{inBaseUnits:1e3*Pi(.3048)},"cubic-yards":{inBaseUnits:1e3*Pi(.9144)},"cubic-miles":{inBaseUnits:1e3*Pi(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},oF=function(){const e={};for(const t in rc)for(const r in rc[t].units)e[r]=t;return e}();function nF(e,t,r){return e*rc[r].units[t].inBaseUnits}function lF(e,t,r){return e/rc[r].units[t].inBaseUnits}function R0(e){const t=oF[e];if(t)return t;throw new Error("unknown type")}function Yw(e,t=null){return t=t||R0(e),rc[t].baseUnit===e}function Rr(e,t,r){if(t===r)return e;const s=R0(t);if(s!==R0(r))throw new Error("incompatible units");const i=Yw(t,s)?e:nF(e,t,s);return Yw(r,s)?i:lF(i,r,s)}function aF(e,t,r){return Rr(e,t,"meters")/(r*Math.PI/180)}function W3(e){return iF.fromJSON(e.toLowerCase())||null}function ch(e){if(e&&typeof e=="object"&&!R4(e))return 1;const t=xc(e);return t>1e5?1:t}function uF(e){return xc(e)>=(e instanceof Ae?tF(e).metersPerDegree:1e5)?"meters":pF(e)}function xc(e,t=Lr.metersPerDegree){return cF(e,!0)||t}function cF(e,t=!1){let r,s,i=null;if(e!=null&&(typeof e=="object"?(r=e.wkid,s=e.wkt):typeof e=="number"?r=e:typeof e=="string"&&(s=e)),r){if(k1(r))return Jh.metersPerDegree;if(P1(r))return Wh.metersPerDegree;i=$n.values[$n[r]],!i&&t&&sF.has(r)&&(i=rF)}else s&&(Q3(s)?i=Xw(G3.exec(s),i):K3(s)&&(i=Xw(J3.exec(s),i)));return i}function Xw(e,t){return e&&e[1]?H3(e[1]):t}function H3(e){return parseFloat(e.split(",")[1])}function pF(e){let t,r,s=null;if(e!=null&&(typeof e=="object"?(t=e.wkid,r=e.wkt):typeof e=="number"?t=e:typeof e=="string"&&(r=e)),t)s=$n.units[$n[t]];else if(r){const i=Q3(r)?G3:K3(r)?J3:null;if(i){const o=i.exec(r);o&&o[1]&&(s=hF(o[1]))}}return T(s)?W3(s):null}function K3(e){return/^GEOCCS/i.test(e)}function Q3(e){return/^PROJCS/i.test(e)}const dF=1e-7;function hF(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let r=t&&t[1];if(!r||$n.units.indexOf(r)===-1){const s=H3(e);r=null;const i=$n.values;for(let o=0;o<i.length;++o)if(Math.abs(s-i[o])<dF){r=$n.units[o];break}}return r}const Z3={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},Y3={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},fF=Lt()(Z3),yF=Lt()(Y3);Lt()(I(I({},Z3),Y3));const X3={inches:Rr(1,"meters","inches"),feet:Rr(1,"meters","feet"),"us-feet":Rr(1,"meters","us-feet"),yards:Rr(1,"meters","yards"),miles:Rr(1,"meters","miles"),"nautical-miles":Rr(1,"meters","nautical-miles"),millimeters:Rr(1,"meters","millimeters"),centimeters:Rr(1,"meters","centimeters"),decimeters:Rr(1,"meters","decimeters"),meters:Rr(1,"meters","meters"),kilometers:Rr(1,"meters","kilometers"),"decimal-degrees":1/aF(1,"meters",Lr.radius)},$o=Z.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),e2=new xo,ld=Math.PI,mF=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function iq(e,t,r){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(v=>v.type==="color"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void $o.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const i=typeof t=="number",o=i?null:t,l=o&&o.attributes;let u=i?t:null;const p=s.field,{ipData:d,hasExpression:h}=s.cache;let f=s.cache.compiledFunc;if(!p&&!h){const v=s.stops;return v&&v[0]&&v[0].color}if(typeof u!="number")if(h){if(!T(r)||!T(r.arcade))return void $o.error("Use of arcade expressions requires an arcade context");const v={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},_=r.arcade.arcadeUtils,S=_.getViewInfo(v),M=_.createExecContext(o,S);if(!f){const k=_.createSyntaxTree(s.valueExpression);f=_.createFunction(k),s.cache.compiledFunc=f}u=_.executeFunction(f,M)}else l&&(u=l[p]);const y=s.normalizationField,m=l?parseFloat(l[y]):void 0;if(u!=null&&(!y||i||!isNaN(m)&&m!==0)){isNaN(m)||i||(u/=m);const v=$v(u,d);if(v){const _=v[0],S=v[1],M=_===S?s.stops[_].color:Ce.blendColors(s.stops[_].color,s.stops[S].color,v[2],T(r)?r.color:void 0);return new Ce(M)}}}function oq(e,t,r){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(v=>v.type==="opacity"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void $o.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const i=typeof t=="number",o=i?null:t,l=o&&o.attributes;let u=i?t:null;const p=s.field,{ipData:d,hasExpression:h}=s.cache;let f=s.cache.compiledFunc;if(!p&&!h){const v=s.stops;return v&&v[0]&&v[0].opacity}if(typeof u!="number")if(h){if(X(r)||X(r.arcade))return void $o.error("Use of arcade expressions requires an arcade context");const v={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},_=r.arcade.arcadeUtils,S=_.getViewInfo(v),M=_.createExecContext(o,S);if(!f){const k=_.createSyntaxTree(s.valueExpression);f=_.createFunction(k),s.cache.compiledFunc=f}u=_.executeFunction(f,M)}else l&&(u=l[p]);const y=s.normalizationField,m=l?parseFloat(l[y]):void 0;if(u!=null&&(!y||i||!isNaN(m)&&m!==0)){isNaN(m)||i||(u/=m);const v=$v(u,d);if(v){const _=v[0],S=v[1];if(_===S)return s.stops[_].opacity;{const M=s.stops[_].opacity;return M+(s.stops[S].opacity-M)*v[2]}}}}function nq(e,t,r){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(m=>m.type==="rotation"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void $o.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const i=s.axis||"heading",o=i==="heading"&&s.rotationType==="arithmetic"?90:0,l=i==="heading"&&s.rotationType==="arithmetic"?-1:1,u=typeof t=="number"?null:t,p=u&&u.attributes,d=s.field,{hasExpression:h}=s.cache;let f=s.cache.compiledFunc,y=0;if(!d&&!h)return y;if(h){if(X(r)||X(r.arcade))return void $o.error("Use of arcade expressions requires an arcade context");const m={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,_=v.getViewInfo(m),S=v.createExecContext(u,_);if(!f){const M=v.createSyntaxTree(s.valueExpression);f=v.createFunction(M),s.cache.compiledFunc=f}y=v.executeFunction(f,S)}else p&&(y=p[d]||0);return y=typeof y!="number"||isNaN(y)?null:o+l*y,y}function gF(e,t,r){const s=typeof t=="number",i=s?null:t,o=i&&i.attributes;let l=s?t:null;const{isScaleDriven:u}=e.cache;let p=e.cache.compiledFunc;if(u){const h=T(r)?r.scale:void 0,f=T(r)?r.view:void 0;l=h==null||f==="3d"?vF(e):h}else if(!s)switch(e.inputValueType){case bi.Expression:{if(X(r)||X(r.arcade))return void $o.error("Use of arcade expressions requires an arcade context");const h={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},f=r.arcade.arcadeUtils,y=f.getViewInfo(h),m=f.createExecContext(i,y);if(!p){const v=f.createSyntaxTree(e.valueExpression);p=f.createFunction(v),e.cache.compiledFunc=p}l=f.executeFunction(p,m);break}case bi.Field:o&&(l=o[e.field]);break;case bi.Unknown:l=null}if(!tc(l))return null;if(s||!e.normalizationField)return l;const d=o?parseFloat(o[e.normalizationField]):null;return tc(d)&&d!==0?l/d:null}function vF(e){let t=null,r=null;const s=e.stops;return s?(t=s[0].value,r=s[s.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}function eM(e,t,r){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(o=>o.type==="size"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void $o.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const i=MF(gF(s,t,r),s,t,r,s.cache.ipData);return i==null||isNaN(i)?0:i}function br(e,t,r){return e==null?null:_l(e)?eM(e,t,r):tc(e)?e:null}function tM(e,t,r){return tc(r)&&e>r?r:tc(t)&&e<t?t:e}function bF(e,t,r,s){return e+(br(t.minSize,r,s)||t.minDataValue)}function wF(e,t,r){const s=e.stops;let i=s&&s.length&&s[0].size;return i==null&&(i=e.minSize),br(i,t,r)}function SF(e,t,r,s){const i=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),o=br(t.minSize,r,s),l=br(t.maxSize,r,s),u=T(s)?s.shape:void 0;if(e<=t.minDataValue)return o;if(e>=t.maxDataValue)return l;if(t.scaleBy==="area"&&u){const p=u==="circle",d=p?ld*(o/2)**2:o*o,h=d+i*((p?ld*(l/2)**2:l*l)-d);return p?2*Math.sqrt(h/ld):Math.sqrt(h)}return o+i*(l-o)}function _F(e,t,r,s){const i=T(s)?s.shape:void 0,o=e/t.minDataValue,l=br(t.minSize,r,s),u=br(t.maxSize,r,s);let p=null;return p=i==="circle"?2*Math.sqrt(o*(l/2)**2):i==="square"||i==="diamond"||i==="image"?Math.sqrt(o*l**2):o*l,tM(p,l,u)}function xF(e,t,r,s,i){const[o,l,u]=$v(e,i);if(o===l)return br(t.stops[o].size,r,s);{const p=br(t.stops[o].size,r,s);return p+(br(t.stops[l].size,r,s)-p)*u}}function $F(e,t,r,s){const i=(T(s)&&s.resolution?s.resolution:1)*X3[t.valueUnit],o=br(t.minSize,r,s),l=br(t.maxSize,r,s),{valueRepresentation:u}=t;let p=null;return p=u==="area"?2*Math.sqrt(e/ld)/i:u==="radius"||u==="distance"?2*e/i:e/i,tM(p,o,l)}function MF(e,t,r,s,i){switch(t.transformationType){case Ot.Additive:return bF(e,t,r,s);case Ot.Constant:return wF(t,r,s);case Ot.ClampedLinear:return SF(e,t,r,s);case Ot.Proportional:return _F(e,t,r,s);case Ot.Stops:return xF(e,t,r,s,i);case Ot.RealWorldSize:return $F(e,t,r,s);case Ot.Identity:return e;case Ot.Unknown:return null}}function lq(e,t,r){const{isScaleDriven:s}=e.cache;if(!(s&&r==="3d"||t))return null;const i={scale:t,view:r};let o=br(e.minSize,e2,i),l=br(e.maxSize,e2,i);if(o!=null||l!=null){if(o>l){const u=l;l=o,o=u}return{minSize:o,maxSize:l}}}function $v(e,t){if(!t)return;let r=0,s=t.length-1;return t.some((i,o)=>e<i?(s=o,!0):(r=o,!1)),[r,s,(e-t[r])/(t[s]-t[r])]}function aq(e,t,r){const s=["proportional","proportional","proportional"];for(const i of e){const o=i.useSymbolValue?"symbol-value":eM(i,t,r);switch(i.axis){case"width":s[0]=o;break;case"depth":s[1]=o;break;case"height":s[2]=o;break;case"width-and-depth":s[0]=o,s[1]=o;break;case"all":case void 0:case null:s[0]=o,s[1]=o,s[2]=o;break;default:i.axis}}return s}var F0;const Bn=Z.getLogger("esri.renderers.visualVariables.SizeVariable"),np=new ye({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),k0=new ye({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function t2(e){if(e!=null)return typeof e=="string"||typeof e=="number"?Pe(e):e.type==="size"?_l(e)?e:(delete(e=I({},e)).type,new Fe(e)):void 0}function r2(e,t,r){if(typeof e!="object")return e;const s=new Fe;return s.read(e,r),s}let Fe=F0=class extends _c{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:mF.test(this.valueExpression)}}set expression(e){Bn.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){_l(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),_l(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return q3(this)}set maxDataValue(e){e&&this.stops&&(Bn.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(Bn.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return t2(e)}readMaxSize(e,t,r){return r2(e,t,r)}set minDataValue(e){e&&this.stops&&(Bn.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(Bn.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return t2(e)}readMinSize(e,t,r){return r2(e,t,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value):e&&(Bn.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return Z8(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,s){if(e==="$view.scale"){if(s&&s.messages){const i=this.index,o=typeof i=="string"?i:`visualVariables[${i}]`;s.messages.push(new C("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:o+".valueExpression",context:s}))}}else t[r]=e}readValueUnit(e){return e?k0.read(e):null}clone(){return new F0({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:_l(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:_l(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===Ot.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Ot.Stops){const e=this.stops,t=e.map(s=>s.size).reverse(),r=e.length;for(let s=0;s<r;s++)e[s].size=t[s];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};n([c({readOnly:!0})],Fe.prototype,"cache",null),n([c({type:np.apiValues,json:{type:np.jsonValues,origins:{"web-map":{read:!1}},read:np.read,write:np.write}})],Fe.prototype,"axis",void 0),n([c({type:String,value:null,json:{read:!1}})],Fe.prototype,"expression",null),n([c()],Fe.prototype,"index",null),n([c({type:String,readOnly:!0})],Fe.prototype,"inputValueType",null),n([c({type:Q8,json:{write:!0}})],Fe.prototype,"legendOptions",void 0),n([c({type:Number,value:null,json:{write:!0}})],Fe.prototype,"maxDataValue",null),n([c({type:Number,value:null,json:{write:!0}})],Fe.prototype,"maxSize",null),n([ht("maxSize")],Fe.prototype,"castMaxSize",null),n([K("maxSize")],Fe.prototype,"readMaxSize",null),n([c({type:Number,value:null,json:{write:!0}})],Fe.prototype,"minDataValue",null),n([c({type:Number,value:null,json:{write:!0}})],Fe.prototype,"minSize",null),n([ht("minSize")],Fe.prototype,"castMinSize",null),n([K("minSize")],Fe.prototype,"readMinSize",null),n([c({type:String,json:{write:!0}})],Fe.prototype,"normalizationField",void 0),n([c({readOnly:!0})],Fe.prototype,"arcadeRequired",null),n([c({type:String})],Fe.prototype,"scaleBy",void 0),n([c({type:[K8],value:null,json:{write:!0}})],Fe.prototype,"stops",null),n([c({type:["outline"],json:{write:!0}})],Fe.prototype,"target",void 0),n([c({type:String,readOnly:!0})],Fe.prototype,"transformationType",null),n([c({type:["size"],json:{type:["sizeInfo"]}})],Fe.prototype,"type",void 0),n([c({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Fe.prototype,"useSymbolValue",void 0),n([c({type:String,json:{write:!0}})],Fe.prototype,"valueExpression",void 0),n([K("valueExpression",["valueExpression","expression"])],Fe.prototype,"readValueExpression",null),n([Y("web-scene","valueExpression")],Fe.prototype,"writeValueExpressionWebScene",null),n([c({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Fe.prototype,"valueRepresentation",void 0),n([c({type:k0.apiValues,json:{write:k0.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],Fe.prototype,"valueUnit",void 0),n([K("valueUnit")],Fe.prototype,"readValueUnit",null),Fe=F0=n([b("esri.renderers.visualVariables.SizeVariable")],Fe);const rM=Fe,IF=Z.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),OF={color:z3,size:rM,opacity:V3,rotation:U3},EF=new ye({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),TF=/^\[([^\]]+)\]$/i;let ad=class extends st{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(t=>!!t))&&e.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(t=>!!t.target)&&e.sort((t,r)=>{let s=null;return s=t.target===r.target?0:t.target?1:-1,s});for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,r){const{rotationExpression:s,rotationType:i}=t,o=s&&s.match(TF),l=o&&o[1];if(l&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:i,field:l})),e)return e.map(u=>{const p=EF.read(u.type),d=OF[p];d||(IF.warn(`Unknown variable type: ${p}`),r&&r.messages&&r.messages.push(new _r("visual-variable:unsupported",`visualVariable of type '${p}' is not supported`,{definition:u,context:r})));const h=new d;return h.read(u,r),h})}writeVariables(e,t){const r=[];for(const s of e){const i=s.toJSON(t);i&&r.push(i)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};n([c()],ad.prototype,"visualVariables",null),ad=n([b("esri.renderers.visualVariables.VisualVariableFactory")],ad);const jF=ad,AF={base:_c,key:"type",typeMap:{opacity:V3,color:z3,rotation:U3,size:rM}},$c=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new jF}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,s,i){return this._vvFactory.readVariables(r,s,i)}writeVisualVariables(r,s,i,o){s[i]=this._vvFactory.writeVariables(r,o)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const r of this.visualVariables)if(r.arcadeRequired)return!0;return!1}hasVisualVariables(r,s){return r?this.getVisualVariablesForType(r,s).length>0:this.getVisualVariablesForType("size",s).length>0||this.getVisualVariablesForType("color",s).length>0||this.getVisualVariablesForType("opacity",s).length>0||this.getVisualVariablesForType("rotation",s).length>0}getVisualVariablesForType(r,s){const i=this.visualVariables;return i?i.filter(o=>o.type===r&&(typeof s=="string"?o.target===s:s!==!1||!o.target)):[]}async collectVVRequiredFields(r,s){let i=[];this.visualVariables&&(i=i.concat(this.visualVariables));for(const o of i)o&&(o.field&&fs(r,s,o.field),o.normalizationField&&fs(r,s,o.normalizationField),o.valueExpression&&await Mi(r,s,o.valueExpression))}};return n([c({types:[AF],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),n([K("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),n([Y("visualVariables")],t.prototype,"writeVisualVariables",null),t=n([b("esri.renderers.mixins.VisualVariablesMixin")],t),t},Ia={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function CF(e,t=Ia){if(!e)return{symbol:null};const{retainId:r=Ia.retainId,ignoreDrivers:s=Ia.ignoreDrivers,hasLabelingContext:i=Ia.hasLabelingContext,retainCIM:o=Ia.retainCIM}=t;let l;if(qw(e)||e instanceof Vn)l=e.clone();else if(e.type==="cim"){var u,p;const d=(u=e.data)==null||(p=u.symbol)==null?void 0:p.type;if(d!=="CIMPointSymbol")return{error:new C("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${d||"unknown"}' is unsupported in 3D`,{symbol:e})};l=o?e.clone():gn.fromCIMSymbol(e)}else if(e instanceof zr)l=of.fromSimpleLineSymbol(e);else if(e instanceof pa)l=gn.fromSimpleMarkerSymbol(e);else if(e instanceof wc)l=gn.fromPictureMarkerSymbol(e);else if(e instanceof Dn)l=Sc.fromSimpleFillSymbol(e);else{if(!(e instanceof zn))return{error:new C("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};l=i?sf.fromTextSymbol(e):gn.fromTextSymbol(e)}if(r&&l.type!=="cim"&&(l.id=e.id),s&&qw(l))for(let d=0;d<l.symbolLayers.length;++d)l.symbolLayers.getItemAt(d)._ignoreDrivers=!0;return{symbol:l}}function ph(e,t,r,s){const i=sM(e,{},{context:s,isLabelSymbol:!1});T(i)&&(t[r]=i)}function s2(e,t,r,s){const i=sM(e,{},{context:s,isLabelSymbol:!0});T(i)&&(t[r]=i)}function sM(e,t,r){if(X(e))return null;const{context:s,isLabelSymbol:i}=r;if(s&&s.origin==="web-scene"&&!(e instanceof ca)&&!(e instanceof Vn)){const o=CF(e,{retainCIM:!0,hasLabelingContext:i});return T(o.symbol)?o.symbol.write(t,s):(s.messages&&s.messages.push(new C("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:s,error:o.error})),null)}return s&&s.origin==="web-map"&&e.type==="web-style"?(s.messages&&s.messages.push(new C("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:e,context:s})),null):e.write(t,s)}function uq(e,t){return k8(e,null,t)}const Mc={types:N3,json:{write:{writer:ph},origins:{"web-scene":{types:Bw,write:{writer:ph},read:{reader:Xl({types:Bw})}}}}},iM={types:{base:cr,key:"type",typeMap:{"simple-fill":xn.typeMap["simple-fill"],"picture-fill":xn.typeMap["picture-fill"],"polygon-3d":xn.typeMap["polygon-3d"]}},json:{write:{writer:ph},origins:{"web-scene":{type:Sc,write:{writer:ph}}}}};var N0;let Ki=N0=class extends F{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new N0({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};n([c({type:String,json:{write:!0}})],Ki.prototype,"description",void 0),n([c({type:String,json:{write:!0}})],Ki.prototype,"label",void 0),n([c({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Ki.prototype,"minValue",void 0),n([c({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Ki.prototype,"maxValue",void 0),n([c(Mc)],Ki.prototype,"symbol",void 0),Ki=N0=n([b("esri.renderers.support.ClassBreakInfo")],Ki);const dh=Ki;var P0;const lp=Z.getLogger("esri.renderers.ClassBreaksRenderer"),oM="log",ud="percent-of-total",cd="field",ap=new ye({esriNormalizeByLog:oM,esriNormalizeByPercentOfTotal:ud,esriNormalizeByField:cd}),RF=Je(dh);let wt=P0=class extends $c(Oo){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let s=t.minValue;return e.map(i=>{const o=new dh;return o.read(i,r),o.minValue==null&&(o.minValue=s),o.maxValue==null&&(o.maxValue=o.minValue),s=o.maxValue,o})}writeClassBreakInfos(e,t,r,s){const i=e.map(o=>o.write({},s));this._areClassBreaksConsecutive()&&i.forEach(o=>delete o.classMinValue),t[r]=i}castField(e){return e==null?e:typeof e=="function"?(lp.error(".field: field must be a string value"),null):hc(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=this.normalizationTotal!=null;return t||r?(e=t&&cd||r&&ud||null,t&&r&&lp.warn("warning: both normalizationField and normalizationTotal are set!")):e!==cd&&e!==ud||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let s=null;s=typeof e=="number"?new dh({minValue:e,maxValue:t,symbol:P3(r)}):RF(E(e)),this.classBreakInfos.push(s),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let s=0;s<r;s++){const i=[this.classBreakInfos[s].minValue,this.classBreakInfos[s].maxValue];if(i[0]===e&&i[1]===t){this.classBreakInfos.splice(s,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(X(t)||X(t.arcade))&&lp.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&(X(t)||X(t.arcade))&&(r=pe(I({},r),{arcade:await Rn()}));const s=this.getBreakIndex(e,r);return s!==-1?this.classBreakInfos[s]:null}getSymbol(e,t){if(this.valueExpression&&(X(t)||X(t.arcade)))return void lp.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(X(t)||X(t.arcade))){const i=await Rn(),{arcadeUtils:o}=i;o.hasGeometryOperations(this.valueExpression)&&await o.enableGeometryOperations(),r=pe(I({},r),{arcade:i})}const s=this.getBreakIndex(e,r);return s>-1?this.classBreakInfos[s].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((s,i)=>s+i.getMeshHash(),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new P0({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:E(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:E(this.visualVariables),legendOptions:E(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(s=>s.collectRequiredFields(e,t)),Mi(e,t,this.valueExpression)];fs(e,t,this.field),fs(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:s,spatialReference:i,arcade:o}=R_(t,{});let l=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const u=o.arcadeUtils;if(!l){const d=u.createSyntaxTree(this.valueExpression);l=u.createFunction(d),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=this.valueExpression;const p=u.executeFunction(l,u.createExecContext(e,u.getViewInfo({viewingMode:r,scale:s,spatialReference:i})));return this._getBreakIndexfromInfos(p)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,s=this.normalizationType;let i=parseFloat(r[t]);if(s){const o=this.normalizationTotal,l=parseFloat(r[this.normalizationField]);if(s===oM)i=Math.log(i)*Math.LOG10E;else if(s!==ud||isNaN(o)){if(s===cd&&!isNaN(l)){if(isNaN(i)||isNaN(l))return-1;i/=l}}else i=i/o*100}return this._getBreakIndexfromInfos(i)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const s=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(s[0]<=e&&(t?e<=s[1]:e<s[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};n([c(iM)],wt.prototype,"backgroundFillSymbol",void 0),n([c({type:[dh]})],wt.prototype,"classBreakInfos",void 0),n([K("classBreakInfos")],wt.prototype,"readClassBreakInfos",null),n([Y("classBreakInfos")],wt.prototype,"writeClassBreakInfos",null),n([c({type:String,json:{write:!0}})],wt.prototype,"defaultLabel",void 0),n([c(Mc)],wt.prototype,"defaultSymbol",void 0),n([c({type:String,json:{write:!0}})],wt.prototype,"field",void 0),n([ht("field")],wt.prototype,"castField",null),n([c({type:Boolean})],wt.prototype,"isMaxInclusive",void 0),n([c({type:_v,json:{write:!0}})],wt.prototype,"legendOptions",void 0),n([c({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],wt.prototype,"minValue",null),n([c({type:String,json:{write:!0}})],wt.prototype,"normalizationField",void 0),n([c({type:Number,cast:e=>qh(e),json:{write:!0}})],wt.prototype,"normalizationTotal",void 0),n([c({type:ap.apiValues,value:null,json:{type:ap.jsonValues,read:ap.read,write:ap.write}})],wt.prototype,"normalizationType",null),n([le({classBreaks:"class-breaks"})],wt.prototype,"type",void 0),n([c({type:String,json:{write:!0}})],wt.prototype,"valueExpression",void 0),n([c({type:String,json:{write:!0}})],wt.prototype,"valueExpressionTitle",void 0),wt=P0=n([b("esri.renderers.ClassBreaksRenderer")],wt);const nM=wt,Hf=-3;var lo;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(lo||(lo={}));class cq{constructor(t,r,s){this._namespace=t,this._storage=r,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",s&&(this._storage.registerRemoveFunc(this._namespace,s),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,r,s,i=0){this._storage.put(this._namespace+t,r,s,i)}get(t){const r=this._storage.get(this._namespace+t);return r===void 0?++this._miss:++this._hit,r}pop(t){const r=this._storage.pop(this._namespace+t);return r===void 0?++this._miss:++this._hit,r}updateSize(t,r,s){this._storage.updateSize(this._namespace+t,r,s)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class FF{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Jd,this._users=new Jd}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,r){this._removeFuncs.push([t,r])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(r=>r[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,r,s,i){const o=this._db.get(t);if(o&&(this._size-=o.size,this._db.delete(t),o.entry!==r&&this._notifyRemove(t,o.entry,lo.ALL)),s>this._maxSize)return void this._notifyRemove(t,r,lo.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return void console.warn("Refusing to cache entry with invalid size "+s);const l=1+Math.max(i,Hf)-Hf;this._db.set(t,{entry:r,size:s,lifetime:l,lives:l}),this._size+=s,this._checkSizeLimit()}updateSize(t,r,s){const i=this._db.get(t);if(i&&i.entry===r){for(this._size-=i.size;s>this._maxSize;){const o=this._notifyRemove(t,r,lo.SOME);if(!(T(o)&&o>0))return void this._db.delete(t);s=o}i.size=s,this._size+=s,this._checkSizeLimit()}}pop(t){const r=this._db.get(t);if(r)return this._size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}get(t){const r=this._db.get(t);if(r!==void 0)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},s=new Array;this._db.forEach((l,u)=>{const p=l.lifetime;s[p]=(s[p]||0)+l.size,this._users.forAll(d=>{const h=d.namespace;if(u.startsWith(h)){const f=r[h]||0;r[h]=f+l.size}})});const i={};this._users.forAll(l=>{const u=l.namespace;if(!isNaN(l.hitRate)&&l.hitRate>0){const p=r[u]||0;r[u]=p,i[u]=Math.round(100*l.hitRate)+"%"}else i[u]="0%"});const o=Object.keys(r);o.sort((l,u)=>r[u]-r[l]),o.forEach(l=>t[l]=Math.round(r[l]/2**20)+"MB / "+i[l]);for(let l=s.length-1;l>=0;--l){const u=s[l];u&&(t["Priority "+(l+Hf-1)]=Math.round(u/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((r,s)=>{s.startsWith(t)&&(this._size-=r.size,this._db.delete(s),this._notifyRemove(s,r.entry,lo.ALL))})}clearAll(){this._db.forEach((t,r)=>this._notifyRemove(r,t.entry,lo.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,r,s){let i;return this._removeFuncs.some(o=>{if(t.startsWith(o[0])){const l=o[1](r,s);return typeof l=="number"&&(i=l),!0}return!1}),i}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,r]of this._db){if(this._db.delete(t),r.lives<=1){this._size-=r.size;const s=this._notifyRemove(t,r.entry,lo.SOME);T(s)&&s>0&&(this._size+=s,r.lives=r.lifetime,r.size=s,this._db.set(t,r))}else--r.lives,this._db.set(t,r);if(this._size<=.9*this.maxSize)return}}}class kF{constructor(t,r){this._storage=new FF,this._storage.maxSize=t,r&&this._storage.registerRemoveFunc("",r)}put(t,r,s){this._storage.put(t,r,s,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}const i2=Z.getLogger("esri.renderers.support.DictionaryLoader"),NF={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class Mv{constructor(t,r,s){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new kF(100),this.url=t,this.config=r,this.fieldMap=s}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,r){let s;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r));try{s=await this._dictionaryPromise}catch(m){if(Js(m))return this._dictionaryPromise=null,null}const i={};if(this.fieldMap)for(const m of this._symbolFields){const v=this.fieldMap[m];if(v&&t.attributes[v]!=null){const _=""+t.attributes[v];i[m]=_}else i[m]=""}const o=s(i,r);if(!o||typeof o!="string")return null;const l=x1(o).toString(),u=this._symbolCache.get(l);if(u)return u.catch(()=>{this._symbolCache.pop(l)}),u;const p=o.split(";"),d=[],h=[];for(const m of p)if(m)if(m.includes("po:")){const v=m.substr(3).split("|");if(v.length===3){const _=v[0],S=v[1];let M=v[2];if(S==="DashTemplate")M=M.split(" ").map(k=>Number(k));else if(S==="Color"){const k=new Ce(M).toRgba();M=[k[0],k[1],k[2],255*k[3]]}else M=Number(M);h.push({primitiveName:_,propertyName:S,value:M})}}else if(m.includes("|")){for(const v of m.split("|"))if(this._itemNames.has(v)){d.push(v);break}}else this._itemNames.has(m)&&d.push(m);const f=!T(t.geometry)||!t.geometry.hasZ&&t.geometry.type==="point",y=this._cimPartsToCIMSymbol(d,h,f,r);return this._symbolCache.put(l,y,1),y}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void i2.error("no valid URL!");const r=T(t)?t.abortOptions:null,s=at(this.url+"/resources/styles/dictionary-info.json",I({responseType:"json",query:{f:"json"}},r)),[{data:i}]=await Promise.all([s,Rn()]);if(!i)throw this._dictionaryPromise=null,new C("esri.renderers.DictionaryRenderer","Bad dictionary data!");const o=i.expression,l=i.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=new Set(i.itemsNames),this._symbolFields=l.symbol;const u={};if(this.config){const d=this.config;for(const h in d)u[h]=d[h]}if(l.configuration)for(const d of l.configuration)u.hasOwnProperty(d.name)||(u[d.name]=d.value);const p=[];if(T(t)&&t.fields&&this.fieldMap)for(const d of this._symbolFields){const h=this.fieldMap[d],f=t.fields.filter(y=>y.name===h);f.length>0&&p.push(pe(I({},f[0]),{name:d}))}return this._dictionaryPromise=_A(o,T(t)?t.spatialReference:null,p,u).then(d=>{const h={scale:0};return(f,y)=>{const m=d.repurposeFeature({geometry:null,attributes:f});return h.scale=T(y)?y.scale:void 0,d.evaluate({$feature:m,$view:h})}}).catch(d=>(i2.error("Creating dictinoary expression failed:",d),null)),this._dictionaryPromise}async _cimPartsToCIMSymbol(t,r,s,i){const o=new Array(t.length);for(let p=0;p<t.length;p++)o[p]=this._getSymbolPart(t[p],i);const l=await Promise.all(o),u=this.fieldMap;for(const p of l)lM(p,u);return new gc({data:this._combineSymbolParts(l,r,s)})}async _getSymbolPart(t,r){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(o=>o.data);const s=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),i=at(s,I({responseType:"json",query:{f:"json"}},r));this._ongoingRequests.set(t,i);try{return(await i).data}catch(o){return this._ongoingRequests.delete(t),Promise.reject(o)}}_combineSymbolParts(t,r,s){if(!t||t.length===0)return null;const i=I({},t[0]);if(t.length>1){i.symbolLayers=[];for(const o of t){const l=o;i.symbolLayers.unshift(...l.symbolLayers)}}return s&&(i.callout=NF),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:r}}}function lM(e,t){if(!e)return;const r=e.symbolLayers;if(!r)return;let s=r.length;for(;s--;){const i=r[s];i&&i.enable!==!1&&i.type==="CIMVectorMarker"&&PF(i,t)}}function PF(e,t){const r=e.markerGraphics;if(r)for(const s of r){if(!s)continue;const i=s.symbol;if(i)switch(i.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":lM(i,t);break;case"CIMTextSymbol":i.fieldMap=t}}}var pq=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:Mv},Symbol.toStringTag,{value:"Module"})),L0;let Qr=L0=class extends $c(Oo){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new Mv(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,s){s!=null&&s.origin||super.writeVisualVariables(e,t,r,s)}clone(){return new L0({config:E(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:E(this.fieldMap),url:E(this.url),visualVariables:E(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await Mi(e,t,this.scaleExpression);for(const r in this.fieldMap){const s=this.fieldMap[r];t.has(s)&&e.add(s)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};n([c({type:Mv})],Qr.prototype,"_loader",null),n([c({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Qr.prototype,"config",void 0),n([c({type:Object,json:{write:!0}})],Qr.prototype,"fieldMap",void 0),n([c({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Qr.prototype,"scaleExpression",void 0),n([Y("scaleExpression")],Qr.prototype,"writeData",null),n([c({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Qr.prototype,"scaleExpressionTitle",void 0),n([c({type:String,json:{write:!0}})],Qr.prototype,"url",void 0),n([Y("visualVariables")],Qr.prototype,"writeVisualVariables",null),Qr=L0=n([b("esri.renderers.DictionaryRenderer")],Qr);const LF=Qr;function Ge(e,t){const r=t?pe(I({},t),{source:e}):e;return c({aliasOf:r})}var D0;const DF=Z.getLogger("esri.renderers.support.AttributeColorInfo");let ii=D0=class extends F{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(DF.error(".field: field must be a string value"),null):hc(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new D0({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};n([c({type:Ce,json:{type:[Number],write:!0}})],ii.prototype,"color",void 0),n([c({type:String,json:{write:!0}})],ii.prototype,"field",void 0),n([ht("field")],ii.prototype,"castField",null),n([c({type:String,json:{write:!0}})],ii.prototype,"label",void 0),n([c({type:String,json:{write:!0}})],ii.prototype,"valueExpression",void 0),n([c({type:String,json:{write:!0}})],ii.prototype,"valueExpressionTitle",void 0),ii=D0=n([b("esri.renderers.support.AttributeColorInfo")],ii);const zF=ii;var z0;let pd=z0=class extends F{constructor(){super(...arguments),this.unit=null}clone(){return new z0({unit:this.unit})}};n([c({type:String,json:{write:!0}})],pd.prototype,"unit",void 0),pd=z0=n([b("esri.renderers.support.DotDensityLegendOptions")],pd);const VF=pd;var V0;let Vt=V0=class extends $c(Oo){constructor(e){super(e),this.attributes=null,this.backgroundColor=new Ce([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new zr,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new Dn({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new V0({attributes:E(this.attributes),backgroundColor:E(this.backgroundColor),dotBlendingEnabled:E(this.dotBlendingEnabled),dotShape:E(this.dotShape),dotSize:E(this.dotSize),dotValue:E(this.dotValue),legendOptions:E(this.legendOptions),outline:E(this.outline),referenceScale:E(this.referenceScale),visualVariables:E(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes)r.valueExpression&&await Mi(e,t,r.valueExpression),r.field&&e.add(r.field)}};n([c({type:[zF],json:{write:!0}})],Vt.prototype,"attributes",void 0),n([c({type:Ce,json:{write:!0}})],Vt.prototype,"backgroundColor",void 0),n([c({type:Boolean}),Ge("dotBlendingEnabled")],Vt.prototype,"blendDots",void 0),n([c({type:Boolean,json:{write:!0}})],Vt.prototype,"dotBlendingEnabled",void 0),n([c({type:String,json:{write:!1}})],Vt.prototype,"dotShape",void 0),n([c({type:Number,json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1}}}})],Vt.prototype,"dotSize",void 0),n([c({type:VF,json:{write:!0}})],Vt.prototype,"legendOptions",void 0),n([c({type:zr,json:{default:null,write:!0}})],Vt.prototype,"outline",void 0),n([c({type:Number,json:{write:!0}})],Vt.prototype,"dotValue",void 0),n([c({type:Number}),Ge("dotValue")],Vt.prototype,"referenceDotValue",void 0),n([c({type:Number,json:{write:!0}})],Vt.prototype,"referenceScale",void 0),n([c({type:Number,json:{write:!0}})],Vt.prototype,"seed",void 0),n([le({dotDensity:"dot-density"})],Vt.prototype,"type",void 0),Vt=V0=n([b("esri.renderers.DotDensityRenderer")],Vt);const UF=Vt;var U0;let ou=U0=class extends F{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new U0({color:this.color,ratio:this.ratio})}};n([c({type:Ce,json:{write:!0}})],ou.prototype,"color",void 0),n([c({type:Number,json:{write:!0}})],ou.prototype,"ratio",void 0),ou=U0=n([b("esri.renderers.support.HeatmapColorStop")],ou);const dd=ou;var q0;let Zr=q0=class extends Oo{constructor(e){super(e),this.blurRadius=10,this.referenceScale=0,this.colorStops=[new dd({ratio:0,color:new Ce("rgba(255, 140, 0, 0)")}),new dd({ratio:.75,color:new Ce("rgba(255, 140, 0, 1)")}),new dd({ratio:.9,color:new Ce("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.maxPixelIntensity=100,this.minPixelIntensity=0,this.type="heatmap"}async collectRequiredFields(e,t){const r=this.field;r&&typeof r=="string"&&fs(e,t,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new q0({blurRadius:this.blurRadius,referenceScale:this.referenceScale,colorStops:E(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}};n([c({type:Number,json:{write:!0}})],Zr.prototype,"blurRadius",void 0),n([c({type:Number})],Zr.prototype,"referenceScale",void 0),n([c({type:[dd],json:{write:!0}})],Zr.prototype,"colorStops",void 0),n([c({type:String,json:{write:!0}})],Zr.prototype,"field",void 0),n([c({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:r==null})}}})],Zr.prototype,"fieldOffset",void 0),n([c({type:Number,json:{write:!0}})],Zr.prototype,"maxPixelIntensity",void 0),n([c({type:Number,json:{write:!0}})],Zr.prototype,"minPixelIntensity",void 0),n([le({heatmap:"heatmap"})],Zr.prototype,"type",void 0),Zr=q0=n([b("esri.renderers.HeatmapRenderer")],Zr);const qF=Zr;var B0;let tn=B0=class extends $c(Oo){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(r=>r.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new B0({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:E(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};n([c({type:String,json:{write:!0}})],tn.prototype,"description",void 0),n([c({type:String,json:{write:!0}})],tn.prototype,"label",void 0),n([c(Mc)],tn.prototype,"symbol",void 0),n([le({simple:"simple"})],tn.prototype,"type",void 0),tn=B0=n([b("esri.renderers.SimpleRenderer")],tn);const Iv=tn,BF=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function G0(e){return e instanceof st}function o2(e){return e instanceof et?Object.keys(e.items):G0(e)?er(e).keys():e?Object.keys(e):[]}function up(e,t){return e instanceof et?e.items[t]:e[t]}function GF(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function Ru(e){return e?e.declaredClass:null}function aM(e,t){const r=e.diff;if(r&&typeof r=="function")return r(e,t);const s=o2(e),i=o2(t);if(s.length===0&&i.length===0)return;if(!s.length||!i.length||GF(e,t))return{type:"complete",oldValue:e,newValue:t};const o=i.filter(f=>s.indexOf(f)===-1),l=s.filter(f=>i.indexOf(f)===-1),u=s.filter(f=>i.indexOf(f)>-1&&up(e,f)!==up(t,f)).concat(o,l).sort(),p=Ru(e);if(p&&BF.indexOf(p)>-1&&u.length)return{type:"complete",oldValue:e,newValue:t};let d;const h=G0(e)&&G0(t);for(const f of u){const y=up(e,f),m=up(t,f);let v;(h||typeof y!="function"&&typeof m!="function")&&y!==m&&(y==null&&m==null||(v=r&&r[f]&&typeof r[f]=="function"?r[f](y,m):typeof y=="object"&&typeof m=="object"&&Ru(y)===Ru(m)?aM(y,m):{type:"complete",oldValue:y,newValue:m},T(v)&&(T(d)?d.diff[f]=v:d={type:"partial",diff:{[f]:v}})))}return d}function JF(e,t){if(X(e))return!1;const r=t.split(".");let s=e;for(const i of r){if(s.type==="complete")return!0;if(s.type!=="partial")return!1;{const o=s.diff[i];if(!o)return!1;s=o}}return!0}function dq(e,t){for(const r of t)if(JF(e,r))return!0;return!1}function WF(e,t){if(!(typeof e=="function"||typeof t=="function"||X(e)&&X(t)))return X(e)||X(t)||typeof e=="object"&&typeof t=="object"&&Ru(e)!==Ru(t)?{type:"complete",oldValue:e,newValue:t}:aM(e,t)}var J0;let Qi=J0=class extends F{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}castValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new J0({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};n([c({type:String,json:{write:!0}})],Qi.prototype,"description",void 0),n([c({type:String,json:{write:!0}})],Qi.prototype,"label",void 0),n([c(Mc)],Qi.prototype,"symbol",void 0),n([c({json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}})],Qi.prototype,"value",void 0),n([ht("value")],Qi.prototype,"castValue",null),Qi=J0=n([b("esri.renderers.support.UniqueValueInfo")],Qi);const hh=Qi,HF=()=>!!R("enable-feature:force-wosr"),Kf={};async function KF(e,t){try{return{data:(await XF(e,t)).data,baseUrl:kR(e),styleUrl:e}}catch(r){return pc(r),null}}function QF(e,t,r){const s=t&&t.portal||ur.getDefault();let i;const o=`${s.url} - ${s.user&&s.user.username} - ${e}`;return Kf[o]||(Kf[o]=ZF(e,s,r).then(l=>(i=l,l.fetchData())).then(l=>({data:l,baseUrl:i.itemUrl,styleName:e}))),Kf[o]}function ZF(e,t,r){return t.load(r).then(()=>{const s=new mi({disableExtraQuery:!0,query:`owner:${n2} AND type:${l2} AND typekeywords:"${e}"`});return t.queryItems(s,r)}).then(({results:s})=>{let i=null;const o=e.toLowerCase();if(s&&Array.isArray(s)){for(const l of s)if(l.typeKeywords.some(u=>u.toLowerCase()===o)&&l.type===l2&&l.owner===n2){i=l;break}}if(!i)throw new C("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return i.load(r)})}function YF(e,t,r){return e.styleUrl?KF(e.styleUrl,r):e.styleName?QF(e.styleName,t,r):Promise.reject(new C("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function hq(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function fq(e,t){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!HF()){for(const r of e.formatInfos)if(r.type==="gltf")return r.href}return e.webRef}function XF(e,t){const r=I({responseType:"json",query:{f:"json"}},t);return at(ys(e),r)}const n2="esri_en",l2="Style",yq="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var nu;const Fo=Z.getLogger("esri.renderers.UniqueValueRenderer"),ek=Je(hh);let nt=nu=class extends $c(Oo){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,r){if(!t&&!r)return;if(!t||!r)return{type:"complete",oldValue:t,newValue:r};let s=!1;const i={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let o=0;o<r.length;o++){const l=t.find(u=>u.value===r[o].value);l?WF(l,r[o])?(i.changed.push({type:"complete",oldValue:l,newValue:r[o]}),s=!0):i.unchanged.push({oldValue:l,newValue:r[o]}):(i.added.push(r[o]),s=!0)}for(let o=0;o<t.length;o++)r.find(l=>l.value===t[o].value)||(i.removed.push(t[o]),s=!0);return s?i:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(e){return e==null||typeof e=="function"?e:hc(e)}writeField(e,t,r,s){typeof e=="string"?t[r]=e:s&&s.messages?s.messages.push(new C("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Fo.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}readPortal(e,t,r){return r.portal||ur.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const s=la(t.styleUrl,r);return Object.freeze({styleUrl:s})}}writeStyleOrigin(e,t,r,s){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=bc(e.styleUrl,s))}set uniqueValueInfos(e){this.styleOrigin?Fo.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void Fo.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof e=="object"?ek(e):new hh({value:e,symbol:P3(t)}),this.uniqueValueInfos.push(r),this._valueInfoMap[r.value]=r}removeUniqueValueInfo(e){if(this.styleOrigin)Fo.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&(X(t)||X(t.arcade))&&(r=pe(I({},r),{arcade:await Rn()})),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&(X(t)||X(t.arcade)))return void Fo.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return r&&r.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(X(r)||X(r.arcade))){const i=await Rn(),{arcadeUtils:o}=i;o.hasGeometryOperations(this.valueExpression)&&await o.enableGeometryOperations(),r=pe(I({},r),{arcade:i})}const s=this._getUniqueValueInfo(e,r);return s&&s.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos)t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce((e,t)=>e+t.getMeshHash(),"")}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new nu({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:E(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:E(this.visualVariables),legendOptions:E(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:E(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=E(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(E(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(s=>s.collectRequiredFields(e,t)),Mi(e,t,this.valueExpression)];fs(e,t,this.field),fs(e,t,this.field2),fs(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return YF(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const s=new Vn({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=s,this._isDefaultSymbolDerived=!0);const i=new hh({value:r.name,symbol:s});t.push(i),this._valueInfoMap[r.name]=i}),this._set("uniqueValueInfos",Object.freeze(t)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach(e=>this._valueInfoMap[e.value+""]=e)}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:s,spatialReference:i,arcade:o}=R_(t,{});let l=this._cache.compiledFunc;const u=o.arcadeUtils;if(!l){const d=u.createSyntaxTree(this.valueExpression);l=u.createFunction(d),this._cache.compiledFunc=l}const p=u.executeFunction(l,u.createExecContext(e,u.getViewInfo({viewingMode:r,scale:s,spatialReference:i})));return this._valueInfoMap[p+""]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let s;if(typeof t!="function"&&this.field2){const i=this.field2,o=this.field3,l=[];t&&l.push(r[t]),i&&l.push(r[i]),o&&l.push(r[o]),s=l.join(this.fieldDelimiter||"")}else typeof t=="function"?s=t(e):t&&(s=r[t]);return this._valueInfoMap[s+""]}static fromPortalStyle(e,t){const r=new nu(t&&t.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",t&&t.portal||ur.getDefault());const s=r.populateFromStyle();return s.catch(i=>{Fo.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",i)}),s}static fromStyleUrl(e,t){const r=new nu(t&&t.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const s=r.populateFromStyle();return s.catch(i=>{Fo.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",i)}),s}};n([c({readOnly:!0})],nt.prototype,"_cache",null),n([le({uniqueValue:"unique-value"})],nt.prototype,"type",void 0),n([c(iM)],nt.prototype,"backgroundFillSymbol",void 0),n([c({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],nt.prototype,"field",void 0),n([ht("field")],nt.prototype,"castField",null),n([Y("field")],nt.prototype,"writeField",null),n([c({type:String,json:{write:!0}})],nt.prototype,"field2",void 0),n([c({type:String,json:{write:!0}})],nt.prototype,"field3",void 0),n([c({type:String,json:{write:!0}})],nt.prototype,"valueExpression",void 0),n([c({type:String,json:{write:!0}})],nt.prototype,"valueExpressionTitle",void 0),n([c({type:_v,json:{write:!0}})],nt.prototype,"legendOptions",void 0),n([c({type:String,json:{write:!0}})],nt.prototype,"defaultLabel",void 0),n([c(B_(I({},Mc),{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],nt.prototype,"defaultSymbol",null),n([c({type:String,json:{write:!0}})],nt.prototype,"fieldDelimiter",void 0),n([c({type:ur,readOnly:!0})],nt.prototype,"portal",void 0),n([K("portal",["styleName"])],nt.prototype,"readPortal",null),n([c({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],nt.prototype,"styleOrigin",void 0),n([K("styleOrigin",["styleName","styleUrl"])],nt.prototype,"readStyleOrigin",null),n([Y("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],nt.prototype,"writeStyleOrigin",null),n([c({type:[hh],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],nt.prototype,"uniqueValueInfos",null),nt=nu=n([b("esri.renderers.UniqueValueRenderer")],nt);const Ov=nt,uM={key:"type",base:Oo,typeMap:{heatmap:qF,simple:Iv,"unique-value":Ov,"class-breaks":nM,"dot-density":UF,dictionary:LF},errorContext:"renderer"},tk={key:"type",base:Oo,typeMap:{simple:Iv,"unique-value":Ov,"class-breaks":nM},errorContext:"renderer"},rk=Xl({types:uM});function sk(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(r&&r.messages&&r.messages.push(new _r("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):rk(e,t,r):null}let hd=class extends st{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!et.isCollection(e))return this;const r=this._getOrCreateGroup(t);return Array.isArray(e)||et.isCollection(e)?e.forEach(s=>this._isHandle(s)&&r.push(s)):r.push(e),this.notifyChange("size"),this}forEach(e,t){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||et.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let r=0;r<t.length;r++)t[r].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(e=>{for(let t=0;t<e.length;t++)e[t].remove()}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};n([c({readOnly:!0})],hd.prototype,"size",null),hd=n([b("esri.core.Handles")],hd);const da=hd;class Ev{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(Fy),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const r=new Ev,s=this._originStores[je.DEFAULTS];s&&s.forEach((i,o)=>{r.set(o,E(i),je.DEFAULTS)});for(let i=je.SERVICE;i<Fy;i++){const o=this._originStores[i];o&&o.forEach((l,u)=>{t&&t.has(u)||r.set(u,E(l),i)})}return r}get(t,r){const s=r===void 0?this._values:this._originStores[r];return s?s.get(t):void 0}keys(t){const r=t==null?this._values:this._originStores[t];return r?[...r.keys()]:[]}set(t,r,s=je.USER){let i=this._originStores[s];if(i||(i=new Map,this._originStores[s]=i),i.set(t,r),!this._values.has(t)||this._propertyOriginMap.get(t)<=s){const o=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,s),o!==r}return!1}delete(t,r=je.USER){const s=this._originStores[r];if(!s)return;const i=s.get(t);if(s.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let o=r-1;o>=0;o--){const l=this._originStores[o];if(l&&l.has(t)){this._values.set(t,l.get(t)),this._propertyOriginMap.set(t,o);break}}}return i}has(t,r){const s=r===void 0?this._values:this._originStores[r];return!!s&&s.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;const s=this._originStores[r],i=s&&s.get(t),o=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),o!==i}originOf(t){return this._propertyOriginMap.get(t)||je.DEFAULTS}forEach(t){this._values.forEach(t)}}const cM=e=>{let t=class extends e{constructor(...r){super(...r);const s=er(this),i=s.store,o=new Ev;s.store=o,Tx(s,i,o)}read(r,s){Ax(this,r,s)}getAtOrigin(r,s){const i=Qf(this),o=po(s);if(typeof r=="string")return i.get(r,o);const l={};return r.forEach(u=>{l[u]=i.get(u,o)}),l}originOf(r){return Ud(this.originIdOf(r))}originIdOf(r){return Qf(this).originOf(r)}revert(r,s){const i=Qf(this),o=po(s),l=er(this);let u;u=typeof r=="string"?r==="*"?i.keys(o):[r]:r,u.forEach(p=>{l.invalidate(p),i.revert(p,o),l.commit(p)})}};return t=n([b("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function Qf(e){return er(e).store}let a2=class extends cM(st){};a2=n([b("esri.core.ReadOnlyMultiOriginJSONSupport")],a2);const ik=e=>{let t=class extends e{constructor(...r){super(...r)}clear(r,s="user"){return Zf(this).delete(r,po(s))}write(r={},s){return Rx(this,r=r||{},s),r}setAtOrigin(r,s,i){er(this).setAtOrigin(r,s,po(i))}removeOrigin(r){const s=Zf(this),i=po(r),o=s.keys(i);for(const l of o)s.originOf(l)===i&&s.set(l,s.get(l,i),je.USER)}updateOrigin(r,s){const i=Zf(this),o=po(s),l=this.get(r);for(let u=o+1;u<Fy;++u)i.delete(r,u);i.set(r,l,o)}toJSON(r){return this.write({},r)}};return t=n([b("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Zf(e){return er(e).store}const pM=e=>{let t=class extends ik(cM(e)){constructor(...r){super(...r)}};return t=n([b("esri.core.MultiOriginJSONSupport")],t),t};let u2=class extends pM(st){};u2=n([b("esri.core.MultiOriginJSONSupport")],u2);async function ok(e,t){const{WhereClause:r}=await import("./WhereClause.5e909714.js");return r.create(e,t)}var W0;let rn=W0=class extends F{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new W0({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};n([c({type:String,json:{write:!0}})],rn.prototype,"expression",void 0),n([c({type:String,json:{write:!0}})],rn.prototype,"name",void 0),n([c({type:["boolean","date","number","string"],json:{write:!0}})],rn.prototype,"returnType",void 0),n([c({type:String,json:{write:!0}})],rn.prototype,"title",void 0),rn=W0=n([b("esri.form.ExpressionInfo")],rn);const nk=rn;let sn=class extends F{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};n([c({type:String,json:{write:!0}})],sn.prototype,"description",void 0),n([c({type:String,json:{write:!0}})],sn.prototype,"label",void 0),n([c()],sn.prototype,"type",void 0),n([c({type:String,json:{write:!0}})],sn.prototype,"visibilityExpression",void 0),sn=n([b("esri.form.elements.Element")],sn);const Kl=sn;var H0;let fd=H0=class extends F{constructor(e){super(e),this.type=null}clone(){return new H0({type:this.type})}};n([c({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],fd.prototype,"type",void 0),fd=H0=n([b("esri.form.elements.inputs.AttachmentInput")],fd);const lk=fd;var K0;let on=K0=class extends Kl{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new K0({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};n([c({type:String,json:{write:!0}})],on.prototype,"attachmentKeyword",void 0),n([c({type:Boolean,json:{write:!0}})],on.prototype,"editable",void 0),n([c({type:lk,json:{read:{source:"inputType"},write:{target:"inputType"}}})],on.prototype,"input",void 0),n([c({type:["attachment"],json:{read:!1,write:!0}})],on.prototype,"type",void 0),on=K0=n([b("esri.form.elements.AttachmentElement")],on);const c2=on;let yd=class extends F{constructor(e){super(e),this.type=null}};n([c()],yd.prototype,"type",void 0),yd=n([b("esri.form.elements.inputs.Input")],yd);const ha=yd;let lu=class extends ha{constructor(e){super(e),this.maxLength=null,this.minLength=0}};n([c({type:Number,json:{write:!0}})],lu.prototype,"maxLength",void 0),n([c({type:Number,json:{write:!0}})],lu.prototype,"minLength",void 0),lu=n([b("esri.form.elements.inputs.TextInput")],lu);const Tv=lu;var Q0;let md=Q0=class extends Tv{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new Q0({maxLength:this.maxLength,minLength:this.minLength})}};n([c({type:["barcode-scanner"],json:{read:!1,write:!0}})],md.prototype,"type",void 0),md=Q0=n([b("esri.form.elements.inputs.BarcodeScannerInput")],md);const ak=md;var Z0;let tl=Z0=class extends ha{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new Z0({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};n([c({type:String,json:{write:!0}})],tl.prototype,"noValueOptionLabel",void 0),n([c({type:Boolean,json:{write:!0}})],tl.prototype,"showNoValueOption",void 0),n([c({type:["combo-box"],json:{read:!1,write:!0}})],tl.prototype,"type",void 0),tl=Z0=n([b("esri.form.elements.inputs.ComboBoxInput")],tl);const uk=tl;var Y0;function p2(e){return e!=null?new Date(e):null}function d2(e){return e?e.getTime():null}let Yr=Y0=class extends ha{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return p2(t.max)}writeMax(e,t){t.max=d2(e)}readMin(e,t){return p2(t.min)}writeMin(e,t){t.min=d2(e)}clone(){return new Y0({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};n([c({type:Boolean,json:{write:!0}})],Yr.prototype,"includeTime",void 0),n([c({type:Date,json:{type:Number,write:!0}})],Yr.prototype,"max",void 0),n([K("max")],Yr.prototype,"readMax",null),n([Y("max")],Yr.prototype,"writeMax",null),n([c({type:Date,json:{type:Number,write:!0}})],Yr.prototype,"min",void 0),n([K("min")],Yr.prototype,"readMin",null),n([Y("min")],Yr.prototype,"writeMin",null),n([c({type:["datetime-picker"],json:{read:!1,write:!0}})],Yr.prototype,"type",void 0),Yr=Y0=n([b("esri.form.elements.inputs.DateTimePickerInput")],Yr);const ck=Yr;var X0;let rl=X0=class extends ha{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new X0({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};n([c({type:String,json:{write:!0}})],rl.prototype,"noValueOptionLabel",void 0),n([c({type:Boolean,json:{write:!0}})],rl.prototype,"showNoValueOption",void 0),n([c({type:["radio-buttons"],json:{read:!1,write:!0}})],rl.prototype,"type",void 0),rl=X0=n([b("esri.form.elements.inputs.RadioButtonsInput")],rl);const pk=rl;var eg;let sl=eg=class extends ha{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new eg({offValue:this.offValue,onValue:this.onValue})}};n([c({type:[String,Number],json:{write:!0}})],sl.prototype,"offValue",void 0),n([c({type:[String,Number],json:{write:!0}})],sl.prototype,"onValue",void 0),n([c({type:["switch"],json:{read:!1,write:!0}})],sl.prototype,"type",void 0),sl=eg=n([b("esri.form.elements.inputs.SwitchInput")],sl);const dk=sl;var tg;let gd=tg=class extends Tv{constructor(e){super(e),this.type="text-area"}clone(){return new tg({maxLength:this.maxLength,minLength:this.minLength})}};n([c({type:["text-area"],json:{read:!1,write:!0}})],gd.prototype,"type",void 0),gd=tg=n([b("esri.form.elements.inputs.TextAreaInput")],gd);const hk=gd;var rg;let vd=rg=class extends Tv{constructor(e){super(e),this.type="text-box"}clone(){return new rg({maxLength:this.maxLength,minLength:this.minLength})}};n([c({type:["text-box"],json:{read:!1,write:!0}})],vd.prototype,"type",void 0),vd=rg=n([b("esri.form.elements.inputs.TextBoxInput")],vd);const fk=vd,yk={base:ha,key:"type",typeMap:{"barcode-scanner":ak,"combo-box":uk,"datetime-picker":ck,"radio-buttons":pk,switch:dk,"text-area":hk,"text-box":fk}};var sg;let au=sg=class extends F{constructor(e){super(e),this.name=null,this.code=null}clone(){return new sg({name:this.name,code:this.code})}};n([c({type:String,json:{write:!0}})],au.prototype,"name",void 0),n([c({type:[String,Number],json:{write:!0}})],au.prototype,"code",void 0),au=sg=n([b("esri.layers.support.CodedValue")],au);const mk=au,gk=new ye({inherited:"inherited",codedValue:"coded-value",range:"range"});let uu=class extends F{constructor(e){super(e),this.name=null,this.type=null}};n([c({type:String,json:{write:!0}})],uu.prototype,"name",void 0),n([le(gk)],uu.prototype,"type",void 0),uu=n([b("esri.layers.support.Domain")],uu);const nf=uu;var ig;let cu=ig=class extends nf{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some(s=>(String(s.code)===r&&(t=s.name),!!t))}return t}clone(){return new ig({codedValues:E(this.codedValues),name:this.name})}};n([c({type:[mk],json:{write:!0}})],cu.prototype,"codedValues",void 0),n([le({codedValue:"coded-value"})],cu.prototype,"type",void 0),cu=ig=n([b("esri.layers.support.CodedValueDomain")],cu);const dM=cu;var og;let bd=og=class extends nf{constructor(e){super(e),this.type="inherited"}clone(){return new og}};n([le({inherited:"inherited"})],bd.prototype,"type",void 0),bd=og=n([b("esri.layers.support.InheritedDomain")],bd);const hM=bd;var ng;let il=ng=class extends nf{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new ng({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};n([c({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],il.prototype,"maxValue",void 0),n([c({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],il.prototype,"minValue",void 0),n([le({range:"range"})],il.prototype,"type",void 0),il=ng=n([b("esri.layers.support.RangeDomain")],il);const fM=il,yM={key:"type",base:nf,typeMap:{range:fM,"coded-value":dM,inherited:hM}};function jv(e){if(!e||!e.type)return null;switch(e.type){case"range":return fM.fromJSON(e);case"codedValue":return dM.fromJSON(e);case"inherited":return hM.fromJSON(e)}return null}var lg;let Fr=lg=class extends Kl{constructor(e){super(e),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new lg({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};n([c({types:yM,json:{read:{reader:jv},write:!0}})],Fr.prototype,"domain",void 0),n([c({type:Boolean,json:{write:!0}})],Fr.prototype,"editable",void 0),n([c({type:String,json:{write:!0}})],Fr.prototype,"editableExpression",void 0),n([c({type:String,json:{write:!0}})],Fr.prototype,"fieldName",void 0),n([c({type:String,json:{write:!0}})],Fr.prototype,"hint",void 0),n([c({types:yk,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Fr.prototype,"input",void 0),n([c({type:String,json:{write:!0}})],Fr.prototype,"requiredExpression",void 0),n([c({type:String,json:{read:!1,write:!0}})],Fr.prototype,"type",void 0),n([c({type:String,json:{write:!0}})],Fr.prototype,"valueExpression",void 0),Fr=lg=n([b("esri.form.elements.FieldElement")],Fr);const h2=Fr;var ag;let oi=ag=class extends Kl{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new ag({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:E(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};n([c({type:Number,json:{write:!0}})],oi.prototype,"displayCount",void 0),n([c({type:["list"],json:{write:!0}})],oi.prototype,"displayType",void 0),n([c({type:Boolean,json:{write:!0}})],oi.prototype,"editable",void 0),n([c({type:[b$],json:{write:!0}})],oi.prototype,"orderByFields",void 0),n([c({type:Number,json:{write:!0}})],oi.prototype,"relationshipId",void 0),n([c({type:["relationship"],json:{read:!1,write:!0}})],oi.prototype,"type",void 0),oi=ag=n([b("esri.form.elements.RelationshipElement")],oi);const f2=oi;function mM(e){return{typesWithGroup:{base:Kl,key:"type",typeMap:{attachment:c2,field:h2,group:e,relationship:f2}},typesWithoutGroup:{base:Kl,key:"type",typeMap:{attachment:c2,field:h2,relationship:f2}}}}function gM(e,t,r=!0){if(!e)return null;const s=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(i=>s[i.type]).map(i=>s[i.type].fromJSON(i))}function vM(e,t,r=!0){if(!e)return null;const s=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(i=>s[i.type]).map(i=>i.toJSON())}function bM(e,t,r=!0){return e?e.map(s=>Bs(r?t.typesWithGroup:t.typesWithoutGroup,s)):null}var ug;let Rs=ug=class extends Kl{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return bM(e,Yf,!1)}readElements(e,t){return gM(t.formElements,Yf,!1)}writeElements(e,t){t.formElements=vM(e,Yf,!1)}clone(){return new ug({description:this.description,elements:E(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};n([c({json:{write:!0}})],Rs.prototype,"elements",void 0),n([ht("elements")],Rs.prototype,"castElements",null),n([K("elements",["formElements"])],Rs.prototype,"readElements",null),n([Y("elements")],Rs.prototype,"writeElements",null),n([c({type:["collapsed","expanded"],json:{write:!0}})],Rs.prototype,"initialState",void 0),n([c({type:String,json:{read:!1,write:!0}})],Rs.prototype,"type",void 0),Rs=ug=n([b("esri.form.elements.GroupElement")],Rs);const Yf=mM(Rs),vk=Rs;var cg;const Xf=mM(vk);let Ts=cg=class extends F{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(e){return bM(e,Xf)}readElements(e,t){return gM(t.formElements,Xf)}writeElements(e,t){t.formElements=vM(e,Xf)}clone(){return new cg({description:this.description,expressionInfos:E(this.expressionInfos),elements:E(this.elements),title:this.title})}};n([c({type:String,json:{write:!0}})],Ts.prototype,"description",void 0),n([c({json:{write:!0}})],Ts.prototype,"elements",void 0),n([ht("elements")],Ts.prototype,"castElements",null),n([K("elements",["formElements"])],Ts.prototype,"readElements",null),n([Y("elements")],Ts.prototype,"writeElements",null),n([c({type:[nk],json:{write:!0}})],Ts.prototype,"expressionInfos",void 0),n([c({type:String,json:{write:!0}})],Ts.prototype,"title",void 0),Ts=cg=n([b("esri.form.FormTemplate")],Ts);const bk=Ts;var pu;const fh=Lt()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),wM=fh.jsonValues.slice();L_(wM,"orthometric");const Fu=Lt()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Xr=pu=class extends F{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return fh.write(e,t,r)}readHeightModel(e,t,r){return fh.read(e)||(r&&r.messages&&r.messages.push(wk(e,{context:r})),null)}readHeightUnit(e,t,r){return Fu.read(e)||(r&&r.messages&&r.messages.push(y2(e,{context:r})),null)}readHeightUnitService(e,t,r){return W3(e)||Fu.read(e)||(r&&r.messages&&r.messages.push(y2(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new pu({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=uF(t);return new pu({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t=I({origin:"web-scene"},t),super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new pu;return t.read(e,{origin:"web-scene"}),t}};function y2(e,t){return new _r("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function wk(e,t){return new _r("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}n([c({type:fh.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:wM,default:"ellipsoidal"}}}})],Xr.prototype,"heightModel",void 0),n([Y("web-scene","heightModel")],Xr.prototype,"writeHeightModel",null),n([K(["web-scene","service"],"heightModel")],Xr.prototype,"readHeightModel",null),n([c({type:Fu.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Fu.jsonValues,write:Fu.write}}}})],Xr.prototype,"heightUnit",void 0),n([K("web-scene","heightUnit")],Xr.prototype,"readHeightUnit",null),n([K("service","heightUnit")],Xr.prototype,"readHeightUnitService",null),n([c({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Xr.prototype,"vertCRS",void 0),n([K("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Xr.prototype,"readVertCRS",null),Xr=pu=n([b("esri.geometry.HeightModelInfo")],Xr);const Sk=Xr;let _k=0;const m2=Z.getLogger("esri.layers.Layer");let It=class extends Gh.EventedMixin(Qh(tf)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new ft(-180,-90,180,90,Ae.WGS84),this.id=Date.now().toString(16)+"-layer-"+_k++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Ae.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e,r=await import("./arcgisLayers.c95bfd10.js");try{return await r.fromUrl(t)}catch(s){throw m2.error("#fromArcGISServerUrl({ url: '"+t.url+"'})","Failed to create layer from arcgis server url",s),s}}static async fromPortalItem(e){const t="portalItem"in e?e:{portalItem:e},r=await import("./portalLayers.ac7b458a.js");try{return await r.fromItem(t)}catch(s){const i=t&&t.portalItem,o=i&&i.id||"unset",l=i&&i.portal&&i.portal.url||Ue.portalUrl;throw m2.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+l+"', id: '"+o+"')",s),s}}initialize(){this.when().catch(e=>{var t,r;Js(e)||Z.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${(t=this.title)!=null?t:"no title"}', id: '${(r=this.id)!=null?r:"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){const e=this.url;return e?xr(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await at(e,{query:{f:"json"},responseType:"json"})).data;throw new C("layer:no-attribution-data","Layer does not have attribution data")}};n([c({type:String})],It.prototype,"attributionDataUrl",void 0),n([c({type:ft})],It.prototype,"fullExtent",void 0),n([c({readOnly:!0})],It.prototype,"hasAttributionData",null),n([c({type:String,clonable:!1})],It.prototype,"id",void 0),n([c({type:Boolean,nonNullable:!0})],It.prototype,"legendEnabled",void 0),n([c({type:["show","hide","hide-children"]})],It.prototype,"listMode",void 0),n([c({type:Number,range:{min:0,max:1},nonNullable:!0})],It.prototype,"opacity",void 0),n([c({clonable:!1})],It.prototype,"parent",void 0),n([c({readOnly:!0})],It.prototype,"parsedUrl",null),n([c({type:Boolean})],It.prototype,"popupEnabled",void 0),n([c({type:Boolean})],It.prototype,"attributionVisible",void 0),n([c({type:Ae})],It.prototype,"spatialReference",void 0),n([c({type:String})],It.prototype,"title",void 0),n([c({type:String,readOnly:!0,json:{read:!1}})],It.prototype,"type",void 0),n([c()],It.prototype,"url",void 0),n([c({type:Boolean,nonNullable:!0})],It.prototype,"visible",void 0),It=n([b("esri.layers.Layer")],It);const xk=It;function sc(e,t,r={}){return Av(e,t,r,_M)}function SM(e,t,r={}){return Av(e,t,r,xM)}function Av(e,t,r={},s){let i=null;const o=r.once?(l,u)=>{s(l)&&(Ah(i),t(l,u))}:(l,u)=>{s(l)&&t(l,u)};if(i=jj(e,o,r.sync,r.equals),r.initial){const l=e();o(l,l)}return i}function g2(e,t,r,s={}){let i=null,o=null,l=null;function u(){i&&o&&(o.remove(),s.onListenerRemove==null||s.onListenerRemove(i),i=null,o=null)}function p(h){s.once&&s.once&&Ah(l),r(h)}const d=sc(e,(h,f)=>{u(),Dh(h)&&(i=h,o=zh(h,t,p),s.onListenerAdd==null||s.onListenerAdd(h))},{sync:s.sync,initial:!0});return l=Nh(()=>{d.remove(),u()}),l}function v2(e,t){return $k(e,xM,t)}function $k(e,t,r){if(On(r))return Promise.reject(Gt());const s=e();if(t!=null&&t(s))return Promise.resolve(s);let i=null;function o(){i=Ah(i)}return new Promise((l,u)=>{i=kh([So(r,()=>{o(),u(Gt())}),Av(e,p=>{o(),l(p)},{sync:!1,once:!0},t!=null?t:_M)])})}function _M(e){return!0}function xM(e){return!!e}const Mk={sync:!0},Ik={initial:!0},mq={sync:!0,initial:!0};let wd=class extends st{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new da,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r={}){return this._installWatch(e,t,r,sc)}addWhen(e,t,r={}){return this._installWatch(e,t,r,SM)}addOnCollectionChange(e,t,{initial:r=!1}={}){const s=++this.handleId;return this.handles.add([g2(e,"after-changes",this._createSyncUpdatingCallback(),Mk),g2(e,"change",t,{onListenerAdd:r?i=>t({added:i.toArray(),removed:[]}):void 0})],s),{remove:()=>this.handles.remove(s)}}addPromise(e){if(X(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(this.pendingPromises.size!==0||this.handles.has(cp)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}_installWatch(e,t,r={},s){const i=++this.handleId;r.sync||this._installSyncUpdatingWatch(e,i);const o=s(e,t,r);return this.handles.add(o,i),{remove:()=>this.handles.remove(i)}}_installSyncUpdatingWatch(e,t){const r=this._createSyncUpdatingCallback(),s=sc(e,r,{sync:!0,equals:()=>!1});return this.handles.add(s,t),s}_createSyncUpdatingCallback(){return()=>{this.handles.remove(cp),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(O1(()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(cp))}),cp)}}};n([c({readOnly:!0})],wd.prototype,"updating",void 0),wd=n([b("esri.views.support.WatchUpdatingTracking")],wd);const cp=-42;var b2;(function(e){e[e.NONE=0]="NONE",e[e.SYNC=1]="SYNC",e[e.INIT=2]="INIT"})(b2||(b2={}));const $M=e=>{let t=class extends e{destroy(){var r,s;this.destroyed||((r=this._get("handles"))==null||r.destroy(),(s=this._get("updatingHandles"))==null||s.destroy())}get handles(){return this._get("handles")||new da}get updatingHandles(){return this._get("updatingHandles")||new wd}};return n([c({readOnly:!0})],t.prototype,"handles",null),n([c({readOnly:!0})],t.prototype,"updatingHandles",null),t=n([b("esri.core.HandleOwner")],t),t};let w2=class extends $M(st){};w2=n([b("esri.core.HandleOwner")],w2);var Yt;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(Yt||(Yt={}));let Ok=0;function MM(){return Ok++}function Ek(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function yh(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function IM(e,t,r,s){if(t.type===Yt.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==Yt.INVOKE&&t.type!==Yt.RESPONSE)return void e.postMessage(t);let i;Ek(r)?(i=S2(r.transferList),t.data=r.result):(i=S2(s),t.data=r),i?e.postMessage(t,i):e.postMessage(t)}function ic(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function S2(e){if(!e||!e.length)return null;if(R("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(r=>!Tk(r));return t.length?t:null}function Tk(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}const jk={statsWorker:()=>import("./statsWorker.d85727cb.js"),geometryEngineWorker:()=>import("./geometryEngineWorker.49a69fdc.js"),CSVSourceWorker:()=>import("./CSVSourceWorker.427a6599.js"),EdgeProcessingWorker:()=>import("./EdgeProcessingWorker.be2ce99c.js"),ElevationSamplerWorker:()=>import("./ElevationSamplerWorker.94c9e39c.js"),FeatureServiceSnappingSourceWorker:()=>import("./FeatureServiceSnappingSourceWorker.80a2b40d.js"),GeoJSONSourceWorker:()=>import("./GeoJSONSourceWorker.7f15fbe3.js"),LercWorker:()=>import("./LercWorker.d4ab0923.js"),MemorySourceWorker:()=>import("./MemorySourceWorker.6cdad44e.js"),PBFDecoderWorker:()=>import("./PBFDecoderWorker.4a15140e.js"),Pipeline:()=>import("./Pipeline.ada5bc85.js").then(function(e){return e.P}),PointCloudWorker:()=>import("./PointCloudWorker.58d3eab0.js"),RasterWorker:()=>import("./RasterWorker.05121f42.js"),SceneLayerWorker:()=>import("./SceneLayerWorker.abbf550f.js"),WFSSourceWorker:()=>import("./WFSSourceWorker.5e81d152.js"),WorkerTileHandler:()=>import("./WorkerTileHandler.65beb2f5.js")},{CLOSE:_2,ABORT:x2,INVOKE:$2,RESPONSE:Oa,OPEN_PORT:M2,ON:Ak}=Yt;class Ck{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===Yt.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class ar{constructor(t,r){this._port=t,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new Ck(s=>this._onInvokeMessage(s)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(t){const r=new MessageChannel;let s;s=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const i=new ar(r.port1,{channel:r,client:s});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=i),ar.clients.set(i,s),r.port2}static loadWorker(t){const r=jk[t];return r?r():Promise.resolve(null)}close(){this._post({type:_2}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,s){const i=s&&s.signal,o=s&&s.transferList;if(!this._port)return Promise.reject(new C("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const l=MM();return new Promise((u,p)=>{const d=I1(i,()=>{var f;const y=this._outJobs.get(l);y&&(this._outJobs.delete(l),(f=y.abortHandle)==null||f.remove(),this._post({type:x2,jobId:l}),p(Gt()))}),h={resolve:u,reject:p,abortHandle:d,debugInfo:t};this._outJobs.set(l,h),this._post({type:$2,jobId:l,methodName:t,abortable:i!=null},r,o)})}on(t,r){const s=new MessageChannel;function i(o){r(o.data)}return this._port.postMessage({type:Yt.ON,eventType:t,port:s.port2},[s.port2]),s.port1.addEventListener("message",i),s.port1.start(),{remove(){s.port1.postMessage({type:Yt.CLOSE}),s.port1.close(),s.port1.removeEventListener("message",i)}}}openPort(){const t=new MessageChannel;return this._post({type:M2,port:t.port2}),t.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{var r;(r=t.abortHandle)==null||r.remove(),t.reject(Gt(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(t){T(this._schedule)?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const r=ic(t);if(r)switch(r.type){case Oa:this._onResponseMessage(r);break;case $2:this._invokeQueue.push(r);break;case x2:this._onAbortMessage(r);break;case _2:this._onCloseMessage();break;case M2:this._onOpenPortMessage(r);break;case Ak:this._onOnMessage(r)}}_onAbortMessage(t){const r=this._inJobs,s=t.jobId,i=r.get(s);this._invokeQueue.push(t),i&&(i.controller&&i.controller.abort(),r.delete(s))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&ar.clients.get(this)===t&&t.destroy(),ar.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:s,data:i,abortable:o}=t,l=o?new AbortController:null,u=this._inJobs;let p,d=this._client,h=d[r];try{if(!h&&r&&r.indexOf(".")!==-1){const f=r.split(".");for(let y=0;y<f.length-1;y++)d=d[f[y]],h=d[f[y+1]]}if(typeof h!="function")throw new TypeError(`${r} is not a function`);p=h.call(d,i,{client:this,signal:l?l.signal:null})}catch(f){return void this._post({type:Oa,jobId:s,error:yh(f)})}dc(p)?(u.set(s,{controller:l,promise:p}),p.then(f=>{u.has(s)&&(u.delete(s),this._post({type:Oa,jobId:s},f))},f=>{u.has(s)&&(u.delete(s),Js(f)||this._post({type:Oa,jobId:s,error:yh(f||{message:`Error encountered at method ${r}`})}))})):this._post({type:Oa,jobId:s},p)}_onOpenPortMessage(t){new ar(t.port,{client:this._client})}_onOnMessage(t){const{port:r}=t,s=this._client.on(t.eventType,o=>{r.postMessage(o)}),i=zh(t.port,"message",o=>{ic(o).type===Yt.CLOSE&&(i.remove(),s.remove(),r.close())})}_onResponseMessage(t){var r;const{jobId:s,error:i,data:o}=t,l=this._outJobs;if(!l.has(s))return;const u=l.get(s);l.delete(s),(r=u.abortHandle)==null||r.remove(),i?u.reject(C.fromJSON(JSON.parse(i))):u.resolve(o)}_post(t,r,s){return IM(this._port,t,r,s)}}ar.kernelInfo={revision:y3,version:m3,buildDate:f3},ar.clients=new Map;const Rk=Z.getLogger("esri.core.workers.Connection");class Fk{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,r){return new Promise((s,i)=>{let o=!0;const l=u=>{qs(r.signal),o&&(o=!1,u())};this._clients.length=t.length,this._clientPromises.length=t.length;for(let u=0;u<t.length;++u){const p=t[u];dc(p)?this._clientPromises[u]=p.then(d=>(this._clients[u]=new ar(d,r),l(s),this._clients[u]),()=>(l(i),null)):(this._clients[u]=new ar(p,r),this._clientPromises[u]=Promise.resolve(this._clients[u]),l(s))}})}broadcast(t,r,s){const i=new Array(this._clientPromises.length);for(let o=0;o<this._clientPromises.length;++o){const l=this._clientPromises[o];i[o]=l.then(u=>u.invoke(t,r,s))}return i}close(){for(const t of this._clientPromises)t.then(r=>r.close());this._clients.length=0,this._clientPromises.length=0}getAvailableClient(){let t;for(let r=0;r<this._clients.length;++r){const s=this._clients[r];if(s){if(!s.isBusy())return Promise.resolve(s)}else t=t||[],t.push(this._clientPromises[r])}return t?Promise.race(t):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}invoke(t,r,s){let i=null;return Array.isArray(s)?(Rk.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),i={transferList:s}):i=s,this.closed?Promise.reject(new Error("Connection closed")):this.getAvailableClient().then(o=>o.invoke(t,r,i))}on(t,r){return Promise.all(this._clientPromises).then(()=>kh(this._clients.map(s=>s.on(t,r))))}openPorts(){return new Promise(t=>{const r=new Array(this._clientPromises.length);let s=r.length;for(let i=0;i<this._clientPromises.length;++i)this._clientPromises[i].then(o=>{r[i]=o.openPort(),--s==0&&t(r)})})}get test(){return{numClients:this._clients.length}}}const kk=Z.getLogger("esri.assets");function Ic(e){if(!Ue.assetsPath)throw kk.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new C("assets:path-not-set","config.assetsPath is not set");return Hl(Ue.assetsPath,e)}const OM=Z.getLogger("esri.intl");function EM(e,t,r={}){const{format:s={}}=r;return Fh(e,i=>Nk(i,t,s))}function Nk(e,t,r){let s,i;const o=e.indexOf(":");if(o===-1?s=e.trim():(s=e.slice(0,o).trim(),i=e.slice(o+1).trim()),!s)return"";const l=Rh(s,t);if(l==null)return"";const u=r[i]||r[s];return u?Pk(l,u):i?Lk(l,i):Cv(l)}function Pk(e,t){switch(t.type){case"date":return Wl(e,t.intlOptions);case"number":return Zu(e,t.intlOptions);default:return OM.warn("missing format descriptor for key {key}"),Cv(e)}}function Lk(e,t){switch(t.toLowerCase()){case"dateformat":return Wl(e);case"numberformat":return Zu(e);default:return OM.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?Wl(e):/^numberformat/i.test(t)?Zu(e):Cv(e)}}function Cv(e){switch(typeof e){case"string":return e;case"number":return Zu(e);case"boolean":return""+e;default:return e instanceof Date?Wl(e):""}}const I2=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,Dk={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function O2(e){var t;return(t=Dk[e])!=null&&t}const du=[],kl=new Map;function E2(e){for(const t of kl.keys())jM(e.pattern,t)&&kl.delete(t)}function zk(e){return du.includes(e)||(E2(e),du.unshift(e)),{remove(){const t=du.indexOf(e);t>-1&&(du.splice(t,1),E2(e))}}}async function TM(e){const t=Vs();kl.has(e)||kl.set(e,Uk(e,t));const r=kl.get(e);return await qk.add(r),r}function Vk(e){if(!I2.test(e))return null;const[,t,r]=I2.exec(e),s=t+(r?"-"+r.toUpperCase():"");return O2(s)?s:O2(t)?t:null}async function Uk(e,t){const r=[];for(const s of du)if(jM(s.pattern,e))try{return await s.fetchMessageBundle(e,t)}catch(i){r.push(i)}throw r.length?new C("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new C("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function jM(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}W1(()=>{kl.clear()});const qk=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=zl())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function Bk(e,t,r,s){const i=t.exec(r);if(!i)throw new C("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const o=i[1]?`${i[1]}/`:"",l=i[2],u=Vk(s),p=`${o}${l}.json`,d=u?`${o}${l}_${u}.json`:p;let h;try{h=await T2(e(d))}catch(f){if(d===p)throw new C("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:f});try{h=await T2(e(p))}catch(y){throw new C("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:y})}}return h}async function T2(e){if(T(j2.fetchBundleAsset))return j2.fetchBundleAsset(e);const t=await at(e,{responseType:"text"});return JSON.parse(t.data)}class Gk{constructor({base:t="",pattern:r,location:s=new URL(window.location.href)}){let i;i=typeof s=="string"?o=>new URL(o,new URL(s,window.location.href)).href:s instanceof URL?o=>new URL(o,s).href:s,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=i,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,r){return Bk(this.getAssetUrl,this.matcher,t,r)}}function Jk(e){return new Gk(e)}const j2={};zk(Jk({pattern:"esri/",location:Ic}));const A2={};function Wk(e,t){for(const r of e)if(r.name===t.name)return;e.push(t)}function Hk(e){var t;const r={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:I({},e.has),map:I({},e.map),packages:e.packages&&e.packages.concat()||[],paths:I({},e.paths)};return e.hasOwnProperty("async")||(r.async=!0),e.hasOwnProperty("isDebug")||(r.isDebug=!1),e.baseUrl||(r.baseUrl=A2.baseUrl),(t=A2.packages)==null||t.forEach(s=>{Wk(r.packages,s)}),r}class Kk{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...s)=>t[r](...s)})}}class Sd{constructor(){this._dispatcher=new Kk,this._workerPostMessage({type:Yt.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){Gd(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,s){this._dispatcher.addEventListener(t,r,s)}removeEventListener(t,r,s){this._dispatcher.removeEventListener(t,r,s)}_workerPostMessage(t){Gd(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const r=ic(t);if(r&&r.type===Yt.OPEN){const{modulePath:s,jobId:i}=r;let o=await ar.loadWorker(s);o||(o=await import(s));const l=ar.connect(o);this._workerPostMessage({type:Yt.OPENED,jobId:i,data:l})}}}const pg=Z.getLogger("esri.core.workers"),{HANDSHAKE:Qk}=Yt,Zk='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let pp,dp;const C2="Failed to create Worker. Fallback to execute module in main thread";async function Yk(){if(!R("esri-workers")||(R("mozilla"),0))return R2(new Sd);if(!pp&&!dp)try{const t=Zk.replace('"{CONFIGURATION}"',`'${Xk()}'`);pp=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){dp=t||{}}let e;if(pp)try{e=new Worker(pp,{name:"esri-worker-"+e9++})}catch{pg.warn(C2,dp),e=new Sd}else pg.warn(C2,dp),e=new Sd;return R2(e)}async function R2(e){return new Promise(t=>{function r(i){const o=ic(i);o&&o.type===Qk&&(e.removeEventListener("message",r),e.removeEventListener("error",s),t(e))}function s(i){i.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",s),pg.warn("Failed to create Worker. Fallback to execute module in main thread",i),(e=new Sd).addEventListener("message",r),e.addEventListener("error",s)}e.addEventListener("message",r),e.addEventListener("error",s)})}function Xk(){let e;if(Ue.default!=null){const i=I({},Ue);delete i.default,e=JSON.parse(JSON.stringify(i))}else e=JSON.parse(JSON.stringify(Ue));e.assetsPath=cs(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=Vs(),e.has={"esri-csp-restrictions":R("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":R("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":R("esri-2d-query-centroid-enabled"),"featurelayer-pbf":R("featurelayer-pbf"),"featurelayer-simplify-thresholds":R("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":R("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":R("featurelayer-simplify-mobile-factor"),"esri-atomics":R("esri-atomics"),"esri-shared-array-buffer":R("esri-shared-array-buffer"),"esri-tiles-debug":R("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":R("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":R("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=cs(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=cs(e.workers.workerPath):e.workers.workerPath=cs(Ic("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Ue.workers.loaderConfig,r=Hk({baseUrl:t==null?void 0:t.baseUrl,locale:Vs(),has:I({"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1},t==null?void 0:t.has),map:I({},t==null?void 0:t.map),paths:I({},t==null?void 0:t.paths),packages:(t==null?void 0:t.packages)||[]}),s={version:m3,buildDate:f3,revision:y3};return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:s})}let e9=0;const t9=Z.getLogger("esri.core.workers"),{ABORT:F2,INVOKE:r9,OPEN:s9,OPENED:i9,RESPONSE:Ea}=Yt;class Rv{constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",s=>{s.preventDefault(),t9.error(s)})}static async create(t){const r=await Yk();return new Rv(r,t)}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:s}=r,i=MM();return new Promise((o,l)=>{const u={resolve:o,reject:l,abortHandle:I1(s,()=>{this._outJobs.delete(i),this._post({type:F2,jobId:i})})};this._outJobs.set(i,u),this._post({type:s9,jobId:i,modulePath:t})})}_onMessage(t){const r=ic(t);if(r)switch(r.type){case i9:this._onOpenedMessage(r);break;case Ea:this._onResponseMessage(r);break;case F2:this._onAbortMessage(r);break;case r9:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,s=t.jobId,i=r.get(s);i&&(i.controller&&i.controller.abort(),r.delete(s))}_onInvokeMessage(t){const{methodName:r,jobId:s,data:i,abortable:o}=t,l=o?new AbortController:null,u=this._inJobs,p=YR[r];let d;try{if(typeof p!="function")throw new TypeError(`${r} is not a function`);d=p.call(null,i,{signal:l?l.signal:null})}catch(h){return void this._post({type:Ea,jobId:s,error:yh(h)})}dc(d)?(u.set(s,{controller:l,promise:d}),d.then(h=>{u.has(s)&&(u.delete(s),this._post({type:Ea,jobId:s},h))},h=>{u.has(s)&&(u.delete(s),h||(h={message:"Error encountered at method"+r}),Js(h)||this._post({type:Ea,jobId:s,error:yh(h||{message:`Error encountered at method ${r}`})}))})):this._post({type:Ea,jobId:s},d)}_onOpenedMessage(t){var r;const{jobId:s,data:i}=t,o=this._outJobs.get(s);o&&(this._outJobs.delete(s),(r=o.abortHandle)==null||r.remove(),o.resolve(i))}_onResponseMessage(t){var r;const{jobId:s,error:i,data:o}=t,l=this._outJobs.get(s);l&&(this._outJobs.delete(s),(r=l.abortHandle)==null||r.remove(),i?l.reject(C.fromJSON(JSON.parse(i))):l.resolve(o))}_post(t,r,s){return IM(this.worker,t,r,s)}}let vn=R("esri-workers-debug")?1:R("host-browser")?navigator.hardwareConcurrency-1:0;vn||(vn=R("safari")&&R("mac")||R("trident")?7:2);let k2=0;const _d=[];async function hp(e,t){const r=new Fk;return await r.open(e,t),r}async function o9(e,t={}){if(typeof e!="string")throw new C("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(R("host-webworker")&&!R("esri-workers")&&(r="local"),r==="local"){let s=await ar.loadWorker(e);s||(s=await import(e)),qs(t.signal);const i=t.client||s;return hp([ar.connect(s)],pe(I({},t),{client:i}))}if(await n9(),qs(t.signal),r==="dedicated"){const s=k2++%vn;return hp([await _d[s].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const s=Math.min(t.maxNumWorkers,vn);if(s<vn){const i=new Array(s);for(let o=0;o<s;++o){const l=k2++%vn;i[o]=_d[l].open(e,t)}return hp(i,t)}}return hp(_d.map(s=>s.open(e,t)),t)}let fp=null;async function n9(){if(fp)return fp;new AbortController;const e=[];for(let t=0;t<vn;t++){const r=Rv.create(t).then(s=>(_d[t]=s,s));e.push(r)}return fp=Promise.all(e),fp}function N2(e,t,r){if(e.hasM==null||e.hasZ)for(const s of t)for(const i of s)i.length>2&&(i[2]*=r)}function l9(e,t,r){if(!e&&!t||!r)return;const s=ch(r);P2(e,r,s),P2(t,r,s)}function P2(e,t,r){if(e)for(const s of e)a9(s.geometry,t,r)}function a9(e,t,r){if(X(e)||!e.spatialReference||fc(e.spatialReference,t))return;const s=ch(e.spatialReference)/r;if(s!==1){if("x"in e)e.z!=null&&(e.z*=s);else if("rings"in e)N2(e,e.rings,s);else if("paths"in e)N2(e,e.paths,s);else if("points"in e&&(e.hasM==null||e.hasZ))for(const i of e.points)i.length>2&&(i[2]*=s)}}function u9(e,t,r){if(X(t)||X(r)||r.vcsWkid||fc(t,r))return null;const s=ch(t)/ch(r);if(s===1)return null;switch(e){case"point":case"esriGeometryPoint":return i=>c9(i,s);case"polyline":case"esriGeometryPolyline":return i=>d9(i,s);case"polygon":case"esriGeometryPolygon":return i=>p9(i,s);case"multipoint":case"esriGeometryMultipoint":return i=>h9(i,s);case"extent":case"esriGeometryExtent":return i=>f9(i,s);default:return null}}function c9(e,t){e&&e.z!=null&&(e.z*=t)}function p9(e,t){if(e)for(const r of e.rings)for(const s of r)s.length>2&&(s[2]*=t)}function d9(e,t){if(e)for(const r of e.paths)for(const s of r)s.length>2&&(s[2]*=t)}function h9(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function f9(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}function L2(e,t,r){if(!r||!r.features||!r.hasZ)return;const s=u9(r.geometryType,t,e.outSpatialReference);if(!X(s))for(const i of r.features)s(i.geometry)}const y9=new ye({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var dg;const m9=new ye({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Qt=dg=class extends F{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let r;try{r=JSON.parse(t)}catch{}return r?r.value:null}readValueType(e,{description:t}){let r;try{r=JSON.parse(t)}catch{}return r?m9.fromJSON(r.fieldValueType):null}clone(){return new dg({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};n([c({type:String,json:{write:!0}})],Qt.prototype,"alias",void 0),n([c({type:[String,Number],json:{write:{allowNull:!0}}})],Qt.prototype,"defaultValue",void 0),n([c()],Qt.prototype,"description",void 0),n([K("description")],Qt.prototype,"readDescription",null),n([c({types:yM,json:{read:{reader:jv},write:!0}})],Qt.prototype,"domain",void 0),n([c({type:Boolean,json:{write:!0}})],Qt.prototype,"editable",void 0),n([c({type:_t,json:{write:!0}})],Qt.prototype,"length",void 0),n([c({type:String,json:{write:!0}})],Qt.prototype,"name",void 0),n([c({type:Boolean,json:{write:!0}})],Qt.prototype,"nullable",void 0),n([le(y9)],Qt.prototype,"type",void 0),n([c()],Qt.prototype,"valueType",void 0),n([K("valueType",["description"])],Qt.prototype,"readValueType",null),Qt=dg=n([b("esri.layers.support.Field")],Qt);const Fv=Qt;var hg;const fg=new ye({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let At=hg=class extends F{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const r=Ae.fromJSON(t.spatialReference),s=[];for(let i=0;i<e.length;i++){const o=e[i],l=xo.fromJSON(o),u=o.geometry&&o.geometry.spatialReference;T(l.geometry)&&!u&&(l.geometry.spatialReference=r);const p=o.aggregateGeometries,d=l.aggregateGeometries;if(p&&T(d))for(const h in d){const f=d[h],y=p[h],m=y==null?void 0:y.spatialReference;T(f)&&!m&&(f.spatialReference=r)}s.push(l)}return s}writeGeometryType(e,t,r,s){if(e)return void fg.write(e,t,r,s);const{features:i}=this;if(i){for(const o of i)if(o&&T(o.geometry))return void fg.write(o.geometry.type,t,r,s)}}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,s=Dr(e);return!r&&t.spatialReference&&(s.spatialReference=Ae.fromJSON(t.spatialReference)),s}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r){for(const s of r)if(s&&T(s.geometry)&&s.geometry.spatialReference)return void(t.spatialReference=s.geometry.spatialReference.toJSON())}}clone(){return new hg(this.cloneProperties())}cloneProperties(){return E({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const s=t.features[r];if(s.geometry){const i=e&&e[r];s.geometry=i&&i.toJSON()||s.geometry}}return t}quantize(e){const{scale:[t,r],translate:[s,i]}=e,o=d=>Math.round((d-s)/t),l=d=>Math.round((i-d)/r),u=this.features,p=this._getQuantizationFunction(this.geometryType,o,l);for(let d=0,h=u.length;d<h;d++)p(u[d].geometry)||(u.splice(d,1),d--,h--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[s,i],scale:[o,l]}=r,u=h=>h*o+s,p=h=>i-h*l,d=this._getHydrationFunction(e,u,p);for(const{geometry:h}of t)T(h)&&d(h);return this.transform=null,this}_quantizePoints(e,t,r){let s,i;const o=[];for(let l=0,u=e.length;l<u;l++){const p=e[l];if(l>0){const d=t(p[0]),h=r(p[1]);d===s&&h===i||(o.push([d-s,h-i]),s=d,i=h)}else s=t(p[0]),i=r(p[1]),o.push([s,i])}return o.length>0?o:null}_getQuantizationFunction(e,t,r){return e==="point"?s=>(s.x=t(s.x),s.y=r(s.y),s):e==="polyline"||e==="polygon"?s=>{const i=Mu(s)?s.rings:s.paths,o=[];for(let l=0,u=i.length;l<u;l++){const p=i[l],d=this._quantizePoints(p,t,r);d&&o.push(d)}return o.length>0?(Mu(s)?s.rings=o:s.paths=o,s):null}:e==="multipoint"?s=>{const i=this._quantizePoints(s.points,t,r);return i.length>0?(s.points=i,s):null}:e==="extent"?s=>s:null}_getHydrationFunction(e,t,r){return e==="point"?s=>{s.x=t(s.x),s.y=r(s.y)}:e==="polyline"||e==="polygon"?s=>{const i=Mu(s)?s.rings:s.paths;let o,l;for(let u=0,p=i.length;u<p;u++){const d=i[u];for(let h=0,f=d.length;h<f;h++){const y=d[h];h>0?(o+=y[0],l+=y[1]):(o=y[0],l=y[1]),y[0]=t(o),y[1]=r(l)}}}:e==="extent"?s=>{s.xmin=t(s.xmin),s.ymin=r(s.ymin),s.xmax=t(s.xmax),s.ymax=r(s.ymax)}:e==="multipoint"?s=>{const i=s.points;let o,l;for(let u=0,p=i.length;u<p;u++){const d=i[u];u>0?(o+=d[0],l+=d[1]):(o=d[0],l=d[1]),d[0]=t(o),d[1]=r(l)}}:void 0}};n([c({type:String,json:{write:!0}})],At.prototype,"displayFieldName",void 0),n([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],At.prototype,"exceededTransferLimit",void 0),n([c({type:[xo],json:{write:!0}})],At.prototype,"features",void 0),n([K("features")],At.prototype,"readFeatures",null),n([c({type:[Fv],json:{write:!0}})],At.prototype,"fields",void 0),n([c({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:fg.read}}})],At.prototype,"geometryType",void 0),n([Y("geometryType")],At.prototype,"writeGeometryType",null),n([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],At.prototype,"hasM",void 0),n([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],At.prototype,"hasZ",void 0),n([c({types:ta,json:{write:!0}})],At.prototype,"queryGeometry",void 0),n([K("queryGeometry")],At.prototype,"readQueryGeometry",null),n([c({type:Ae,json:{write:!0}})],At.prototype,"spatialReference",void 0),n([Y("spatialReference")],At.prototype,"writeSpatialReference",null),n([c({json:{write:!0}})],At.prototype,"transform",void 0),At=hg=n([b("esri.rest.support.FeatureSet")],At),At.prototype.toJSON.isDefaultToJSON=!0;const kv=At;var gq=Object.freeze(Object.defineProperty({__proto__:null,default:kv},Symbol.toStringTag,{value:"Module"}));let g9=0;const ey=Z.getLogger("esri.layers.graphics.sources.MemorySource");let Zi=class extends tf.LoadableMixin(fv($M(et))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=T(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get workerGeometryType(){var e;const t=(e=this.layer)==null?void 0:e.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);L2(e,this.layer.spatialReference,r);const s=kv.fromJSON(r);if(!this._requiresClientGraphicMapping())return s;const i=this.layer.objectIdField;for(const o of s.features){const l=o.attributes[i],u=this._idToClientGraphic.get(l);u&&(o.geometry=u.geometry)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new C("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return L2(e,this.layer.spatialReference,r),r}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(r=>({count:r.count,extent:ft.fromJSON(r.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}async _applyEdits(e){if(!this._connection)throw new C("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let r=null;const s=[],i=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=d=>"objectId"in d&&d.objectId!=null?d.objectId:"attributes"in d&&d.attributes[t]!=null?d.attributes[t]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const d of e.deleteFeatures){const h=o(d);h!=null&&s.push(h)}const l=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const d of e.updateFeatures)if(i.push(this._serializeFeature(d)),l){const h=o(d);h!=null&&l.set(h,d)}}l9(r?r.features:null,i,this.layer.spatialReference);const{fullExtent:u,featureEditResults:p}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:i,deletes:s});return this.fullExtent=u,r&&r.finish(p.uidToObjectId),this._updateClientGraphicIds(l,p),this._createEditsResult(p)}async _prepareClientMapping(e,t){if(this.layerOrSourceGeometryType!=="mesh"||X(e))return;const r=[];for(const{geometry:s}of e)!T(s)||s.type!=="mesh"||s.hasExtent||s.loaded||r.push(s.load({signal:t}));r.length&&await Promise.all(r)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const r of t.updateResults){if(!r.success)continue;const s=e.get(r.objectId);s!=null&&this._addIdToClientGraphic(s)}for(const r of t.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new C("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,r=new Array(e.length);let s=null;for(let o=0;o<e.length;o++){const l=e[o],u=this._serializeFeature(l);!s&&T(l.geometry)&&(s=l.geometry.type),r[o]=u,t.set(`${u.uid}`,l)}const i=this;return{features:r,inferredGeometryType:s,finish(o){const l=i.sourceJSON.objectIdField;for(const u in o){const p=o[u],d=t.get(u);d&&(d.attributes||(d.attributes={}),p===-1?delete d.attributes[l]:d.attributes[l]=p,i._addIdToClientGraphic(d))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[t];r!=null&&this._idToClientGraphic.set(r,e)}get layerOrSourceGeometryType(){var e,t,r;return(e=(t=this.layer)==null?void 0:t.geometryType)!=null?e:(r=this.sourceJSON)==null?void 0:r.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:t}=e,r=this._geometryForSerialization(e),s=(g9++).toString();return r?{uid:s,geometry:r.toJSON(),attributes:t}:{uid:s,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return X(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?ea.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await o9("MemorySourceWorker",{strategy:R("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:r,objectIdField:s,hasM:i,hasZ:o,timeInfo:l}=this.layer,u=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const p=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",y=>{ey.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),y.preventDefault()}));const d={features:p.features,fields:t&&t.map(y=>y.toJSON()),geometryType:gw.toJSON(this.workerGeometryType),hasM:this.layerOrSourceGeometryType!=="mesh"&&i,hasZ:this.layerOrSourceGeometryType==="mesh"||o,objectIdField:s,spatialReference:u?null:r&&r.toJSON(),timeInfo:l?l.toJSON():null},h=await this._connection.invoke("load",d,{signal:e});for(const y of h.warnings)ey.warn(y.message,{layer:this.layer,warning:y});h.featureErrors.length&&ey.warn(`Encountered ${h.featureErrors.length} validation errors while loading features`,h.featureErrors);const f=h.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(p.inferredGeometryType)&&(f.geometryType=gw.toJSON(p.inferredGeometryType)),this.sourceJSON=f,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),p.finish(h.assignedObjectIds)}};n([Ox({Type:xo,ensureType:Je(xo)})],Zi.prototype,"itemType",void 0),n([c()],Zi.prototype,"type",void 0),n([c({constructOnly:!0})],Zi.prototype,"layer",void 0),n([c({readOnly:!0})],Zi.prototype,"workerGeometryType",null),n([c()],Zi.prototype,"sourceJSON",void 0),Zi=n([b("esri.layers.graphics.sources.MemorySource")],Zi);const D2=Zi;function v9(e){return"portalItem"in e}const b9=e=>{let t=class extends e{get apiKey(){var r;return this._isOverridden("apiKey")?this._get("apiKey"):v9(this)?(r=this.portalItem)==null?void 0:r.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return n([c({type:String})],t.prototype,"apiKey",null),t=n([b("esri.layers.mixins.APIKeyMixin")],t),t},AM={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},CM=Object.values(AM),RM=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${CM.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),w9=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${CM.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),S9=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function vq(e){return!!RM.test(e)}function lf(e){const t=xr(e),r=t.path.match(RM)||t.path.match(w9);if(!r)return null;const[,s,i,o,l]=r,u=i.indexOf("/");return{title:Nv(u!==-1?i.slice(u+1):i),serverType:AM[o.toLowerCase()],sublayer:l!=null&&l!==""?parseInt(l,10):null,url:{path:s}}}function _9(e){const t=xr(e).path.match(S9);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function Nv(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function x9(e,t){const r=[];if(e){const s=lf(e);T(s)&&s.title&&r.push(s.title)}if(t){const s=Nv(t);r.push(s)}if(r.length===2){if(r[0].toLowerCase().indexOf(r[1].toLowerCase())!==-1)return r[0];if(r[1].toLowerCase().indexOf(r[0].toLowerCase())!==-1)return r[1]}return r.join(" - ")}function FM(e){if(!e)return!1;const t=".arcgis.com/",r="//services",s="//tiles",i="//features",o=(e=e.toLowerCase()).indexOf(t)!==-1,l=e.indexOf(r)!==-1||e.indexOf(s)!==-1||e.indexOf(i)!==-1;return o&&l}function $9(e,t){return e&&p3(d3(e,t))}function M9(e){let{url:t}=e;if(!t)return{url:t};t=d3(t,e.logger);const r=xr(t),s=lf(r.path);let i;if(T(s))s.sublayer!=null&&e.layer.layerId==null&&(i=s.sublayer),t=s.url.path;else if(e.nonStandardUrlAllowed){const o=_9(r.path);T(o)&&(t=o.serviceUrl,i=o.sublayerId)}return{url:p3(t),layerId:i}}function I9(e,t,r,s,i){Fn(t,s,"url",i),s.url&&e.layerId!=null&&(s.url=Hl(s.url,r,e.layerId.toString()))}function bq(e){if(!e)return!1;const t=e.toLowerCase(),r=t.indexOf("/services/")!==-1,s=t.indexOf("/mapserver/wmsserver")!==-1,i=t.indexOf("/imageserver/wmsserver")!==-1,o=t.indexOf("/wmsserver")!==-1;return r&&(s||i||o)}const O9=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=lf(this.url);if(T(r)&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",$9(r,Z.getLogger(this.declaredClass)))}};return n([c()],t.prototype,"title",null),n([c({type:String})],t.prototype,"url",null),t=n([b("esri.layers.mixins.ArcGISService")],t),t};function af(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function E9(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function T9(e,t,r,s,i,o,l,u,p,d,h,f,y,m,v,_){const S=new Float32Array(16);return S[0]=e,S[1]=t,S[2]=r,S[3]=s,S[4]=i,S[5]=o,S[6]=l,S[7]=u,S[8]=p,S[9]=d,S[10]=h,S[11]=f,S[12]=y,S[13]=m,S[14]=v,S[15]=_,S}function j9(e,t){return new Float32Array(e,t,16)}const A9=af();Object.freeze({__proto__:null,create:af,clone:E9,fromValues:T9,createView:j9,IDENTITY:A9});function C9(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Eo(e,t,r,s,i,o,l,u,p,d,h,f,y,m,v,_,S){return e[0]=t,e[1]=r,e[2]=s,e[3]=i,e[4]=o,e[5]=l,e[6]=u,e[7]=p,e[8]=d,e[9]=h,e[10]=f,e[11]=y,e[12]=m,e[13]=v,e[14]=_,e[15]=S,e}function kM(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function To(e,t){if(e===t){const r=t[1],s=t[2],i=t[3],o=t[6],l=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=s,e[9]=o,e[11]=t[14],e[12]=i,e[13]=l,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function R9(e,t){const r=t[0],s=t[1],i=t[2],o=t[3],l=t[4],u=t[5],p=t[6],d=t[7],h=t[8],f=t[9],y=t[10],m=t[11],v=t[12],_=t[13],S=t[14],M=t[15],k=r*u-s*l,D=r*p-i*l,P=r*d-o*l,N=s*p-i*u,J=s*d-o*u,Se=i*d-o*p,re=h*_-f*v,de=h*S-y*v,ie=h*M-m*v,ge=f*S-y*_,Ie=f*M-m*_,Re=y*M-m*S;let ce=k*Re-D*Ie+P*ge+N*ie-J*de+Se*re;return ce?(ce=1/ce,e[0]=(u*Re-p*Ie+d*ge)*ce,e[1]=(i*Ie-s*Re-o*ge)*ce,e[2]=(_*Se-S*J+M*N)*ce,e[3]=(y*J-f*Se-m*N)*ce,e[4]=(p*ie-l*Re-d*de)*ce,e[5]=(r*Re-i*ie+o*de)*ce,e[6]=(S*P-v*Se-M*D)*ce,e[7]=(h*Se-y*P+m*D)*ce,e[8]=(l*Ie-u*ie+d*re)*ce,e[9]=(s*ie-r*Ie-o*re)*ce,e[10]=(v*J-_*P+M*k)*ce,e[11]=(f*P-h*J-m*k)*ce,e[12]=(u*de-l*ge-p*re)*ce,e[13]=(r*ge-s*de+i*re)*ce,e[14]=(_*D-v*N-S*k)*ce,e[15]=(h*N-f*D+y*k)*ce,e):null}function F9(e,t){const r=t[0],s=t[1],i=t[2],o=t[3],l=t[4],u=t[5],p=t[6],d=t[7],h=t[8],f=t[9],y=t[10],m=t[11],v=t[12],_=t[13],S=t[14],M=t[15];return e[0]=u*(y*M-m*S)-f*(p*M-d*S)+_*(p*m-d*y),e[1]=-(s*(y*M-m*S)-f*(i*M-o*S)+_*(i*m-o*y)),e[2]=s*(p*M-d*S)-u*(i*M-o*S)+_*(i*d-o*p),e[3]=-(s*(p*m-d*y)-u*(i*m-o*y)+f*(i*d-o*p)),e[4]=-(l*(y*M-m*S)-h*(p*M-d*S)+v*(p*m-d*y)),e[5]=r*(y*M-m*S)-h*(i*M-o*S)+v*(i*m-o*y),e[6]=-(r*(p*M-d*S)-l*(i*M-o*S)+v*(i*d-o*p)),e[7]=r*(p*m-d*y)-l*(i*m-o*y)+h*(i*d-o*p),e[8]=l*(f*M-m*_)-h*(u*M-d*_)+v*(u*m-d*f),e[9]=-(r*(f*M-m*_)-h*(s*M-o*_)+v*(s*m-o*f)),e[10]=r*(u*M-d*_)-l*(s*M-o*_)+v*(s*d-o*u),e[11]=-(r*(u*m-d*f)-l*(s*m-o*f)+h*(s*d-o*u)),e[12]=-(l*(f*S-y*_)-h*(u*S-p*_)+v*(u*y-p*f)),e[13]=r*(f*S-y*_)-h*(s*S-i*_)+v*(s*y-i*f),e[14]=-(r*(u*S-p*_)-l*(s*S-i*_)+v*(s*p-i*u)),e[15]=r*(u*y-p*f)-l*(s*y-i*f)+h*(s*p-i*u),e}function k9(e){const t=e[0],r=e[1],s=e[2],i=e[3],o=e[4],l=e[5],u=e[6],p=e[7],d=e[8],h=e[9],f=e[10],y=e[11],m=e[12],v=e[13],_=e[14],S=e[15];return(t*l-r*o)*(f*S-y*_)-(t*u-s*o)*(h*S-y*v)+(t*p-i*o)*(h*_-f*v)+(r*u-s*l)*(d*S-y*m)-(r*p-i*l)*(d*_-f*m)+(s*p-i*u)*(d*v-h*m)}function NM(e,t,r){const s=t[0],i=t[1],o=t[2],l=t[3],u=t[4],p=t[5],d=t[6],h=t[7],f=t[8],y=t[9],m=t[10],v=t[11],_=t[12],S=t[13],M=t[14],k=t[15];let D=r[0],P=r[1],N=r[2],J=r[3];return e[0]=D*s+P*u+N*f+J*_,e[1]=D*i+P*p+N*y+J*S,e[2]=D*o+P*d+N*m+J*M,e[3]=D*l+P*h+N*v+J*k,D=r[4],P=r[5],N=r[6],J=r[7],e[4]=D*s+P*u+N*f+J*_,e[5]=D*i+P*p+N*y+J*S,e[6]=D*o+P*d+N*m+J*M,e[7]=D*l+P*h+N*v+J*k,D=r[8],P=r[9],N=r[10],J=r[11],e[8]=D*s+P*u+N*f+J*_,e[9]=D*i+P*p+N*y+J*S,e[10]=D*o+P*d+N*m+J*M,e[11]=D*l+P*h+N*v+J*k,D=r[12],P=r[13],N=r[14],J=r[15],e[12]=D*s+P*u+N*f+J*_,e[13]=D*i+P*p+N*y+J*S,e[14]=D*o+P*d+N*m+J*M,e[15]=D*l+P*h+N*v+J*k,e}function N9(e,t,r){const s=r[0],i=r[1],o=r[2];let l,u,p,d,h,f,y,m,v,_,S,M;return t===e?(e[12]=t[0]*s+t[4]*i+t[8]*o+t[12],e[13]=t[1]*s+t[5]*i+t[9]*o+t[13],e[14]=t[2]*s+t[6]*i+t[10]*o+t[14],e[15]=t[3]*s+t[7]*i+t[11]*o+t[15]):(l=t[0],u=t[1],p=t[2],d=t[3],h=t[4],f=t[5],y=t[6],m=t[7],v=t[8],_=t[9],S=t[10],M=t[11],e[0]=l,e[1]=u,e[2]=p,e[3]=d,e[4]=h,e[5]=f,e[6]=y,e[7]=m,e[8]=v,e[9]=_,e[10]=S,e[11]=M,e[12]=l*s+h*i+v*o+t[12],e[13]=u*s+f*i+_*o+t[13],e[14]=p*s+y*i+S*o+t[14],e[15]=d*s+m*i+M*o+t[15]),e}function P9(e,t,r){const s=r[0],i=r[1],o=r[2];return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function L9(e,t,r,s){let i,o,l,u,p,d,h,f,y,m,v,_,S,M,k,D,P,N,J,Se,re,de,ie,ge,Ie=s[0],Re=s[1],ce=s[2],yt=Math.sqrt(Ie*Ie+Re*Re+ce*ce);return yt<Le?null:(yt=1/yt,Ie*=yt,Re*=yt,ce*=yt,i=Math.sin(r),o=Math.cos(r),l=1-o,u=t[0],p=t[1],d=t[2],h=t[3],f=t[4],y=t[5],m=t[6],v=t[7],_=t[8],S=t[9],M=t[10],k=t[11],D=Ie*Ie*l+o,P=Re*Ie*l+ce*i,N=ce*Ie*l-Re*i,J=Ie*Re*l-ce*i,Se=Re*Re*l+o,re=ce*Re*l+Ie*i,de=Ie*ce*l+Re*i,ie=Re*ce*l-Ie*i,ge=ce*ce*l+o,e[0]=u*D+f*P+_*N,e[1]=p*D+y*P+S*N,e[2]=d*D+m*P+M*N,e[3]=h*D+v*P+k*N,e[4]=u*J+f*Se+_*re,e[5]=p*J+y*Se+S*re,e[6]=d*J+m*Se+M*re,e[7]=h*J+v*Se+k*re,e[8]=u*de+f*ie+_*ge,e[9]=p*de+y*ie+S*ge,e[10]=d*de+m*ie+M*ge,e[11]=h*de+v*ie+k*ge,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function D9(e,t,r){const s=Math.sin(r),i=Math.cos(r),o=t[4],l=t[5],u=t[6],p=t[7],d=t[8],h=t[9],f=t[10],y=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+d*s,e[5]=l*i+h*s,e[6]=u*i+f*s,e[7]=p*i+y*s,e[8]=d*i-o*s,e[9]=h*i-l*s,e[10]=f*i-u*s,e[11]=y*i-p*s,e}function z9(e,t,r){const s=Math.sin(r),i=Math.cos(r),o=t[0],l=t[1],u=t[2],p=t[3],d=t[8],h=t[9],f=t[10],y=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-d*s,e[1]=l*i-h*s,e[2]=u*i-f*s,e[3]=p*i-y*s,e[8]=o*s+d*i,e[9]=l*s+h*i,e[10]=u*s+f*i,e[11]=p*s+y*i,e}function V9(e,t,r){const s=Math.sin(r),i=Math.cos(r),o=t[0],l=t[1],u=t[2],p=t[3],d=t[4],h=t[5],f=t[6],y=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+d*s,e[1]=l*i+h*s,e[2]=u*i+f*s,e[3]=p*i+y*s,e[4]=d*i-o*s,e[5]=h*i-l*s,e[6]=f*i-u*s,e[7]=y*i-p*s,e}function U9(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function q9(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function B9(e,t,r){let s,i,o,l=r[0],u=r[1],p=r[2],d=Math.sqrt(l*l+u*u+p*p);return d<Le?null:(d=1/d,l*=d,u*=d,p*=d,s=Math.sin(t),i=Math.cos(t),o=1-i,e[0]=l*l*o+i,e[1]=u*l*o+p*s,e[2]=p*l*o-u*s,e[3]=0,e[4]=l*u*o-p*s,e[5]=u*u*o+i,e[6]=p*u*o+l*s,e[7]=0,e[8]=l*p*o+u*s,e[9]=u*p*o-l*s,e[10]=p*p*o+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function G9(e,t){const r=Math.sin(t),s=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function J9(e,t){const r=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function W9(e,t){const r=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function PM(e,t,r){const s=t[0],i=t[1],o=t[2],l=t[3],u=s+s,p=i+i,d=o+o,h=s*u,f=s*p,y=s*d,m=i*p,v=i*d,_=o*d,S=l*u,M=l*p,k=l*d;return e[0]=1-(m+_),e[1]=f+k,e[2]=y-M,e[3]=0,e[4]=f-k,e[5]=1-(h+_),e[6]=v+S,e[7]=0,e[8]=y+M,e[9]=v-S,e[10]=1-(h+m),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function H9(e,t){const r=K9,s=-t[0],i=-t[1],o=-t[2],l=t[3],u=t[4],p=t[5],d=t[6],h=t[7],f=s*s+i*i+o*o+l*l;return f>0?(r[0]=2*(u*l+h*s+p*o-d*i)/f,r[1]=2*(p*l+h*i+d*s-u*o)/f,r[2]=2*(d*l+h*o+u*i-p*s)/f):(r[0]=2*(u*l+h*s+p*o-d*i),r[1]=2*(p*l+h*i+d*s-u*o),r[2]=2*(d*l+h*o+u*i-p*s)),PM(e,t,r),e}const K9=sa();function Q9(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Z9(e,t){const r=t[0],s=t[1],i=t[2],o=t[4],l=t[5],u=t[6],p=t[8],d=t[9],h=t[10];return e[0]=Math.sqrt(r*r+s*s+i*i),e[1]=Math.sqrt(o*o+l*l+u*u),e[2]=Math.sqrt(p*p+d*d+h*h),e}function Y9(e,t){const r=t[0]+t[5]+t[10];let s=0;return r>0?(s=2*Math.sqrt(r+1),e[3]=.25*s,e[0]=(t[6]-t[9])/s,e[1]=(t[8]-t[2])/s,e[2]=(t[1]-t[4])/s):t[0]>t[5]&&t[0]>t[10]?(s=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/s,e[0]=.25*s,e[1]=(t[1]+t[4])/s,e[2]=(t[8]+t[2])/s):t[5]>t[10]?(s=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/s,e[0]=(t[1]+t[4])/s,e[1]=.25*s,e[2]=(t[6]+t[9])/s):(s=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/s,e[0]=(t[8]+t[2])/s,e[1]=(t[6]+t[9])/s,e[2]=.25*s),e}function X9(e,t,r,s){const i=t[0],o=t[1],l=t[2],u=t[3],p=i+i,d=o+o,h=l+l,f=i*p,y=i*d,m=i*h,v=o*d,_=o*h,S=l*h,M=u*p,k=u*d,D=u*h,P=s[0],N=s[1],J=s[2];return e[0]=(1-(v+S))*P,e[1]=(y+D)*P,e[2]=(m-k)*P,e[3]=0,e[4]=(y-D)*N,e[5]=(1-(f+S))*N,e[6]=(_+M)*N,e[7]=0,e[8]=(m+k)*J,e[9]=(_-M)*J,e[10]=(1-(f+v))*J,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function eN(e,t,r,s,i){const o=t[0],l=t[1],u=t[2],p=t[3],d=o+o,h=l+l,f=u+u,y=o*d,m=o*h,v=o*f,_=l*h,S=l*f,M=u*f,k=p*d,D=p*h,P=p*f,N=s[0],J=s[1],Se=s[2],re=i[0],de=i[1],ie=i[2],ge=(1-(_+M))*N,Ie=(m+P)*N,Re=(v-D)*N,ce=(m-P)*J,yt=(1-(y+M))*J,tt=(S+k)*J,Oe=(v+D)*Se,De=(S-k)*Se,tr=(1-(y+_))*Se;return e[0]=ge,e[1]=Ie,e[2]=Re,e[3]=0,e[4]=ce,e[5]=yt,e[6]=tt,e[7]=0,e[8]=Oe,e[9]=De,e[10]=tr,e[11]=0,e[12]=r[0]+re-(ge*re+ce*de+Oe*ie),e[13]=r[1]+de-(Ie*re+yt*de+De*ie),e[14]=r[2]+ie-(Re*re+tt*de+tr*ie),e[15]=1,e}function tN(e,t){const r=t[0],s=t[1],i=t[2],o=t[3],l=r+r,u=s+s,p=i+i,d=r*l,h=s*l,f=s*u,y=i*l,m=i*u,v=i*p,_=o*l,S=o*u,M=o*p;return e[0]=1-f-v,e[1]=h+M,e[2]=y-S,e[3]=0,e[4]=h-M,e[5]=1-d-v,e[6]=m+_,e[7]=0,e[8]=y+S,e[9]=m-_,e[10]=1-d-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function rN(e,t,r,s,i,o,l){const u=1/(r-t),p=1/(i-s),d=1/(o-l);return e[0]=2*o*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*p,e[6]=0,e[7]=0,e[8]=(r+t)*u,e[9]=(i+s)*p,e[10]=(l+o)*d,e[11]=-1,e[12]=0,e[13]=0,e[14]=l*o*2*d,e[15]=0,e}function sN(e,t,r,s,i){const o=1/Math.tan(t/2);let l;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(l=1/(s-i),e[10]=(i+s)*l,e[14]=2*i*s*l):(e[10]=-1,e[14]=-2*s),e}function iN(e,t,r,s){const i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),l=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),p=2/(l+u),d=2/(i+o);return e[0]=p,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=-(l-u)*p*.5,e[9]=(i-o)*d*.5,e[10]=s/(r-s),e[11]=-1,e[12]=0,e[13]=0,e[14]=s*r/(r-s),e[15]=0,e}function oN(e,t,r,s,i,o,l){const u=1/(t-r),p=1/(s-i),d=1/(o-l);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*p,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*d,e[11]=0,e[12]=(t+r)*u,e[13]=(i+s)*p,e[14]=(l+o)*d,e[15]=1,e}function nN(e,t,r,s){let i,o,l,u,p,d,h,f,y,m;const v=t[0],_=t[1],S=t[2],M=s[0],k=s[1],D=s[2],P=r[0],N=r[1],J=r[2];return Math.abs(v-P)<Le&&Math.abs(_-N)<Le&&Math.abs(S-J)<Le?kM(e):(h=v-P,f=_-N,y=S-J,m=1/Math.sqrt(h*h+f*f+y*y),h*=m,f*=m,y*=m,i=k*y-D*f,o=D*h-M*y,l=M*f-k*h,m=Math.sqrt(i*i+o*o+l*l),m?(m=1/m,i*=m,o*=m,l*=m):(i=0,o=0,l=0),u=f*l-y*o,p=y*i-h*l,d=h*o-f*i,m=Math.sqrt(u*u+p*p+d*d),m?(m=1/m,u*=m,p*=m,d*=m):(u=0,p=0,d=0),e[0]=i,e[1]=u,e[2]=h,e[3]=0,e[4]=o,e[5]=p,e[6]=f,e[7]=0,e[8]=l,e[9]=d,e[10]=y,e[11]=0,e[12]=-(i*v+o*_+l*S),e[13]=-(u*v+p*_+d*S),e[14]=-(h*v+f*_+y*S),e[15]=1,e)}function lN(e,t,r,s){const i=t[0],o=t[1],l=t[2],u=s[0],p=s[1],d=s[2];let h=i-r[0],f=o-r[1],y=l-r[2],m=h*h+f*f+y*y;m>0&&(m=1/Math.sqrt(m),h*=m,f*=m,y*=m);let v=p*y-d*f,_=d*h-u*y,S=u*f-p*h;return m=v*v+_*_+S*S,m>0&&(m=1/Math.sqrt(m),v*=m,_*=m,S*=m),e[0]=v,e[1]=_,e[2]=S,e[3]=0,e[4]=f*S-y*_,e[5]=y*v-h*S,e[6]=h*_-f*v,e[7]=0,e[8]=h,e[9]=f,e[10]=y,e[11]=0,e[12]=i,e[13]=o,e[14]=l,e[15]=1,e}function aN(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function uN(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function cN(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function LM(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function pN(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function dN(e,t,r,s){return e[0]=t[0]+r[0]*s,e[1]=t[1]+r[1]*s,e[2]=t[2]+r[2]*s,e[3]=t[3]+r[3]*s,e[4]=t[4]+r[4]*s,e[5]=t[5]+r[5]*s,e[6]=t[6]+r[6]*s,e[7]=t[7]+r[7]*s,e[8]=t[8]+r[8]*s,e[9]=t[9]+r[9]*s,e[10]=t[10]+r[10]*s,e[11]=t[11]+r[11]*s,e[12]=t[12]+r[12]*s,e[13]=t[13]+r[13]*s,e[14]=t[14]+r[14]*s,e[15]=t[15]+r[15]*s,e}function hN(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function fN(e,t){if(e===t)return!0;const r=e[0],s=e[1],i=e[2],o=e[3],l=e[4],u=e[5],p=e[6],d=e[7],h=e[8],f=e[9],y=e[10],m=e[11],v=e[12],_=e[13],S=e[14],M=e[15],k=t[0],D=t[1],P=t[2],N=t[3],J=t[4],Se=t[5],re=t[6],de=t[7],ie=t[8],ge=t[9],Ie=t[10],Re=t[11],ce=t[12],yt=t[13],tt=t[14],Oe=t[15];return Math.abs(r-k)<=Le*Math.max(1,Math.abs(r),Math.abs(k))&&Math.abs(s-D)<=Le*Math.max(1,Math.abs(s),Math.abs(D))&&Math.abs(i-P)<=Le*Math.max(1,Math.abs(i),Math.abs(P))&&Math.abs(o-N)<=Le*Math.max(1,Math.abs(o),Math.abs(N))&&Math.abs(l-J)<=Le*Math.max(1,Math.abs(l),Math.abs(J))&&Math.abs(u-Se)<=Le*Math.max(1,Math.abs(u),Math.abs(Se))&&Math.abs(p-re)<=Le*Math.max(1,Math.abs(p),Math.abs(re))&&Math.abs(d-de)<=Le*Math.max(1,Math.abs(d),Math.abs(de))&&Math.abs(h-ie)<=Le*Math.max(1,Math.abs(h),Math.abs(ie))&&Math.abs(f-ge)<=Le*Math.max(1,Math.abs(f),Math.abs(ge))&&Math.abs(y-Ie)<=Le*Math.max(1,Math.abs(y),Math.abs(Ie))&&Math.abs(m-Re)<=Le*Math.max(1,Math.abs(m),Math.abs(Re))&&Math.abs(v-ce)<=Le*Math.max(1,Math.abs(v),Math.abs(ce))&&Math.abs(_-yt)<=Le*Math.max(1,Math.abs(_),Math.abs(yt))&&Math.abs(S-tt)<=Le*Math.max(1,Math.abs(S),Math.abs(tt))&&Math.abs(M-Oe)<=Le*Math.max(1,Math.abs(M),Math.abs(Oe))}function yN(e){const t=Le,r=e[0],s=e[1],i=e[2],o=e[4],l=e[5],u=e[6],p=e[8],d=e[9],h=e[10];return Math.abs(1-(r*r+o*o+p*p))<=t&&Math.abs(1-(s*s+l*l+d*d))<=t&&Math.abs(1-(i*i+u*u+h*h))<=t}const mN=NM,gN=LM;Object.freeze({__proto__:null,copy:C9,set:Eo,identity:kM,transpose:To,invert:R9,adjoint:F9,determinant:k9,multiply:NM,translate:N9,scale:P9,rotate:L9,rotateX:D9,rotateY:z9,rotateZ:V9,fromTranslation:U9,fromScaling:q9,fromRotation:B9,fromXRotation:G9,fromYRotation:J9,fromZRotation:W9,fromRotationTranslation:PM,fromQuat2:H9,getTranslation:Q9,getScaling:Z9,getRotation:Y9,fromRotationTranslationScale:X9,fromRotationTranslationScaleOrigin:eN,fromQuat:tN,frustum:rN,perspective:sN,perspectiveFromFieldOfView:iN,ortho:oN,lookAt:nN,targetTo:lN,str:aN,frob:uN,add:cN,subtract:LM,multiplyScalar:pN,multiplyScalarAndAdd:dN,exactEquals:hN,equals:fN,isOrthoNormal:yN,mul:mN,sub:gN});const vN=(e,t)=>{const r=Eo(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return To(r,r)},bN=(e,t)=>{const r=Eo(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return To(r,r)},wN=(e,t)=>{const r=1-t,s=Eo(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return To(s,s)},SN=(e,t)=>{const r=Math.sin(t*Math.PI/180),s=Math.cos(t*Math.PI/180),i=Eo(e,.213+.787*s-.213*r,.715-.715*s-.715*r,.072-.072*s+.928*r,0,.213-.213*s+.143*r,.715+.285*s+.14*r,.072-.072*s-.283*r,0,.213-.213*s-.787*r,.715-.715*s+.715*r,.072+.928*s+.072*r,0,0,0,0,1);return To(i,i)},_N=(e,t)=>{const r=1-2*t,s=Eo(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return To(s,s)},xN=(e,t)=>{const r=Eo(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return To(r,r)},$N=(e,t)=>{const r=1-t,s=Eo(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return To(s,s)};class uf{constructor(t,r,s){this.strength=t,this.radius=r,this.threshold=s,this.type="bloom"}interpolate(t,r,s){this.strength=nr(t.strength,r.strength,s),this.radius=nr(t.radius,r.radius,s),this.threshold=nr(t.threshold,r.threshold,s)}clone(){return new uf(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:ku(this.radius),strength:this.strength,threshold:this.threshold}}}class cf{constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,s){this.radius=Math.round(nr(t.radius,r.radius,s))}clone(){return new cf(this.radius)}toJSON(){return{type:"blur",radius:ku(this.radius)}}}class oc{constructor(t,r){this.type=t,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,s){this.amount=nr(t.amount,r.amount,s),this._updateMatrix()}clone(){return new oc(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||af();switch(this.type){case"brightness":this._colorMatrix=vN(t,this.amount);break;case"contrast":this._colorMatrix=bN(t,this.amount);break;case"grayscale":this._colorMatrix=wN(t,this.amount);break;case"invert":this._colorMatrix=_N(t,this.amount);break;case"saturate":this._colorMatrix=xN(t,this.amount);break;case"sepia":this._colorMatrix=$N(t,this.amount)}}}class pf{constructor(t,r,s,i){this.offsetX=t,this.offsetY=r,this.blurRadius=s,this.color=i,this.type="drop-shadow"}interpolate(t,r,s){this.offsetX=nr(t.offsetX,r.offsetX,s),this.offsetY=nr(t.offsetY,r.offsetY,s),this.blurRadius=nr(t.blurRadius,r.blurRadius,s),this.color[0]=Math.round(nr(t.color[0],r.color[0],s)),this.color[1]=Math.round(nr(t.color[1],r.color[1],s)),this.color[2]=Math.round(nr(t.color[2],r.color[2],s)),this.color[3]=nr(t.color[3],r.color[3],s)}clone(){return new pf(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:ku(this.offsetX),yoffset:ku(this.offsetY),blurRadius:ku(this.blurRadius),color:t}}}class df{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,s){this.angle=nr(t.angle,r.angle,s),this._updateMatrix()}clone(){return new df(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||af();this._colorMatrix=SN(t,this.angle)}}class hf{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,s){this.amount=nr(t.amount,r.amount,s)}clone(){return new hf(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function nr(e,t,r){return e+(t-e)*r}function ku(e){return Math.round(1e3*_o(e))/1e3}function MN(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new oc(e.type,0);case"saturate":case"brightness":case"contrast":return new oc(e.type,1);case"opacity":return new hf(1);case"hue-rotate":return new df(0);case"blur":return new cf(0);case"drop-shadow":return new pf(0,0,0,[...Y1("transparent")]);case"bloom":return new uf(0,0,1)}}function IN(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every((s,i)=>s.type===r[i].type)}function ON(e,t){const r=e.length>t.length?e:t,s=e.length>t.length?t:e;for(let i=s.length;i<r.length;i++)s.push(MN(r[i]))}function EN(e){const t=e[0];return!!t&&"type"in t}var z2,V2,DM={exports:{}};function zM(e){if(!e||e.length===0)return null;if(typeof e=="string"){const r=U2(e);return r&&r.length!==0?r:null}const t=e.map(r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new C("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:U2(r.value)}});t.sort((r,s)=>s.effects.length-r.effects.length);for(let r=0;r<t.length-1;r++){if(!IN(t[r].effects,t[r+1].effects))throw new C("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});ON(t[r].effects,t[r+1].effects)}return t.sort((r,s)=>s.scale-r.scale),t}function U2(e){let t;if(!e)return[];try{t=DM.exports.parse(e)}catch(r){throw new C("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map(r=>TN(r))}function TN(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return jN(e);case"opacity":return AN(e);case"hue-rotate":return CN(e);case"blur":return RN(e);case"drop-shadow":return FN(e);case"bloom":return kN(e)}}catch(t){throw t.details.filter=e,t}throw new C("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function jN(e){let t=1;return fa(e.parameters,1),e.parameters.length===1&&(t=ns(e.parameters[0])),new oc(e.name,t)}function AN(e){let t=1;return fa(e.parameters,1),e.parameters.length===1&&(t=ns(e.parameters[0])),new hf(t)}function CN(e){let t=0;return fa(e.parameters,1),e.parameters.length===1&&(t=VN(e.parameters[0])),new df(t)}function RN(e){let t=0;return fa(e.parameters,1),e.parameters.length===1&&(t=Dv(e.parameters[0]),Oc(t,e.parameters[0])),new cf(t)}function FN(e){const t=[];let r=null;for(const s of e.parameters)if(s.type==="color"){if(t.length&&Object.freeze(t),r)throw new C("effect:type-error","Accepts only one color",{});r=UN(s)}else{const i=Dv(s);if(Object.isFrozen(t))throw new C("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(i),t.length===3&&Oc(i,s)}if(t.length<2||t.length>3)throw new C("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new pf(t[0],t[1],t[2]||0,r||VM("black"))}function kN(e){let t=1,r=0,s=0;return fa(e.parameters,3),e.parameters[0]&&(t=ns(e.parameters[0])),e.parameters[1]&&(r=Dv(e.parameters[1]),Oc(r,e.parameters[1])),e.parameters[2]&&(s=ns(e.parameters[2])),new uf(t,r,s)}function fa(e,t){if(e.length>t)throw new C("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function ff(e){if(e.type==="color")return"<color>";if(e.unit){if(Lv[e.unit])return"<length>";if(Pv[e.unit])return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function Oc(e,t){if(e<0)throw new C("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function NN(e){if(e.type!=="quantity"||e.unit!==null)throw new C("effect:type-error",`Expected <double>, Actual: ${ff(e)}`,{term:e})}function PN(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new C("effect:type-error",`Expected <double> or <percentage>, Actual: ${ff(e)}`,{term:e})}V2=function(){function e(i,o){function l(){this.constructor=i}l.prototype=o.prototype,i.prototype=new l}function t(i,o,l,u){var p=Error.call(this,i);return Object.setPrototypeOf&&Object.setPrototypeOf(p,t.prototype),p.expected=o,p.found=l,p.location=u,p.name="SyntaxError",p}function r(i,o,l){return l=l||" ",i.length>o?i:(o-=i.length,i+(l+=l.repeat(o)).slice(0,o))}function s(i,o){var l,u={},p=(o=o!==void 0?o:{}).grammarSource,d={start:ib},h=ib,f="none",y=")",m=",",v="(",_="%",S="px",M="cm",k="mm",D="in",P="pt",N="pc",J="deg",Se="rad",re="grad",de="turn",ie="#",ge=".",Ie="e",Re=/^[ \t\n\r]/,ce=/^[a-z\-]/,yt=/^[0-9a-fA-F]/,tt=/^[+\-]/,Oe=/^[0-9]/,De=Hs("none"),tr=Et("none",!1),ya=Et(")",!1),Ei=Et(",",!1),Ti=Hs("whitespace"),Vr=va([" ","	",`
`,"\r"],!1,!1),Ac=Hs("function"),vf=Et("(",!1),bf=Hs("identifier"),$r=va([["a","z"],"-"],!1,!1),qn=Hs("percentage"),Cc=Et("%",!1),ji=Hs("length"),ma=Et("px",!1),ga=Et("cm",!1),x=Et("mm",!1),$=Et("in",!1),A=Et("pt",!1),z=Et("pc",!1),L=Hs("angle"),W=Et("deg",!1),Q=Et("rad",!1),G=Et("grad",!1),H=Et("turn",!1),q=Hs("number"),ne=Hs("color"),ee=Et("#",!1),oe=va([["0","9"],["a","f"],["A","F"]],!1,!1),he=va(["+","-"],!1,!1),xe=va([["0","9"]],!1,!1),Qe=Et(".",!1),Be=Et("e",!1),We=function(){return[]},pr=function(w,j){return{type:"function",name:w,parameters:j||[]}},Ai=function(w,j){return j.length>0?RO(w,j,3):[w]},Rc=function(w){return{type:"quantity",value:w.value,unit:w.unit}},jo=function(w){return{type:"color",colorType:w.type,value:w.value}},Fc=function(w){return w},Jt=function(){return Pc()},Mr=function(w){return{value:w,unit:"%"}},kc=function(w){return{value:w,unit:"px"}},lO=function(w){return{value:w,unit:"cm"}},aO=function(w){return{value:w,unit:"mm"}},uO=function(w){return{value:w,unit:"in"}},cO=function(w){return{value:w,unit:"pt"}},pO=function(w){return{value:w,unit:"pc"}},dO=function(w){return{value:w,unit:"deg"}},hO=function(w){return{value:w,unit:"rad"}},fO=function(w){return{value:w,unit:"grad"}},yO=function(w){return{value:w,unit:"turn"}},mO=function(w){return{value:w,unit:null}},gO=function(){return{type:"hex",value:Pc()}},vO=function(w){return{type:"function",value:w}},bO=function(){return{type:"named",value:Pc()}},wO=function(){return parseFloat(Pc())},O=0,it=0,Nc=[{line:1,column:1}],ms=0,wf=[],te=0;if("startRule"in o){if(!(o.startRule in d))throw new Error(`Can't start parsing from rule "`+o.startRule+'".');h=d[o.startRule]}function Pc(){return i.substring(it,O)}function Et(w,j){return{type:"literal",text:w,ignoreCase:j}}function va(w,j,V){return{type:"class",parts:w,inverted:j,ignoreCase:V}}function SO(){return{type:"end"}}function Hs(w){return{type:"other",description:w}}function rb(w){var j,V=Nc[w];if(V)return V;for(j=w-1;!Nc[j];)j--;for(V={line:(V=Nc[j]).line,column:V.column};j<w;)i.charCodeAt(j)===10?(V.line++,V.column=1):V.column++,j++;return Nc[w]=V,V}function sb(w,j){var V=rb(w),Me=rb(j);return{source:p,start:{offset:w,line:V.line,column:V.column},end:{offset:j,line:Me.line,column:Me.column}}}function me(w){O<ms||(O>ms&&(ms=O,wf=[]),wf.push(w))}function _O(w,j,V){return new t(t.buildMessage(w,j),w,j,V)}function ib(){var w;return(w=xO())===u&&(w=$O()),w}function xO(){var w,j;return te++,w=O,Tt(),i.substr(O,4)===f?(j=f,O+=4):(j=u,te===0&&me(tr)),j!==u?(Tt(),it=w,w=We()):(O=w,w=u),te--,w===u&&te===0&&me(De),w}function $O(){var w,j;if(w=[],(j=Sf())!==u)for(;j!==u;)w.push(j),j=Sf();else w=u;return w}function Sf(){var w,j,V,Me;return w=O,Tt(),(j=IO())!==u?(Tt(),(V=MO())===u&&(V=null),Tt(),i.charCodeAt(O)===41?(Me=y,O++):(Me=u,te===0&&me(ya)),Me!==u?(Tt(),it=w,w=pr(j,V)):(O=w,w=u)):(O=w,w=u),w}function MO(){var w,j,V,Me,Ft,ot,Or,Lc;if(w=O,(j=_f())!==u){for(V=[],Me=O,Ft=Tt(),i.charCodeAt(O)===44?(ot=m,O++):(ot=u,te===0&&me(Ei)),ot===u&&(ot=null),Or=Tt(),(Lc=_f())!==u?Me=Ft=[Ft,ot,Or,Lc]:(O=Me,Me=u);Me!==u;)V.push(Me),Me=O,Ft=Tt(),i.charCodeAt(O)===44?(ot=m,O++):(ot=u,te===0&&me(Ei)),ot===u&&(ot=null),Or=Tt(),(Lc=_f())!==u?Me=Ft=[Ft,ot,Or,Lc]:(O=Me,Me=u);it=w,w=Ai(j,V)}else O=w,w=u;return w}function _f(){var w,j;return w=O,(j=OO())===u&&(j=EO())===u&&(j=TO())===u&&(j=jO()),j!==u&&(it=w,j=Rc(j)),(w=j)===u&&(w=O,(j=AO())!==u&&(it=w,j=jo(j)),w=j),w}function Tt(){var w,j;for(te++,w=[],Re.test(i.charAt(O))?(j=i.charAt(O),O++):(j=u,te===0&&me(Vr));j!==u;)w.push(j),Re.test(i.charAt(O))?(j=i.charAt(O),O++):(j=u,te===0&&me(Vr));return te--,j=u,te===0&&me(Ti),w}function IO(){var w,j,V;return te++,w=O,(j=ob())!==u?(i.charCodeAt(O)===40?(V=v,O++):(V=u,te===0&&me(vf)),V!==u?(it=w,w=Fc(j)):(O=w,w=u)):(O=w,w=u),te--,w===u&&(j=u,te===0&&me(Ac)),w}function ob(){var w,j,V;if(te++,w=O,j=[],ce.test(i.charAt(O))?(V=i.charAt(O),O++):(V=u,te===0&&me($r)),V!==u)for(;V!==u;)j.push(V),ce.test(i.charAt(O))?(V=i.charAt(O),O++):(V=u,te===0&&me($r));else j=u;return j!==u&&(it=w,j=Jt()),te--,(w=j)===u&&(j=u,te===0&&me(bf)),w}function OO(){var w,j,V;return te++,w=O,Tt(),(j=Ir())!==u?(i.charCodeAt(O)===37?(V=_,O++):(V=u,te===0&&me(Cc)),V!==u?(it=w,w=Mr(j)):(O=w,w=u)):(O=w,w=u),te--,w===u&&te===0&&me(qn),w}function EO(){var w,j,V;return te++,w=O,Tt(),(j=Ir())!==u?(i.substr(O,2)===S?(V=S,O+=2):(V=u,te===0&&me(ma)),V!==u?(it=w,w=kc(j)):(O=w,w=u)):(O=w,w=u),w===u&&(w=O,Tt(),(j=Ir())!==u?(i.substr(O,2)===M?(V=M,O+=2):(V=u,te===0&&me(ga)),V!==u?(it=w,w=lO(j)):(O=w,w=u)):(O=w,w=u),w===u&&(w=O,Tt(),(j=Ir())!==u?(i.substr(O,2)===k?(V=k,O+=2):(V=u,te===0&&me(x)),V!==u?(it=w,w=aO(j)):(O=w,w=u)):(O=w,w=u),w===u&&(w=O,Tt(),(j=Ir())!==u?(i.substr(O,2)===D?(V=D,O+=2):(V=u,te===0&&me($)),V!==u?(it=w,w=uO(j)):(O=w,w=u)):(O=w,w=u),w===u&&(w=O,Tt(),(j=Ir())!==u?(i.substr(O,2)===P?(V=P,O+=2):(V=u,te===0&&me(A)),V!==u?(it=w,w=cO(j)):(O=w,w=u)):(O=w,w=u),w===u&&(w=O,Tt(),(j=Ir())!==u?(i.substr(O,2)===N?(V=N,O+=2):(V=u,te===0&&me(z)),V!==u?(it=w,w=pO(j)):(O=w,w=u)):(O=w,w=u)))))),te--,w===u&&te===0&&me(ji),w}function TO(){var w,j,V;return te++,w=O,(j=Ir())!==u?(i.substr(O,3)===J?(V=J,O+=3):(V=u,te===0&&me(W)),V!==u?(it=w,w=dO(j)):(O=w,w=u)):(O=w,w=u),w===u&&(w=O,(j=Ir())!==u?(i.substr(O,3)===Se?(V=Se,O+=3):(V=u,te===0&&me(Q)),V!==u?(it=w,w=hO(j)):(O=w,w=u)):(O=w,w=u),w===u&&(w=O,(j=Ir())!==u?(i.substr(O,4)===re?(V=re,O+=4):(V=u,te===0&&me(G)),V!==u?(it=w,w=fO(j)):(O=w,w=u)):(O=w,w=u),w===u&&(w=O,(j=Ir())!==u?(i.substr(O,4)===de?(V=de,O+=4):(V=u,te===0&&me(H)),V!==u?(it=w,w=yO(j)):(O=w,w=u)):(O=w,w=u)))),te--,w===u&&(j=u,te===0&&me(L)),w}function jO(){var w,j;return te++,w=O,Tt(),(j=Ir())!==u?(it=w,w=mO(j)):(O=w,w=u),te--,w===u&&te===0&&me(q),w}function AO(){var w,j,V,Me;if(te++,w=O,i.charCodeAt(O)===35?(j=ie,O++):(j=u,te===0&&me(ee)),j!==u){if(V=[],yt.test(i.charAt(O))?(Me=i.charAt(O),O++):(Me=u,te===0&&me(oe)),Me!==u)for(;Me!==u;)V.push(Me),yt.test(i.charAt(O))?(Me=i.charAt(O),O++):(Me=u,te===0&&me(oe));else V=u;V!==u?(it=w,w=gO()):(O=w,w=u)}else O=w,w=u;return w===u&&(w=O,(j=Sf())!==u&&(it=w,j=vO(j)),(w=j)===u&&(w=O,(j=ob())!==u&&(it=w,j=bO()),w=j)),te--,w===u&&(j=u,te===0&&me(ne)),w}function Ir(){var w,j,V,Me,Ft,ot,Or;for(w=O,tt.test(i.charAt(O))?(i.charAt(O),O++):te===0&&me(he),j=O,V=[],Oe.test(i.charAt(O))?(Me=i.charAt(O),O++):(Me=u,te===0&&me(xe));Me!==u;)V.push(Me),Oe.test(i.charAt(O))?(Me=i.charAt(O),O++):(Me=u,te===0&&me(xe));if(i.charCodeAt(O)===46?(Me=ge,O++):(Me=u,te===0&&me(Qe)),Me!==u){if(Ft=[],Oe.test(i.charAt(O))?(ot=i.charAt(O),O++):(ot=u,te===0&&me(xe)),ot!==u)for(;ot!==u;)Ft.push(ot),Oe.test(i.charAt(O))?(ot=i.charAt(O),O++):(ot=u,te===0&&me(xe));else Ft=u;Ft!==u?j=V=[V,Me,Ft]:(O=j,j=u)}else O=j,j=u;if(j===u)if(j=[],Oe.test(i.charAt(O))?(V=i.charAt(O),O++):(V=u,te===0&&me(xe)),V!==u)for(;V!==u;)j.push(V),Oe.test(i.charAt(O))?(V=i.charAt(O),O++):(V=u,te===0&&me(xe));else j=u;if(j!==u){if(V=O,i.charCodeAt(O)===101?(Me=Ie,O++):(Me=u,te===0&&me(Be)),Me!==u){if(tt.test(i.charAt(O))?(Ft=i.charAt(O),O++):(Ft=u,te===0&&me(he)),Ft===u&&(Ft=null),ot=[],Oe.test(i.charAt(O))?(Or=i.charAt(O),O++):(Or=u,te===0&&me(xe)),Or!==u)for(;Or!==u;)ot.push(Or),Oe.test(i.charAt(O))?(Or=i.charAt(O),O++):(Or=u,te===0&&me(xe));else ot=u;ot!==u?V=Me=[Me,Ft,ot]:(O=V,V=u)}else O=V,V=u;V===u&&(V=null),it=w,w=wO()}else O=w,w=u;return w}function CO(w,j){return w.map(function(V){return V[j]})}function RO(w,j,V){return[w].concat(CO(j,V))}if((l=h())!==u&&O===i.length)return l;throw l!==u&&O<i.length&&me(SO()),_O(wf,ms<i.length?i.charAt(ms):null,ms<i.length?sb(ms,ms+1):sb(ms,ms))}return e(t,Error),t.prototype.format=function(i){var o="Error: "+this.message;if(this.location){var l,u=null;for(l=0;l<i.length;l++)if(i[l].source===this.location.source){u=i[l].text.split(/\r\n|\n|\r/g);break}var p=this.location.start,d=this.location.source+":"+p.line+":"+p.column;if(u){var h=this.location.end,f=r("",p.line.toString().length),y=u[p.line-1],m=p.line===h.line?h.column:y.length+1;o+=`
 --> `+d+`
`+f+` |
`+p.line+" | "+y+`
`+f+" | "+r("",p.column-1)+r("",m-p.column,"^")}else o+=`
 at `+d}return o},t.buildMessage=function(i,o){var l={literal:function(m){return'"'+p(m.text)+'"'},class:function(m){var v=m.parts.map(function(_){return Array.isArray(_)?d(_[0])+"-"+d(_[1]):d(_)});return"["+(m.inverted?"^":"")+v+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(m){return m.description}};function u(m){return m.charCodeAt(0).toString(16).toUpperCase()}function p(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+u(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+u(v)})}function d(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+u(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+u(v)})}function h(m){return l[m.type](m)}function f(m){var v,_,S=m.map(h);if(S.sort(),S.length>0){for(v=1,_=1;v<S.length;v++)S[v-1]!==S[v]&&(S[_]=S[v],_++);S.length=_}switch(S.length){case 1:return S[0];case 2:return S[0]+" or "+S[1];default:return S.slice(0,-1).join(", ")+", or "+S[S.length-1]}}function y(m){return m?'"'+p(m)+'"':"end of input"}return"Expected "+f(i)+" but "+y(o)+" found."},{SyntaxError:t,parse:s}},(z2=DM).exports&&(z2.exports=V2());const Pv={deg:1,grad:.9,rad:180/Math.PI,turn:360};function LN(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&Pv[e.unit]!=null))throw new C("effect:type-error",`Expected <angle>, Actual: ${ff(e)}`,{term:e})}const Lv={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function DN(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&Lv[e.unit]!=null))throw new C("effect:type-error",`Expected <length>, Actual: ${ff(e)}`,{term:e})}function ns(e){PN(e);const t=e.value;return Oc(t,e),e.unit==="%"?.01*t:t}function zN(e){return NN(e),Oc(e.value,e),e.value}function VN(e){return LN(e),e.value*Pv[e.unit]||0}function Dv(e){return DN(e),e.value*Lv[e.unit]||0}function UN(e){switch(e.colorType){case"hex":return h6(e.value);case"named":return VM(e.value);case"function":return GN(e.value)}}function VM(e){if(!S$(e))throw new C("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return d6(e)}const qN=/^rgba?/i,BN=/^hsla?/i;function GN(e){if(fa(e.parameters,4),qN.test(e.name))return[ns(e.parameters[0]),ns(e.parameters[1]),ns(e.parameters[2]),e.parameters[3]?ns(e.parameters[3]):1];if(BN.test(e.name))return _$(zN(e.parameters[0]),ns(e.parameters[1]),ns(e.parameters[2]),e.parameters[3]?ns(e.parameters[3]):1);throw new C("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function yg(e,t,r){try{return WN(e)}catch(i){var s;r==null||(s=r.messages)==null||s.push(i)}return null}function mg(e,t,r,s){try{const i=JN(e);Sr(r,i,t)}catch(i){s.messages&&s.messages.push(i)}}function JN(e){const t=zM(e);return t?EN(t)?t.map(r=>r.toJSON()):t.map(({scale:r,effects:s})=>({scale:r,value:s.map(i=>i.toJSON())})):null}function WN(e){if(!e||e.length===0)return null;if(HN(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:q2(r.value)});return t}return q2(e)}function HN(e){const t=e[0];return!!t&&"scale"in t}function q2(e){if(!e||!e.length)return"";const t=[];for(const r of e){let s=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":s=[Ks(r,"amount")];break;case"blur":s=[Ks(r,"radius","pt")];break;case"hue-rotate":s=[Ks(r,"angle","deg")];break;case"drop-shadow":s=[Ks(r,"xoffset","pt"),Ks(r,"yoffset","pt"),Ks(r,"blurRadius","pt"),KN(r,"color")];break;case"bloom":s=[Ks(r,"strength"),Ks(r,"radius","pt"),Ks(r,"threshold")]}const i=`${r.type}(${s.filter(Boolean).join(" ")})`;zM(i),t.push(i)}return t.join(" ")}function Ks(e,t,r){if(e[t]==null)throw new C("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function KN(e,t){if(e[t]==null)throw new C("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const QN=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return n([c({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),n([c({json:{read:!1,write:!1,origins:{"web-map":{read:{reader:yg},write:{allowNull:!0,writer:mg}}}}})],t.prototype,"effect",void 0),t=n([b("esri.layers.mixins.BlendLayer")],t),t},ZN=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return n([c({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=n([b("esri.layers.mixins.CustomParametersMixin")],t),t},B2={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},YN={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function XN(e,t){const r=new Date(e,t+1,1);return r.setDate(0),r.getDate()}function Mn(e,t,r){const s=new Date(e.getTime());if(t&&r){const i=YN[r],{getter:o,setter:l,multiplier:u}=i;if(r==="months"){const p=XN(s.getFullYear(),s.getMonth()+t);s.getDate()>p&&s.setDate(p)}s[l](s[o]()+t*u)}return s}function G2(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function eP(e,t,r){return e===0?0:e*B2[t]/B2[r]}var es;let mr=es=class extends F{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return J2}static get empty(){return tP}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(es.allTime)}get isEmpty(){return this.equals(es.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new es({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=T(this.start)?this.start.getTime():this.start,r=T(this.end)?this.end.getTime():this.end,s=T(e.start)?e.start.getTime():e.start,i=T(e.end)?e.end.getTime():e.end;return t===s&&r===i}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=Ay(this.start,s=>G2(s,e)),r=Ay(this.end,s=>Mn(G2(s,e),1,e));return new es({start:t,end:r})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return es.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=Fa(this.start,-1/0,u=>u.getTime()),r=Fa(this.end,1/0,u=>u.getTime()),s=Fa(e.start,-1/0,u=>u.getTime()),i=Fa(e.end,1/0,u=>u.getTime());let o,l;if(s>=t&&s<=r?o=s:t>=s&&t<=i&&(o=t),r>=s&&r<=i?l=r:i>=t&&i<=r&&(l=i),!isNaN(o)&&!isNaN(l)){const u=new es;return u.start=o===-1/0?null:new Date(o),u.end=l===1/0?null:new Date(l),u}return es.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const r=new es,{start:s,end:i}=this;return T(s)&&(r.start=Mn(s,e,t)),T(i)&&(r.end=Mn(i,e,t)),r}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return J2.clone();const t=T(this.start)&&T(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=T(this.end)&&T(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new es({start:t,end:r})}};n([c({type:Date,json:{write:{allowNull:!0}}})],mr.prototype,"end",void 0),n([K("end")],mr.prototype,"readEnd",null),n([Y("end")],mr.prototype,"writeEnd",null),n([c({readOnly:!0,json:{read:!1}})],mr.prototype,"isAllTime",null),n([c({readOnly:!0,json:{read:!1}})],mr.prototype,"isEmpty",null),n([c({type:Date,json:{write:{allowNull:!0}}})],mr.prototype,"start",void 0),n([K("start")],mr.prototype,"readStart",null),n([Y("start")],mr.prototype,"writeStart",null),mr=es=n([b("esri.TimeExtent")],mr);const J2=new mr,tP=new mr({start:void 0,end:void 0}),Oi=mr;var gg;let ol=gg=class extends F{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new gg({mapLayerId:e,gdbVersion:t})}};n([le({mapLayer:"map-layer"})],ol.prototype,"type",void 0),n([c({type:_t,json:{write:!0}})],ol.prototype,"mapLayerId",void 0),n([c({type:String,json:{write:!0}})],ol.prototype,"gdbVersion",void 0),ol=gg=n([b("esri.layers.support.source.MapLayerSource")],ol);var vg;let ni=vg=class extends F{constructor(e){super(e),this.type="query-table"}clone(){var e;const{workspaceId:t,query:r,oidFields:s,spatialReference:i,geometryType:o}=this,l={workspaceId:t,query:r,oidFields:s,spatialReference:(e=i==null?void 0:i.clone())!=null?e:void 0,geometryType:o};return new vg(l)}};n([le({queryTable:"query-table"})],ni.prototype,"type",void 0),n([c({type:String,json:{write:!0}})],ni.prototype,"workspaceId",void 0),n([c({type:String,json:{write:!0}})],ni.prototype,"query",void 0),n([c({type:String,json:{write:!0}})],ni.prototype,"oidFields",void 0),n([c({type:Ae,json:{write:!0}})],ni.prototype,"spatialReference",void 0),n([le(bA)],ni.prototype,"geometryType",void 0),ni=vg=n([b("esri.layers.support.source.QueryTableDataSource")],ni);var bg;let nl=bg=class extends F{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new bg({workspaceId:e,dataSourceName:t})}};n([le({raster:"raster"})],nl.prototype,"type",void 0),n([c({type:String,json:{write:!0}})],nl.prototype,"dataSourceName",void 0),n([c({type:String,json:{write:!0}})],nl.prototype,"workspaceId",void 0),nl=bg=n([b("esri.layers.support.source.RasterDataSource")],nl);var wg;let nn=wg=class extends F{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new wg({workspaceId:e,gdbVersion:t,dataSourceName:r})}};n([le({table:"table"})],nn.prototype,"type",void 0),n([c({type:String,json:{write:!0}})],nn.prototype,"workspaceId",void 0),n([c({type:String,json:{write:!0}})],nn.prototype,"gdbVersion",void 0),n([c({type:String,json:{write:!0}})],nn.prototype,"dataSourceName",void 0),nn=wg=n([b("esri.layers.support.source.TableDataSource")],nn);var Sg,_g;const rP=Lt()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let hr=Sg=class extends F{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return W2()(e,t,r)}castLeftTableSource(e){return Bs(xg(),e)}readRightTableSource(e,t,r){return W2()(e,t,r)}castRightTableSource(e){return Bs(xg(),e)}clone(){var e,t;const{leftTableKey:r,rightTableKey:s,leftTableSource:i,rightTableSource:o,joinType:l}=this,u={leftTableKey:r,rightTableKey:s,leftTableSource:(e=i==null?void 0:i.clone())!=null?e:void 0,rightTableSource:(t=o==null?void 0:o.clone())!=null?t:void 0,joinType:l};return new Sg(u)}};n([le({joinTable:"join-table"})],hr.prototype,"type",void 0),n([c({type:String,json:{write:!0}})],hr.prototype,"leftTableKey",void 0),n([c({type:String,json:{write:!0}})],hr.prototype,"rightTableKey",void 0),n([c({json:{write:!0}})],hr.prototype,"leftTableSource",void 0),n([K("leftTableSource")],hr.prototype,"readLeftTableSource",null),n([ht("leftTableSource")],hr.prototype,"castLeftTableSource",null),n([c({json:{write:!0}})],hr.prototype,"rightTableSource",void 0),n([K("rightTableSource")],hr.prototype,"readRightTableSource",null),n([ht("rightTableSource")],hr.prototype,"castRightTableSource",null),n([le(rP)],hr.prototype,"joinType",void 0),hr=Sg=n([b("esri.layers.support.source.JoinTableDataSource")],hr);let ty=null;function W2(){return ty||(ty=Xl({types:xg()})),ty}let ry=null;function xg(){return ry||(ry={key:"type",base:null,typeMap:{"data-layer":ls,"map-layer":ol}}),ry}const sP={key:"type",base:null,typeMap:{"join-table":hr,"query-table":ni,raster:nl,table:nn}};let ls=_g=class extends F{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new _g({fields:e,dataSource:t})}};n([le({dataLayer:"data-layer"})],ls.prototype,"type",void 0),n([c({type:[Fv],json:{write:!0}})],ls.prototype,"fields",void 0),n([c({types:sP,json:{write:!0}})],ls.prototype,"dataSource",void 0),ls=_g=n([b("esri.layers.support.source.DataLayerSource")],ls),ls.from=Je(ls);var $g;const H2=new ye({upperLeft:"upper-left",lowerLeft:"lower-left"});let ln=$g=class extends F{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new $g(E({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};n([c({type:ft,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],ln.prototype,"extent",void 0),n([c({type:["view","edit"],json:{write:!0}})],ln.prototype,"mode",void 0),n([c({type:String,json:{read:H2.read,write:H2.write}})],ln.prototype,"originPosition",void 0),n([c({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],ln.prototype,"tolerance",void 0),ln=$g=n([b("esri.rest.support.QuantizationParameters")],ln);const iP=ln;var Mg;const K2=new ye({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let ts=Mg=class extends F{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=E(e))}clone(){return new Mg({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:E(this.statisticParameters)})}};n([c({type:Number,json:{write:!0}})],ts.prototype,"maxPointCount",void 0),n([c({type:Number,json:{write:!0}})],ts.prototype,"maxRecordCount",void 0),n([c({type:Number,json:{write:!0}})],ts.prototype,"maxVertexCount",void 0),n([c({type:String,json:{write:!0}})],ts.prototype,"onStatisticField",void 0),n([c({type:String,json:{write:!0}})],ts.prototype,"outStatisticFieldName",void 0),n([c({type:String,json:{read:{source:"statisticType",reader:K2.read},write:{target:"statisticType",writer:K2.write}}})],ts.prototype,"statisticType",void 0),n([c({type:Object})],ts.prototype,"statisticParameters",void 0),n([Y("statisticParameters")],ts.prototype,"writeStatisticParameters",null),ts=Mg=n([b("esri.rest.support.StatisticDefinition")],ts);const oP=ts;var Nl;const nP=new ye({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),lP=new ye({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ae=Nl=class extends F{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return T1(Nl,e)}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const s in e){const i=e[s];Array.isArray(i)?r[s]=i.map(o=>o instanceof Date?o.getTime():o):i instanceof Date?r[s]=i.getTime():r[s]=i}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new Nl(E({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:T(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};ae.MAX_MAX_RECORD_COUNT_FACTOR=5,n([c({json:{write:!0}})],ae.prototype,"aggregateIds",void 0),n([c({type:Boolean,json:{write:!0}})],ae.prototype,"cacheHint",void 0),n([c({type:Boolean,json:{default:!1,write:!0}})],ae.prototype,"compactGeometryEnabled",void 0),n([c({json:{write:!0}})],ae.prototype,"datumTransformation",void 0),n([ht("datumTransformation")],ae.prototype,"castDatumTransformation",null),n([c({type:Boolean,json:{default:!1,write:!0}})],ae.prototype,"defaultSpatialReferenceEnabled",void 0),n([c({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],ae.prototype,"distance",void 0),n([c({type:ls,json:{write:!0}})],ae.prototype,"dynamicDataSource",void 0),n([c({type:String,json:{write:!0}})],ae.prototype,"formatOf3DObjects",void 0),n([c({type:String,json:{write:!0}})],ae.prototype,"gdbVersion",void 0),n([c({types:ta,json:{read:Dr,write:!0}})],ae.prototype,"geometry",void 0),n([c({type:Number,json:{write:!0}})],ae.prototype,"geometryPrecision",void 0),n([c({type:[String],json:{write:!0}})],ae.prototype,"groupByFieldsForStatistics",void 0),n([c({type:String,json:{write:!0}})],ae.prototype,"having",void 0),n([c({type:Date})],ae.prototype,"historicMoment",void 0),n([Y("historicMoment")],ae.prototype,"writeHistoricMoment",null),n([c({type:Number,json:{write:!0}})],ae.prototype,"maxAllowableOffset",void 0),n([c({type:Number,cast:e=>e<1?1:e>Nl.MAX_MAX_RECORD_COUNT_FACTOR?Nl.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],ae.prototype,"maxRecordCountFactor",void 0),n([c({type:["xyFootprint"],json:{write:!0}})],ae.prototype,"multipatchOption",void 0),n([c({type:Number,json:{read:{source:"resultRecordCount"}}})],ae.prototype,"num",void 0),n([c({json:{write:!0}})],ae.prototype,"objectIds",void 0),n([c({type:[String],json:{write:!0}})],ae.prototype,"orderByFields",void 0),n([c({type:[String],json:{write:!0}})],ae.prototype,"outFields",void 0),n([c({type:Ae,json:{name:"outSR",write:!0}})],ae.prototype,"outSpatialReference",void 0),n([c({type:[oP],json:{write:{enabled:!0,overridePolicy(){return{enabled:T(this.outStatistics)&&this.outStatistics.length>0}}}}})],ae.prototype,"outStatistics",void 0),n([c({json:{write:!0}})],ae.prototype,"parameterValues",void 0),n([Y("parameterValues")],ae.prototype,"writeParameterValues",null),n([c({type:Ke,json:{write:!0}})],ae.prototype,"pixelSize",void 0),n([c({type:iP,json:{write:!0}})],ae.prototype,"quantizationParameters",void 0),n([c({type:[Object],json:{write:!0}})],ae.prototype,"rangeValues",void 0),n([c({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],ae.prototype,"relationParameter",void 0),n([c({type:String,json:{write:!0}})],ae.prototype,"resultType",void 0),n([c({type:Boolean,json:{default:!1,write:!0}})],ae.prototype,"returnCentroid",void 0),n([c({type:Boolean,json:{default:!1,write:!0}})],ae.prototype,"returnDistinctValues",void 0),n([c({type:Boolean,json:{default:!0,write:!0}})],ae.prototype,"returnExceededLimitFeatures",void 0),n([c({type:Boolean,json:{write:!0}})],ae.prototype,"returnGeometry",void 0),n([c({type:Boolean,json:{default:!1,write:!0}})],ae.prototype,"returnQueryGeometry",void 0),n([c({type:Boolean,json:{default:!1,write:!0}})],ae.prototype,"returnM",void 0),n([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ae.prototype,"returnZ",void 0),n([c({type:Ae,json:{write:!0}})],ae.prototype,"sourceSpatialReference",void 0),n([le(nP,{ignoreUnknown:!1,name:"spatialRel"})],ae.prototype,"spatialRelationship",void 0),n([c({type:Number,json:{read:{source:"resultOffset"}}})],ae.prototype,"start",void 0),n([Y("start"),Y("num")],ae.prototype,"writeStart",null),n([c({type:String,json:{write:!0}})],ae.prototype,"sqlFormat",void 0),n([c({type:String,json:{write:!0}})],ae.prototype,"text",void 0),n([c({type:Oi,json:{write:!0}})],ae.prototype,"timeExtent",void 0),n([c({type:Boolean,json:{default:!1,write:!0}})],ae.prototype,"timeReferenceUnknownClient",void 0),n([le(lP,{ignoreUnknown:!1}),c({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],ae.prototype,"units",void 0),n([c({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start>0}}}}})],ae.prototype,"where",void 0),n([Y("where")],ae.prototype,"writeWhere",null),ae=Nl=n([b("esri.rest.support.Query")],ae);const ll=ae;var Ig;const sy=new ye({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),iy=new ye({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let js=Ig=class extends F{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:s,timeExtent:i,objectIds:o,units:l,distance:u}=this;return new ll(I({geometry:E(r),objectIds:E(o),spatialRelationship:s,timeExtent:E(i),where:t,units:l,distance:u},e))}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:s,objectIds:i,units:o,distance:l}=this;return new Ig({geometry:E(t),objectIds:E(i),spatialRelationship:r,timeExtent:E(s),where:e,units:o,distance:l})}};n([c({type:String,json:{write:!0}})],js.prototype,"where",void 0),n([c({types:ta,json:{write:!0}})],js.prototype,"geometry",void 0),n([c({type:sy.apiValues,json:{name:"spatialRel",read:{reader:sy.read},write:{allowNull:!1,writer:sy.write,overridePolicy(){return{enabled:T(this.geometry)}}}}})],js.prototype,"spatialRelationship",void 0),n([c({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],js.prototype,"distance",void 0),n([c({type:[Number],json:{write:!0}})],js.prototype,"objectIds",void 0),n([c({type:iy.apiValues,json:{read:iy.read,write:{writer:iy.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],js.prototype,"units",void 0),n([c({type:Oi,json:{write:!0}})],js.prototype,"timeExtent",void 0),js=Ig=n([b("esri.layers.support.FeatureFilter")],js);const aP=js;var Og;let an=Og=class extends F{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){const r=super.write(e,t);if(t!=null&&t.origin){if(r.filter){const o=Object.keys(r.filter);var s;if(o.length>1||o[0]!=="where")return(s=t.messages)==null||s.push(new C("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}var i;if("showExcludedLabels"in r)return(i=t.messages)==null||i.push(new C("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return r}clone(){return new Og({filter:T(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};n([c({type:aP,json:{write:{allowNull:!0,writer(e,t,r,s){const i=e==null?void 0:e.write({},s);i&&Object.keys(i).length!==0?Sr(r,i,t):Sr(r,null,t)}}}})],an.prototype,"filter",void 0),n([c({json:{write:!0,origins:{"web-map":{read:{reader:yg},write:{writer:mg,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}}}}})],an.prototype,"includedEffect",void 0),n([c({json:{write:!0,origins:{"web-map":{read:{reader:yg},write:{writer:mg,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}}}}})],an.prototype,"excludedEffect",void 0),n([c({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":{name:"showExcludedLabels",default:!0}}}})],an.prototype,"excludedLabelsVisible",void 0),an=Og=n([b("esri.layers.support.FeatureEffect")],an);const uP=an,cP=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return n([c({type:uP,json:{origins:{"web-map":{write:{allowNull:!0}}}}})],t.prototype,"featureEffect",void 0),t=n([b("esri.layers.mixins.FeatureEffectLayer")],t),t},pP={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};function dP(e){if(!e)return e;const{start:t,end:r}=e;return new Oi({start:T(t)?Mn(t,-t.getTimezoneOffset(),"minutes"):t,end:T(r)?Mn(r,-r.getTimezoneOffset(),"minutes"):r})}function hP(e){if(!e)return e;const{start:t,end:r}=e;return new Oi({start:T(t)?Mn(t,t.getTimezoneOffset(),"minutes"):t,end:T(r)?Mn(r,r.getTimezoneOffset(),"minutes"):r})}var Eg;let hu=Eg=class extends F{async collectRequiredFields(e,t){return Mi(e,t,this.expression)}clone(){return new Eg({expression:this.expression,title:this.title})}};n([c({type:String,json:{write:!0}})],hu.prototype,"expression",void 0),n([c({type:String,json:{write:!0}})],hu.prototype,"title",void 0),hu=Eg=n([b("esri.layers.support.FeatureExpressionInfo")],hu);const Q2=hu;function fP(){const e=Object.keys(X3);return e.sort(),e}const yP=fP();var Tg;const yp=Lt()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),Z2=new ye({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let li=Tg=class extends F{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return e!=null?e:t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,r,s){t[r]=e.write({},s),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):T(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new Tg({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};n([c({type:Q2,json:{write:!0}})],li.prototype,"featureExpressionInfo",void 0),n([K("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],li.prototype,"readFeatureExpressionInfo",null),n([Y("featureExpressionInfo",{featureExpressionInfo:{type:Q2},"featureExpression.value":{type:[0]}})],li.prototype,"writeFeatureExpressionInfo",null),n([c({type:yp.apiValues,nonNullable:!0,json:{type:yp.jsonValues,read:yp.read,write:{writer:yp.write,isRequired:!0}}})],li.prototype,"mode",null),n([c({type:Number,json:{write:!0}})],li.prototype,"offset",void 0),n([c({type:yP,json:{type:String,read:Z2.read,write:Z2.write}})],li.prototype,"unit",null),li=Tg=n([b("esri.layers.support.ElevationInfo")],li);const mP=li,gP={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},UM={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},qM={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},vP={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Fn}}},bP={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},wP={value:null,type:mP,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function wq(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const xd={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},SP=pe(I({},xd),{json:pe(I({},xd.json),{origins:{"web-document":pe(I({},xd.json.origins["web-document"]),{write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}})},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&r.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?nh(t.layerDefinition.drawingInfo.transparency):void 0:nh(t.drawingInfo.transparency)}})}),Sq={type:Oi,readOnly:!0,get(){var e,t;if((e=this.layer)==null||!e.timeInfo)return null;const{datesInUnknownTimezone:r,timeOffset:s,useViewTime:i}=this.layer,o=(t=this.view)==null?void 0:t.timeExtent;let l=this.layer.timeExtent;r&&(l=hP(l));let u=i?o&&l?o.intersection(l):o||l:l;if(!u||u.isEmpty||u.isAllTime)return u;s&&(u=u.offset(-s.value,s.unit)),r&&(u=dP(u));const p=this._get("timeExtent");return u.equals(p)?p:u}},_q={type:ft,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=ft.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(r.spatialReference=Ae.fromJSON(t.spatialReference)),r}}}},read:!1}},_P={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},xP={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},$P={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},MP=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(r,s,i,o){(o&&o.layerContainerType==="ground"||r&&x4(this,i,{},o))&&(s[i]=r)}writeOperationalLayerType(r,s,i,o){!r||o&&o.layerContainerType==="tables"||(s.layerType=r)}writeTitle(r,s){s.title=r||"Layer"}read(r,s){s&&(s.layer=this),b4(this,r,i=>super.read(r,i),s)}write(r,s){if(s!=null&&s.origin){const p=`${s.origin}/${s.layerContainerType||"operational-layers"}`,d=pP[p];let h=d&&d[this.operationalLayerType];var i;if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&p==="web-scene/operational-layers"&&(h=!1),!h)return(i=s.messages)==null||i.push(new C("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${p}'`,{layer:this})),null}const o=super.write(r,pe(I({},s),{layer:this})),l=!!s&&!!s.messages&&!!s.messages.filter(p=>p instanceof C&&p.name==="web-document-write:property-required").length;var u;return ef(o==null?void 0:o.url)?(s==null||(u=s.messages)==null||u.push(new C("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&l?null:o}beforeSave(){}};return n([c({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),n([c({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],t.prototype,"listMode",void 0),n([Y("listMode")],t.prototype,"writeListMode",null),n([c({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),n([Y("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),n([c(xd)],t.prototype,"opacity",void 0),n([c({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),n([Y("title")],t.prototype,"writeTitle",null),n([c({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=n([b("esri.layers.mixins.OperationalLayer")],t),t};var jg;const oy=new ye({asc:"ascending",desc:"descending"});let al=jg=class extends F{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new jg({field:this.field,valueExpression:this.valueExpression,order:this.order})}};n([c({type:String,json:{write:!0}})],al.prototype,"field",void 0),n([c({type:String,json:{write:!0}})],al.prototype,"valueExpression",void 0),n([c({type:oy.apiValues,json:{read:oy.read,write:oy.write}})],al.prototype,"order",void 0),al=jg=n([b("esri.layers.support.OrderByInfo")],al);const BM=al;function IP(e,t,r){if(!e)return null;const s=e.find(o=>!!o.field);if(!s)return null;const i=new BM;return i.read(s,r),[i]}function OP(e,t,r,s){const i=e.find(o=>!!o.field);i&&Sr(r,[i.toJSON()],t)}const EP=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return n([c({type:[BM],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:IP},write:{target:"layerDefinition.orderBy",writer:OP}}})],t.prototype,"orderBy",void 0),t=n([b("esri.layers.mixins.OrderedLayer")],t),t};function xq(e,t,r){return vi(e.map((s,i)=>t.apply(r,[s,i])))}function $q(e,t,r){return vi(e.map((s,i)=>t.apply(r,[s,i]))).then(s=>s.map(i=>i.value))}function GM(e){return X(e)?pj():e.then(t=>({ok:!0,value:t})).catch(t=>({ok:!1,error:t}))}function Mq(e){return e.then(t=>({ok:!0,value:t})).catch(t=>(pc(t),{ok:!1,error:t}))}const TP=Z.getLogger("esri.portal.PortalItemResource");let Yi=class extends st{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?pe(I({},e),{path:this._normalizePath(e.path,e.portalItem)}):e}set path(e){T(e)&&vr(e)?TP.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const r=this.url;if(X(r))throw new C("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(r,{responseType:e,query:{token:this.portalItem.apiKey},signal:_T(t,"signal")})}async update(e,t){return(await import("./resourceUtils.97396316.js")).addOrUpdateResource(this,"update",e,t)}hasPath(){return T(this.path)}_normalizePath(e,t){return X(e)?e:(e=e.replace(/^\/+/,""),T(t)&&vr(e)&&(e=uv(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};n([c()],Yi.prototype,"portalItem",void 0),n([c({type:String,value:null})],Yi.prototype,"path",null),n([ht("path")],Yi.prototype,"_castPath",null),n([c({type:String,readOnly:!0})],Yi.prototype,"url",null),n([c({type:String,readOnly:!0})],Yi.prototype,"itemRelativeUrl",null),Yi=n([b("esri.portal.PortalItemResource")],Yi);const jP=Yi;let fu=class extends st{constructor(e){super(e),this.created=null,this.rating=null}};n([c()],fu.prototype,"created",void 0),n([c()],fu.prototype,"rating",void 0),fu=n([b("esri.portal.PortalRating")],fu);const ny=fu;var ul;let $e=ul=class extends F1(tf){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return T1(ul,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":e==="Image Service"?r=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Media Service"?r="Media Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?r=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":e==="Geocoding Service"?r="Locator":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.indexOf("Spatiotemporal")===-1&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&t.indexOf("Relational")===-1?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?r=e.replace(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.indexOf("configurableApp")>-1&&(r="Instant App"),r}readExtent(e){return e&&e.length?new ft(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],r="esri/images/portal/",s="16";let i,o=!1,l=!1,u=!1,p=!1,d=!1,h=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(o=t.indexOf("Hosted Service")>-1,e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(l=t.indexOf("Table")>-1,u=t.indexOf("Route Layer")>-1,p=t.indexOf("Markup")>-1,d=t.indexOf("Spatiotemporal")!==-1,h=t.indexOf("UtilityNetwork")!==-1,i=d&&l?"spatiotemporaltable":l?"table":u?"routelayer":p?"markup":d?"spatiotemporal":o?"featureshosted":h?"utilitynetwork":"features"):i=e==="map service"||e==="wms"||e==="wmts"?o||t.indexOf("Tiled")>-1||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.indexOf("Line")>-1?"sceneweblayerline":t.indexOf("3DObject")>-1?"sceneweblayermultipatch":t.indexOf("Point")>-1?"sceneweblayerpoint":t.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":t.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":t.indexOf("Polygon")>-1?"sceneweblayerpolygon":t.indexOf("Building")>-1?"sceneweblayerbuilding":t.indexOf("Voxel")>-1?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.indexOf("Elevation 3D Layer")>-1?"elevationlayer":t.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="media service"?"mediaservice":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"&&t.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):i=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.indexOf("configurableApp")>-1?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.indexOf("ArcGIS Pro")>-1||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="360 vr experience"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.indexOf("Explorer Mapping Application")>-1||t.indexOf("Document")>-1?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="hub project"?"hubproject":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="experience builder widget"?"experiencebuilderwidget":e==="experience builder widget package"?"experiencebuilderwidgetpackage":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":"maps",i?Ic(r+i+s+".png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=ur.getDefault());const t=this.portal.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:T(e)?e.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof ny&&(e=e.rating),isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then(()=>new ny({rating:e,created:new Date}))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:E(this.applicationProxies),avgRating:this.avgRating,categories:E(this.categories),created:E(this.created),culture:this.culture,description:this.description,extent:E(this.extent),groupCategories:E(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:E(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:E(this.screenshots),size:this.size,snippet:this.snippet,tags:E(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:E(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new ul({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",pe(I({responseType:e},t),{query:{token:this.apiKey}}))}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",I({query:{token:this.apiKey}},e)).then(t=>t.rating!=null?(t.created=new Date(t.created),new ny(t)):null)}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",I({query:pe(I({},e),{token:this.apiKey})},t),ul)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e&&e.data,r={method:"post"};r.query=this.createPostQuery();for(const s in r.query)r.query[s]===null&&(r.query[s]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new C("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e.thumbnail,r=e.filename,s={method:"post"};if(typeof t=="string")Ln(t)?s.query={data:t}:s.query={url:cs(t)},T(r)&&(s.query.filename=r);else{const i=new FormData;T(r)?i.append("file",t,r):i.append("file",t),s.body=i}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,s).then(()=>this.reload())}):Promise.reject(new C("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await import("./resourceUtils.97396316.js")).fetchResources(this,e,t)}async addResource(e,t,r){const s=await import("./resourceUtils.97396316.js");return e.portalItem=this,s.addOrUpdateResource(e,"add",t,r)}async removeResource(e,t){const r=await import("./resourceUtils.97396316.js");if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new C("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r.removeResource(this,e,t)}async removeAllResources(e){return(await import("./resourceUtils.97396316.js")).removeAllResources(this,e)}resourceFromPath(e){return new jP({portalItem:this,path:e})}toJSON(){const e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return D_(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new ul({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};n([c({type:["private","shared","org","public"]})],$e.prototype,"access",void 0),n([c()],$e.prototype,"accessInformation",void 0),n([c({type:String})],$e.prototype,"apiKey",void 0),n([c({json:{read:{source:"appProxies"}}})],$e.prototype,"applicationProxies",void 0),n([c()],$e.prototype,"avgRating",void 0),n([c()],$e.prototype,"categories",void 0),n([c({type:Date})],$e.prototype,"created",void 0),n([c()],$e.prototype,"culture",void 0),n([c()],$e.prototype,"description",void 0),n([c({readOnly:!0})],$e.prototype,"displayName",null),n([c({type:ft})],$e.prototype,"extent",void 0),n([K("extent")],$e.prototype,"readExtent",null),n([c()],$e.prototype,"groupCategories",void 0),n([c({readOnly:!0})],$e.prototype,"iconUrl",null),n([c()],$e.prototype,"id",void 0),n([c({readOnly:!0})],$e.prototype,"isLayer",null),n([c()],$e.prototype,"itemControl",void 0),n([c({readOnly:!0})],$e.prototype,"itemUrl",null),n([c()],$e.prototype,"licenseInfo",void 0),n([c({type:Date})],$e.prototype,"modified",void 0),n([c()],$e.prototype,"name",void 0),n([c()],$e.prototype,"numComments",void 0),n([c()],$e.prototype,"numRatings",void 0),n([c()],$e.prototype,"numViews",void 0),n([c()],$e.prototype,"owner",void 0),n([c()],$e.prototype,"ownerFolder",void 0),n([c({type:ur})],$e.prototype,"portal",void 0),n([c()],$e.prototype,"screenshots",void 0),n([c()],$e.prototype,"size",void 0),n([c()],$e.prototype,"snippet",void 0),n([c()],$e.prototype,"sourceJSON",void 0),n([c()],$e.prototype,"tags",void 0),n([c()],$e.prototype,"thumbnail",void 0),n([c({readOnly:!0})],$e.prototype,"thumbnailUrl",null),n([c()],$e.prototype,"title",void 0),n([c()],$e.prototype,"type",void 0),n([c()],$e.prototype,"typeKeywords",void 0),n([c()],$e.prototype,"url",void 0),n([c({readOnly:!0})],$e.prototype,"userItemUrl",null),$e=ul=n([b("esri.portal.PortalItem")],$e);const Ag=$e;var JM=Object.freeze(Object.defineProperty({__proto__:null,default:Ag},Symbol.toStringTag,{value:"Module"}));const AP=Z.getLogger("esri.layers.mixins.PortalLayer"),CP=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var r;(r=this.portalItem)==null||r.destroy(),this.portalItem=null}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,s,i){if(s.itemId)return new Ag({id:s.itemId,portal:i&&i.portal})}writePortalItem(r,s){r&&r.id&&(s.itemId=r.id)}async loadFromPortal(r,s){if(this.portalItem&&this.portalItem.id)try{const i=await import("./layersLoader.c224cd9d.js").then(function(o){return o.l});return qs(s),await i.load({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData},s)}catch(i){throw Js(i)||AP.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${i}`),i}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(s=>(pc(s),!0)))}async _fetchUserHasEditingPrivileges(r){const s=this.url?dt==null?void 0:dt.findCredential(this.url):null;if(!s)return!0;const i=mp.credential===s?mp.user:await this._fetchEditingUser(r);return mp.credential=s,mp.user=i,X(i)||i.privileges==null||i.privileges.includes("features:user:edit")}async _fetchEditingUser(r){var s,i;const o=(s=this.portalItem)==null||(i=s.portal)==null?void 0:i.user;if(o)return o;const l=dt.findServerInfo(this.url);if(l==null||!l.owningSystemUrl)return null;const u=`${l.owningSystemUrl}/sharing/rest`,p=ur.getDefault();if(p&&p.loaded&&ys(p.restUrl)===ys(u))return p.user;const d=`${u}/community/self`,h=T(r)?r.signal:null,f=await GM(at(d,{authMode:"no-prompt",query:{f:"json"},signal:h}));return f.ok?yv.fromJSON(f.value.data):null}read(r,s){s&&(s.layer=this),super.read(r,s)}write(r,s){const i=s&&s.portal,o=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||ur.getDefault());return i&&o&&!l3(o.restUrl,i.restUrl)?(s.messages&&s.messages.push(new C("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,pe(I({},s),{layer:this}))}};return n([c({type:Ag})],t.prototype,"portalItem",null),n([K("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),n([Y("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),n([c({clonable:!1})],t.prototype,"resourceReferences",void 0),n([c({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=n([b("esri.layers.mixins.PortalLayer")],t),t},mp={credential:null,user:null},nc=new et,Nu=new WeakMap;function RP(e){WM(e)&&nc.push(e)}function FP(e){WM(e)&&nc.includes(e)&&nc.remove(e)}function WM(e){return e&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function HM(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:HM(t,e%t):0}let ly=0,gp=0;function kP(){const e=Date.now();for(const r of nc)if(r.refreshInterval){var t;e-((t=Nu.get(r))!=null?t:0)+5>=6e4*r.refreshInterval&&(Nu.set(r,e),r.refresh(e))}}bj(()=>{const e=Date.now();let t=0;for(const r of nc)t=HM(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?Nu.get(r)||Nu.set(r,e):Nu.delete(r);if(t!==gp){if(gp=t,clearInterval(ly),gp===0)return void(ly=0);ly=setInterval(kP,gp)}});const NP=e=>{let t=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=nx(()=>this.hasDataChanged()),this.when().then(()=>{RP(this)},()=>{})}destroy(){FP(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){cj(this._debounceHasDataChanged()).then(s=>{s&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:s})},s=>{Z.getLogger(this.declaredClass).error(s),this.emit("refresh",{dataChanged:!1,error:s})})}async hasDataChanged(){return!0}};return n([c({type:Number,cast:r=>r>=.1?r:r<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),n([c({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),n([c()],t.prototype,"refreshParameters",null),t=n([b("esri.layers.mixins.RefreshableLayer")],t),t},PP=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},s=this.parent;s&&"effectiveScaleRange"in s&&LP(r,s.effectiveScaleRange);const i=this._get("effectiveScaleRange");return i&&i.minScale===r.minScale&&i.maxScale===r.maxScale?i:r}};return n([c({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),n([c({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),n([c({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=n([b("esri.layers.mixins.ScaleRangeLayer")],t),t};function LP(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const bn=Lt()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var Cg;let yu=Cg=class extends F{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return eP(this.value,this.unit,"milliseconds")}clone(){return new Cg({value:this.value,unit:this.unit})}};n([c({type:Number,json:{write:!0},nonNullable:!0})],yu.prototype,"value",void 0),n([c({type:bn.apiValues,json:{type:bn.jsonValues,read:bn.read,write:bn.write},nonNullable:!0})],yu.prototype,"unit",void 0),yu=Cg=n([b("esri.TimeInterval")],yu);const lc=yu;var Rg;let cl=Rg=class extends F{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return t.respectsDaylightSaving!==void 0?t.respectsDaylightSaving:t.respectDaylightSaving!==void 0&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new Rg({respectsDaylightSaving:e,timezone:t})}};n([c({type:Boolean,json:{write:!0}})],cl.prototype,"respectsDaylightSaving",void 0),n([K("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],cl.prototype,"readRespectsDaylightSaving",null),n([c({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],cl.prototype,"timezone",void 0),cl=Rg=n([b("esri.layers.support.TimeReference")],cl);const DP=cl;var Fg;let Ut=Fg=class extends F{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||t.timeExtent.length!==2)return null;const r=new Date(t.timeExtent[0]),s=new Date(t.timeExtent[1]);return new Oi({start:r,end:s})}writeFullTimeExtent(e,t){e&&T(e.start)&&T(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new lc({value:t.timeInterval,unit:bn.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new lc({value:t.defaultTimeInterval,unit:bn.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:r,interval:s,startField:i,timeReference:o,fullTimeExtent:l,trackIdField:u,useTime:p}=this;return new Fg({cumulative:e,endField:t,hasLiveData:r,interval:s,startField:i,timeReference:E(o),fullTimeExtent:E(l),trackIdField:u,useTime:p})}};n([c({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],Ut.prototype,"cumulative",void 0),n([c({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],Ut.prototype,"endField",void 0),n([c({type:Oi,json:{write:{enabled:!0,allowNull:!0}}})],Ut.prototype,"fullTimeExtent",void 0),n([K("fullTimeExtent",["timeExtent"])],Ut.prototype,"readFullTimeExtent",null),n([Y("fullTimeExtent")],Ut.prototype,"writeFullTimeExtent",null),n([c({type:Boolean,json:{write:!0}})],Ut.prototype,"hasLiveData",void 0),n([c({type:lc,json:{write:{enabled:!0,allowNull:!0}}})],Ut.prototype,"interval",void 0),n([K("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Ut.prototype,"readInterval",null),n([Y("interval")],Ut.prototype,"writeInterval",null),n([c({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],Ut.prototype,"startField",void 0),n([c({type:DP,json:{write:{enabled:!0,allowNull:!0}}})],Ut.prototype,"timeReference",void 0),n([c({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Ut.prototype,"trackIdField",void 0),n([c({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],Ut.prototype,"useTime",void 0),Ut=Fg=n([b("esri.layers.support.TimeInfo")],Ut);const KM=Ut,zP=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,s){const i=s.timeInfo.exportOptions;if(!i)return null;const o=i.timeOffset,l=bn.fromJSON(i.timeOffsetUnits);return o&&l?new lc({value:o,unit:l}):null}set timeInfo(r){s$(r,this.fieldsIndex),this._set("timeInfo",r)}};return n([c({type:Oi,json:{write:!1}})],t.prototype,"timeExtent",void 0),n([c({type:lc})],t.prototype,"timeOffset",void 0),n([K("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),n([c({value:null,type:KM,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),n([c({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=n([b("esri.layers.mixins.TemporalLayer")],t),t};var kg;let hi=kg=class extends F{constructor(e){super(e)}clone(){const{name:e,fields:t,isAscending:r,isUnique:s,description:i}=this;return new kg({name:e,fields:t,isAscending:r,isUnique:s,description:i})}};n([c({constructOnly:!0})],hi.prototype,"name",void 0),n([c({constructOnly:!0})],hi.prototype,"fields",void 0),n([c({constructOnly:!0})],hi.prototype,"isAscending",void 0),n([c({constructOnly:!0})],hi.prototype,"isUnique",void 0),n([c({constructOnly:!0})],hi.prototype,"description",void 0),hi=kg=n([b("esri.layers.support.FeatureIndex")],hi);let $d=class extends F{constructor(){super(...arguments),this.type=null}};n([c({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],$d.prototype,"type",void 0),$d=n([b("esri.layers.support.FeatureReduction")],$d);const Md=$d;var Ng;let pl=Ng=class extends F{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new Ng({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};n([c({type:String,json:{write:!0}})],pl.prototype,"statisticType",void 0),n([c({type:String,json:{write:!0}})],pl.prototype,"onStatisticField",void 0),n([c({type:String,json:{write:!0}})],pl.prototype,"onStatisticValueExpression",void 0),pl=Ng=n([b("esri.layers.support.OutStatistic")],pl);const VP=pl;var Pg;let mu=Pg=class extends F{constructor(){super(...arguments),this.name=null}clone(){return new Pg({name:this.name,outStatistic:this.outStatistic.clone()})}};n([c({type:String,json:{write:!0}})],mu.prototype,"name",void 0),n([c({type:VP,json:{write:!0}})],mu.prototype,"outStatistic",void 0),mu=Pg=n([b("esri.layers.support.AggregateField")],mu);const UP=mu,zv="__begin__",Vv="__end__",qP=new RegExp(zv,"ig"),BP=new RegExp(Vv,"ig"),Y2=new RegExp("^"+zv,"i"),X2=new RegExp(Vv+"$","i"),mh='"',GP=mh+" + ",JP=" + "+mh;function WP(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function HP(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function Uv(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=WP(e.labelExpression),t.type="conventional"),t}function KP(e){const t=Uv(e);if(!t)return null;switch(t.type){case"conventional":return Lg(t.expression);case"arcade":return t.expression}return null}function QP(e){const t=Uv(e);if(!t)return null;switch(t.type){case"conventional":return YP(t.expression);case"arcade":return QM(t.expression)}return null}function Lg(e){let t;return e?(t=Fh(e,r=>zv+'$feature["'+r+'"]'+Vv),t=Y2.test(t)?t.replace(Y2,""):mh+t,t=X2.test(t)?t.replace(X2,""):t+mh,t=t.replace(qP,GP).replace(BP,JP)):t='""',t}const ZP=/^\s*\{([^}]+)\}\s*$/i;function YP(e){const t=e.match(ZP);return t&&t[1].trim()||null}const XP=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,eL=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,tL=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function QM(e){if(!e)return null;let t=XP.exec(e)||eL.exec(e);return t?t[1]||t[3]:(t=tL.exec(e),t?t[2]:null)}var Dg;let Xi=Dg=class extends F{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?Lg(t.value):e}writeExpression(e,t,r){this.value!=null&&(e=Lg(this.value)),e!=null&&(t[r]=e)}clone(){return new Dg({expression:this.expression,title:this.title,value:this.value})}};n([c({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Xi.prototype,"expression",void 0),n([K("expression",["expression","value"])],Xi.prototype,"readExpression",null),n([Y("expression")],Xi.prototype,"writeExpression",null),n([c({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Xi.prototype,"title",void 0),n([c({json:{read:!1,write:!1}})],Xi.prototype,"value",void 0),Xi=Dg=n([b("esri.layers.support.LabelExpressionInfo")],Xi);const ZM=Xi,YM=[252,146,31,255],rL={type:"esriSMS",style:"esriSMSCircle",size:6,color:YM,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},sL={type:"esriSLS",style:"esriSLSSolid",width:.75,color:YM},iL={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},oL={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},nL={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},lL={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},aL={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};pa.fromJSON(rL);zr.fromJSON(sL);Dn.fromJSON(iL);const uL=zn.fromJSON(oL);pa.fromJSON(nL);zr.fromJSON(lL);Dn.fromJSON(aL);var zg;const vp=new ye({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function XM(e){return!e||e.origin!=="service"&&!eI(e.layer)}function eI(e){return(e==null?void 0:e.type)==="map-image"}function tI(e){var t,r;return!!eI(e)&&!((t=e.capabilities)==null||(r=t.exportMap)==null||!r.supportsArcadeExpressionForLabeling)}function cL(e){return XM(e)||tI(e.layer)}let pt=zg=class extends F{constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=uL,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const r=function(s,i,o){switch(i){case"=":return s==o;case"<>":return s!=o;case">":return s>o;case">=":return s>=o;case"<":return s<o;case"<=":return s<=o}return!1};try{if(e==null)return!0;const s=e.split(" ");if(s.length===3)return r(t[s[0]],s[1],s[2]);if(s.length===7){const i=r(t[s[0]],s[1],s[2]),o=s[3],l=r(t[s[4]],s[5],s[6]);switch(o){case"AND":return i&&l;case"OR":return i||l}}return!1}catch{console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=HP(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const s=QM(this.labelExpressionInfo.expression);s&&(e="["+s+"]")}}e!=null&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,s){if(e==null&&this.labelExpression!=null&&XM(s))e=new ZM({expression:this.getLabelExpressionArcade()});else if(!e)return;const i=e.toJSON(s);i.expression&&(t[r]=i)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return Uv(this)}getLabelExpressionArcade(){return KP(this)}getLabelExpressionSingleField(){return QP(this)}hash(){return JSON.stringify(this)}clone(){return new zg({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:E(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:E(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};n([c({type:String,json:{write:!0}})],pt.prototype,"name",void 0),n([c({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],pt.prototype,"allowOverrun",void 0),n([c({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],pt.prototype,"deconflictionStrategy",void 0),n([c({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&(r==null?void 0:r.origin)==="service"&&tI(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],pt.prototype,"labelExpression",void 0),n([K("labelExpression")],pt.prototype,"readLabelExpression",null),n([Y("labelExpression")],pt.prototype,"writeLabelExpression",null),n([c({type:ZM,json:{write:{overridePolicy:(e,t,r)=>cL(r)?{allowNull:!0}:{enabled:!1}}}})],pt.prototype,"labelExpressionInfo",void 0),n([Y("labelExpressionInfo")],pt.prototype,"writeLabelExpressionInfo",null),n([c({type:vp.apiValues,json:{type:vp.jsonValues,read:vp.read,write:vp.write}})],pt.prototype,"labelPlacement",void 0),n([c({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],pt.prototype,"labelPosition",void 0),n([c({type:Number})],pt.prototype,"maxScale",void 0),n([Y("maxScale")],pt.prototype,"writeMaxScale",null),n([c({type:Number})],pt.prototype,"minScale",void 0),n([Y("minScale")],pt.prototype,"writeMinScale",null),n([c({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],pt.prototype,"repeatLabel",void 0),n([c({type:Number,cast:Pe,json:{write:!0,origins:{"web-scene":{write:!1}}}})],pt.prototype,"repeatLabelDistance",void 0),n([c({types:N8,json:{origins:{"web-scene":{types:P8,write:s2,default:null}},write:s2,default:null}})],pt.prototype,"symbol",void 0),n([c({type:Boolean,json:{write:!0}})],pt.prototype,"useCodedValues",void 0),n([c({type:String,json:{write:!0}})],pt.prototype,"where",void 0),pt=zg=n([b("esri.layers.support.LabelClass")],pt);const qv=pt;var Vg;let fr=Vg=class extends F{constructor(e){super(e),this.type="cluster",this.clusterRadius=Pe("80px"),this.clusterMinSize=Pe("12px"),this.clusterMaxSize=Pe("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new Vg({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:E(this.labelingInfo),labelsVisible:this.labelsVisible,fields:E(this.fields),popupEnabled:this.popupEnabled,popupTemplate:E(this.popupTemplate)})}};n([c({type:["cluster"],readOnly:!0,json:{write:!0}})],fr.prototype,"type",void 0),n([c({type:Number,cast:e=>e==="auto"?e:Pe(e),json:{write:!0}})],fr.prototype,"clusterRadius",void 0),n([c({type:Number,cast:Pe,json:{write:!0}})],fr.prototype,"clusterMinSize",void 0),n([c({type:Number,cast:Pe,json:{write:!0}})],fr.prototype,"clusterMaxSize",void 0),n([c(UM)],fr.prototype,"popupEnabled",void 0),n([c({type:ra,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],fr.prototype,"popupTemplate",void 0),n([c({types:F8})],fr.prototype,"symbol",void 0),n([c({type:[qv],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],fr.prototype,"labelingInfo",void 0),n([c(qM)],fr.prototype,"labelsVisible",void 0),n([c({type:[UP],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],fr.prototype,"fields",void 0),fr=Vg=n([b("esri.layers.support.FeatureReductionCluster")],fr);const eS=fr;var Ug;let Id=Ug=class extends Md{constructor(e){super(e),this.type="selection"}clone(){return new Ug}};n([c({type:["selection"]})],Id.prototype,"type",void 0),Id=Ug=n([b("esri.layers.support.FeatureReductionSelection")],Id);const tS=Id,pL={types:{key:"type",base:Md,typeMap:{selection:tS,cluster:eS}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:{key:"type",base:Md,typeMap:{selection:eS}}},"web-scene":{types:{key:"type",base:Md,typeMap:{selection:tS}}}}}},rS=new ye({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let eo=class extends Ii(F){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};n([c({json:{write:!0}})],eo.prototype,"name",void 0),n([c({json:{write:!0}})],eo.prototype,"description",void 0),n([c({json:{read:rS.read,write:rS.write}})],eo.prototype,"drawingTool",void 0),n([c({json:{write:!0}})],eo.prototype,"prototype",void 0),n([c({json:{write:!0}})],eo.prototype,"thumbnail",void 0),eo=n([b("esri.layers.support.FeatureTemplate")],eo);const Bv=eo;let ai=class extends Ii(F){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const r of Object.keys(e))t[r]=jv(e[r]);return t}writeDomains(e,t){const r={};for(const i of Object.keys(e)){var s;e[i]&&(r[i]=(s=e[i])==null?void 0:s.toJSON())}t.domains=r}};n([c({json:{write:!0}})],ai.prototype,"id",void 0),n([c({json:{write:!0}})],ai.prototype,"name",void 0),n([c({json:{write:!0}})],ai.prototype,"domains",void 0),n([K("domains")],ai.prototype,"readDomains",null),n([Y("domains")],ai.prototype,"writeDomains",null),n([c({type:[Bv],json:{write:!0}})],ai.prototype,"templates",void 0),ai=n([b("esri.layers.support.FeatureType")],ai);const rI=ai;function dL(e){return e.type==="date"||e.type==="esriFieldTypeDate"}function sS(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function iS(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}class hL{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;const r=[];for(const s of t){const i=s&&s.name;if(i){const o=oS(i);this._fieldsMap.set(i,s),this._fieldsMap.set(o,s),r.push(o),dL(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):l$(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),sS(s)||iS(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}r.sort(),this.uid=r.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)sS(t)||iS(t)||t.nullable||jA(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){return t!=null?this._fieldsMap.get(t)||this._fieldsMap.get(oS(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const r=this.get(t);if(r)return r.name}}function oS(e){return e.toLowerCase().trim()}const fL=Z.getLogger("esri.layers.support.fieldProperties");function yL(){return{fields:{type:[Fv],value:null},fieldsIndex:{readOnly:!0,get(){return new hL(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex.has(t)||fL.error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return MA(this.fieldsIndex,e)}}}}let dl=class extends Ii(F){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};n([c({type:String,json:{read:{source:"shapeAreaFieldName"}}})],dl.prototype,"shapeAreaField",void 0),n([c({type:String,json:{read:{source:"shapeLengthFieldName"}}})],dl.prototype,"shapeLengthField",void 0),n([c({type:String,json:{read:e=>fF.read(e)||yF.read(e)}})],dl.prototype,"units",void 0),dl=n([b("esri.layers.support.GeometryFieldsInfo")],dl);const mL=dl,gL=/\[([^\[\]]+)\]/gi;function nS(e,t,r){return e?e.map(s=>{const i=new qv;if(i.read(s,r),i.labelExpression){const o=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;i.labelExpression=i.labelExpression.replace(gL,(l,u)=>`[${vL(u,o)}]`)}return i}):null}function vL(e,t){if(!t)return e;const r=e.toLowerCase();for(let s=0;s<t.length;s++){const i=t[s].name;if(i.toLowerCase()===r)return i}return e}var qg;let hl=qg=class extends F{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new et}clone(){return new qg({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};n([c({type:String,json:{write:!0}})],hl.prototype,"floorField",void 0),n([c({json:{read:!1,write:!1}})],hl.prototype,"viewAllMode",void 0),n([c({json:{read:!1,write:!1}})],hl.prototype,"viewAllLevelIds",void 0),hl=qg=n([b("esri.layers.support.LayerFloorInfo")],hl);const bL=hl,lS=new ye({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),aS=new ye({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let kr=class extends Ii(F){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};n([c({json:{read:lS.read,write:lS.write}})],kr.prototype,"cardinality",void 0),n([c({json:{read:!0,write:!0}})],kr.prototype,"composite",void 0),n([c({json:{read:!0,write:!0}})],kr.prototype,"id",void 0),n([c({json:{read:!0,write:!0}})],kr.prototype,"keyField",void 0),n([c({json:{read:!0,write:!0}})],kr.prototype,"keyFieldInRelationshipTable",void 0),n([c({json:{read:!0,write:!0}})],kr.prototype,"name",void 0),n([c({json:{read:!0,write:!0}})],kr.prototype,"relatedTableId",void 0),n([c({json:{read:!0,write:!0}})],kr.prototype,"relationshipTableId",void 0),n([c({json:{read:aS.read,write:aS.write}})],kr.prototype,"role",void 0),kr=n([b("esri.layers.support.Relationship")],kr);const wL=kr,rs=[];function SL(e,t){if(FM(e.url))return!0;const{wkid:r}=t;for(const s of rs){if(e.version>=s[0])return!0;if(typeof s[1]=="function"&&(s[1]=s[1]()),s[1].has(r))return!1}return!0}rs.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102960;t++)e.add(t);return e}]),rs.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),rs.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),rs.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),rs.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);for(let t=103696;t<=103698;t++)e.add(t);return e}]),rs.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),rs.push([10.61,()=>new Set([102497])]),rs.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),rs.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),rs.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);async function _L(e,t,r){const s=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(s&&s.type==="unique-value"&&s.styleOrigin){const i=await GM(s.populateFromStyle());if(qs(r),i.ok===!1){const o=i.error;t&&t.messages&&t.messages.push(new _r("renderer:style-reference",`Failed to create unique value renderer from style reference: ${o.message}`,{error:o,context:t})),e.clear("renderer",t.origin)}}}var Bg;let kt=Bg=class extends F{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new Bg(E({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};n([c({type:[String],json:{write:!0}})],kt.prototype,"attachmentTypes",void 0),n([c({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],kt.prototype,"attachmentsWhere",void 0),n([c({type:[String],json:{write:!0}})],kt.prototype,"keywords",void 0),n([c({type:[Number],json:{write:!0}})],kt.prototype,"globalIds",void 0),n([c({json:{write:!0}})],kt.prototype,"name",void 0),n([c({type:Number,json:{read:{source:"resultRecordCount"}}})],kt.prototype,"num",void 0),n([c({type:[Number],json:{write:!0}})],kt.prototype,"objectIds",void 0),n([c({type:Boolean,json:{default:!1,write:!0}})],kt.prototype,"returnMetadata",void 0),n([c({type:[Number],json:{write:!0}})],kt.prototype,"size",void 0),n([c({type:Number,json:{read:{source:"resultOffset"}}})],kt.prototype,"start",void 0),n([Y("start"),Y("num")],kt.prototype,"writeStart",null),n([c({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],kt.prototype,"where",void 0),kt=Bg=n([b("esri.rest.support.AttachmentQuery")],kt),kt.from=Je(kt);const xL=kt;var Gg;let lt=Gg=class extends F{constructor(e){super(e),this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new Gg(E({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};n([c({type:ls,json:{write:!0}})],lt.prototype,"dynamicDataSource",void 0),n([c({type:String,json:{write:!0}})],lt.prototype,"gdbVersion",void 0),n([c({type:Number,json:{write:!0}})],lt.prototype,"geometryPrecision",void 0),n([c({type:Date})],lt.prototype,"historicMoment",void 0),n([Y("historicMoment")],lt.prototype,"_writeHistoricMoment",null),n([c({type:Number,json:{write:!0}})],lt.prototype,"maxAllowableOffset",void 0),n([c({type:[Number],json:{write:!0}})],lt.prototype,"objectIds",void 0),n([c({type:[String],json:{write:!0}})],lt.prototype,"orderByFields",void 0),n([c({type:[String],json:{write:!0}})],lt.prototype,"outFields",void 0),n([c({type:Ae,json:{read:{source:"outSR"},write:{target:"outSR"}}})],lt.prototype,"outSpatialReference",void 0),n([c({json:{write:!0}})],lt.prototype,"relationshipId",void 0),n([c({type:Number,json:{read:{source:"resultOffset"}}})],lt.prototype,"start",void 0),n([Y("start"),Y("num")],lt.prototype,"writeStart",null),n([c({type:Number,json:{read:{source:"resultRecordCount"}}})],lt.prototype,"num",void 0),n([c({json:{write:!0}})],lt.prototype,"returnGeometry",void 0),n([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],lt.prototype,"returnM",void 0),n([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],lt.prototype,"returnZ",void 0),n([c({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],lt.prototype,"where",void 0),lt=Gg=n([b("esri.rest.support.RelationshipQuery")],lt),lt.from=Je(lt);const uS=lt;var Jg;let fl=Jg=class extends F{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new Jg({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};n([c({type:[String],json:{write:!0}})],fl.prototype,"groupByFields",void 0),n([c({type:Number,json:{write:!0}})],fl.prototype,"topCount",void 0),n([c({type:[String],json:{write:!0}})],fl.prototype,"orderByFields",void 0),fl=Jg=n([b("esri.rest.support.TopFilter")],fl);const $L=fl;var Wg;const cS=new ye({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),pS=new ye({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ye=Wg=class extends F{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new Wg(E({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};n([c({type:Boolean,json:{write:!0}})],Ye.prototype,"cacheHint",void 0),n([c({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],Ye.prototype,"distance",void 0),n([c({types:ta,json:{read:Dr,write:!0}})],Ye.prototype,"geometry",void 0),n([c({type:Number,json:{write:!0}})],Ye.prototype,"geometryPrecision",void 0),n([c({type:Number,json:{write:!0}})],Ye.prototype,"maxAllowableOffset",void 0),n([c({type:Number,json:{read:{source:"resultRecordCount"}}})],Ye.prototype,"num",void 0),n([c({json:{write:!0}})],Ye.prototype,"objectIds",void 0),n([c({type:[String],json:{write:!0}})],Ye.prototype,"orderByFields",void 0),n([c({type:[String],json:{write:!0}})],Ye.prototype,"outFields",void 0),n([c({type:Ae,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ye.prototype,"outSpatialReference",void 0),n([c({type:String,json:{write:!0}})],Ye.prototype,"resultType",void 0),n([c({json:{write:!0}})],Ye.prototype,"returnGeometry",void 0),n([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ye.prototype,"returnM",void 0),n([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ye.prototype,"returnZ",void 0),n([c({type:Number,json:{read:{source:"resultOffset"}}})],Ye.prototype,"start",void 0),n([Y("start"),Y("num")],Ye.prototype,"writeStart",null),n([c({type:String,json:{read:{source:"spatialRel",reader:cS.read},write:{target:"spatialRel",writer:cS.write}}})],Ye.prototype,"spatialRelationship",void 0),n([c({type:Oi,json:{write:!0}})],Ye.prototype,"timeExtent",void 0),n([c({type:$L,json:{write:!0}})],Ye.prototype,"topFilter",void 0),n([c({type:String,json:{read:pS.read,write:{writer:pS.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],Ye.prototype,"units",void 0),n([c({type:String,json:{write:!0}})],Ye.prototype,"where",void 0),Ye=Wg=n([b("esri.rest.support.TopFeaturesQuery")],Ye),Ye.from=Je(Ye);const bp=Ye,ML=["oid","global-id"],IL=["oid","global-id","guid"];function OL({displayField:e,editFieldsInfo:t,fields:r,objectIdField:s,title:i},o){if(!r)return null;const l=RL({editFieldsInfo:t,fields:r,objectIdField:s},o);if(!l.length)return null;const u=NL({titleBase:i,fields:r,displayField:e}),p=kL();return new ra({title:u,content:p,fieldInfos:l})}const EL=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],TL=(e,{editFieldsInfo:t,objectIdField:r,visibleFieldNames:s})=>s?s.has(e.name):!sI(e.name,t)&&(!r||e.name!==r)&&!(ML.indexOf(e.type)>-1)&&!EL.some(i=>i.test(e.name));function jL(e,t){const r=e;return t&&(e=e.filter(s=>t.indexOf(s.type)===-1)),e===r&&(e=e.slice()),e.sort(AL),e}function AL(e,t){return e.type==="oid"?-1:t.type==="oid"?1:dS(e)?-1:dS(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function sI(e,t){if(!e||!t)return!1;const{creationDateField:r,creatorField:s,editDateField:i,editorField:o}=t;return[r&&r.toLowerCase(),s&&s.toLowerCase(),i&&i.toLowerCase(),o&&o.toLowerCase()].indexOf(e.toLowerCase())!==-1}function CL(e,t){return e.editable&&IL.indexOf(e.type)===-1&&!sI(e.name,t)}function RL({editFieldsInfo:e,fields:t,objectIdField:r},s){return jL(t,(s==null?void 0:s.ignoreFieldTypes)||PL).map(i=>new K1({fieldName:i.name,isEditable:CL(i,e),label:i.alias,format:FL(i),visible:TL(i,{editFieldsInfo:e,objectIdField:r,visibleFieldNames:s==null?void 0:s.visibleFieldNames})}))}function FL(e){switch(e.type){case"small-integer":case"integer":case"single":return new Up({digitSeparator:!0,places:0});case"double":return new Up({digitSeparator:!0,places:2});case"date":return new Up({dateFormat:"long-month-day-year"});default:return null}}function kL(){return[new Yu,new Hu]}function NL(e){const t=OA(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r}function dS(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"||void 0}const PL=["geometry","blob","raster","guid","xml"],ay=new ye({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),LL={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},ct="FeatureLayer",hS=Z.getLogger("esri.layers.FeatureLayer");function fS(e){return e&&e instanceof et}function fe(e,t,r){return!!(e&&e.hasOwnProperty(t)?e[t]:r)}function wp(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}function DL(e){var t;const r=e==null||(t=e.supportedSpatialAggregationStatistics)==null?void 0:t.map(s=>s.toLowerCase());return{envelope:!(r==null||!r.includes("envelopeaggregate")),centroid:!(r==null||!r.includes("centroidaggregate")),convexHull:!(r==null||!r.includes("convexhullaggregate"))}}const uy=yL();function cy(e,t,r){const s=!(r==null||!r.writeLayerSchema);return{enabled:s,ignoreOrigin:s}}let U=class extends cP(QN(EP(zP(PP(NP(O9(MP(CP(pM(ZN(b9(Ii(xk))))))))))))){constructor(...e){super(...e),this._handles=new da,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=Ae.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(et.ofType(hi)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=Cy(this._handles)}normalizeCtorArgs(e,t){return typeof e=="string"?I({url:e},t):e}load(e){const t=T(e)?e.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(t).then(s=>this._initLayerProperties(s)));const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(pc).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstLayerId(t);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new C("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this._initLayerProperties(await this.createGraphicsSource(t))}).then(()=>this.finishLoadEditablePortalLayer(e));return this.addResolvingPromise(r),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){e!=null?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,r,s){this._writeEditingEnabled(e,t,!0,s)}readEditingInfo(e,t){const{editingInfo:r}=t;return r?{lastEditDate:r.lastEditDate!=null?new Date(r.lastEditDate):null}:null}readIsTable(e,t){return(t=t&&t.layerDefinition||t).type==="Table"||!t.geometryType}writeIsTable(e,t,r,s){s!=null&&s.writeLayerSchema&&Sr(r,e?"Table":"Feature Layer",t)}readMinScale(e,t){return t.effectiveMinScale||e||0}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const r of t.fields)if(r.type==="esriFieldTypeGlobalID")return r.name}}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const r of t.fields)if(r.type==="esriFieldTypeOID")return r.name}}get parsedUrl(){const e=this.url?xr(this.url):null;return e!=null&&(this.dynamicDataSource!=null?e.path=Hl(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Hl(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){vw(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){const s=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(s){const i=sk(s,t,r)||void 0;return i||hS.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),i}if(t.defaultSymbol)return t.types&&t.types.length?new Ov({defaultSymbol:py(t.defaultSymbol,t,r),field:t.typeIdField,uniqueValueInfos:t.types.map(i=>({id:i.id,symbol:py(i.symbol,i,r)}))}):new Iv({symbol:py(t.defaultSymbol,t,r)})}set source(e){const t=this._get("source");t!==e&&(fS(t)&&this._resetMemorySource(t),fS(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof et?new D2({layer:this,items:e}):e:null}readSource(e,t){const r=kv.fromJSON(t.featureSet);return new D2({layer:this,items:r&&r.features||[]})}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readTemplates(e,t){const r=t.editFieldsInfo,s=r&&r.creatorField,i=r&&r.editorField;return e=e&&e.map(o=>Bv.fromJSON(o)),this._fixTemplates(e,s),this._fixTemplates(e,i),e}readTitle(e,t){const r=t.layerDefinition&&t.layerDefinition.name||t.name,s=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){const i=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?x9(this.url,r):r;let o=r;if(!o&&this.url){const l=lf(this.url);T(l)&&(o=l.title)}return o?(this.sublayerTitleMode==="item-title-and-service-name"&&i&&i!==o&&(o=i+" - "+o),Nv(o)):void 0}if(this.sublayerTitleMode==="item-title"&&s)return s}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const s=t.fields.find(i=>i.name.toLowerCase()===r);s&&(r=s.name)}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,s=r&&r.creatorField,i=r&&r.editorField;return e&&e.map(o=>(o=rI.fromJSON(o),this._fixTemplates(o.templates,s),this._fixTemplates(o.templates,i),o))}set url(e){const t=M9({layer:this,url:e,nonStandardUrlAllowed:!0,logger:hS});this._set("url",t.url),t.layerId!=null&&this._set("layerId",t.layerId)}writeUrl(e,t,r,s){I9(this,e,null,t,s)}readVersion(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}readVisible(e,t){return t.layerDefinition&&t.layerDefinition.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}addAttachment(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("addAttachment"in this.source))throw new C(ct,"Layer source does not support addAttachment capability");return this.source.addAttachment(e,t)})}updateAttachment(e,t,r){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("updateAttachment"in this.source))throw new C(ct,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(e,t,r)})}async applyEdits(e,t){const r=await import("./editingSupport.12aac157.js");return await this.load(),r.applyEdits(this,this.source,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return OL(this,e)}async createGraphicsSource(e){if(this._hasMemorySource())return this.source.load({signal:e});const{default:t}=await uj(import("./FeatureLayerSource.e9fd1142.js"),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=new ll,t=this.get("capabilities.data"),r=this.get("capabilities.query");e.dynamicDataSource=this.dynamicDataSource,e.historicMoment=this.historicMoment,e.gdbVersion=this.gdbVersion,e.returnGeometry=!0,r&&(e.compactGeometryEnabled=r.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),t&&(t.supportsZ&&this.returnZ!=null&&(e.returnZ=this.returnZ),t.supportsM&&this.returnM!=null&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:s,timeExtent:i}=this;return e.timeExtent=s!=null&&i!=null?i.offset(-s.value,s.unit):i||null,e.multipatchOption=this.geometryType==="multipatch"?"xyFootprint":null,e}deleteAttachments(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("deleteAttachments"in this.source))throw new C(ct,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(e,t)})}fetchRecomputedExtents(e){return this.load({signal:e==null?void 0:e.signal}).then(()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(e);throw new C(ct,"Layer source does not support fetchUpdates capability")})}getFeatureType(e){const{typeIdField:t,types:r}=this;if(!t||!e)return null;const s=e.attributes?e.attributes[t]:void 0;if(s==null)return null;let i=null;return r.some(o=>{const{id:l}=o;return l!=null&&(l.toString()===s.toString()&&(i=o),!!i)}),i}getFieldDomain(e,t){const r=t&&t.feature,s=this.getFeatureType(r);if(s){const i=s.domains&&s.domains[e];if(i&&i.type!=="inherited")return i}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}queryAttachments(e,t){return e=xL.from(e),this.load().then(()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new C(ct,"this layer doesn't support attachments");const{attachmentTypes:r,objectIds:s,globalIds:i,num:o,size:l,start:u,where:p}=e;if(!this.get("capabilities.operations.supportsQueryAttachments")){const d=s&&s.length>1,h=r&&r.length,f=i&&i.length,y=l&&l.length;if(d||h||f||y||o||u||p)throw new C(ct,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(s&&s.length||p))throw new C(ct,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in this.source))throw new C(ct,"Layer source does not support queryAttachments capability",e);return this.source.queryAttachments(e)})}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(ll.from(e)||this.createQuery(),t)).then(r=>{if(r!=null&&r.features)for(const s of r.features)s.layer=s.sourceLayer=this;return r})}queryObjectIds(e,t){return this.load().then(()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(ll.from(e)||this.createQuery(),t);throw new C(ct,"Layer source does not support queryObjectIds capability")})}queryFeatureCount(e,t){return this.load().then(()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(ll.from(e)||this.createQuery(),t);throw new C(ct,"Layer source does not support queryFeatureCount capability")})}queryExtent(e,t){return this.load().then(()=>{if(this.source.queryExtent)return this.source.queryExtent(ll.from(e)||this.createQuery(),t);throw new C(ct,"Layer source does not support queryExtent capability")})}queryRelatedFeatures(e,t){return this.load().then(()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(uS.from(e),t);throw new C(ct,"Layer source does not support queryRelatedFeatures capability")})}queryRelatedFeaturesCount(e,t){return this.load().then(()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(uS.from(e),t);throw new C(ct,"Layer source does not support queryRelatedFeaturesCount capability")})}queryTopFeatures(e,t){return this.load().then(()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(bp.from(e),t).then(r=>{if(r!=null&&r.features)for(const s of r.features)s.layer=s.sourceLayer=this;return r});throw new C(ct,"Layer source does not support queryTopFeatures capability")})}queryTopObjectIds(e,t){return this.load().then(()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(bp.from(e),t);throw new C(ct,"Layer source does not support queryTopObjectIds capability")})}queryTopFeaturesExtent(e,t){return this.load().then(()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(bp.from(e),t);throw new C(ct,"Layer source does not support queryTopExtents capability")})}queryTopFeatureCount(e,t){return this.load().then(()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(bp.from(e),t);throw new C(ct,"Layer source does not support queryFeatureCount capability")})}read(e,t){const r=e.featureCollection;if(r){const s=r.layers;s&&s.length===1&&(super.read(s[0],t),r.showLegend!=null&&super.read({showLegend:r.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(e,t){var r,s;const i=(t=pe(I({},t),{writeLayerSchema:(r=(s=t)==null?void 0:s.writeLayerSchema)!=null?r:this._hasMemorySource()})).origin,o=t.layerContainerType,l=t.messages;if(this.isTable){if(i==="web-scene"||i==="web-map"&&o!=="tables")return l&&l.push(new C("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Table source cannot be written to web scenes and web maps`,{layer:this})),null;if(this._hasMemorySource())return l&&l.push(new C("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using an in-memory Table source cannot be written to web scenes and web maps`,{layer:this})),null}else if(this.loaded&&i==="web-map"&&o==="tables")return l&&l.push(new C("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a non-table source cannot be written to tables in web maps`,{layer:this})),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new C(ct,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source.type==="memory"||SL(this,e))}_readEditingEnabled(e,t,r){var s;let i=(s=e.layerDefinition)==null?void 0:s.capabilities;return i?this._hasEditingCapability(i):(i=e.capabilities,t&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&i?this._hasEditingCapability(i):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,r,s){if(!e){var i,o;const l=(i=this.capabilities)!=null&&(o=i.operations)!=null&&o.supportsSync?"Query,Sync":"Query";Sr("layerDefinition.capabilities",l,t),!r||s!=null&&s.writeLayerSchema||(t.capabilities=l)}}_checkAttachmentSupport(e){const{attributes:t}=e,{objectIdField:r}=this;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:Promise.reject(new C(ct,`feature is missing the identifying attribute ${r}`)):Promise.reject(new C(ct,"'attributes' are required on a feature to query attachments")):Promise.reject(new C(ct,"A feature is required to add/delete/update attachments")):Promise.reject(new C(ct,"this layer doesn't support attachments"))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return at(this.url,{query:pe(I({f:"json"},this.customParameters),{token:this.apiKey}),responseType:"json",signal:e}).then(t=>{const r=t.data;if(r)return Array.isArray(r.layers)&&r.layers.length>0?r.layers[0].id:Array.isArray(r.tables)&&r.tables.length>0?r.tables[0].id:void 0})}async _initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),vw(this.renderer,this.fieldsIndex),s$(this.timeInfo,this.fieldsIndex),_L(this,{origin:"service"})}async hasDataChanged(){var e;if((e=this.source)!=null&&e.refresh)try{var t;const{dataChanged:r,updates:s}=await((t=this.source)==null?void 0:t.refresh());if(T(s)&&(this.sourceJSON=I(I({},this.sourceJSON),s),this.read(s,{origin:"service",url:this.parsedUrl})),r)return!0}catch{}if(this.definitionExpression)try{return(await ok(this.definitionExpression,this.fieldsIndex)).hasDateFunctions}catch{}return!1}_verifyFields(){const e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||this.fields&&this.fields.some(function(t){return t.type==="geometry"})||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(r=>{const s=r.prototype&&r.prototype.attributes;s&&t&&delete s[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new C("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new C("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAttachmentCapabilities(e){const t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach(r=>{const s=LL[r.name];s&&(t[s]=!!r.isEnabled)}),t}_readDataCapabilities(e){return{isVersioned:fe(e,"isDataVersioned",!1),supportsAttachment:fe(e,"hasAttachments",!1),supportsM:fe(e,"hasM",!1),supportsZ:fe(e,"hasZ",!1)}}_readMetadataCapabilities(e){return{supportsAdvancedFieldProperties:fe(e,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(e,t){const r=e?e.toLowerCase().split(",").map(p=>p.trim()):[],s=r.includes("editing")&&!t.datesInUnknownTimezone;let i=s&&r.includes("create"),o=s&&r.includes("delete"),l=s&&r.includes("update");const u=r.includes("changetracking");return s&&!(i||o||l)&&(i=o=l=!0),{supportsCalculate:fe(t,"supportsCalculate",!1),supportsTruncate:fe(t,"supportsTruncate",!1),supportsValidateSql:fe(t,"supportsValidateSql",!1),supportsAdd:i,supportsDelete:o,supportsEditing:s,supportsChangeTracking:u,supportsQuery:r.includes("query"),supportsQueryAttachments:fe(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:fe(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:l,supportsExceedsLimitStatistics:fe(t,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(e){var t;const r=e.advancedQueryCapabilities,s=e.ownershipBasedAccessControlForFeatures,i=e.archivingInfo,o=(t=this.url)==null?void 0:t.includes("MapServer"),l=!R("mapserver-pbf-enabled")&&o&&this.version<10.81,u=FM(this.url),p=(e.supportedQueryFormats||"").split(",").reduce((d,h)=>{const f=h.toLowerCase().trim();return f&&d.add(f),d},new Set);return{supportsStatistics:fe(r,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:fe(r,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:fe(r,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:DL(r),supportsCentroid:fe(r,"supportsReturningGeometryCentroid",!1),supportsDistance:fe(r,"supportsQueryWithDistance",!1),supportsDistinct:fe(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:fe(r,"supportsReturningQueryExtent",!1),supportsGeometryProperties:fe(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:fe(r,"supportsHavingClause",!1),supportsOrderBy:fe(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:fe(r,"supportsPagination",!1),supportsQuantization:fe(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:fe(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:fe(e,"supportsReturningQueryGeometry",!1),supportsResultType:fe(r,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:fe(r,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:fe(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:fe(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:fe(r,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:fe(s,"allowOthersToQuery",!0),supportsHistoricMoment:fe(i,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!l&&p.has("pbf"),supportsDisjointSpatialRelationship:fe(r,"supportsDisjointSpatialRel",!1),supportsCacheHint:fe(r,"supportsQueryWithCacheHint",!1),supportsDefaultSpatialReference:fe(r,"supportsDefaultSR",!1),supportsCompactGeometry:u,maxRecordCountFactor:wp(e,"maxRecordCountFactor",void 0),maxRecordCount:wp(e,"maxRecordCount",void 0),standardMaxRecordCount:wp(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:wp(e,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(e){const t=e.advancedQueryCapabilities,r=fe(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:fe(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r}}_readEditingCapabilities(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:fe(e,"allowGeometryUpdates",!0),supportsGlobalId:fe(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:fe(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:fe(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:fe(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:fe(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:fe(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:fe(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:fe(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:fe(t,"allowOthersToUpdate",!0)}}};n([c({readOnly:!0,json:{read:!1}})],U.prototype,"capabilities",void 0),n([K("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],U.prototype,"readCapabilities",null),n([c({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],U.prototype,"charts",void 0),n([c({readOnly:!0})],U.prototype,"createQueryVersion",null),n([c({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],U.prototype,"copyright",void 0),n([c({type:Boolean})],U.prototype,"datesInUnknownTimezone",void 0),n([c({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],U.prototype,"displayField",void 0),n([c({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],U.prototype,"definitionExpression",void 0),n([c({types:xn,readOnly:!0})],U.prototype,"defaultSymbol",void 0),n([c({type:ls})],U.prototype,"dynamicDataSource",void 0),n([c({readOnly:!0})],U.prototype,"editFieldsInfo",void 0),n([c({type:Boolean})],U.prototype,"editingEnabled",null),n([K(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],U.prototype,"readEditingEnabled",null),n([K("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],U.prototype,"readEditingEnabledFromWebMap",null),n([Y(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],U.prototype,"writeEditingEnabled",null),n([Y("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],U.prototype,"writeEditingEnabledToWebMap",null),n([c({readOnly:!0})],U.prototype,"editingInfo",void 0),n([K("editingInfo")],U.prototype,"readEditingInfo",null),n([c(wP)],U.prototype,"elevationInfo",void 0),n([c(pL)],U.prototype,"featureReduction",void 0),n([c(pe(I({},uy.fields),{json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:cy}}}}}))],U.prototype,"fields",void 0),n([c(uy.fieldsIndex)],U.prototype,"fieldsIndex",void 0),n([c({type:bL,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],U.prototype,"floorInfo",void 0),n([c({type:bk,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],U.prototype,"formTemplate",void 0),n([c({type:ft,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],U.prototype,"fullExtent",void 0),n([c()],U.prototype,"gdbVersion",void 0),n([c({readOnly:!0,type:mL,json:{read:{source:"geometryProperties"}}})],U.prototype,"geometryFieldsInfo",void 0),n([c({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:ay.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:cy,writer(e,t,r){const s=e?ay.toJSON(e):null;s&&Sr(r,s,t)}}}},read:{source:"layerDefinition.geometryType",reader:ay.read}}})],U.prototype,"geometryType",void 0),n([c({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],U.prototype,"hasM",void 0),n([c({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],U.prototype,"hasZ",void 0),n([c({readOnly:!0,type:Sk})],U.prototype,"heightModelInfo",void 0),n([c({type:Date})],U.prototype,"historicMoment",void 0),n([c(_P)],U.prototype,"id",void 0),n([c({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],U.prototype,"infoFor3D",void 0),n([c({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],U.prototype,"isTable",void 0),n([K("service","isTable",["type","geometryType"]),K("isTable",["layerDefinition.type","layerDefinition.geometryType"])],U.prototype,"readIsTable",null),n([Y("web-map","isTable")],U.prototype,"writeIsTable",null),n([c(qM)],U.prototype,"labelsVisible",void 0),n([c({type:[qv],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:nS},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:nS},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],U.prototype,"labelingInfo",void 0),n([c(SP)],U.prototype,"opacity",void 0),n([c({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],U.prototype,"layerId",void 0),n([c(bP)],U.prototype,"legendEnabled",void 0),n([c({type:["show","hide"]})],U.prototype,"listMode",void 0),n([c(xP)],U.prototype,"minScale",void 0),n([K("service","minScale",["minScale","effectiveMinScale"])],U.prototype,"readMinScale",null),n([c($P)],U.prototype,"maxScale",void 0),n([K("service","maxScale",["maxScale","effectiveMaxScale"])],U.prototype,"readMaxScale",null),n([c({type:String})],U.prototype,"globalIdField",void 0),n([K("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),K("service","globalIdField",["globalIdField","fields"])],U.prototype,"readGlobalIdFieldFromService",null),n([c({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:cy}}}}})],U.prototype,"objectIdField",void 0),n([K("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),K("service","objectIdField",["objectIdField","fields"])],U.prototype,"readObjectIdFieldFromService",null),n([c({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],U.prototype,"operationalLayerType",void 0),n([c(uy.outFields)],U.prototype,"outFields",void 0),n([c({readOnly:!0})],U.prototype,"parsedUrl",null),n([c({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],U.prototype,"path",void 0),n([c(UM)],U.prototype,"popupEnabled",void 0),n([c({type:ra,json:{name:"popupInfo",write:!0}})],U.prototype,"popupTemplate",void 0),n([c({readOnly:!0})],U.prototype,"defaultPopupTemplate",null),n([c({type:[wL],readOnly:!0})],U.prototype,"relationships",void 0),n([c({types:uM,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:tk,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema})}}})],U.prototype,"renderer",null),n([K("service","renderer",["drawingInfo.renderer","defaultSymbol"]),K("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],U.prototype,"readRenderer",null),n([c()],U.prototype,"sourceJSON",void 0),n([c({type:Boolean})],U.prototype,"returnM",void 0),n([c({type:Boolean})],U.prototype,"returnZ",void 0),n([c(gP)],U.prototype,"screenSizePerspectiveEnabled",void 0),n([c({clonable:!1})],U.prototype,"source",null),n([ht("source")],U.prototype,"castSource",null),n([K("portal-item","source",["featureSet"]),K("web-map","source",["featureSet"])],U.prototype,"readSource",null),n([c({readOnly:!0})],U.prototype,"serviceDefinitionExpression",void 0),n([K("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],U.prototype,"readServiceDefinitionExpression",null),n([c({type:Ae,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],U.prototype,"spatialReference",void 0),n([c({type:Number})],U.prototype,"subtypeCode",void 0),n([c({type:[Bv]})],U.prototype,"templates",void 0),n([K("templates",["editFieldsInfo","creatorField","editorField","templates"])],U.prototype,"readTemplates",null),n([c({type:KM})],U.prototype,"timeInfo",void 0),n([c()],U.prototype,"title",void 0),n([K("service","title",["name"]),K("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],U.prototype,"readTitle",null),n([K("web-map","title",["layerDefinition.name","title"])],U.prototype,"readTitleFromWebMap",null),n([c({type:String})],U.prototype,"sublayerTitleMode",void 0),n([c({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],U.prototype,"trackIdField",void 0),n([c({json:{read:!1}})],U.prototype,"type",void 0),n([c({type:String})],U.prototype,"typeIdField",void 0),n([K("service","typeIdField"),K("typeIdField",["layerDefinition.typeIdField"])],U.prototype,"readTypeIdField",null),n([c({type:[rI]})],U.prototype,"types",void 0),n([K("service","types",["types"]),K("types",["layerDefinition.types"])],U.prototype,"readTypes",null),n([c({readOnly:!0,json:{write:!1}})],U.prototype,"serverGens",void 0),n([c({type:et.ofType(hi),readOnly:!0})],U.prototype,"indexes",void 0),n([c(vP)],U.prototype,"url",null),n([Y("url")],U.prototype,"writeUrl",null),n([c({readOnly:!0})],U.prototype,"userIsAdmin",void 0),n([c({json:{origins:{service:{read:!0}},read:!1}})],U.prototype,"version",void 0),n([K("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],U.prototype,"readVersion",null),n([c({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],U.prototype,"visible",void 0),n([K("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],U.prototype,"readVisible",null),U=n([b("esri.layers.FeatureLayer")],U);const py=Xl({types:N3}),Gv=U;var Iq=Object.freeze(Object.defineProperty({__proto__:null,default:Gv},Symbol.toStringTag,{value:"Module"}));const zL=/\?(\.|$)/g;function gh(e,t,r,s){const i=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],o=Hg(e,t,r,s);for(const l of i){const u=l.trim().replace(zL,"$1"),p=e.get(u);r.call(e,p,p,u,e)}return o}function Hg(e,t,r,s){return e.watch(t,r,s)}function Oq(e,t,r,s){return qL(e,t,BL,r,s)}function VL(e,t,r,s,i,o,l){const u={};function p(h){const f=u[h];f&&(o&&o(f.target,h,e,r),f.handle.remove(),delete u[h])}const d=gh(e,t,(h,f,y)=>{p(y),Dh(h)&&(u[y]={handle:zh(h,r,s),target:h},i&&i(h,y,e,r))},l);return{remove(){d.remove();for(const h in u)p(h)}}}function UL(e,t,r,s,i){const o=e.watch(t,(l,u,p,d)=>{r&&!r(l)||s==null||s.call(e,l,u,p,d)},i);if(Array.isArray(t))for(const l of t){const u=e.get(l);r&&r(u)&&(s==null||s.call(e,u,u,t,e))}else{const l=e.get(t);r&&r(l)&&(s==null||s.call(e,l,l,t,e))}return o}function qL(e,t,r,s,i){const o=typeof s=="function"?s:null,l=typeof s=="object"?s:null;typeof s=="boolean"&&(i=s);let u,p=!1;function d(){u&&(u.remove(),u=null)}const h=zl();So(l,()=>{d(),h.reject(Gt())});const f={then:h.promise.then.bind(h.promise),catch:h.promise.catch.bind(h.promise),remove:d};return Object.freeze(f),u=UL(e,t,r,(y,m,v,_)=>{p=!0,d(),o&&o.call(e,y,m,v,_),h.resolve({value:y,oldValue:m,propertyName:v,target:_})},i),p&&d(),f}function BL(e){return!e}function GL(e){return typeof e=="string"?document.getElementById(e):e}function JL(){const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16);return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}/*!
 * @esri/arcgis-html-sanitizer - v2.9.0 - Mon Dec 13 2021 15:07:01 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2021 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */var WL="[object Object]";function HL(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function KL(e,t){return function(r){return e(t(r))}}var QL=Function.prototype,iI=Object.prototype,oI=QL.toString,ZL=iI.hasOwnProperty,YL=oI.call(Object),XL=iI.toString,e7=KL(Object.getPrototypeOf,Object);function t7(e){return!!e&&typeof e=="object"}function r7(e){if(!t7(e)||XL.call(e)!=WL||HL(e))return!1;var t=e7(e);if(t===null)return!0;var r=ZL.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&oI.call(r)==YL}var s7=r7,xl={exports:{}},ut={},ac={exports:{}},Un={};function nI(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function i7(e,t,r){}function o7(e,t,r){}var n7=/javascript\s*\:/img;function l7(e,t){return n7.test(t)?"":t}Un.whiteList=nI();Un.getDefaultWhiteList=nI;Un.onAttr=i7;Un.onIgnoreAttr=o7;Un.safeAttrValue=l7;var a7={indexOf:function(e,t){var r,s;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,s=e.length;r<s;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var s,i;if(Array.prototype.forEach)return e.forEach(t,r);for(s=0,i=e.length;s<i;s++)t.call(r,e[s],s,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Ta=a7;function u7(e,t){e=Ta.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,s=!1,i=0,o=0,l="";function u(){if(!s){var h=Ta.trim(e.slice(i,o)),f=h.indexOf(":");if(f!==-1){var y=Ta.trim(h.slice(0,f)),m=Ta.trim(h.slice(f+1));if(y){var v=t(i,l.length,y,m,h);v&&(l+=v+"; ")}}}i=o+1}for(;o<r;o++){var p=e[o];if(p==="/"&&e[o+1]==="*"){var d=e.indexOf("*/",o+2);if(d===-1)break;o=d+1,i=o+1,s=!1}else p==="("?s=!0:p===")"?s=!1:p===";"?s||u():p===`
`&&u()}return Ta.trim(l)}var c7=u7,Sp=Un,p7=c7;function yS(e){return e==null}function d7(e){var t={};for(var r in e)t[r]=e[r];return t}function lI(e){e=d7(e||{}),e.whiteList=e.whiteList||Sp.whiteList,e.onAttr=e.onAttr||Sp.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Sp.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Sp.safeAttrValue,this.options=e}lI.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,s=r.whiteList,i=r.onAttr,o=r.onIgnoreAttr,l=r.safeAttrValue,u=p7(e,function(p,d,h,f,y){var m=s[h],v=!1;if(m===!0?v=m:typeof m=="function"?v=m(f):m instanceof RegExp&&(v=m.test(f)),v!==!0&&(v=!1),f=l(h,f),!!f){var _={position:d,sourcePosition:p,source:y,isWhite:v};if(v){var S=i(h,f,_);return yS(S)?h+":"+f:S}else{var S=o(h,f,_);if(!yS(S))return S}}});return u};var h7=lI;(function(e,t){var r=Un,s=h7;function i(l,u){var p=new s(u);return p.process(l)}t=e.exports=i,t.FilterCSS=s;for(var o in r)t[o]=r[o]})(ac,ac.exports);var Jv={indexOf:function(e,t){var r,s;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,s=e.length;r<s;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var s,i;if(Array.prototype.forEach)return e.forEach(t,r);for(s=0,i=e.length;s<i;s++)t.call(r,e[s],s,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},f7=ac.exports.FilterCSS,y7=ac.exports.getDefaultWhiteList,vh=Jv;function aI(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var uI=new f7;function m7(e,t,r){}function g7(e,t,r){}function v7(e,t,r){}function b7(e,t,r){}function cI(e){return e.replace(S7,"&lt;").replace(_7,"&gt;")}function w7(e,t,r,s){if(r=mI(r),t==="href"||t==="src"){if(r=vh.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(_p.lastIndex=0,_p.test(r))return""}else if(t==="style"){if(mS.lastIndex=0,mS.test(r)||(gS.lastIndex=0,gS.test(r)&&(_p.lastIndex=0,_p.test(r))))return"";s!==!1&&(s=s||uI,r=s.process(r))}return r=gI(r),r}var S7=/</g,_7=/>/g,x7=/"/g,$7=/&quot;/g,M7=/&#([a-zA-Z0-9]*);?/gim,I7=/&colon;?/gim,O7=/&newline;?/gim,_p=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,mS=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,gS=/u\s*r\s*l\s*\(.*/gi;function pI(e){return e.replace(x7,"&quot;")}function dI(e){return e.replace($7,'"')}function hI(e){return e.replace(M7,function(r,s){return s[0]==="x"||s[0]==="X"?String.fromCharCode(parseInt(s.substr(1),16)):String.fromCharCode(parseInt(s,10))})}function fI(e){return e.replace(I7,":").replace(O7," ")}function yI(e){for(var t="",r=0,s=e.length;r<s;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return vh.trim(t)}function mI(e){return e=dI(e),e=hI(e),e=fI(e),e=yI(e),e}function gI(e){return e=pI(e),e=cI(e),e}function E7(){return""}function T7(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function s(l){return r?!0:vh.indexOf(e,l)!==-1}var i=[],o=!1;return{onIgnoreTag:function(l,u,p){if(s(l))if(p.isClosing){var d="[/removed]",h=p.position+d.length;return i.push([o!==!1?o:p.position,h]),o=!1,d}else return o||(o=p.position),"[removed]";else return t(l,u,p)},remove:function(l){var u="",p=0;return vh.forEach(i,function(d){u+=l.slice(p,d[0]),p=d[1]}),u+=l.slice(p),u}}}function j7(e){for(var t="",r=0;r<e.length;){var s=e.indexOf("<!--",r);if(s===-1){t+=e.slice(r);break}t+=e.slice(r,s);var i=e.indexOf("-->",s);if(i===-1)break;r=i+3}return t}function A7(e){var t=e.split("");return t=t.filter(function(r){var s=r.charCodeAt(0);return s===127?!1:s<=31?s===10||s===13:!0}),t.join("")}ut.whiteList=aI();ut.getDefaultWhiteList=aI;ut.onTag=m7;ut.onIgnoreTag=g7;ut.onTagAttr=v7;ut.onIgnoreTagAttr=b7;ut.safeAttrValue=w7;ut.escapeHtml=cI;ut.escapeQuote=pI;ut.unescapeQuote=dI;ut.escapeHtmlEntities=hI;ut.escapeDangerHtml5Entities=fI;ut.clearNonPrintableCharacter=yI;ut.friendlyAttrValue=mI;ut.escapeAttrValue=gI;ut.onIgnoreTagStripAll=E7;ut.StripTagBody=T7;ut.stripCommentTag=j7;ut.stripBlankChar=A7;ut.cssFilter=uI;ut.getDefaultCSSWhiteList=y7;var yf={},ao=Jv;function C7(e){var t=ao.spaceIndex(e);if(t===-1)var r=e.slice(1,-1);else var r=e.slice(1,t+1);return r=ao.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function R7(e){return e.slice(0,2)==="</"}function F7(e,t,r){var s="",i=0,o=!1,l=!1,u=0,p=e.length,d="",h="";e:for(u=0;u<p;u++){var f=e.charAt(u);if(o===!1){if(f==="<"){o=u;continue}}else if(l===!1){if(f==="<"){s+=r(e.slice(i,u)),o=u,i=u;continue}if(f===">"){s+=r(e.slice(i,o)),h=e.slice(o,u+1),d=C7(h),s+=t(o,s.length,d,h,R7(h)),i=u+1,o=!1;continue}if(f==='"'||f==="'")for(var y=1,m=e.charAt(u-y);m.trim()===""||m==="=";){if(m==="="){l=f;continue e}m=e.charAt(u-++y)}}else if(f===l){l=!1;continue}}return i<e.length&&(s+=r(e.substr(i))),s}var k7=/[^a-zA-Z0-9_:\.\-]/gim;function N7(e,t){var r=0,s=[],i=!1,o=e.length;function l(f,y){if(f=ao.trim(f),f=f.replace(k7,"").toLowerCase(),!(f.length<1)){var m=t(f,y||"");m&&s.push(m)}}for(var u=0;u<o;u++){var p=e.charAt(u),d,h;if(i===!1&&p==="="){i=e.slice(r,u),r=u+1;continue}if(i!==!1&&u===r&&(p==='"'||p==="'")&&e.charAt(u-1)==="="){if(h=e.indexOf(p,u+1),h===-1)break;d=ao.trim(e.slice(r+1,h)),l(i,d),i=!1,u=h,r=u+1;continue}if(/\s|\n|\t/.test(p))if(e=e.replace(/\s|\n|\t/g," "),i===!1)if(h=P7(e,u),h===-1){d=ao.trim(e.slice(r,u)),l(d),i=!1,r=u+1;continue}else{u=h-1;continue}else if(h=L7(e,u-1),h===-1){d=ao.trim(e.slice(r,u)),d=vS(d),l(i,d),i=!1,r=u+1;continue}else continue}return r<e.length&&(i===!1?l(e.slice(r)):l(i,vS(ao.trim(e.slice(r))))),ao.trim(s.join(" "))}function P7(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function L7(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function D7(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function vS(e){return D7(e)?e.substr(1,e.length-2):e}yf.parseTag=F7;yf.parseAttr=N7;var z7=ac.exports.FilterCSS,os=ut,vI=yf,V7=vI.parseTag,U7=vI.parseAttr,Od=Jv;function xp(e){return e==null}function q7(e){var t=Od.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=Od.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=Od.trim(e.slice(0,-1))),{html:e,closing:r}}function B7(e){var t={};for(var r in e)t[r]=e[r];return t}function bI(e){e=B7(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=os.onIgnoreTagStripAll),e.whiteList=e.whiteList||os.whiteList,e.onTag=e.onTag||os.onTag,e.onTagAttr=e.onTagAttr||os.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||os.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||os.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||os.safeAttrValue,e.escapeHtml=e.escapeHtml||os.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new z7(e.css))}bI.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,s=r.whiteList,i=r.onTag,o=r.onIgnoreTag,l=r.onTagAttr,u=r.onIgnoreTagAttr,p=r.safeAttrValue,d=r.escapeHtml,h=t.cssFilter;r.stripBlankChar&&(e=os.stripBlankChar(e)),r.allowCommentTag||(e=os.stripCommentTag(e));var f=!1;if(r.stripIgnoreTagBody){var f=os.StripTagBody(r.stripIgnoreTagBody,o);o=f.onIgnoreTag}var y=V7(e,function(m,v,_,S,M){var k={sourcePosition:m,position:v,isClosing:M,isWhite:s.hasOwnProperty(_)},D=i(_,S,k);if(!xp(D))return D;if(k.isWhite){if(k.isClosing)return"</"+_+">";var P=q7(S),N=s[_],J=U7(P.html,function(re,de){var ie=Od.indexOf(N,re)!==-1,ge=l(_,re,de,ie);if(!xp(ge))return ge;if(ie)return de=p(_,re,de,h),de?re+'="'+de+'"':re;var ge=u(_,re,de,ie);return xp(ge)?void 0:ge}),S="<"+_;return J&&(S+=" "+J),P.closing&&(S+=" /"),S+=">",S}else{var D=o(_,S,k);return xp(D)?d(S):D}},d);return f&&(y=f.remove(y)),y};var G7=bI;(function(e,t){var r=ut,s=yf,i=G7;function o(p,d){var h=new i(d);return h.process(p)}t=e.exports=o,t.filterXSS=o,t.FilterXSS=i;for(var l in r)t[l]=r[l];for(var l in s)t[l]=s[l];function u(){return typeof self!="undefined"&&typeof DedicatedWorkerGlobalScope!="undefined"&&self instanceof DedicatedWorkerGlobalScope}u()&&(self.filterXSS=e.exports)})(xl,xl.exports);var J7=function(){function e(t,r){var s=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(o,l,u,p){return o==="a"&&l==="href"||(o==="img"||o==="source")&&l==="src"?s.sanitizeUrl(u):xl.exports.safeAttrValue(o,l,u,p)}};var i;t&&!r?i=t:t&&r?(i=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(o){o==="whiteList"?i.whiteList=s._extendObjectOfArrays([s.arcgisWhiteList,t.whiteList||{}]):i[o]=t[o]})):(i=Object.create(this.arcgisFilterOptions),i.whiteList=this.arcgisWhiteList),this.xssFilterOptions=i,this._xssFilter=new xl.exports.FilterXSS(i)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t=="undefined"?void 0:null}},e.prototype.sanitizeUrl=function(t){var r=this._trim(t.substring(0,t.indexOf(":")));return t==="/"||t==="#"||t[0]==="#"||this.allowedProtocols.indexOf(r.toLowerCase())>-1?xl.exports.escapeAttrValue(t):""},e.prototype.sanitizeHTMLAttribute=function(t,r,s,i){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,s,i):xl.exports.safeAttrValue(t,r,s,i)},e.prototype.validate=function(t,r){r===void 0&&(r={});var s=this.sanitize(t,r);return{isValid:t===s,sanitized:s}},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(s){Object.keys(s).forEach(function(i){Array.isArray(s[i])&&Array.isArray(r[i])?r[i]=r[i].concat(s[i]):r[i]=s[i]})}),r},e.prototype._iterateOverObject=function(t,r){var s=this;r===void 0&&(r={});try{var i=!1,o=void 0;if(Array.isArray(t))o=t.reduce(function(u,p){var d=s.validate(p,r);return d.isValid?u.concat([p]):(i=!0,u.concat([d.sanitized]))},[]);else if(s7(t)){var l=Object.keys(t);o=l.reduce(function(u,p){var d=t[p],h=s.validate(d,r);return h.isValid?u[p]=d:(i=!0,u[p]=h.sanitized),u},{})}else return r.allowUndefined&&typeof t=="undefined"?void 0:null;return i?o:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const mf=new Map;function wI(){mf.clear()}function W7(e){return mf.get(e)}function H7(e,t){mf.set(e,t)}function dy(e){mf.delete(e)}const K7=Z.getLogger("esri.widgets.support.widgetUtils");function Q7(e){const t=Ns.acquire();for(let s=0;s<arguments.length;s++){const i=arguments[s],o=typeof i;if(o==="string")t.push(i);else if(Array.isArray(i))t.push.apply(t,i);else if(o==="object")for(const l in i)i[l]&&t.push(l)}const r=t.join(" ");return Ns.release(t),r}(()=>{const e=new Map,t=new ResizeObserver(r=>{wI();for(const s of r)e.get(s.target)(s)});return(r,s,i)=>(e.has(r)&&K7.error("Already observing element",r),e.set(r,s),t.observe(r,i),Nh(()=>{t.unobserve(r),e.delete(r)}))})();function $p(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const Z7=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],Y7=Z7.reduce((e,t)=>(e[t]=[],e),{}),X7=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],SI=new J7({whiteList:Y7,onTagAttr:(e,t,r)=>{const s=`${t}="${r}"`;if(X7.includes(t))return s},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function eD(e,t){const r=e.getBoundingClientRect(),s=t.getBoundingClientRect(),i=r.top+r.height,o=s.top+s.height,l=r.top,u=s.top;(i>o||l<u)&&e.scrollIntoView({block:"end"})}function _I(e){return e==="Enter"||e===" "}const xI="http://www.w3.org/",gf=`${xI}2000/svg`,$I=`${xI}1999/xlink`;let bh,bS=[],Wv=(e,t)=>{let r={};return Object.keys(e).forEach(s=>{r[s]=e[s]}),t&&Object.keys(t).forEach(s=>{r[s]=t[s]}),r},Hv=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),MI=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},tD=(e,t,r)=>{if(t.vnodeSelector!==""){for(let s=r;s<e.length;s++)if(Hv(e[s],t))return s}return-1},hy=(e,t,r,s)=>{let i=e[t];if(i.vnodeSelector==="")return;let o=i.properties;if(!(o&&(o.key===void 0?o.bind:o.key))){for(let l=0;l<e.length;l++)if(l!==t){let u=e[l];if(Hv(u,i))throw new Error(`${r.vnodeSelector} had a ${i.vnodeSelector} child ${s==="added"?s:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},rD=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},Kg=[],Qg=!1,II=e=>{(e.children||[]).forEach(II),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},wS=()=>{Qg=!1,Kg.forEach(II),Kg.length=0},SS=e=>{Kg.push(e),Qg||(Qg=!0,typeof window!="undefined"&&"requestIdleCallback"in window?window.requestIdleCallback(wS,{timeout:16}):setTimeout(wS,16))},_S=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),SS(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),SS(e))},sD=(e,t,r)=>{if(!t)return;let s=r.eventHandlerInterceptor,i=Object.keys(t),o=i.length;for(let l=0;l<o;l++){let u=i[l],p=t[u];if(u==="className")throw new Error('Property "className" is not supported, use "class".');if(u==="class")Zg(e,p,!0);else if(u==="classes"){let d=Object.keys(p),h=d.length;for(let f=0;f<h;f++){let y=d[f];p[y]&&e.classList.add(y)}}else if(u==="styles"){let d=Object.keys(p),h=d.length;for(let f=0;f<h;f++){let y=d[f],m=p[y];m&&(MI(m),r.styleApplyer(e,y,m))}}else if(u!=="key"&&p!=null){let d=typeof p;d==="function"?(u.lastIndexOf("on",0)===0&&(s&&(p=s(u,p,e,t)),u==="oninput"&&function(){let h=p;p=function(f){h.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),e[u]=p):r.namespace===gf?u==="href"?e.setAttributeNS($I,u,p):e.setAttribute(u,p):d==="string"&&u!=="value"?u==="innerHTML"?e[u]=SI.sanitize(p):e.setAttribute(u,p):e[u]=p}}},iD=(e,t,r)=>{if(t)for(let s of t)$l(s,e,void 0,r)},OI=(e,t,r)=>{iD(e,t.children,r),t.text&&(e.textContent=t.text),sD(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},$l=(e,t,r,s)=>{let i,o=0,l=e.vnodeSelector,u=t.ownerDocument;if(l==="")i=e.domNode=u.createTextNode(e.text),r!==void 0?t.insertBefore(i,r):t.appendChild(i);else{for(let p=0;p<=l.length;++p){let d=l.charAt(p);if(p===l.length||d==="."||d==="#"){let h=l.charAt(o-1),f=l.slice(o,p);h==="."?i.classList.add(f):h==="#"?i.id=f:(f==="svg"&&(s=Wv(s,{namespace:gf})),s.namespace!==void 0?i=e.domNode=u.createElementNS(s.namespace,f):(i=e.domNode=e.domNode||u.createElement(f),f==="input"&&e.properties&&e.properties.type!==void 0&&i.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(i,r):i.parentNode!==t&&t.appendChild(i)),o=p+1}}OI(i,e,s)}},Zg=(e,t,r)=>{t&&t.split(" ").forEach(s=>{s&&e.classList.toggle(s,r)})},oD=(e,t,r,s)=>{if(!r)return;let i=!1,o=Object.keys(r),l=o.length;for(let u=0;u<l;u++){let p=o[u],d=r[p],h=t[p];if(p==="class")h!==d&&(Zg(e,h,!1),Zg(e,d,!0));else if(p==="classes"){let f=e.classList,y=Object.keys(d),m=y.length;for(let v=0;v<m;v++){let _=y[v],S=!!d[_];S!==!!h[_]&&(i=!0,S?f.add(_):f.remove(_))}}else if(p==="styles"){let f=Object.keys(d),y=f.length;for(let m=0;m<y;m++){let v=f[m],_=d[v];_!==h[v]&&(i=!0,_?(MI(_),s.styleApplyer(e,v,_)):s.styleApplyer(e,v,""))}}else if(d||typeof h!="string"||(d=""),p==="value"){let f=e[p];f!==d&&(e["oninput-value"]?f===e["oninput-value"]:d!==h)&&(e[p]=d,e["oninput-value"]=void 0),d!==h&&(i=!0)}else if(d!==h){let f=typeof d;f==="function"&&s.eventHandlerInterceptor||(s.namespace===gf?p==="href"?e.setAttributeNS($I,p,d):e.setAttribute(p,d):f==="string"?p==="innerHTML"?e[p]=SI.sanitize(d):p==="role"&&d===""?e.removeAttribute(p):e.setAttribute(p,d):e[p]!==d&&(e[p]=d),i=!0)}}return i},nD=(e,t,r,s,i)=>{if(r===s)return!1;s=s||bS;let o,l=(r=r||bS).length,u=s.length,p=0,d=0,h=!1;for(;d<u;){let f=p<l?r[p]:void 0,y=s[d];if(f!==void 0&&Hv(f,y))h=bh(f,y,i)||h,p++;else{let m=tD(r,y,p+1);if(m>=0){for(o=p;o<m;o++)_S(r[o]),hy(r,o,e,"removed");h=bh(r[m],y,i)||h,p=m+1}else $l(y,t,p<l?r[p].domNode:void 0,i),rD(y),hy(s,d,e,"added")}d++}if(l>p)for(o=p;o<l;o++)_S(r[o]),hy(r,o,e,"removed");return h};bh=(e,t,r)=>{let s=e.domNode,i=!1;if(e===t)return!1;let o=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let l=s.ownerDocument.createTextNode(t.text);return s.parentNode.replaceChild(l,s),t.domNode=l,i=!0,i}t.domNode=s}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=Wv(r,{namespace:gf})),e.text!==t.text&&(o=!0,t.text===void 0?s.removeChild(s.firstChild):s.textContent=t.text),t.domNode=s,o=nD(t,s,e.children,t.children,r)||o,o=oD(s,e.properties,t.properties,r)||o,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[s,r,t.vnodeSelector,t.properties,t.children]);return o&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(s,t.properties,e.properties),i};let ja=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let s=e;e=r,bh(s,r,t)},domNode:e.domNode});const lD={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let Aa=e=>Wv(lD,e),Mp={create:(e,t)=>(t=Aa(t),$l(e,document.createElement("div"),void 0,t),ja(e,t)),append:(e,t,r)=>(r=Aa(r),$l(t,e,void 0,r),ja(t,r)),insertBefore:(e,t,r)=>(r=Aa(r),$l(t,e.parentNode,e,r),ja(t,r)),merge:(e,t,r)=>(r=Aa(r),t.domNode=e,OI(e,t,r),ja(t,r)),replace:(e,t,r)=>(r=Aa(r),$l(t,e.parentNode,e,r),e.parentNode.removeChild(e),ja(t,r))};const aD={handleInterceptedEvent:(e,t,r,s)=>(e.scheduleRender(),t.properties[`on${s.type}`].apply(t.properties.bind||r,[s]))},uD={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{e.style[t]=r}},cD=e=>I(I({},uD),e),pD=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},dD=(e,t)=>e.find(t),xS=(e,t,r=!1)=>{let s=e;return t.forEach((i,o)=>{var l;const u=(l=s)!=null&&l.children?dD(s.children,p=>p.domNode===i):void 0;r&&!u&&o!==t.length-1||(s=u)}),s},hD=e=>{let t;const r=I(I({},aD),e),s=cD(r),i=s.performanceLogger;let o,l=!0,u=!1;const p=[],d=[],h=(y,m,v)=>{let _;s.eventHandlerInterceptor=(M,k,D,P)=>function(N){let J;i("domEvent",N);const Se=pD(N.currentTarget,_.domNode),re=Se.some(ie=>{var ge;return customElements.get(ie==null||(ge=ie.tagName)==null?void 0:ge.toLowerCase())});if(N.eventPhase===Event.CAPTURING_PHASE||!re)Se.reverse(),J=xS(_.getLastRender(),Se);else{const ie=N.composedPath(),ge=ie.slice(ie.indexOf(N.currentTarget),ie.indexOf(_.domNode)).filter(Ie=>Ie.getRootNode()===Ie.ownerDocument).reverse();J=xS(_.getLastRender(),ge,!0)}let de;return J&&(de=r.handleInterceptedEvent(t,J,this,N)),i("domEventProcessed",N),de},r.postProcessProjectionOptions==null||r.postProcessProjectionOptions(s);const S=v();_=y(m,S,s),p.push(_),d.push(v),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(_,S)};let f=()=>{if(o=void 0,l){l=!1,i("renderStart",void 0);for(let y=0;y<p.length;y++){const m=d[y]();i("rendered",void 0),p[y].update(m),i("patched",void 0)}i("renderDone",void 0),l=!0}};return r.modifyDoRenderImplementation&&(f=r.modifyDoRenderImplementation(f,p,d)),t={renderNow:f,scheduleRender:()=>{o||u||(o=requestAnimationFrame(f))},stop:()=>{o&&(cancelAnimationFrame(o),o=void 0),u=!0},resume:()=>{u=!1,l=!0,t.scheduleRender()},append:(y,m)=>{h(Mp.append,y,m)},insertBefore:(y,m)=>{h(Mp.insertBefore,y,m)},merge:(y,m)=>{h(Mp.merge,y,m)},replace:(y,m)=>{h(Mp.replace,y,m)},detach:y=>{for(let m=0;m<d.length;m++)if(d[m]===y)return d.splice(m,1),p.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},kn={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0},Kv=typeof window!="undefined"?window:{};kn.cssVarShim&&Kv.CSS;const fD=Kv.document||{head:{}};Kv.HTMLElement||class{};kn.shadowDomShim&&kn.shadowDom&&(fD.head.attachShadow+"").indexOf("[native")>-1;kn.constructableCSS;const yD=e=>e;kn.isTesting;kn.isDev,kn.isTesting;let EI;function mD(){yD(cs(Ic(EI)))}EI="components/assets";const TI=Symbol("widget"),gD=[],vD={},wh=new WeakMap;function jI(e,t){let r=t.children;if(r&&r.length)for(let i=0;i<r.length;++i)r[i]=jI(e,r[i]);else r=gD;const s=t.vnodeSelector;if(Qv(s)){const i=t.properties||vD,o=i.key||s;return{vnodeSelector:"div",properties:{key:o,afterCreate:bD,afterUpdate:wD,afterRemoved:AI,parentWidget:e,widgetConstructor:s,widgetProperties:pe(I({},i),{key:o,children:r})},children:void 0,text:void 0,domNode:null}}return t}function bD(e,t,r,{parentWidget:s,widgetConstructor:i,widgetProperties:o}){const l=new i(o);l.container=e,wh.set(e,l),l.afterCreate==null||l.afterCreate(l,e),s._internalHandles.add(Nh(()=>AI(e)))}function wD(e,t,r,{widgetProperties:s}){const i=wh.get(e);i&&(i.set(s),i.afterUpdate==null||i.afterUpdate(i,e))}function AI(e){const t=wh.get(e);t&&(t.destroy(),wh.delete(e))}function Qv(e){return typeof e=="function"&&e[TI]}function SD(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}const CI="esri.widgets.Widget",$S=Z.getLogger(CI);let _D=0;const xD={widgetIcon:"esri-icon-checkbox-unchecked"};function RI(e,t){for(const r in t)e[r]!=null&&(typeof e[r]=="object"&&typeof t[r]=="object"?RI(e[r],t[r]):e[r]=t[r]);return e}const $D=hD({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(s,i,o,l)=>{const u=t(s,i,o,l),p=r.test(s);if(!((s=s.replace(r,"")).toLowerCase()in o)||p){const d=s[2].toLowerCase()+s.slice(3),h=m=>u.call(o,m);o.addEventListener(d,h,p);const f=()=>o.removeEventListener(d,h,p),y=l.afterRemoved;l.afterRemoved=m=>{y==null||y(m),f()}}return u}},handleInterceptedEvent(e,t,r,s){const{eventPhase:i,type:o}=s,l=i===Event.CAPTURING_PHASE;let u=`on${o}${l?"capture":""}`;const p=t.properties;(u in p||(u=`on${o[0].toUpperCase()}${o.slice(1)}${l?"Capture":""}`,u in p))&&(wI(),e.scheduleRender(),p[u].call(p.bind||r,s))}});let fy=!1,St=class extends fv(Gh.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new da,this._projector=$D,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=xD.widgetIcon,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=nx(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const u=await vi(this._messageBundleProps.map(async({bundlePath:p,propertyName:d})=>{let h=await TM(p);this.uiStrings&&Object.keys(this.uiStrings)&&(h=RI(E(h),this.uiStrings)),this[d]=h}));for(const p of u)p.error&&$S.error("widget-intl:locale-error",this.declaredClass,p.error)}await this.loadLocale()}),mD();const r=["light","dark"],s=SD()||"light";r.includes(s)||_1($S,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,see:"https://developers.arcgis.com/javascript/latest/styling/"});const i="esri-widget-uid-"+JL(),o=this.render.bind(this);this._trackingTarget=new Uh(()=>this.scheduleRender());const l=()=>{var u;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:i,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const p=o();let{properties:d}=p;d||(p.properties=d={});let{key:h,styles:f}=d;h||(d.key=i),f||(d.styles=f={}),f.display||(f.display="");let y=0;return(u=p.children)==null||u.forEach(m=>{if(Qv(m.vnodeSelector))return;let{properties:v}=m;v||(m.properties=v={}),v.key||(v.key=`${this.id}--${y++}`)}),jI(this,p)};this.render=()=>{if(fy)return l();let u=W7(this);if(u)return u;this._trackingTarget.clear(),fy=!0;try{u=Si(this._trackingTarget,l)}finally{fy=!1}return H7(this,u),u},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()}))}normalizeCtorArgs(e,t){const r=I({},e);return t&&(r.container=t),r}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(ew)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(this._trackingTarget=Cy(this._trackingTarget),this.viewModel=Cy(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,dy(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return GL(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+_D++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector,handles:this._internalHandles}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(dy(this),this._projector.scheduleRender())}classes(...e){return Q7.apply(this,e)}own(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments)),this._internalHandles.add(e)}renderNow(){dy(this),this._projector.renderNow()}_postInitialize(){var e;if(this.destroyed)return;this.scheduleRender(),(e=this._delegatedEventNames)!=null&&e.length&&this._internalHandles.add(sc(()=>this.viewModel,(r,s)=>{s&&this._internalHandles.remove("delegated-events"),r&&this._internalHandles.add(this._delegatedEventNames.map(i=>r.on(i,o=>{this.emit(i,o)})),"delegated-events")},Ik)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(ew),this.scheduleRender()};this._internalHandles.add([c$(t),sc(()=>this.uiStrings,t),SM(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};St[TI]=!0,n([c()],St.prototype,"_readyForTrueRender",void 0),n([c({value:null})],St.prototype,"container",null),n([ht("container")],St.prototype,"castContainer",null),n([c({aliasOf:"container"})],St.prototype,"domNode",void 0),n([c()],St.prototype,"iconClass",void 0),n([c()],St.prototype,"id",null),n([c()],St.prototype,"label",void 0),n([c()],St.prototype,"renderable",null),n([c()],St.prototype,"uiStrings",void 0),n([c()],St.prototype,"viewModel",void 0),n([c()],St.prototype,"visible",void 0),n([c()],St.prototype,"key",void 0),n([c()],St.prototype,"children",void 0),n([c()],St.prototype,"afterCreate",void 0),n([c()],St.prototype,"afterUpdate",void 0),n([c()],St.prototype,"afterRemoved",void 0),St=n([b(CI)],St);const FI=St;function MD(e){return e&&typeof e.highlight=="function"}let gt=class extends Qh(F){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};n([c()],gt.prototype,"autoNavigate",void 0),n([c()],gt.prototype,"filter",void 0),n([c()],gt.prototype,"getResults",void 0),n([c()],gt.prototype,"getSuggestions",void 0),n([c()],gt.prototype,"maxResults",void 0),n([c()],gt.prototype,"maxSuggestions",void 0),n([c()],gt.prototype,"minSuggestCharacters",void 0),n([c()],gt.prototype,"outFields",void 0),n([c()],gt.prototype,"placeholder",void 0),n([c()],gt.prototype,"popupEnabled",void 0),n([c()],gt.prototype,"popupTemplate",void 0),n([c()],gt.prototype,"prefix",void 0),n([c()],gt.prototype,"resultGraphicEnabled",void 0),n([c()],gt.prototype,"resultSymbol",void 0),n([c()],gt.prototype,"suggestionsEnabled",void 0),n([c()],gt.prototype,"suffix",void 0),n([c()],gt.prototype,"withinViewEnabled",void 0),n([c()],gt.prototype,"zoomScale",void 0),gt=n([b("esri.widgets.Search.SearchSource")],gt);const Zv=gt,kI=96;function Eq(e,t){const r=t||e.extent,s=e.width,i=xc(r&&r.spatialReference);return r&&s?r.width/s*i*B3*kI:0}function ID(e,t){return e/(xc(t)*B3*kI)}function OD(e,t){const r=e.extent,s=e.width,i=ID(t,r.spatialReference);return r.clone().expand(i*s/r.width)}const MS=Z.getLogger("esri.widgets.Search.support.geometryUtils");function ED(e,t){var r,s;if(!t)return MS.error("missing-parameter: view is missing."),Promise.reject(new C("searchgeometryutils:missing-parameter","view is missing."));if(!e)return MS.error("missing-parameter: point is missing."),Promise.reject(new C("searchgeometryutils:missing-parameter","point is missing."));if(e.hasZ||t.type==="2d")return Promise.resolve(e);const i=t==null||(r=t.map)==null?void 0:r.ground;return i&&i.layers.length?i.queryElevation(e,{cache:(s=t.basemapTerrain)==null?void 0:s.elevationQueryCache}).then(o=>o.geometry):Promise.resolve(e)}function IS(e){if(X(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":return e.getPoint(0);case"polyline":return e.getPoint(0,0)}return null}function Yv(e,t,r){return X(e)?null:e.type==="extent"?e:e.type==="multipoint"||e.type==="polygon"||e.type==="polyline"?e.extent:e.type==="point"?NI(e,t,r):void 0}function Yg(e,t,r){return X(e)||X(t)?null:NI(e.center,t,r)}function NI(e,t,r){const s=e.hasZ?e.z:void 0;return t&&t.map?(r?OD(t,r):t.extent).clone().centerAt(e).set({zmax:s,zmin:s}):new ft({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:s,zmax:s})}const TD=/https?:\/\/services.*\.arcgis\.com/i,jD=/(?:\{([^}]+)\})/g,Pl=Z.getLogger("esri.widgets.Search.support.layerSearchUtils");function AD(e,t){const{exactMatch:r=!1,location:s,maxResults:i,spatialReference:o,source:l,sourceIndex:u,suggestResult:p,view:d}=e,{layer:h,filter:f,zoomScale:y}=l,m=d&&d.scale,v=PI(l,d),_=t&&t.signal;return DI(h).then(()=>{const S=h.popupTemplate;return S?S.getRequiredFields(h.fieldsIndex):null}).then(S=>{var M,k,D;const{objectIdField:P,returnZ:N}=h,J=VI(l);if(!Xv(h,J))throw Pl.error("invalid-field: displayField is invalid."),new C("getResults():invalid-field","displayField is invalid.");const Se=S&&S.length?S:[J],re=l.outFields||Se,de=LI(re);if(re.indexOf(P)!==-1||de||re.push(P),(M=h.floorInfo)!=null&&M.floorField&&re.push(h.floorInfo.floorField),!(de||Sh(h,re)))throw Pl.error("invalid-field: outField is invalid."),new C("getResults():invalid-field","outField is invalid.");const ie=h.createQuery(),{orderByFields:ge}=l;if(ge&&(ie.orderByFields=ge),o){ie.outSpatialReference=o;const ce=1/xc(o);ce&&(ie.maxAllowableOffset=ce)}const Ie=h.geometryType==="mesh"||h.geometryType==="multipatch",Re=((k=h.capabilities)==null||(D=k.data)==null?void 0:D.supportsZ)&&!Ie;if(ie.returnZ=Re&&N!==!1,ie.returnGeometry=!0,ie.multipatchOption=Ie?"xyFootprint":null,re&&(ie.outFields=re),s)ie.geometry=s;else if(p.key)ie.objectIds=[p.key];else{const ce=l.searchFields||[J];if(!Sh(h,ce))throw Pl.error("invalid-field: search field is invalid."),new C("getResults():invalid-field","search field is invalid.");if(zI(h)&&(ie.num=i),v&&(ie.geometry=v),!p.text.trim())return[];const{prefix:yt="",suffix:tt=""}=l,Oe=qI({searchTerm:UI(`${yt}${p.text}${tt}`),layer:h,searchFields:ce,filter:f,exactMatch:r,type:"search"});if(!Oe)return[];ie.where=Oe}return h.queryFeatures(ie,{signal:_}).then(ce=>qD(ce,d,l,u,J,m,y))})}function CD(e,t){const{source:r,spatialReference:s,view:i,suggestTerm:o,maxSuggestions:l,sourceIndex:u,exactMatch:p}=e,{layer:d,filter:h}=r,f=t&&t.signal,y=PI(r,i);return DI(d).then(()=>{if(!zI(d))return[];const m=VI(r),v=r.searchFields||[m],_=[];r.suggestionTemplate?r.suggestionTemplate.replace(jD,(de,ie)=>(_.push(ie),de)):_.push(m);const S=LI(_);_.indexOf(d.objectIdField)!==-1||S||_.push(d.objectIdField);const M=Xv(d,m),k=S||Sh(d,_),D=Sh(d,v);if(!M)throw Pl.error("invalid-field: displayField is invalid."),new C("getSuggestions():invalid-field","displayField is invalid.");if(!k)throw Pl.error("invalid-field: outField is invalid."),new C("getSuggestions():invalid-field","outField is invalid.");if(!D)throw Pl.error("invalid-field: search field is invalid."),new C("getSuggestions():invalid-field","search field is invalid.");const P=d.createQuery(),{orderByFields:N}=r;if(N&&(P.orderByFields=N),P.outSpatialReference=s,P.returnGeometry=!1,P.num=l,P.outFields=_,y&&(P.geometry=y),!o.trim())return[];const{prefix:J="",suffix:Se=""}=r,re=qI({searchTerm:UI(`${J}${o}${Se}`),layer:d,searchFields:v,filter:h,exactMatch:p,type:"suggest"});return re?(P.where=re,d.queryFeatures(P,{signal:f}).then(de=>VD(de,r,u,m))):[]})}function PI(e,t){const{filter:r,withinViewEnabled:s}=e,i=t&&t.extent;return r&&r.geometry||(s&&i?i:void 0)}function LI(e){return e&&e.indexOf("*")!==-1}async function DI(e){e&&await e.load()}function zI(e){var t,r,s;return(t=e==null||(r=e.capabilities)==null||(s=r.query)==null?void 0:s.supportsPagination)!=null&&t}function RD(e){var t,r,s,i;return(t=e==null||(r=e.fieldsIndex)==null||(s=r.fields)==null||(i=s.find(o=>o.type==="string"))==null?void 0:i.name)!=null?t:""}function VI(e){return e.displayField||e.layer.displayField||RD(e.layer)}function Sh(e,t){return!(!e||!t)&&t.every(r=>Xv(e,r))}function Xv(e,t){return!!e.getField(t)}function FD(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}function kD(e,t,r){let s=null;const{codedValues:i}=e;return i&&i.some(o=>{const l=o.name,u=r?l:l.toLowerCase();return(r?t:t.toLowerCase())===u&&(s=o.code.toString(),!0)}),s}function UI(e){return e.replace(/\'/g,"''")}function Ip(e,t){const r=t&&t.where;return r?`(${e}) AND (${r})`:e}function ND({currentTerm:e,field:t,filter:r,exactMatch:s,url:i,type:o}){const l=t.type,u=t.name;if(l==="string"||l==="date"||l==="global-id"){const p=TD.test(i),d=p&&FD(e)?"N":"";if(s&&o==="search")return Ip(`${u} = ${d}'${e}'`,r);const h=p?u:`UPPER(${u})`,f=p?e:e.toUpperCase();return Ip(`${h} LIKE ${d}${s?`'${f}%'`:`'%${f}%'`}`,r)}if(l==="oid"||l==="small-integer"||l==="integer"||l==="single"||l==="double"){const p=Number(e);return isNaN(p)?null:Ip(`${u} = ${p}`,r)}return Ip(`${u} = ${e}`,r)}function PD(e,t){return e?` OR (${t})`:`(${t})`}function qI({searchTerm:e,layer:t,searchFields:r,filter:s,exactMatch:i,type:o}){const{definitionExpression:l,url:u}=t;let p="";return e&&r&&r.forEach(d=>{const h=t.getField(d),f=typeof t.getFieldDomain=="function"&&t.getFieldDomain(d),y=(f&&f.type==="coded-value"?kD(f,e,i):null)||e||null;if(y!==null){const m=ND({currentTerm:y,field:h,filter:s,exactMatch:i,url:u,type:o});m&&(p+=PD(p,m))}}),l?`(${l}) AND (${p})`:p}function LD(e,t){let r=null;const{codedValues:s}=e;return s&&s.length&&s.some(i=>i.code===t&&(r=i.name,!0)),r}function DD(e,t){return e[Object.keys(e).find(r=>r.toLowerCase()===t.toLowerCase())]}function BI(e,t,r){const s=e.sourceLayer,{attributes:i}=e,o=typeof s.getFieldDomain=="function"&&s.getFieldDomain(r);if(t)return EM(t,i);if(r&&i){const l=s.getField(r),u=DD(i,r);return u==null?"":o&&o.type==="coded-value"?LD(o,u):(l==null?void 0:l.type)==="date"?Wl(new Date(u)):typeof u=="number"?u.toString():typeof u!="string"?"":u.trim()}return""}function zD(e,t,r,s){const i=e.sourceLayer,{attributes:o}=e,{objectIdField:l}=i,u=o[l];return{text:BI(e,t.suggestionTemplate,s),key:u,sourceIndex:r}}function VD(e,t,r,s){return e.features.map(i=>zD(i,t,r,s))}function UD(e,t,r,s,i,o,l){const u=e.clone(),p=e.sourceLayer,d=p&&p.objectIdField,h=d&&e.attributes[d],f=BI(e,r.searchTemplate,i),y=Yv(u.geometry,t,o),m=typeof l=="number"?Yg(E(y),t,l):y,v=e.clone();return T(m)&&(v.geometry=ea.fromExtent(m)),{extent:m,target:v,feature:u,key:h,name:f,sourceIndex:s}}function qD(e,t,r,s,i,o,l){return e.features.map(u=>UD(u,t,r,s,i,o,l))}var Xg;let ss=Xg=class extends Zv{constructor(e){super(e),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(t,r)=>AD(I({source:this},t),r),this.getSuggestions=(t,r)=>CD(I({source:this},t),r)}set layer(e){this._set("layer",e),e&&e.load().catch(()=>{})}get name(){return this._getLayerTitle()||""}set name(e){e!==void 0?this._override("name",e):this._clearOverride("name")}clone(){return new Xg({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?E(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?E(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var e,t;return(e=(t=this.layer.fieldsIndex.fields.find(r=>r.type==="string"))==null?void 0:t.name)!=null?e:""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;return e.loaded?`: ${(t||[this._getDisplayField()]).map(r=>{const s=e.getField(r);return s&&s.alias||r}).join(", ")}`:""}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?`${t}${this._getSearchFieldsString()}`:void 0}};n([c({json:{read:{source:"field.name"},write:{target:"field.name"}}})],ss.prototype,"displayField",void 0),n([c({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],ss.prototype,"exactMatch",void 0),n([c({value:null})],ss.prototype,"layer",null),n([c()],ss.prototype,"name",null),n([c({type:[String],json:{write:!0}})],ss.prototype,"orderByFields",void 0),n([c()],ss.prototype,"searchFields",void 0),n([c()],ss.prototype,"searchTemplate",void 0),n([c()],ss.prototype,"suggestionTemplate",void 0),ss=Xg=n([b("esri.widgets.Search.LayerSearchSource")],ss);const yl=ss;function Ec(e,t){return t?pe(I({},t),{query:I(I({},e),t.query)}):{query:e}}function Tc(e){return typeof e=="string"?xr(e):e}function jc(e,t,r){const s={};for(const i in e){if(i==="declaredClass")continue;const o=e[i];if(o!=null&&typeof o!="function")if(Array.isArray(o)){s[i]=[];for(let l=0;l<o.length;l++)s[i][l]=jc(o[l])}else if(typeof o=="object")if(o.toJSON){const l=o.toJSON(r&&r[i]);s[i]=t?l:JSON.stringify(l)}else s[i]=t?o:JSON.stringify(o);else s[i]=o}return s}function BD(e){return e&&typeof e.x=="number"&&typeof e.y=="number"}function GD(e){return e&&typeof e.xmin=="number"&&typeof e.ymin=="number"&&typeof e.xmax=="number"&&typeof e.ymax=="number"}let to=class extends F{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};n([c({type:String,json:{write:!0}})],to.prototype,"address",void 0),n([c({type:Object,json:{write:!0}})],to.prototype,"attributes",void 0),n([c({type:ft,json:{write:!0}})],to.prototype,"extent",void 0),n([c({type:Ke,json:{write:!0}})],to.prototype,"location",void 0),n([c({type:Number,json:{write:!0}})],to.prototype,"score",void 0),to=n([b("esri.rest.support.AddressCandidate")],to);const eb=to,tb={type:String,json:{read:{source:"token"},write:{target:"token"}}};let Nt=class extends F{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};n([c({type:Object,json:{write:!0}})],Nt.prototype,"address",void 0),n([c(tb)],Nt.prototype,"apiKey",void 0),n([c({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],Nt.prototype,"categories",void 0),n([c({type:String,json:{write:!0}})],Nt.prototype,"countryCode",void 0),n([c({type:Boolean,json:{write:!0}})],Nt.prototype,"forStorage",void 0),n([c({type:Ke,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],Nt.prototype,"location",void 0),n([c({type:String,json:{write:!0}})],Nt.prototype,"locationType",void 0),n([c({type:String,json:{write:!0}})],Nt.prototype,"magicKey",void 0),n([c({type:Number,json:{write:!0}})],Nt.prototype,"maxLocations",void 0),n([c({type:[String],json:{write:{writer:(e,t)=>{t.outFields=e?e.join(","):null}}}})],Nt.prototype,"outFields",void 0),n([c({type:Ae,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Nt.prototype,"outSpatialReference",void 0),n([c({type:ft,json:{write:{writer:(e,t)=>{const r=e?e.shiftCentralMeridian():null;t.searchExtent=r}}}})],Nt.prototype,"searchExtent",void 0),Nt=n([b("esri.rest.support.AddressToLocationsParameters")],Nt),Nt.from=Je(Nt);const GI=Nt;async function JI(e,t,r){t=GI.from(t);const s=Tc(e),h=t.toJSON(),{address:i}=h,o=ub(h,["address"]),l=pe(I(I({},i),o),{f:"json"}),u=jc(I(I({},s.query),l)),p=Ec(u,r),d=`${s.path}/findAddressCandidates`;return at(d,p).then(JD)}function JD({data:e}){if(!e)return[];const{candidates:t,spatialReference:r}=e;return t?t.map(s=>{if(!s)return;const{extent:i,location:o}=s,l=!i||GD(i);return BD(o)&&l?(i&&(i.spatialReference=r),o.spatialReference=r,eb.fromJSON(s)):void 0}):[]}let As=class extends F{constructor(e){super(e),this.addresses=null,this.categories=null,this.countryCode=null,this.locationType=null,this.outSpatialReference=null}};n([c({type:[Object],json:{read:{reader:e=>e&&e.records?e.records.map(t=>t.attributes):null},write:{writer:(e,t)=>{const r=[];Array.isArray(e)&&e.forEach(s=>{r.push({attributes:s})}),t.addresses={records:r}}}}})],As.prototype,"addresses",void 0),n([c({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],As.prototype,"categories",void 0),n([c({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],As.prototype,"countryCode",void 0),n([c({type:String,json:{write:!0}})],As.prototype,"locationType",void 0),n([c({type:Ae,json:{read:{source:"outSR"},write:{target:"outSR"}}})],As.prototype,"outSpatialReference",void 0),As=n([b("esri.rest.support.AddressesToLocationsParameters")],As),As.from=Je(As);const WD=As;async function HD(e,t,r){t=WD.from(t);const s=Tc(e),i=pe(I({},t.toJSON()),{f:"json"}),o=jc(I(I({},s.query),i)),l=Ec(o,r),u=`${s.path}/geocodeAddresses`;return at(u,l).then(KD)}function KD(e){const{data:t}=e;if(!t)return[];const{locations:r,spatialReference:s}=t;return r?r.map(i=>{const{location:o}=i;return o&&(o.spatialReference=s),eb.fromJSON(i)}):[]}let ui=class extends F{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};n([c(tb)],ui.prototype,"apiKey",void 0),n([c({type:Ke,json:{write:{writer:(e,t)=>{const r=e?e.clone().normalize():null,s=r!==void 0;t.location=s?r:null}}}})],ui.prototype,"location",void 0),n([c({type:String,json:{write:!0}})],ui.prototype,"locationType",void 0),n([c({type:Ae,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ui.prototype,"outSpatialReference",void 0),ui=n([b("esri.rest.support.LocationToAddressParameters")],ui),ui.from=Je(ui);const WI=ui;async function HI(e,t,r){t=WI.from(t);const s=Tc(e),i=pe(I({},t.toJSON()),{f:"json"}),o=jc(I(I({},s.query),i)),l=Ec(o,r),u=`${s.path}/reverseGeocode`;return at(u,l).then(QD)}function QD({data:e}){if(!e)return;const{address:t,location:r}=e,s=t&&t.Match_addr||"";return eb.fromJSON({address:s,attributes:t||{},location:r,score:100})}let ml=class extends F{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};n([c({type:Boolean,json:{write:!0}})],ml.prototype,"isCollection",void 0),n([c({type:String,json:{write:!0}})],ml.prototype,"magicKey",void 0),n([c({type:String,json:{write:!0}})],ml.prototype,"text",void 0),ml=n([b("esri.rest.support.SuggestionCandidate")],ml);const ZD=ml;let yr=class extends F{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};n([c(tb)],yr.prototype,"apiKey",void 0),n([c({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],yr.prototype,"categories",void 0),n([c({type:String,json:{write:!0}})],yr.prototype,"countryCode",void 0),n([c({type:Ke,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],yr.prototype,"location",void 0),n([c({type:Number,json:{write:!0}})],yr.prototype,"maxSuggestions",void 0),n([c({type:Ae,json:{read:{source:"outSR"},write:{target:"outSR"}}})],yr.prototype,"outSpatialReference",void 0),n([c({type:ft,json:{write:{writer:(e,t)=>{const r=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(r)}}}})],yr.prototype,"searchExtent",void 0),n([c({type:String,json:{write:!0}})],yr.prototype,"text",void 0),yr=n([b("esri.rest.support.SuggestLocationsParameters")],yr),yr.from=Je(yr);const KI=yr;async function QI(e,t,r){const s=Tc(e),i=pe(I({},(t=KI.from(t)).toJSON()),{f:"json"}),o=jc(I(I({},s.query),i)),l=Ec(o,r),u=`${s.path}/suggest`;return at(u,l).then(YD)}function YD(e){const{data:t}=e;if(!t)return[];const{suggestions:r}=t;return r?r.map(s=>new ZD(s)):[]}let gl=class extends st{constructor(...e){super(...e),this.requestOptions=null,this.url=null}normalizeCtorArgs(e,t){return typeof e!="string"?e:I({url:e},t)}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(e){return e?xr(e):null}_encode(e,t,r){const s={};for(const i in e){if(i==="declaredClass")continue;const o=e[i];if(o!=null&&typeof o!="function")if(Array.isArray(o)){s[i]=[];for(let l=0;l<o.length;l++)s[i][l]=this._encode(o[l])}else if(typeof o=="object")if(o.toJSON){const l=o.toJSON(r&&r[i]);s[i]=t?l:JSON.stringify(l)}else s[i]=t?o:JSON.stringify(o);else s[i]=o}return s}};n([c({readOnly:!0})],gl.prototype,"parsedUrl",null),n([c()],gl.prototype,"requestOptions",void 0),n([c({type:String})],gl.prototype,"url",void 0),gl=n([b("esri.tasks.Task")],gl);const XD=gl;let gu=class extends XD{constructor(e){super(e),this.outSpatialReference=null,this.url=null}addressToLocations(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);const r=I(I({},this.requestOptions),t);return JI(this.url,e,r)}suggestLocations(e,t){const r=I(I({},this.requestOptions),t);return QI(this.url,e,r)}addressesToLocations(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);const r=I(I({},this.requestOptions),t);return HD(this.url,e,r)}locationToAddress(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);const r=I(I({},this.requestOptions),t);return HI(this.url,e,r)}};n([c({type:Ae})],gu.prototype,"outSpatialReference",void 0),n([c()],gu.prototype,"url",void 0),gu=n([b("esri.tasks.Locator")],gu);const ez=gu,tz="Single Line Input",rz=3e5;function sz(e,t){return e.location?az(e,t):uz(e,t)}function ZI(e,t){if(t.localSearchDisabled)return null;const r=e==null?void 0:e.scale;return typeof r=="number"&&r<=rz?e.get("extent.center"):null}function iz(e,t){const{source:r,spatialReference:s,view:i,suggestTerm:o,maxSuggestions:l,sourceIndex:u}=e,p=new KI,{apiKey:d,url:h}=r,f=YI(r,i),y=t&&t.signal;if(!h)return Promise.resolve(null);d&&(p.apiKey=d),r.categories&&(p.categories=r.categories),s&&(p.outSpatialReference=s);const m=ZI(i,r);if(m&&(p.location=m),!o.trim())return Promise.resolve(null);const{prefix:v="",suffix:_=""}=r,S=`${v}${o}${_}`;return p.text=S,f&&(p.searchExtent=f),p.maxSuggestions=l,r.countryCode&&(p.countryCode=r.countryCode),QI(h,p,{signal:y}).then(M=>pz(M,u))}function oz(e){return!!e&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}function nz(e){return!!e&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(e)}function OS(e){return!!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}const lz="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";function az(e,t){const{source:r,spatialReference:s,location:i,sourceIndex:o,view:l}=e,{apiKey:u,url:p,zoomScale:d,defaultZoomScale:h}=r,f=l&&l.scale,y=t&&t.signal,m=new WI;return m.location=i,u&&(m.apiKey=u),s&&(m.outSpatialReference=s),HI(p,m,{signal:y}).then(v=>XI([v],{sourceIndex:o,scale:f,view:l,zoomScale:d,defaultZoomScale:h})).catch(()=>[])}function YI(e,t){const{filter:r,withinViewEnabled:s}=e,i=t&&t.scale,o=t&&t.extent,l=r&&r.geometry;return Yv(l,t,i)||(s&&o?o:void 0)}function uz(e,t){const{source:r,suggestResult:s,spatialReference:i,view:o,maxResults:l,sourceIndex:u}=e,p=r&&r.zoomScale,d=r&&r.defaultZoomScale;if(!s.text.trim())return Promise.resolve(null);const h=!s.key&&r.prefix?r.prefix:"",f=!s.key&&r.suffix?r.suffix:"",y=`${h}${s.text}${f}`,m=new GI,{apiKey:v,url:_}=r,S=o&&o.scale,M=YI(r,o),k=t&&t.signal;if(v&&(m.apiKey=v),!_)return Promise.resolve(null);r.categories&&(m.categories=r.categories),r.locationType&&(m.locationType=r.locationType),i&&(m.outSpatialReference=i);const D=ZI(o,r);D&&(m.location=D),m.maxLocations=l,M&&(m.searchExtent=M),r.countryCode&&(m.countryCode=r.countryCode);const{key:P}=s,N=`${P}`;return P&&(m.magicKey=N),m.address={},m.address[r.singleLineFieldName||tz]=y,r.outFields&&(m.outFields=r.outFields),JI(_,m,{signal:k}).then(J=>XI(J,{key:N,scale:S,sourceIndex:u,view:o,zoomScale:p,defaultZoomScale:d}))}function cz(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}function pz(e,t){return e.map(r=>cz(r,t))}function dz(e,t){const{key:r,scale:s,sourceIndex:i,view:o,zoomScale:l,defaultZoomScale:u}=t,{attributes:p,extent:d,location:h,address:f}=e,y=new xo({geometry:h,attributes:p}),m=d||h,v=Yv(m,o,s),_=typeof l=="number"?Yg(v,o,l):typeof u=="number"&&m.type==="point"?Yg(v,o,u):v,S=h?`${h.x},${h.y}`:"",M=f||S,k=y.clone();return T(_)&&(k.geometry=ea.fromExtent(_)),{extent:_,feature:y,target:k,key:r,name:M,sourceIndex:i}}function XI(e,t){return e.filter(Boolean).map(r=>dz(r,t))}var e1;const eO="esri.widgets.Search.LocatorSearchSource",ES=Z.getLogger(eO);let Pt=e1=class extends Zv{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(t,r)=>sz(I({source:this},t),r),this.getSuggestions=(t,r)=>iz(I({source:this},t),r)}set locator(e){qu(ES,"locator",{replacement:"url",version:"4.22"}),this._set("url",e.url),this._set("locator",e)}get locator(){return qu(ES,"locator",{replacement:"url",version:"4.22"}),this._get("locator")}clone(){return new e1({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?E(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?E(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};n([c()],Pt.prototype,"apiKey",void 0),n([c()],Pt.prototype,"categories",void 0),n([c()],Pt.prototype,"countryCode",void 0),n([c({json:{write:!0}})],Pt.prototype,"defaultZoomScale",void 0),n([c()],Pt.prototype,"localSearchDisabled",void 0),n([c({type:ez,json:{read:!1,write:!1}})],Pt.prototype,"locator",null),n([c()],Pt.prototype,"locationType",void 0),n([c({json:{write:!0}})],Pt.prototype,"name",void 0),n([c({json:{write:!0}})],Pt.prototype,"placeholder",void 0),n([c()],Pt.prototype,"searchTemplate",void 0),n([c({json:{write:!0}})],Pt.prototype,"singleLineFieldName",void 0),n([c({json:{read:{source:"suggest"},write:{target:"suggest"}}})],Pt.prototype,"suggestionsEnabled",void 0),n([c({json:{write:!0}})],Pt.prototype,"url",void 0),n([c({json:{write:!0}})],Pt.prototype,"zoomScale",void 0),Pt=e1=n([b(eO)],Pt);const tO=Pt,Tq=new ye({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),hz=new ye({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});function jq(e){const{geometries:t,deviationUnit:r,maxDeviation:s}=e.toJSON(),i={maxDeviation:s};return t&&t.length&&(i.geometries=JSON.stringify({geometryType:Cn(t[0]),geometries:t}),i.sr=JSON.stringify(t[0].spatialReference)),hz.write(r,i,"deviationUnit"),i}let ro=class extends F{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};n([c({type:String,json:{write:!0}})],ro.prototype,"deviationUnit",void 0),n([c({json:{read:{reader:e=>e?e.map(t=>Dr(t)):null},write:{writer:(e,t)=>{t.geometries=e.map(r=>r.toJSON())}}}})],ro.prototype,"geometries",void 0),n([c({type:Number,json:{write:!0}})],ro.prototype,"maxDeviation",void 0),ro=n([b("esri.rest.support.GeneralizeParameters")],ro),ro.from=Je(ro);const Aq=ro,fz=new ye({preserveShape:"preserve-shape"});function Cq(e){const{polylines:t,lengthUnit:r,geodesic:s,calculationType:i}=e.toJSON(),o={};o.polylines=JSON.stringify(t);const l=e.polylines[0].spatialReference;return o.sr=l.wkid?l.wkid:JSON.stringify(l.toJSON()),r&&(o.lengthUnit=r),s&&(o.geodesic=s),i&&(o.calculationType=fz.toJSON(i)),o}let ci=class extends F{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};n([c({type:String,json:{write:!0}})],ci.prototype,"calculationType",void 0),n([c({type:Boolean,json:{write:!0}})],ci.prototype,"geodesic",void 0),n([c({json:{write:!0}})],ci.prototype,"lengthUnit",void 0),n([c({type:[yc],json:{read:{reader:e=>e?e.map(t=>Dr(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(r=>r.toJSON())}}}})],ci.prototype,"polylines",void 0),ci=n([b("esri.rest.support.LengthsParameters")],ci),ci.from=Je(ci);const Rq=ci,yz=new ye({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),mz=new ye({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});function Fq(e){const{geometries:t,bevelRatio:r,offsetDistance:s,offsetHow:i,offsetUnit:o}=e.toJSON(),l={bevelRatio:r,offsetDistance:s};return t&&t.length&&(l.geometries=JSON.stringify({geometryType:Cn(t[0]),geometries:t}),l.sr=JSON.stringify(t[0].spatialReference)),i&&(l.offsetHow=yz.toJSON(i)),o&&(l.offsetUnit=mz.toJSON(o)),l}let Cs=class extends F{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};n([c({type:Number,json:{write:!0}})],Cs.prototype,"bevelRatio",void 0),n([c({json:{read:{reader:e=>e?e.map(t=>Dr(t)):null},write:{writer:(e,t)=>{t.geometries=e.map(r=>r.toJSON())}}}})],Cs.prototype,"geometries",void 0),n([c({type:Number,json:{write:!0}})],Cs.prototype,"offsetDistance",void 0),n([c({type:String,json:{write:!0}})],Cs.prototype,"offsetHow",void 0),n([c({type:String,json:{write:!0}})],Cs.prototype,"offsetUnit",void 0),Cs=n([b("esri.rest.support.OffsetParameters")],Cs),Cs.from=Je(Cs);const kq=Cs;function Nq(e){return{geometryType:Cn(e[0]),geometries:e.map(t=>t.toJSON())}}function gz(e,t,r){const s=SA(t);return e.map(i=>{const o=s.fromJSON(i);return o.spatialReference=r,o})}let un=class extends F{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(function(s){return s.toJSON()}),t=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:Cn(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};n([c()],un.prototype,"geometries",void 0),n([c({json:{read:{source:"outSR"}}})],un.prototype,"outSpatialReference",void 0),n([c()],un.prototype,"transformation",void 0),n([c()],un.prototype,"transformForward",void 0),un=n([b("esri.rest.support.ProjectParameters")],un);const rO=un,vz=Je(rO);async function bz(e,t,r){t=vz(t);const s=Tc(e),i=I(pe(I({},s.query),{f:"json"}),t.toJSON()),o=t.outSpatialReference,l=Cn(t.geometries[0]),u=Ec(i,r);return at(s.path+"/project",u).then(({data:{geometries:p}})=>gz(p,l,o))}const wz=new ye({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});function Pq(e){const{geometries1:t,geometries2:r,relation:s,relationParameter:i}=e.toJSON(),o={};if(t&&t.length){o.geometries1=JSON.stringify({geometryType:Cn(t[0]),geometries:t});const l=t[0].spatialReference;o.sr=l.wkid?l.wkid:JSON.stringify(l)}return r&&r.length>0&&(o.geometries2=JSON.stringify({geometryType:Cn(r[0]),geometries:r})),s&&(o.relation=wz.toJSON(s)),i&&(o.relationParam=i),o}let pi=class extends F{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};n([c({json:{read:{reader:e=>e?e.map(t=>Dr(t)):null},write:{writer:(e,t)=>{t.geometries1=e.map(r=>r.toJSON())}}}})],pi.prototype,"geometries1",void 0),n([c({json:{read:{reader:e=>e?e.map(t=>Dr(t)):null},write:{writer:(e,t)=>{t.geometries2=e.map(r=>r.toJSON())}}}})],pi.prototype,"geometries2",void 0),n([c({type:String,json:{write:!0}})],pi.prototype,"relation",void 0),n([c({type:String,json:{write:!0}})],pi.prototype,"relationParameter",void 0),pi=n([b("esri.rest.support.RelationParameters")],pi),pi.from=Je(pi);const Lq=pi,Sz=new ye({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});function Dq(e){const{extendHow:t,polylines:r,trimExtendTo:s}=e.toJSON(),i={};return i.extendHow=Sz.toJSON(t),r&&r.length&&(i.polylines=JSON.stringify(r),i.sr=JSON.stringify(r[0].spatialReference)),s&&(i.trimExtendTo=JSON.stringify(s)),i}let so=class extends F{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};n([c({type:String,json:{write:!0}})],so.prototype,"extendHow",void 0),n([c({type:[yc],json:{read:{reader:e=>e?e.map(t=>Dr(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(r=>r.toJSON())}}}})],so.prototype,"polylines",void 0),n([c({json:{read:{reader:e=>e?Dr(e):null},write:{writer:(e,t)=>{t.trimExtendTo=e.toJSON()}}}})],so.prototype,"trimExtendTo",void 0),so=n([b("esri.rest.support.TrimExtendParameters")],so),so.from=Je(so);const zq=so,sO=Z.getLogger("esri.widgets.support.geolocationUtils"),_z={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function xz(){const e=R("esri-geolocation");return e||sO.warn("geolocation-unsupported","Geolocation unsupported."),e}function $z(){const e=window.isSecureContext;return e||sO.warn("insecure-context","Geolocation requires a secure origin."),e}function TS(){return xz()&&$z()}function Mz(e){return e||(e=_z),new Promise((r,s)=>{setTimeout(()=>s(new C("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(r,s,e)})}function Iz(e,t){const{position:r,view:s}=e;return Tz(Ez(Oz(r)),s,t)}function Oz(e){const t=e&&e.coords||{},r={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e&&{coords:r,timestamp:e.timestamp}}function Ez(e){const t=e&&e.coords;return t?new Ke({longitude:t.longitude,latitude:t.latitude,z:t.altitude||null,spatialReference:{wkid:4326}}):null}function Tz(e,t,r){if(!t)return Promise.resolve(e);const s=t.spatialReference;return s.isWGS84?Promise.resolve(e):s.isWebMercator?Promise.resolve(Np(e)):jz(r).then(i=>{if(!i)throw new C("geometry-service:missing-url","Geometry service URL is missing");const o=new rO({geometries:[e],outSpatialReference:s});return bz(i,o,r).then(l=>l[0])})}function jz(e){if(Ue.geometryServiceUrl)return Promise.resolve(Ue.geometryServiceUrl);const t=ur.getDefault();return t.load(e).catch(()=>{}).then(()=>t.get("helperServices.geometry.url"))}const Az=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:s}=this;return this.goToOverride?this.goToOverride(s,r):s.goTo(r.target,r.options)}};return n([c()],t.prototype,"goToOverride",void 0),n([c()],t.prototype,"view",void 0),t=n([b("esri.widgets.support.GoTo")],t),t};function Dt(e,t){return e.hasOwnProperty(t)&&e[t]!=null&&e[t]!==""}const Cz=()=>TM("esri/widgets/Search/t9n/Search"),iO="esri.widgets.Search.SearchViewModel",Br=Z.getLogger(iO),jS="highlight",Ed=et.ofType({key:e=>e.layer?"layer":"locator",base:Zv,typeMap:{layer:yl,locator:tO}}),AS=Ae.WGS84,Rz="esri/images/search/search-symbol-32.svg",Fz="esri/images/search/search-symbol-32.png",kz=/<(?:.|\s)*?>/g,vl=-1;let ve=class extends Az(Gh.EventedMixin(st)){constructor(e){super(e),this._handles=new da,this._gotoController=null,this._searching=null,this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new Ed,this.defaultSymbols={point:new wc({url:Ic(R("trident")?Fz:Rz),size:24,width:24,height:24}),polyline:new zr({color:[130,130,130,1],width:2}),polygon:new Dn({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=ur.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new Ed,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const t=await Cz();this.messages=t,this.defaultPopupTemplate=new ra({title:t.searchResult,content:"{Match_addr}"})};e(),this._handles.add([gh(this,["includeDefaultSources","view","portal"],()=>this._update()),c$(e)])}destroy(){this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}get activeSource(){return this.allSources.getItemAt(this.activeSourceIndex)||null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:vl}set activeSourceIndex(e){e!==void 0?this._override("activeSourceIndex",e):this._clearOverride("activeSourceIndex")}get allPlaceholder(){var e;return(e=this.messages)==null?void 0:e.allPlaceholder}set allPlaceholder(e){e?this._override("allPlaceholder",e):this._clearOverride("allPlaceholder")}get allSources(){const{sources:e,defaultSources:t,includeDefaultSources:r}=this,s=typeof r=="function"?r.call(null,{sources:e,defaultSources:t}):r?t.concat(e):e,i=this._get("allSources")||new Ed;return i.removeAll(),i.addMany(s.filter(Boolean)),i}get defaultSymbol(){return qu(Br,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._get("defaultSymbol")}set defaultSymbol(e){qu(Br,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._set("defaultSymbol",e)}get locationEnabled(){return this._get("locationEnabled")||TS()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const t=TS();if(e&&!t){const r=new C("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Br.error(r)}this._override("locationEnabled",e&&t)}get placeholder(){const{allSources:e,activeSourceIndex:t,allPlaceholder:r}=this;if(t===vl)return r;const s=e.getItemAt(t);return s?s.placeholder:""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}search(e,t){this.emit("search-start"),this.clearGraphics();const r=this._createSuggestionForSearch(e),s=this.when().then(()=>this._getResultsFromSources(r,t).then(i=>{var o;if((o=t==null?void 0:t.signal)!=null&&o.aborted)return null;const l={activeSourceIndex:this.activeSourceIndex,searchTerm:r.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(l,i,r);const u=this._getFirstResult(l.results),p=(r.location&&u?u.name:r.text).replace(kz,"");return this._set("searchTerm",p),(r.key&&typeof r.sourceIndex=="number"||r.location)&&this._set("selectedSuggestion",r),this._set("results",l.results),this._set("resultCount",l.results.reduce((d,h)=>d+h.results.length,0)),this.emit("search-complete",l),this._selectFirstResult(u).then(()=>l)})).then(i=>(this._clearSearching(),i),i=>{throw this._clearSearching(),i});return this._searching=s,s}searchNearby(e){if(!this.locationEnabled){const r=new C("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return Br.error(r),Promise.reject(r)}const t=Mz().then(r=>Iz({position:r,view:this.view},e)).then(r=>this.search(r,e));return this._searching=t,t.catch(()=>{}).then(()=>this._clearSearching()),t}select(e){if(this.clearGraphics(),!e){const M=new C("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});return Br.error(M),Promise.reject(M)}const{view:t}=this,r=Dt(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),s=this.allSources.getItemAt(r);if(!s){const M=new C("select:missing-source","Cannot select without a source.",{source:s});return Br.error(M),Promise.reject(M)}const i=s instanceof yl?this._getLayerSourcePopupTemplate(s):s.popupTemplate,o=s.resultSymbol||this._getDefaultSymbol(e),l=Dt(s,"resultGraphicEnabled")?s.resultGraphicEnabled:this.resultGraphicEnabled,u=Dt(s,"autoNavigate")?s.autoNavigate:this.autoNavigate,p=Dt(s,"popupEnabled")?s.popupEnabled:this.popupEnabled,d=p?i||this.popupTemplate||this.defaultPopupTemplate:null,{feature:h}=e;if(!h){const M=new C("select:missing-feature","Cannot select without a feature.",{feature:h});return Br.error(M),Promise.reject(M)}const{attributes:f,geometry:y,layer:m,sourceLayer:v}=h,_=IS(y),S={layerViewQuery:this._getLayerView(h),elevationQuery:t&&T(_)?ED(_,t).catch(()=>_):Promise.resolve(_)};return vi(S).then(M=>{const k=M.layerViewQuery.value,D=M.elevationQuery.value;o instanceof zn&&(o.text=e.name);const P=t&&u?e.target||e.extent:null;return(T(P)?this._goToSearchResult(P):Promise.resolve()).then(()=>{var N;const J=k?h:new xo({geometry:y,symbol:o,attributes:f,layer:m,sourceLayer:v,popupTemplate:d}),Se=p&&((N=this.view)==null?void 0:N.popup),re=Se&&J.getEffectivePopupTemplate(Se.defaultPopupTemplateEnabled);return re&&t.popup.open({features:[J],location:D}),k&&MD(k)&&!re&&this._highlightFeature({graphic:J,layerView:k}),!k&&l&&t&&t.graphics.push(J),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",J),this.emit("select-result",{result:e,source:s,sourceIndex:r}),e})})}suggest(e,t,r){const s=e||this.searchTerm;return this.emit("suggest-start",{searchTerm:s}),this._suggestTimer(t,r).then(()=>this._suggestImmediate(s,r).then(i=>(this._set("suggestions",i.results),this._set("suggestionCount",i.results.reduce((o,l)=>o+l.results.length,0)),this.emit("suggest-complete",i),i)))}async when(){await v2(()=>!this.updating)}async _update(){const{portal:e,view:t}=this;if(this.includeDefaultSources){const r=this._updatingPromise=vi([e==null?void 0:e.load(),t==null?void 0:t.when()]);if(this.destroyed||(await r,r!==this._updatingPromise))return}await v2(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var e,t;const r=(e=this.portal)==null||(t=e.helperServices)==null?void 0:t.geocode;return r?r.map(s=>{if(s.placefinding===!1)return;const i=Ue.apiKey&&OS(s.url)?{url:lz}:null,o=tO.fromJSON(I(I({},s),i)),l=o.url;if(OS(l)||nz(l)||oz(l)){const u=o.outFields||["Addr_type","Match_addr","StAddr","City"],p=o.placeholder||this.messages.placeholder,d=typeof o.defaultZoomScale=="number"?o.defaultZoomScale:2500;o.set({singleLineFieldName:"SingleLine",outFields:u,placeholder:p,defaultZoomScale:d})}return o.singleLineFieldName?o:void 0}).filter(Boolean):[]}_getLayerSources(e,t){var r;const s=(r=this.view)==null?void 0:r.map;return e.map(i=>{const o=s.findLayerById(i.id);if(!o)return;const l=this._getLayerJSON(i),u=yl.fromJSON(l);return u.placeholder=t,this._getLayer(o,l).then(p=>{u.layer=p}),u}).filter(Boolean).toArray()}_getTableSources(e,t){var r;const s=(r=this.view)==null?void 0:r.map;return e.map(i=>{const o=s.findTableById(i.id);if(!o)return;const l=this._getLayerJSON(i),u=yl.fromJSON(l);return u.placeholder=t,this._getLayer(o,l).then(p=>{u.layer=p}),u}).filter(Boolean).toArray()}_convertApplicationProperties(){var e,t,r;const s=(e=this.view)==null?void 0:e.map,i=s==null||(t=s.applicationProperties)==null||(r=t.viewing)==null?void 0:r.search;if(!i)return[];const{enabled:o,hintText:l,layers:u,tables:p}=i;return o?[...this._getLayerSources(u,l),...this._getTableSources(p,l)]:[]}_getSubLayer(e,t){return e.load().then(()=>{if(!e.allSublayers)return Promise.reject();const r=e.allSublayers.find(s=>s.id===t.subLayer);return r?r.createFeatureLayer():Promise.reject()})}async _getBuildingSubLayer(e,t){await e.load();const r=e.allSublayers.find(s=>s.id===t.subLayer);return(r==null?void 0:r.type)!=="building-component"?Promise.reject():(await r.load(),r.associatedLayer==null?Promise.reject():(await r.associatedLayer.load(),r))}_getLayer(e,t){return e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature"?Promise.resolve(e):e.type==="map-image"?this._getSubLayer(e,t).catch(()=>{const r=new C("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return Br.error(r),null}):e.type==="building-scene"?this._getBuildingSubLayer(e,t):Promise.resolve(null)}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:t}=this;e.removeAll(),t&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var e;const t=(e=this.view)==null?void 0:e.popup,{resultGraphic:r}=this;if(!t||!r)return;const{selectedFeature:s}=t;s&&s===r&&t.close()}_suggestTimer(e,t){const r=e!=null?e:this.suggestionDelay;return ox(r,null,t&&t.signal)}_createLocationForSearch(e){return e instanceof xo?IS(e.geometry):e instanceof Ke?e:Array.isArray(e)&&e.length===2?new Ke({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&Dt(e,"key")&&Dt(e,"text")&&Dt(e,"sourceIndex"))return e;const t=this._createLocationForSearch(e),r=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:s,selectedResult:i}=this,o=!e&&s&&i,l=o&&s.key===i.key&&s.sourceIndex===i.sourceIndex,u=o&&s.location;return l||u?s:{location:t,text:t?"":r,sourceIndex:null,key:null}}_getFirstResult(e){let t=null;return e&&e.some(r=>{const{results:s}=r,i=s[0],o=!!i;return o&&(t=i),o}),t}_selectFirstResult(e){return this.autoSelect&&e?this.select(e):Promise.resolve(null)}_suggestImmediate(e,t){return this.when().then(()=>this._getSuggestionsFromSources(e,t)).then(r=>{var s;if((s=t==null?void 0:t.signal)!=null&&s.aborted)return null;const i={activeSourceIndex:this.activeSourceIndex,searchTerm:e,numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(i,r),i})}_formatSourceResponse(e,t,r){const s=t&&t.value||[],i=t&&t.error,o=this.allSources.getItemAt(r);if(i){const l={sourceIndex:r,source:o,error:i};e.errors.push(l),Br.error(i),e.numErrors++}else{const l={sourceIndex:r,source:o,results:s};e.results.push(l),e.numResults+=s.length}}_formatResponse(e,t,r){if(t)if(e.activeSourceIndex===vl){const s=r&&Dt(r,"sourceIndex")&&r.sourceIndex!==-1?r.sourceIndex:void 0;t.forEach((i,o)=>{const l=s!==void 0?s:o;this._formatSourceResponse(e,i,l)})}else this._formatSourceResponse(e,t[0],e.activeSourceIndex)}_getResultsFromSources(e,t){const{allSources:r}=this,s=!e.location&&Dt(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,i=[];if(!r.length){const o=new C("search:no-sources-defined","At least one source is required.",{allSources:r});return Br.error(o),Promise.reject(o)}return s===vl?r.forEach((o,l)=>{i.push(this._getResultsFromSource(e,l,t))}):i.push(this._getResultsFromSource(e,s,t)),vi(i)}_getSuggestionsFromSources(e,t){const{allSources:r,activeSourceIndex:s}=this,i=[];if(!r.length){const o=new C("suggest:no-sources-defined","At least one source is required.",{allSources:r});return Br.error(o),Promise.reject(o)}return s===vl?r.forEach((o,l)=>{i.push(this._getSuggestionsFromSource(e,l,t))}):i.push(this._getSuggestionsFromSource(e,s,t)),vi(i)}_getResultsFromSource(e,t,r){var s;const i=this.allSources.getItemAt(t),{location:o=null}=e,l=((s=this.view)==null?void 0:s.spatialReference)||AS,u=Dt(i,"maxResults")?i.maxResults:this.maxResults,p=!!(i instanceof yl&&Dt(i,"exactMatch"))&&i.exactMatch,{view:d}=this;return i.getResults({view:d,sourceIndex:t,location:o,suggestResult:e,spatialReference:l,exactMatch:p,maxResults:u},r)}_getSuggestionsFromSource(e,t,r){const s=this.allSources.getItemAt(t),i=Dt(s,"suggestionsEnabled")?s.suggestionsEnabled:this.suggestionsEnabled,o=e.length,l=Dt(s,"minSuggestCharacters")?s.minSuggestCharacters:this.minSuggestCharacters;if(i&&e.trim()&&o>=l){var u;const p=((u=this.view)==null?void 0:u.spatialReference)||AS,d=Dt(s,"maxSuggestions")?s.maxSuggestions:this.maxSuggestions,{view:h}=this,f=!!(s instanceof yl&&Dt(s,"exactMatch"))&&s.exactMatch;return s.getSuggestions({view:h,sourceIndex:t,suggestTerm:e,spatialReference:p,maxSuggestions:d,exactMatch:f},r)}return Promise.resolve(null)}_getLayerSourcePopupTemplate(e){const{layer:t}=e;if(t)return Dt(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}_getSourceIndexOfResult(e){const t=this.results;let r=null;return t.some(s=>s.results.some(i=>i===e&&(r=s.sourceIndex,!0))),r}async _goToSearchResult(e){const t=!!e;this._abortGoTo();const r=new AbortController;this._gotoController=r;const s={target:{target:e},options:{animate:t,signal:r.signal}};await this.callGoTo(s),this._gotoController=null}_getDefaultSymbol(e){var t;const{defaultSymbols:r}=this,s=(t=e.feature)==null?void 0:t.geometry;if(!T(s))return null;const i=this._get("defaultSymbol");if(i&&(s.type==="point"||s.type==="multipoint"))return i;switch(s.type){case"point":case"multipoint":return r.point;case"polyline":return r.polyline;case"extent":case"polygon":return r.polygon;default:return null}}_removeHighlight(){this._handles.remove(jS)}async _getLayerView(e){const{view:t}=this;if(!e||!t||e.layer.type==="building-component"||e.layer.type==="subtype-sublayer")return Promise.resolve(null);const{layer:r}=e;return await t.when(),t.whenLayerView(r)}_highlightFeature(e){const{graphic:t,layerView:r}=e,{attributes:s,layer:i}=t,{objectIdField:o}=i,l=s&&s[o],u=r.highlight(l||t);this._handles.add(u,jS)}_setResultFloor(e){var t,r,s;const{view:i}=this,o=(t=e.feature)==null?void 0:t.attributes,l=(r=e.feature)==null?void 0:r.sourceLayer;if(l&&"floorInfo"in l&&l!=null&&(s=l.floorInfo)!=null&&s.floorField&&o){const u=o[l.floorInfo.floorField];i.emit("select-result-floor",u)}}};ve.ALL_INDEX=vl,n([c()],ve.prototype,"_searching",void 0),n([c()],ve.prototype,"_updatingPromise",void 0),n([c({readOnly:!0,value:null})],ve.prototype,"activeSource",null),n([c()],ve.prototype,"activeSourceIndex",null),n([c()],ve.prototype,"allPlaceholder",null),n([c({readOnly:!0})],ve.prototype,"allSources",null),n([c()],ve.prototype,"autoNavigate",void 0),n([c()],ve.prototype,"autoSelect",void 0),n([c()],ve.prototype,"defaultPopupTemplate",void 0),n([c({readOnly:!0})],ve.prototype,"defaultSources",void 0),n([c()],ve.prototype,"defaultSymbol",null),n([c()],ve.prototype,"defaultSymbols",void 0),n([c()],ve.prototype,"includeDefaultSources",void 0),n([c()],ve.prototype,"locationEnabled",null),n([c()],ve.prototype,"maxInputLength",void 0),n([c()],ve.prototype,"maxResults",void 0),n([c()],ve.prototype,"maxSuggestions",void 0),n([c()],ve.prototype,"messages",void 0),n([c()],ve.prototype,"minSuggestCharacters",void 0),n([c({readOnly:!0})],ve.prototype,"placeholder",null),n([c()],ve.prototype,"popupEnabled",void 0),n([c({type:ra})],ve.prototype,"popupTemplate",void 0),n([c({type:ur})],ve.prototype,"portal",void 0),n([c()],ve.prototype,"resultCount",void 0),n([c()],ve.prototype,"resultGraphicEnabled",void 0),n([c({readOnly:!0})],ve.prototype,"resultGraphic",void 0),n([c({readOnly:!0})],ve.prototype,"results",void 0),n([c({readOnly:!0})],ve.prototype,"selectedSuggestion",void 0),n([c()],ve.prototype,"searchAllEnabled",void 0),n([c({readOnly:!0})],ve.prototype,"selectedResult",void 0),n([c()],ve.prototype,"searchTerm",null),n([c({type:Ed})],ve.prototype,"sources",void 0),n([c({readOnly:!0})],ve.prototype,"state",null),n([c()],ve.prototype,"suggestionDelay",void 0),n([c()],ve.prototype,"suggestionCount",void 0),n([c({readOnly:!0})],ve.prototype,"suggestions",void 0),n([c()],ve.prototype,"suggestionsEnabled",void 0),n([c({readOnly:!0})],ve.prototype,"updating",null),n([c()],ve.prototype,"view",void 0),n([c()],ve.prototype,"clear",null),ve=n([b(iO)],ve);const Ml=ve;function CS(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:Pz(e[t])}}}function Nz(e){const{type:t}=e;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function Pz(e){return function(t,...r){Nz(t)?_I(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}function t1(e){return function(t,r){t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var Lz=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},oO=function(e,t){for(var r=0,s=e.length;r<s;r++){var i=e[r];Array.isArray(i)?oO(i,t):i!=null&&i!==!1&&(i.hasOwnProperty("vnodeSelector")||(i=Lz(i)),t.push(i))}},Dz=function(e,t){for(var r=[],s=2;s<arguments.length;s++)r[s-2]=arguments[s];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var i=[];return oO(r,i),{vnodeSelector:e,properties:t||void 0,children:i,text:void 0,domNode:null}};function ue(e,t,...r){return typeof e!="function"||Qv(e)?Dz(e,t,...r):e(t,...r)}const Qs={base:"esri-search-result-renderer esri-widget",anchor:"esri-widget__anchor",showMoreResults:"esri-search-result-renderer__more-results--show-more-results",moreResults:"esri-search-result-renderer__more-results",moreResultsList:"esri-search-result-renderer__more-results-list",moreResultsHeader:"esri-search-result-renderer__more-results-header",moreResultsItem:"esri-search-result-renderer__more-results-item",moreResultsListHeader:"esri-search-result-renderer__more-results-list-header"};let io=class extends FI{constructor(e,t){super(e,t),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}render(){const e={[Qs.showMoreResults]:this.showMoreResultsOpen};return ue("div",{class:Qs.base},ue("div",{key:"esri-search-renderer__container",class:this.classes(Qs.moreResults,e)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return ue("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var e;const t=(e=this.viewModel)==null?void 0:e.selectedResult,r=t&&t.name||"";return ue("div",{key:"esri-search-renderer__result-name",class:Qs.moreResultsItem},r)}renderMoreResultsLists(){var e;const t=(e=this.viewModel)==null?void 0:e.results,{resultCount:r}=this.viewModel;if(r<2)return null;const s=t.map(i=>this.renderMoreResultsList(i));return ue("div",{key:"esri-search-renderer__more-results-container",class:Qs.moreResultsList},s)}renderMoreResultsButton(){const{messages:e}=this,{resultCount:t}=this.viewModel;return t<2?null:ue("div",{key:"esri-search-renderer__more-results-button",class:Qs.moreResultsItem},ue("a",{class:Qs.anchor,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults))}renderMoreResultsHeader(e,t){return ue("div",{key:`esri-search-result-renderer__header-${t}`,class:Qs.moreResultsListHeader},e)}renderMoreResultsList(e){var t,r;const{results:s}=e,i=s.length,o=!!i,l=(t=this.viewModel)==null?void 0:t.selectedResult,u=i===1&&s[0]===l,p=this._getSourceName(e.source,e.sourceIndex),d=((r=this.viewModel)==null?void 0:r.results.length)>1&&!u?this.renderMoreResultsHeader(p,e.sourceIndex):null,h=o&&s.map((y,m)=>this.renderMoreResultsListItem(y,m)),f=o&&!u?ue("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},h):null;return o?ue("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},d,f):null}renderMoreResultsListItem(e,t){return e!==this.get("viewModel.selectedResult")?ue("li",{key:`esri-search-result-renderer__list-item-${t}`},ue("a",{class:Qs.anchor,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}_showMoreResultsClick(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const t=this.get("viewModel.view.popup");t&&t.reposition()}_selectResultClick(e){e.preventDefault();const t=e.currentTarget["data-result"];this.viewModel&&this.viewModel.select(t)}_getSourceName(e,t){return t===Ml.ALL_INDEX?this.messages.all:e.name}};n([c(),t1("esri/widgets/Search/t9n/Search")],io.prototype,"messages",void 0),n([c()],io.prototype,"showMoreResultsOpen",void 0),n([c()],io.prototype,"viewModel",void 0),n([CS()],io.prototype,"_showMoreResultsClick",null),n([CS()],io.prototype,"_selectResultClick",null),io=n([b("esri.widgets.Search.SearchResultRenderer")],io);const zz=io;function Vz(e){return e.split(",").map(t=>t.trim())}function Uz(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const r=t._delegatedEventNames,s=Array.isArray(e)?e:Vz(e);r.push(...s)}}const se={base:"esri-search esri-widget",loader:"esri-widget__loader",loaderText:"esri-widget__loader-text",loaderAnimation:"esri-widget__loader-animation",esriInput:"esri-input",hasMultipleSources:"esri-search--multiple-sources",isLoading:"esri-search--loading",isSearching:"esri-search--searching",showSuggestions:"esri-search--show-suggestions",showSources:"esri-search--sources",showWarning:"esri-search--warning",container:"esri-search__container",input:"esri-search__input",inputContainer:"esri-search__input-container",form:"esri-search__form",submitButton:"esri-search__submit-button",sourcesButton:"esri-search__sources-button",clearButton:"esri-search__clear-button",sourceName:"esri-search__source-name",suggestionsMenu:"esri-search__suggestions-menu",suggestionList:"esri-search__suggestions-list",suggestionListCurrentLocation:"esri-search__suggestions-list--current-location",sourcesMenu:"esri-search__sources-menu",source:"esri-search__source",warningMenu:"esri-search__warning-menu",warningMenuBody:"esri-search__warning-body",warningMenuHeader:"esri-search__warning-header",warningMenuText:"esri-search__warning-text",noValueText:"esri-search__no-value-text",esriWidgetDisabled:"esri-widget--disabled",button:"esri-widget--button",fallbackText:"esri-icon-font-fallback-text",header:"esri-widget__heading",locate:"esri-icon-locate-circled",menu:"esri-menu",menuList:"esri-menu__list",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuHeader:"esri-menu__header",loadingIcon:"esri-icon-loading-indicator esri-rotating",searchIcon:"esri-icon-search",dropdownIcon:"esri-icon-down-arrow esri-search__sources-button--down",dropupIcon:"esri-icon-up-arrow esri-search__sources-button--up",clearIcon:"esri-icon-close",noticeIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-search",disabled:"esri-disabled"},qz=/<[a-z/][\s\S]*>/i;let _e=class extends FI{constructor(e,t){super(e,t),this._activeMenuItemIndex=-1,this._handles=new da,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new zz,this._locateFailed=null,this._container=null,this.activeMenu="none",this.activeSource=null,this.activeSourceIndex=null,this.allPlaceholder=null,this.allSources=null,this.autoNavigate=null,this.autoSelect=null,this.defaultSources=null,this.disabled=!1,this.goToOverride=null,this.iconClass=se.widgetIcon,this.includeDefaultSources=null,this.label=void 0,this.locationEnabled=null,this.maxResults=null,this.maxSuggestions=null,this.messages=null,this.messagesCommon=null,this.minSuggestCharacters=null,this.popupEnabled=null,this.popupTemplate=null,this.portal=null,this.resultGraphic=null,this.resultGraphicEnabled=null,this.results=null,this.searchAllEnabled=null,this.searchTerm=null,this.selectedResult=null,this.sources=null,this.suggestions=null,this.suggestionsEnabled=null,this.view=null,this.viewModel=new Ml,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=r=>{var s;const i=r.relatedTarget;i&&(s=this._container)!=null&&s.contains(i)||this._clearActiveMenu()},this.own(Hg(this,"searchTerm",r=>{(r&&this.activeMenu==="warning"||!r&&!this.get("viewModel.selectedSuggestion.location"))&&this._clearActiveMenu()}),VL(this,"viewModel.allSources","change",()=>this._watchSourceChanges()),gh(this,"activeMenu",()=>this._resetActiveMenuItemIndex()),gh(this,"viewModel.defaultPopupTemplate",r=>{r&&(r.content=this._renderSearchResultsContent.bind(this))}))}destroy(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}clear(){}focus(){var e;(e=this._inputNode)==null||e.focus(),this.emit("search-focus")}blur(){var e;(e=this._inputNode)==null||e.blur(),this.emit("search-blur")}search(e){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const t=new AbortController,{signal:r}=t;return this._searchController=t,this.viewModel.search(e,{signal:r}).catch(s=>{if(this._searchController===t)return this._clearActiveMenu(),this._searchController=null,s}).then(s=>{if(this._searchController===t)return this.activeMenu=s.numResults?"none":"warning",this._searchController=null,s})}suggest(e){this._cancelSuggest();const t=new AbortController,{signal:r}=t;return this._suggestController=t,this.viewModel.suggest(e,null,{signal:r}).then(s=>{if(this._suggestController===t)return this._suggestController=null,s.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),s}).catch(()=>{if(this._suggestController===t)return this._suggestController=null,null})}render(){const{state:e}=this.viewModel,t={[se.disabled]:e==="disabled",[se.esriWidgetDisabled]:this.disabled};return ue("div",{class:this.classes(se.base,t)},e==="loading"?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:e}=this;return ue("button",{"aria-label":e.searchButtonTitle,bind:this,class:this.classes(se.submitButton,se.button),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle,type:"button"},ue("span",{"aria-hidden":"true",class:se.searchIcon}))}renderWarningMenu(){return ue("div",{key:"esri-search__error-menu",class:this.classes(se.menu,se.warningMenu)},ue("div",{class:se.warningMenuBody},this.renderWarning()))}renderSourceMenuButton(){const{messages:e,activeMenu:t,sourceMenuId:r,sourceMenuButtonId:s}=this,{activeSourceIndex:i,allSources:o}=this.viewModel;return o.length>1?ue("button",{id:s,key:"esri-search__source-menu-button",bind:this,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":(t==="source").toString(),"aria-controls":r,class:this.classes(se.sourcesButton,se.button),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:$p,"data-node-ref":"_sourceMenuButtonNode",type:"button"},ue("span",{"aria-hidden":"true",class:se.dropdownIcon}),ue("span",{"aria-hidden":"true",class:se.dropupIcon}),ue("span",{class:se.sourceName},this._getSourceName(i))):null}renderSourcesList(){const{allSources:e,searchAllEnabled:t}=this.viewModel,{_activeMenuItemIndex:r,activeMenu:s,sourceMenuId:i,sourceMenuButtonId:o}=this,l=s==="source"&&r>-1?this._buildId("source-item",r):null;return e.length>1?ue("ul",{"aria-activedescendant":l,"aria-labelledby":o,id:i,role:"menu",bind:this,afterCreate:$p,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:se.menuList,tabIndex:-1},t?this.renderSource(Ml.ALL_INDEX):null,e.map((u,p)=>this.renderSource(p)).toArray()):null}renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?ue("div",{key:"esri-search__source-menu",class:this.classes(se.menu,se.sourcesMenu)},this.renderSourcesList()):null}renderLoader(){const{messages:e,messagesCommon:t}=this;return ue("div",{class:se.loader,key:"base-loader"},ue("span",{"aria-hidden":"true",class:se.loaderAnimation}),ue("span",{class:se.fallbackText},e.searchButtonTitle),ue("span",{class:se.loaderText},t.loading))}renderContainer(){const{allSources:e,state:t}=this.viewModel,{activeMenu:r}=this,s={[se.hasMultipleSources]:e.length>1,[se.isLoading]:t==="loading",[se.isSearching]:t==="searching",[se.showWarning]:r==="warning",[se.showSources]:r==="source",[se.showSuggestions]:r==="suggestion"};return ue("div",{tabIndex:-1,afterCreate:i=>{this._container=i,i.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:i=>{i.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(s,se.container),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?ue("button",{bind:this,class:this.classes(se.clearButton,se.button),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},ue("span",{"aria-hidden":"true",class:se.clearIcon})):null}renderLocationGroup(){const{messages:e,locationEnabled:t,displayedSearchTerm:r}=this,s=t&&!r,i=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return s?ue("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(se.menuList,se.suggestionList,se.suggestionListCurrentLocation)},ue("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),role:"option",class:this.classes(se.menuItem,i?se.menuItemFocus:null)},ue("span",{"aria-hidden":"true",class:se.locate})," ",e.useCurrentLocation)):null}renderInput(){const{activeMenu:e,locationEnabled:t,displayedSearchTerm:r,messages:s,suggestionsMenuId:i,inputId:o,_activeMenuItemIndex:l}=this,{maxInputLength:u,placeholder:p,searchTerm:d,suggestionCount:h}=this.viewModel,f=!(!(t&&!r)&&!h),y=e==="suggestion"&&l>-1?this._buildId("suggestion-item",l):null;return ue("input",{"aria-activedescendant":y,"aria-autocomplete":"list","aria-expanded":(f&&e==="suggestion").toString(),"aria-controls":f?i:null,"aria-haspopup":"listbox","aria-label":s.searchButtonTitle,bind:this,placeholder:p,maxlength:u,autocomplete:"off",type:"text",class:this.classes(se.esriInput,se.input),value:d,id:o,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:$p,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:d?"":p})}renderForm(){return ue("form",{key:"esri-search__form",bind:this,class:se.form,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(e){const{sourceIndex:t}=e,r=e.results.length,s=e.results;return r?ue("ul",{role:"group",key:`esri-search__suggestion-list-${t}`,class:this.classes(se.menuList,se.suggestionList)},s.map(i=>this.renderSuggestion(i,this._menuItemCount++))):null}renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map(t=>[this.renderSuggestionHeader(t),this.renderSuggestList(t)]):null}renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:t,suggestionsMenuId:r,inputId:s}=this,{suggestionCount:i}=this.viewModel,o=t&&!e||i;return this._menuItemCount=0,o?ue("div",{id:r,key:"esri-search__suggestions-menu",class:this.classes(se.menu,se.suggestionsMenu),role:"listbox","aria-labelledby":s,bind:this,afterCreate:$p,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return ue("div",{key:"esri-search__input-container",class:se.inputContainer},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(e){const{allSources:t,activeSourceIndex:r}=this.viewModel,{sourceIndex:s}=e,i=e.results.length,o=t.length>1&&r===Ml.ALL_INDEX;return i&&o?ue("div",{key:`esri-search__suggestion-header-${s}`,class:se.menuHeader},this._getSourceName(s)):null}renderSuggestion(e,t){const{_activeMenuItemIndex:r,messages:s}=this,{searchTerm:i}=this.viewModel;if(i){const{text:o}=e,l=o||s.untitledResult,u=qz.test(l),p=[];if(u)p.push(ue("div",{innerHTML:l}));else{const h=this._splitResult(l,i),f=i.toLowerCase();h.forEach((y,m)=>{y&&y.length&&(y.toLowerCase()===f?p.push(ue("strong",{key:m},y)):p.push(y))})}const d=this.activeMenu==="suggestion"&&r===t;return ue("li",{bind:this,id:this._buildId("suggestion-item",t),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===t).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${t}`,"data-suggestion":e,role:"option",class:this.classes(se.menuItem,d?se.menuItemFocus:null)},p)}}renderSource(e){const{activeSourceIndex:t,searchAllEnabled:r}=this.viewModel,s={[se.menuItemActive]:e===t,[se.menuItemFocus]:this.activeMenu==="source"&&e===(r?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},i=r?e+1:e;return ue("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",i),"aria-checked":(e===t).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes(se.source,se.menuItem,s)},this._getSourceName(e))}renderNoResultsWarning(e){const{messages:t}=this,r=e?EM(t.noResultsFoundForValue,{value:`"${e}"`}):t.noResultsFound;return ue("div",{key:"esri-search__no_results"},ue("div",{class:se.warningMenuHeader},t.noResults),ue("div",{class:se.warningMenuText},r))}renderEmptySearchWarning(){const{messages:e}=this;return ue("div",{key:"esri-search__empty-search"},ue("span",{"aria-hidden":"true",class:se.noticeIcon}),ue("span",{class:se.noValueText},e.emptyValue))}renderLocateWarning(){const{messages:e}=this;return ue("div",{key:"esri-search__locate-error"},ue("span",{"aria-hidden":"true",class:se.noticeIcon}),ue("span",{class:se.noValueText},e.locateError))}renderWarning(){var e;const{displayedSearchTerm:t,_locateFailed:r}=this,{viewModel:s}=this;return r?this.renderLocateWarning():(e=s.selectedSuggestion)!=null&&e.location||t?this.renderNoResultsWarning(t):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,t){return`${this.id}-${e}${t===void 0?"":`-${t}`}`}_watchSourceChanges(){const{_handles:e,viewModel:{allSources:t}}=this,r="sources";e.remove(r),t.forEach(s=>e.add(Hg(s,"name",()=>this.scheduleRender()),r))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){const e=this.activeMenu==="source";var t;this.activeMenu=e?"none":"source",this.renderNow(),this.activeMenu==="source"&&((t=this._sourceListNode)==null||t.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const t=e.currentTarget["data-suggestion"];t&&(this._focus(),this.search(t))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:t}=e;this._searchController=e,this.viewModel.searchNearby({signal:t}).then(r=>{this.activeMenu=r.numResults?"none":"warning"}).catch(()=>{this._locateFailed=!0,this.activeMenu="warning"}).then(()=>{this._searchController=null})}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){var t;if(!e)return;const r=e["data-source-index"];this.viewModel.activeSourceIndex=r,this._clearActiveMenu(),(t=this._sourceMenuButtonNode)==null||t.focus()}_cancelSuggest(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)}_cancelSearch(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1}_handleInputKeyup(e){var t;const r=jf(e);if(e.ctrlKey||e.metaKey||r==="Copy"||r==="ArrowLeft"||r==="ArrowRight"||r==="Shift")return;if(r==="Tab"||r==="Escape"||e.shiftKey&&r==="Tab")return this._cancelSuggest(),void(r==="Escape"&&this._clearActiveMenu());const s=r==="Home"||r==="End"||r==="ArrowUp"||r==="ArrowDown";if(r==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const i=(t=this._suggestionListNode)==null?void 0:t.getElementsByTagName("li");if(i!=null&&i.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),s)return e.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(r,i,this._suggestionListNode);const o=i[this._activeMenuItemIndex];if(r==="Enter"&&o){const l=o["data-suggestion"];return void(l?(this._focus(),this.search(l)):o["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(e,t,r){const s=this._activeMenuItemIndex;e==="Home"&&(this._activeMenuItemIndex=0),e==="End"&&(this._activeMenuItemIndex=t.length-1),e==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?t.length-1:this._activeMenuItemIndex-1),e==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===t.length-1?0:this._activeMenuItemIndex+1),s!==this._activeMenuItemIndex&&eD(t[this._activeMenuItemIndex],r)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(e){const t=e.target;this.viewModel.searchTerm!==t.value&&(this.viewModel.searchTerm=t.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){const t=jf(e);if(_I(t)){e.preventDefault();const r=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(r)}else t!=="ArrowUp"&&t!=="ArrowDown"&&t!=="End"&&t!=="Home"||e.preventDefault()}_handleSourceMenuKeyup(e){var t;const r=jf(e),s=r==="ArrowUp"||r==="ArrowDown"||r==="End"||r==="Home";var i;if(s&&e.preventDefault(),r==="Escape")return this._clearActiveMenu(),void((i=this._sourceMenuButtonNode)==null||i.focus());const o=(t=this._sourceListNode)==null?void 0:t.getElementsByTagName("li");return o&&o.length!==0&&s?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(r,o,this._sourceListNode.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(e){const{messages:t}=this,r=this.viewModel,{allSources:s}=r,i=s.getItemAt(e);return e===Ml.ALL_INDEX?t.all:i&&i.name||t.untitledSource}_splitResult(e,t){const r=PT(t);return e.replace(new RegExp(`(^|)(${r})(|$)`,"ig"),"$1|$2|$3").split("|")}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};n([c()],_e.prototype,"_activeMenuItemIndex",void 0),n([c()],_e.prototype,"displayedSearchTerm",null),n([c({readOnly:!0})],_e.prototype,"inputId",null),n([c({readOnly:!0})],_e.prototype,"suggestionsMenuId",null),n([c({readOnly:!0})],_e.prototype,"sourceMenuId",null),n([c({readOnly:!0})],_e.prototype,"sourceMenuButtonId",null),n([c()],_e.prototype,"activeMenu",void 0),n([Ge("viewModel.activeSource")],_e.prototype,"activeSource",void 0),n([Ge("viewModel.activeSourceIndex")],_e.prototype,"activeSourceIndex",void 0),n([Ge("viewModel.allPlaceholder")],_e.prototype,"allPlaceholder",void 0),n([Ge("viewModel.allSources")],_e.prototype,"allSources",void 0),n([Ge("viewModel.autoNavigate")],_e.prototype,"autoNavigate",void 0),n([Ge("viewModel.autoSelect")],_e.prototype,"autoSelect",void 0),n([Ge("viewModel.defaultSources")],_e.prototype,"defaultSources",void 0),n([c()],_e.prototype,"disabled",void 0),n([Ge("viewModel.goToOverride")],_e.prototype,"goToOverride",void 0),n([c()],_e.prototype,"iconClass",void 0),n([Ge("viewModel.includeDefaultSources")],_e.prototype,"includeDefaultSources",void 0),n([c({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],_e.prototype,"label",void 0),n([Ge("viewModel.locationEnabled")],_e.prototype,"locationEnabled",void 0),n([Ge("viewModel.maxResults")],_e.prototype,"maxResults",void 0),n([Ge("viewModel.maxSuggestions")],_e.prototype,"maxSuggestions",void 0),n([c(),t1("esri/widgets/Search/t9n/Search")],_e.prototype,"messages",void 0),n([c(),t1("esri/t9n/common")],_e.prototype,"messagesCommon",void 0),n([Ge("viewModel.minSuggestCharacters")],_e.prototype,"minSuggestCharacters",void 0),n([Ge("viewModel.popupEnabled")],_e.prototype,"popupEnabled",void 0),n([Ge("viewModel.popupTemplate")],_e.prototype,"popupTemplate",void 0),n([Ge("viewModel.portal")],_e.prototype,"portal",void 0),n([Ge("viewModel.resultGraphic")],_e.prototype,"resultGraphic",void 0),n([Ge("viewModel.resultGraphicEnabled")],_e.prototype,"resultGraphicEnabled",void 0),n([Ge("viewModel.results")],_e.prototype,"results",void 0),n([Ge("viewModel.searchAllEnabled")],_e.prototype,"searchAllEnabled",void 0),n([Ge("viewModel.searchTerm")],_e.prototype,"searchTerm",void 0),n([Ge("viewModel.selectedResult")],_e.prototype,"selectedResult",void 0),n([Ge("viewModel.sources")],_e.prototype,"sources",void 0),n([Ge("viewModel.suggestions")],_e.prototype,"suggestions",void 0),n([Ge("viewModel.suggestionsEnabled")],_e.prototype,"suggestionsEnabled",void 0),n([Ge("viewModel.view")],_e.prototype,"view",void 0),n([Uz(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),c({type:Ml})],_e.prototype,"viewModel",void 0),n([Ge("viewModel.clear")],_e.prototype,"clear",null),_e=n([b("esri.widgets.Search")],_e);const Bz=_e,us=_i({activeSourceIndex:0});jl(()=>us.activeSourceIndex,()=>{Us.value=null,co.data=[]});const nO=jh(()=>{var e;return new Bz(pe(I({},us),{sources:(e=us.sources)==null?void 0:e.map(t=>t.layer?pe(I({},t),{layer:new Gv(t.layer)}):t)}))}),RS=jh(()=>{var e,t;return(t=us.sources)==null?void 0:t[(e=us.activeSourceIndex)!=null?e:0]}),Fs=_i({error:null,status:null,loading:!1,data:[]});async function Gz(){if(Fs.status=null,!!Us.value){Fs.loading=!0,Fs.status="Searching...";try{const{results:e}=await nO.value.search(Us.value),{results:t}=e[0];return Fs.status=t.length?null:"Your search returned no results.",Fs.data=t.map(({name:r,extent:s})=>({name:r,extent:s.toJSON()})),t}catch(e){console.warn(e),Fs.status="An error occurred when searching."}finally{Fs.loading=!1}}}const Td=_i({}),Il=_i({error:null,loading:!1,data:null});async function Jz(e,t){Il.loading=!0,Il.data=null;try{const r=new Gv(Td),{features:s}=await r.queryFeatures(pe(I({outFields:["*"]},t),{geometry:e.hasOwnProperty("type")?e:ft.fromJSON(e)}));return Il.data=s.map(i=>i.toJSON()),s}catch{return null}finally{Il.loading=!1}}const Wz={name:"Address",placeholder:"Search by Address",url:"https://maps.hillsboroughcounty.org/arcgis/rest/services/Geocoding/Composite_Address_Locator_Overall/GeocodeServer",singleLineFieldName:"SingleLine",minSuggestCharacters:2},Hz={name:"Folio Number",placeholder:"Search by Folio Number",layer:{url:"https://maps.hillsboroughcounty.org/arcgis/rest/services/InfoLayers/HC_Parcels/MapServer/0",outFields:["FOLIO","SITE_ADDR"],displayField:"FOLIO"},searchFields:["FOLIO","FOLIO_NUMB"],minSuggestCharacters:2},Kz=["onSubmit"],Qz={key:0},Zz=Ee("legend",null,"Search Source:",-1),Yz={class:"form-check form-check-inline"},Xz=["value","id"],eV=["for"],tV=Ee("legend",null,"Search:",-1),rV=["placeholder","aria-label"],sV={class:"btn btn-outline-secondary",type:"submit",id:"search-button"},iV={key:0,class:"spinner-border spinner-border-sm",role:"status"},oV=Ee("span",{class:"visually-hidden"},"Loading...",-1),nV=[oV],lV={key:1},aV={id:"suggestions"},uV={class:"form-text"},cV=f_({props:{small:{type:Boolean},large:{type:Boolean},hcSources:{type:Boolean}},emits:["results"],setup(e,{emit:t}){const r=e;jl(()=>r.hcSources,()=>{us.includeDefaultSources=!r.hcSources,us.sources=r.hcSources?[Wz,Hz]:void 0},{immediate:!0});const s=async i=>{const o=await Gz();t("results",o)};return(i,o)=>{var l,u,p;return Nr(),is("form",{onSubmit:aT(s,["prevent"])},[(l=Xe(us).sources)!=null&&l.length?(Nr(),is("fieldset",Qz,[Zz,(Nr(!0),is(lr,null,Nd(Xe(us).sources,(d,h)=>(Nr(),is("div",Yz,[wu(Ee("input",{type:"radio",name:"search-source",value:h,id:`source-${h}`,"onUpdate:modelValue":o[0]||(o[0]=f=>Xe(us).activeSourceIndex=f),class:"form-check-input"},null,8,Xz),[[jy,Xe(us).activeSourceIndex]]),Ee("label",{for:`source-${h}`,class:"form-check-label"},uo(d.name),9,eV)]))),256))])):EE("",!0),Ee("fieldset",null,[tV,Ee("div",{class:_h(["input-group",{"input-group-sm":e.small,"input-group-lg":e.large}])},[wu(Ee("input",{type:"text",class:"form-control",placeholder:((u=Xe(RS))==null?void 0:u.placeholder)||"Find Address","aria-label":((p=Xe(RS))==null?void 0:p.placeholder)||"Find Address","aria-describedby":"search-button","onUpdate:modelValue":o[1]||(o[1]=d=>Ct(Us)?Us.value=d:null),onInput:o[2]||(o[2]=(...d)=>Xe(Pb)&&Xe(Pb)(...d)),list:"suggestions",required:"",id:"esriSearchInput"},null,40,rV),[[C_,Xe(Us)]]),Ee("button",sV,[Xe(Fs).loading?(Nr(),is("div",iV,nV)):(Nr(),is("span",lV,"Search"))]),Ee("datalist",aV,[(Nr(!0),is(lr,null,Nd(Xe(co).data,({text:d})=>(Nr(),is("option",null,uo(d),1))),256))])],2),Ee("div",uV,uo(Xe(Fs).status),1)])],40,Kz)}}}),Us=M5(null);const pV={class:"bg-secondary p-3 mt-5"},dV=Ee("div",{class:"d-grid gap-2 mb-3"},[Ee("a",{href:"./docs/",target:"_blank",class:"btn btn-sm btn-light"}," Documentation ")],-1),hV={open:"",class:"card"},fV=Ee("summary",{class:"card-header"},"Options",-1),yV={class:"card-body"},mV=Ee("label",{class:"form-label w-100"},"Use HC Search Sources",-1),gV={class:"form-check form-check-inline"},vV=["id","value"],bV=["for"],wV={class:"card-body"},SV=Ee("label",{for:"featureLayerUrl",class:"form-label"}," Feature Layer URL to query ",-1),_V={class:"card-body"},xV=Ee("label",{class:"form-label w-100"},"Size",-1),$V={class:"form-check form-check-inline"},MV=["id","value","onUpdate:modelValue"],IV=["for"],OV={class:"card"},EV=Ee("summary",{class:"card-header"},"Suggestions",-1),TV={class:"card-body"},jV={class:"card"},AV=Ee("summary",{class:"card-header"},"Search Results",-1),CV={class:"card-body"},RV={open:"",class:"card"},FV=Ee("summary",{class:"card-header"},"Queried Features",-1),kV={id:"queriedFeatures",class:"card-body"},NV=f_({setup(e){Td.url="https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/USA_Counties/FeatureServer/0";const t=async s=>{try{if(!s)throw"No Search Results";const[i]=s,o=await Jz(i==null?void 0:i.extent,{});console.log("fun with features!",o)}catch(i){console.warn(i)}};Us.value="601 E Kennedy Blvd, Tampa",jl(Us,()=>{Il.data=null});const r=_i({size:1,sources:0});return(s,i)=>(Nr(),is(lr,null,[zs(Xe(cV),{id:"form",small:Xe(r).size===0,large:Xe(r).size===2,"hc-sources":Xe(r).sources===1,onResults:t},null,8,["small","large","hc-sources"]),Ee("section",pV,[dV,Ee("details",hV,[fV,Ee("div",yV,[mV,(Nr(),is(lr,null,Nd(["false","true"],(o,l)=>Ee("div",gV,[wu(Ee("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:`hc-sources-${l}`,value:l,"onUpdate:modelValue":i[0]||(i[0]=u=>Xe(r).sources=u)},null,8,vV),[[jy,Xe(r).sources]]),Ee("label",{class:"form-check-label",for:`hc-sources-${l}`},uo(o),9,bV)])),64))]),Ee("div",wV,[SV,wu(Ee("input",{type:"email",class:"form-control",id:"featureLayerUrl",placeholder:"https://...","onUpdate:modelValue":i[1]||(i[1]=o=>Xe(Td).url=o)},null,512),[[C_,Xe(Td).url]])]),Ee("div",_V,[xV,(Nr(),is(lr,null,Nd(["small","medium","large"],(o,l)=>Ee("div",$V,[wu(Ee("input",{class:"form-check-input",type:"radio",name:"size",id:`size-${o}`,value:l,"onUpdate:modelValue":u=>Xe(r).size=u},null,8,MV),[[jy,Xe(r).size]]),Ee("label",{class:"form-check-label",for:`size-${o}`},uo(o),9,IV)])),64))])]),Ee("details",OV,[EV,Ee("pre",TV,uo(Xe(co)),1)]),Ee("details",jV,[AV,Ee("pre",CV,uo(Xe(Fs)),1)]),Ee("details",RV,[FV,Ee("pre",kV,uo(Xe(Il)),1)])])],64))}});pT(NV).mount("#app");export{ch as $,kv as A,L2 as B,at as C,bp as D,n as E,c as F,Hl as G,b as H,XD as I,R as J,ls as K,uj as L,ft as M,ye as N,tf as O,l9 as P,Oi as Q,Fp as R,BU as S,Sr as T,nx as U,rL as V,sL as W,iL as X,_t as Y,F as Z,fc as _,yc as a,K as a$,t$ as a0,r$ as a1,e$ as a2,wo as a3,DV as a4,t1 as a5,FI as a6,ue as a7,EM as a8,$p as a9,Ke as aA,Fv as aB,aj as aC,pj as aD,tU as aE,Nn as aF,Vs as aG,z1 as aH,nA as aI,XV as aJ,dc as aK,Wy as aL,m3 as aM,xc as aN,_l as aO,TM as aP,Ic as aQ,F1 as aR,KR as aS,Io as aT,qs as aU,vi as aV,_1 as aW,Y as aX,$q as aY,GM as aZ,Xj as a_,Nh as aa,Gh as ab,dt as ac,D_ as ad,Fl as ae,dj as af,So as ag,On as ah,lh as ai,o3 as aj,JU as ak,zh as al,Xu as am,ys as an,Xh as ao,Rh as ap,cs as aq,Rw as ar,ZU as as,PT as at,lf as au,_9 as av,HU as aw,Ag as ax,_L as ay,ur as az,xr as b,qw as b$,Lt as b0,le as b1,Ec as b2,p3 as b3,o9 as b4,MT as b5,O9 as b6,MP as b7,CP as b8,pM as b9,Fq as bA,Lq as bB,Pq as bC,gz as bD,zq as bE,Dq as bF,bz as bG,Je as bH,jc as bI,eM as bJ,_o as bK,iq as bL,oq as bM,nq as bN,gU as bO,lq as bP,CU as bQ,g3 as bR,AU as bS,GV as bT,XF as bU,hq as bV,uq as bW,kR as bX,YF as bY,la as bZ,fq as b_,UV as ba,pc as bb,Sk as bc,vP as bd,xk as be,HV as bf,$M as bg,kF as bh,sc as bi,Js as bj,oU as bk,Jd as bl,ht as bm,st as bn,mq as bo,Gt as bp,$i as bq,C4 as br,kx as bs,Nq as bt,Tq as bu,Aq as bv,jq as bw,Rq as bx,Cq as by,kq as bz,Mu as c,RU as c$,Au as c0,i0 as c1,yq as c2,_T as c3,KU as c4,Rn as c5,cr as c6,z8 as c7,V8 as c8,rU as c9,$u as cA,kp as cB,fU as cC,pF as cD,vU as cE,Zx as cF,lA as cG,pU as cH,H4 as cI,eA as cJ,Xx as cK,Nx as cL,cU as cM,sx as cN,Ik as cO,R_ as cP,Ah as cQ,iU as cR,da as cS,SM as cT,tw as cU,FF as cV,sv as cW,cq as cX,Cy as cY,eR as cZ,Tw as c_,jA as ca,ql as cb,bl as cc,k4 as cd,hL as ce,Lr as cf,Wh as cg,Jh as ch,eF as ci,Xd as cj,aU as ck,tq as cl,Ul as cm,A0 as cn,C0 as co,N1 as cp,L1 as cq,OU as cr,sa as cs,Zh as ct,IU as cu,U9 as cv,To as cw,kM as cx,FC as cy,DU as cz,Dr as d,wU as d$,LV as d0,dU as d1,JV as d2,P_ as d3,k_ as d4,O6 as d5,xm as d6,as as d7,KV as d8,QV as d9,q6 as dA,uU as dB,P9 as dC,cF as dD,Rr as dE,nC as dF,aC as dG,fC as dH,bC as dI,wC as dJ,V$ as dK,U$ as dL,vC as dM,MC as dN,IC as dO,iC as dP,Mq as dQ,w2 as dR,F_ as dS,Mk as dT,zl as dU,wd as dV,KM as dW,Oq as dX,y9 as dY,l$ as dZ,bU as d_,E$ as da,_m as db,k$ as dc,P6 as dd,EU as de,Y6 as df,T$ as dg,C$ as dh,_U as di,lC as dj,Le as dk,mn as dl,ia as dm,q9 as dn,L9 as dp,N9 as dq,R9 as dr,U6 as ds,rq as dt,NM as du,fN as dv,Q6 as dw,hN as dx,f6 as dy,lU as dz,SA as e,_P as e$,SU as e0,TU as e1,_u as e2,WF as e3,JF as e4,mU as e5,Fk as e6,cj as e7,dq as e8,eU as e9,T1 as eA,uv as eB,g6 as eC,B9 as eD,R6 as eE,fv as eF,QN as eG,PP as eH,er as eI,NP as eJ,Qh as eK,u2 as eL,wq as eM,Gv as eN,OL as eO,mP as eP,tk as eQ,UM as eR,ra as eS,yL as eT,_r as eU,J$ as eV,JL as eW,b9 as eX,_q as eY,wP as eZ,bj as e_,I1 as ea,O1 as eb,ox as ec,ew as ed,wT as ee,FM as ef,qV as eg,BV as eh,Ay as ei,Fa as ej,v2 as ek,Ns as el,iP as em,xU as en,ZV as eo,B6 as ep,Ce as eq,_v as er,W8 as es,IT as et,jR as eu,pv as ev,bA as ew,x1 as ex,Fn as ey,bc as ez,Z as f,bL as f$,x9 as f0,Nv as f1,M9 as f2,I9 as f3,dv as f4,bP as f5,zr as f6,wc as f7,pa as f8,Dn as f9,v6 as fA,U3 as fB,aq as fC,nM as fD,dh as fE,Ov as fF,nU as fG,L3 as fH,hh as fI,$9 as fJ,vx as fK,ec as fL,po as fM,vr as fN,qR as fO,ef as fP,Ph as fQ,QU as fR,g2 as fS,zU as fT,hU as fU,YV as fV,Sq as fW,je as fX,Eq as fY,E1 as fZ,ol as f_,EP as fa,ZN as fb,cP as fc,zP as fd,vw as fe,s$ as ff,pL as fg,qM as fh,qv as fi,nS as fj,xd as fk,uM as fl,gP as fm,Bv as fn,rI as fo,rM as fp,Ge as fq,ta as fr,Uj as fs,qh as ft,SL as fu,$c as fv,Pe as fw,G8 as fx,XU as fy,xq as fz,xo as g,jU as g$,Ud as g0,QR as g1,Ox as g2,zn as g3,gw as g4,Fh as g5,r6 as g6,xn as g7,tb as g8,zV as g9,Wl as gA,HA as gB,Zu as gC,QM as gD,Ln as gE,Aj as gF,WU as gG,GU as gH,G9 as gI,Gd as gJ,m6 as gK,X1 as gL,AT as gM,ET as gN,kU as gO,VU as gP,UU as gQ,L6 as gR,R$ as gS,RT as gT,WV as gU,VV as gV,e8 as gW,MU as gX,NU as gY,PU as gZ,F$ as g_,sk as ga,Md as gb,tS as gc,nh as gd,Iv as ge,$P as gf,xP as gg,Xl as gh,N3 as gi,vq as gj,na as gk,qU as gl,SP as gm,bq as gn,x4 as go,sU as gp,g as gq,sq as gr,oP as gs,$U as gt,mc as gu,nL as gv,lL as gw,aL as gx,Uv as gy,yU as gz,Ue as h,yN as h0,af as h1,FU as h2,y6 as h3,LU as h4,A$ as h5,d8 as h6,pq as h7,gq as h8,Iq as h9,ea as i,et as j,Ae as k,Np as l,E as m,u3 as n,Qc as o,YU as p,Tc as q,T as r,C as s,X as t,xL as u,Cn as v,ll as w,u9 as x,eq as y,uS as z};
