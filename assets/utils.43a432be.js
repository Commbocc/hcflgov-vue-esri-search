var Nt=Object.defineProperty,$t=Object.defineProperties;var _t=Object.getOwnPropertyDescriptors;var lt=Object.getOwnPropertySymbols;var Ot=Object.prototype.hasOwnProperty,zt=Object.prototype.propertyIsEnumerable;var ft=(t,n,o)=>n in t?Nt(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,Z=(t,n)=>{for(var o in n||(n={}))Ot.call(n,o)&&ft(t,o,n[o]);if(lt)for(var o of lt(n))zt.call(n,o)&&ft(t,o,n[o]);return t},D=(t,n)=>$t(t,_t(n));import{M as K,t as I,r as S,aN as J,aA as b,s as It,k as Xt,E as C,F as $,H as Q,Z as Yt,b1 as st,a$ as ct,aX as ut}from"./index.6518a001.js";import{J as vt,Q as Wt,Y,o as jt,i as G,E as T,b as pt,c as Ft,S as At}from"./projection.e8ab4518.js";function Rt(t,n,o){return!jt(t,n,o)}function W(t,n,o){const s=Rt(t,n,o);if(s&&!vt())throw new It("rasterprojectionhelper-project","projection engine is not loaded");return s}const mt=function(t,n,o,s=0){if(o[0]===1)return[0,0];let r=1,e=-1,a=1,l=-1;for(let f=0;f<t.length;f+=2)isNaN(t[f])||(r=r>t[f]?t[f]:r,e=e>t[f]?e:t[f],a=a>t[f+1]?t[f+1]:a,l=l>t[f+1]?l:t[f+1]);const{cols:i,rows:c}=n,p=(e-r)/i/o[0],g=(l-a)/c/o[1],h=2*s;let d=0,u=!1,x=[0,0];for(let f=0;f<i-3;f++){for(let w=0;w<c-3;w++){const m=f*c*2+2*w,y=(t[m]+t[m+4]+t[m+4*c]+t[m+4*c+4])/4,M=(t[m+1]+t[m+5]+t[m+4*c+1]+t[m+4*c+5])/4,v=Math.abs((y-t[m+2*c+2])/p),R=Math.abs((M-t[m+2*c+3])/g);if(v+R>d&&(d=v+R,x=[v,R]),h&&d>h){u=!0;break}}if(u)break}return x},Bt={3395:20037508342789244e-9,3410:17334193943686873e-9,3857:20037508342788905e-9,3975:17367530445161372e-9,4087:20037508342789244e-9,4088:20015108787169147e-9,6933:17367530445161372e-9,32662:20037508342789244e-9,53001:2001508679602057e-8,53002:1000754339801029e-8,53003:2001508679602057e-8,53004:2001508679602057e-8,53016:14152803599503474e-9,53017:17333573624304302e-9,53034:2001508679602057e-8,53079:20015114352186374e-9,53080:20015114352186374e-9,54001:20037508342789244e-9,54002:10018754171394624e-9,54003:20037508342789244e-9,54004:20037508342789244e-9,54016:14168658027268292e-9,54017:1736753044516137e-8,54034:20037508342789244e-9,54079:20037508342789244e-9,54080:20037508342789244e-9,54100:20037508342789244e-9,54101:20037508342789244e-9},L=32,q=4,V=q,tt=new Map,nt=new Map;async function rn(){if(vt())return null;await Wt()}function an(t,n,o,s=null){const r=t.spatialReference;if(r.equals(n))return t;W(r,n,s);const e=o.center,a=new K({xmin:e.x-t.x/2,xmax:e.x+t.x/2,ymin:e.y-t.y/2,ymax:e.y+t.y/2,spatialReference:r}),l=Y(a,n,s);if(I(l))return null;const i={x:l.xmax-l.xmin,y:l.ymax-l.ymin},c=N(n);if(S(c)&&i.x>=c){const p=J(r)/J(n);i.x=t.x*p,i.y=t.y*p}return i}function k(t,n=.01){return J(t)?n/J(t):0}function xt(t,n,o=null,s=!0){const r=t.spatialReference;if(r.equals(n))return t;W(r,n,o);const e=Y(t,n,o);if(!s||!e)return e;const a=H(r,!0),l=H(n,!0),i=k(r);return i&&S(a)&&S(l)&&(e.x>0&&Math.abs(t.x-a[0])<i?e.x-=l[1]-l[0]:e.x<0&&Math.abs(t.x-a[1])<i&&(e.x+=l[1]-l[0])),e}function Jt(t){const{inSR:n,outSR:o,datumTransformation:s,preferPE:r}=t;if(n.equals(o)){const{points:e}=rt(t,null);return e}if(n.isWebMercator&&o.isWGS84||n.isWGS84&&o.isWebMercator)return qt(t);if(W(n,o,s)&&r){if(n.isGeographic)return ht(t);const e=X(n);if(S(e))return ht(t)}return Lt(t)}function Lt(t){const{points:n}=rt(t,null),o=n.map(s=>new b(s[0],s[1],t.inSR));return Y(o,t.outSR,t.datumTransformation).map(s=>s?[s.x,s.y]:[NaN,NaN])}function ht(t){const{inSR:n,outSR:o,datumTransformation:s}=t,r=X(n),{points:e,mask:a}=rt(t,r);if(!n.isGeographic){const i=n.wkid?G.coordsys(n.wkid):G.fromString(n.isGeographic?T.PE_TYPE_GEOGCS:T.PE_TYPE_PROJCS,n.wkt);pt.projToGeog(i,e.length,e)}if(S(s)&&s.steps.length&&s.steps.forEach(i=>{const c=i.wkid?G.geogtran(i.wkid):G.fromString(T.PE_TYPE_GEOGTRAN,i.wkt);Ft.geogToGeog(c,e.length,e,null,i.isInverse?T.PE_TRANSFORM_2_TO_1:T.PE_TRANSFORM_1_TO_2)}),!o.isGeographic){const i=X(o,!0),c=S(i)&&i.isEnvelope?[i.bbox[1],i.bbox[3]]:[-90,90];Ht(e,c);const p=o.wkid?G.coordsys(o.wkid):G.fromString(o.isGeographic?T.PE_TYPE_GEOGCS:T.PE_TYPE_PROJCS,o.wkt);pt.geogToProj(p,e.length,e)}let l=e;if(a&&e.length!==a.length){l=[];for(let i=0,c=0;i<a.length;i++)a[i]?l.push(e[c++]):l.push([NaN,NaN])}return l}function qt(t){const{cols:n,rows:o,xres:s,yres:r,usePixelCenter:e,inSR:a,outSR:l}=t;let{xmin:i,ymax:c}=t;e&&(i+=s/2,c-=r/2);const p=[],g=[],h=Math.max(n,o);for(let u=0;u<h;u++){const x=i+s*Math.min(n,u),f=c-r*Math.min(o,u),w=Y(new b({x,y:f,spatialReference:a}),l);u<=n&&p.push(w.x),u<=o&&g.push(w.y)}const d=[];for(let u=0;u<n;u++)for(let x=0;x<o;x++)d.push([p[u],g[x]]);return d}function X(t,n=!1){let o=t.wkid||t.wkt;if(!o||t.isGeographic)return null;if(o=String(o),tt.has(o)){const a=tt.get(o);return n?a==null?void 0:a.gcs:a==null?void 0:a.pcs}const s=t.wkid?G.coordsys(t.wkid):G.fromString(t.isGeographic?T.PE_TYPE_GEOGCS:T.PE_TYPE_PROJCS,t.wkt),r=yt(s,k(t,1e-4)),e=yt(s,0,!0);return tt.set(o,{pcs:r,gcs:e}),n?e:r}function yt(t,n=0,o=!1){const s=At.generate(t),r=o?t.horizonGcsGenerate():t.horizonPcsGenerate();if(r==null||!r.length)return null;let e=!1,a=r.find(x=>x.getInclusive()===1&&x.getKind()===1);if(!a){if(a=r.find(x=>x.getInclusive()===1&&x.getKind()===0),!a)return null;e=!0}const l=s.isPannableRectangle(),i=a.getCoord();if(e)return{isEnvelope:e,isPannable:l,vertices:i,coef:null,bbox:[i[0][0]-n,i[0][1]-n,i[1][0]+n,i[1][1]+n]};let c=0;const p=[];let[g,h]=i[0],[d,u]=i[0];for(let x=0,f=i.length;x<f;x++){c++,c===f&&(c=0);const[w,m]=i[x],[y,M]=i[c];if(M===m)p.push([w,y,m,M,2]);else{const v=(y-w)/(M-m||1e-4),R=w-v*m;m<M?p.push([v,R,m,M,0]):p.push([v,R,M,m,1])}g=g<w?g:w,h=h<m?h:m,d=d>w?d:w,u=u>m?u:m}return{isEnvelope:!1,isPannable:l,vertices:i,coef:p,bbox:[g,h,d,u]}}function rt(t,n){const o=[],{cols:s,rows:r,xres:e,yres:a,usePixelCenter:l}=t;let{xmin:i,ymax:c}=t;if(l&&(i+=e/2,c-=a/2),!S(n)){for(let d=0;d<s;d++)for(let u=0;u<r;u++)o.push([i+e*d,c-a*u]);return{points:o}}const p=new Uint8Array(s*r);if(n.isEnvelope){const{bbox:[d,u,x,f]}=n;for(let w=0,m=0;w<s;w++){const y=i+e*w,M=n.isPannable||y>=d&&y<=x;for(let v=0;v<r;v++,m++){const R=c-a*v;M&&R>=u&&R<=f&&(o.push([y,R]),p[m]=1)}}return{points:o,mask:p}}const{coef:g}=n,h=[];for(let d=0;d<r;d++){const u=c-a*d,x=[],f=[];for(let m=0;m<g.length;m++){const[y,M,v,R,j]=g[m];if(u===v&&v===R)x.push(y),x.push(M),f.push(2),f.push(2);else if(u>=v&&u<=R){const F=y*u+M;x.push(F),f.push(j)}}let w=x;if(x.length>2){let m=f[0]===2?0:f[0],y=x[0];w=[];for(let M=1;M<f.length;M++)f[M]===2&&M!==f.length-1||(f[M]!==m&&(w.push(m===0?Math.min(y,x[M-1]):Math.max(y,x[M-1])),m=f[M],y=x[M]),M===f.length-1&&w.push(f[M]===0?Math.min(y,x[M]):Math.max(y,x[M])));w.sort((M,v)=>M-v)}else x[0]>x[1]&&(w=[x[1],x[0]]);h.push(w)}for(let d=0,u=0;d<s;d++){const x=i+e*d;for(let f=0;f<r;f++,u++){const w=c-a*f,m=h[f];if(m.length===2)x>=m[0]&&x<=m[1]&&(o.push([x,w]),p[u]=1);else if(m.length>2){let y=!1;for(let M=0;M<m.length;M+=2)if(x>=m[M]&&x<=m[M+1]){y=!0;break}y&&(o.push([x,w]),p[u]=1)}}}return{points:o,mask:p}}function Ht(t,n){const[o,s]=n;for(let r=0;r<t.length;r++){const e=t[r][1];(e<o||e>s)&&(t[r]=[NaN,NaN])}}function Ct(t){const n=N(t[0].spatialReference);if(t.length<2||!S(n))return t[0];let{xmin:o,xmax:s,ymin:r,ymax:e}=t[0];for(let a=1;a<t.length;a++){const l=t[a];s=l.xmax+n*a,r=Math.min(r,l.ymin),e=Math.max(e,l.ymax)}return new K({xmin:o,xmax:s,ymin:r,ymax:e,spatialReference:t[0].spatialReference})}function Kt(t,n,o=null,s=!0){if(t.spatialReference.equals(n))return t;const r=Qt(t),e=N(t.spatialReference,!0),a=N(n);if(r===0||I(e)||I(a))return gt(t,n,o,s);const l=t.clone().normalize();if(l.length===1&&t.xmax<e&&t.xmax-e/2>k(t.spatialReference)){const{xmin:i,xmax:c}=t;for(let p=0;p<=r;p++){const g=p===0?i:-e/2,h=p===r?c-e*p:e/2;l[p]=new K({xmin:g,xmax:h,ymin:t.ymin,ymax:t.ymax,spatialReference:t.spatialReference})}}return Ct(l.map(i=>gt(i,n,o,s)).filter(i=>!!i))}function gt(t,n,o=null,s=!0,r=!0){const e=t.spatialReference;if(e.equals(n))return t;W(e,n,o);const a=Y(t,n,o);if(r&&n.isWebMercator&&a&&(a.ymax=Math.min(20037508342787e-6,a.ymax),a.ymin=Math.max(-20037508342787e-6,a.ymin),a.ymin>=a.ymax))return null;if(!s||!a)return a;const l=H(e,!0),i=H(n,!0);if(I(l)||I(i))return a;const c=k(e,.001),p=k(e,500),g=k(n,.001);if(Math.abs(a.xmin-i[0])<g&&Math.abs(a.xmax-i[1])<g){const h=Math.abs(t.xmin-l[0]),d=Math.abs(l[1]-t.xmax);if(h<c&&d>p){a.xmin=i[0];const u=[];u.push(new b(t.xmax,t.ymin,e)),u.push(new b(t.xmax,(t.ymin+t.ymax)/2,e)),u.push(new b(t.xmax,t.ymax,e));const x=u.map(f=>xt(f,n,o)).filter(f=>!isNaN(f==null?void 0:f.x)).map(f=>f.x);a.xmax=Math.max.apply(null,x)}if(d<c&&h>p){a.xmax=i[1];const u=[];u.push(new b(t.xmin,t.ymin,e)),u.push(new b(t.xmin,(t.ymin+t.ymax)/2,e)),u.push(new b(t.xmin,t.ymax,e));const x=u.map(f=>xt(f,n,o)).filter(f=>!isNaN(f==null?void 0:f.x)).map(f=>f.x);a.xmin=Math.min.apply(null,x)}}else{const h=k(n,.001);Math.abs(a.xmin-i[0])<h&&(a.xmin=i[0]),Math.abs(a.xmax-i[1])<h&&(a.xmax=i[1])}return a}function N(t,n=!1){const o=n?20037508342787e-6:20037508342788905e-9;return t.isWebMercator?2*o:t.wkid&&t.isGeographic?360:2*Bt[t.wkid]||null}function H(t,n=!1){if(t.isGeographic)return[-180,180];const o=N(t,n);return S(o)?[-o/2,o/2]:null}function dt(t,n,o,s){let r=(t-n)/o;return r-Math.floor(r)!=0?r=Math.floor(r):s&&(r-=1),r}function Qt(t,n=!1){const o=N(t.spatialReference);if(!S(o))return 0;const s=n?0:-(o/2),r=k(t.spatialReference),e=!n&&Math.abs(t.xmax-o/2)<r?o/2:t.xmax,a=!n&&Math.abs(t.xmin+o/2)<r?-o/2:t.xmin;return dt(e,s,o,!0)-dt(a,s,o,!1)}function ln(t){const n=t.storageInfo.origin.x,o=N(t.spatialReference,!0);if(!S(o))return{originX:n,halfWorldWidth:null,pyramidsInfo:null};const s=o/2,{nativePixelSize:r,storageInfo:e,extent:a}=t,{maximumPyramidLevel:l,blockWidth:i,pyramidScalingFactor:c}=e;let p=r.x;const g=[],h=S(t.transform)&&t.transform.type==="gcs-shift",d=n+(h?0:s),u=h?o-n:s-n;for(let x=0;x<=l;x++){const f=(a.xmax-n)/p/i,w=f-Math.floor(f)==0?f:Math.ceil(f),m=u/p/i,y=m-Math.floor(m)==0?m:Math.ceil(m),M=Math.floor(d/p/i),v=Math.round(d/p)%i,R=(i-Math.round(u/p)%i)%i;g.push({resolutionX:p,blockWidth:i,datsetColumnCount:w,worldColumnCountFromOrigin:y,leftMargin:v,rightPadding:R,originColumnOffset:M}),p*=c}return{originX:n,halfWorldWidth:s,pyramidsInfo:g,hasGCSSShiftTransform:h}}function Ut(t){if(!t||t.isGeographic)return t;const n=String(t.wkid||t.wkt);let o;return nt.has(n)?o=nt.get(n):(o=(t.wkid?G.coordsys(t.wkid):G.fromString(T.PE_TYPE_PROJCS,t.wkt)).getGeogcs().getCode(),nt.set(n,o)),new Xt({wkid:o})}function fn(t){const n=t.isAdaptive&&t.spacing==null;let o=t.spacing||[L,L],s=et(t),r={cols:s.size[0]+1,rows:s.size[1]+1};const e=s.outofBoundPointCount>0&&s.outofBoundPointCount<s.offsets.length/2;let a=s.outofBoundPointCount===s.offsets.length/2||n&&e?[0,0]:mt(s.offsets,r,o,V);const l=(a[0]+a[1])/2,i=t.projectedExtent.spatialReference,c=t.srcBufferExtent.spatialReference;if(n&&(e||l>V)&&(Rt(i,c,t.datumTransformation)&&(i.isGeographic||S(X(i))),o=[q,q],s=et(D(Z({},t),{spacing:o})),r={cols:s.size[0]+1,rows:s.size[1]+1},a=mt(s.offsets,r,o,V)),s.error=a,o[0]>1&&(s.coefficients=wt(s.offsets,r,e)),t.includeGCSGrid&&!i.isGeographic&&!i.isWebMercator)if(c.isGeographic)s.gcsGrid={offsets:s.offsets,coefficients:s.coefficients,spacing:o};else{const p=X(i);if(S(p)&&!p.isEnvelope){const g=Ut(i),h=Kt(t.projectedExtent,g),{offsets:d}=et(D(Z({},t),{srcBufferExtent:h,spacing:o})),u=wt(d,r,e);s.gcsGrid={offsets:d,coefficients:u,spacing:o}}}return s}function et(t){const{projectedExtent:n,srcBufferExtent:o,pixelSize:s,datumTransformation:r,rasterTransform:e}=t,a=n.spatialReference,l=o.spatialReference;W(a,l);const{xmin:i,ymin:c,xmax:p,ymax:g}=n,h=N(l),d=S(h)&&(t.hasWrapAround||(e==null?void 0:e.type)==="gcs-shift"),u=t.spacing||[L,L],x=u[0]*s.x,f=u[1]*s.y,w=u[0]===1,m=Math.ceil((p-i)/x-.1/u[0])+(w?0:1),y=Math.ceil((g-c)/f-.1/u[1])+(w?0:1),M=Jt({cols:m,rows:y,xmin:i,ymax:g,xres:x,yres:f,inSR:a,outSR:l,datumTransformation:r,preferPE:u[0]<=q,usePixelCenter:w}),v=[];let R,j=0;const F=w?-1:NaN,{xmin:Pt,xmax:bt,ymax:Et,width:Tt,height:Gt}=o,kt=k(l,500);for(let A=0;A<m;A++){const U=[];for(let _=0;_<y;_++){let P=M[A*y+_];if(d&&P[0]>bt&&P[0]>h/2-kt&&(P[0]-=h),!P||isNaN(P[0])||isNaN(P[1]))v.push(F),v.push(F),U.push(null),j++;else{if(e){const at=e.inverseTransform(new b({x:P[0],y:P[1],spatialReference:l}));P=[at.x,at.y]}U.push(P),A>0&&d&&R[_]&&P[0]<R[_][0]&&(P[0]+=h),v.push((P[0]-Pt)/Tt),v.push((Et-P[1])/Gt)}}R=U}return{offsets:v,error:null,coefficients:null,outofBoundPointCount:j,spacing:u,size:w?[m,y]:[m-1,y-1]}}function wt(t,n,o){const{cols:s,rows:r}=n,e=new Float32Array((s-1)*(r-1)*2*6),a=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),l=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let i=0;i<s-1;i++){for(let c=0;c<r-1;c++){let p=i*r*2+2*c;const g=t[p],h=t[p+1],d=t[p+2],u=t[p+3];p+=2*r;const x=t[p],f=t[p+1],w=t[p+2],m=t[p+3];let y=0,M=12*(c*(s-1)+i);for(let v=0;v<3;v++)e[M++]=a[y++]*g+a[y++]*d+a[y++]*w;y=0;for(let v=0;v<3;v++)e[M++]=a[y++]*h+a[y++]*u+a[y++]*m;y=0;for(let v=0;v<3;v++)e[M++]=l[y++]*g+l[y++]*x+l[y++]*w;y=0;for(let v=0;v<3;v++)e[M++]=l[y++]*h+l[y++]*f+l[y++]*m}if(o)for(let c=0;c<e.length;c++)isNaN(e[c])&&(e[c]=-1)}return e}function cn(t){const n=t.clone().normalize();return n.length===1?n[0]:Ct(n)}function un(t,n,o){const{storageInfo:s,pixelSize:r}=n;let e,a=!1;const{pyramidResolutions:l}=s;if(S(l)&&l.length){const h=(t.x+t.y)/2,d=l[l.length-1],u=(d.x+d.y)/2,x=(r.x+r.y)/2;if(h<=x)e=0;else if(h>=u)e=l.length,a=h/u>8;else{let w,m=x;for(let y=1;y<=l.length;y++){if(w=(l[y-1].x+l[y-1].y)/2,h<=w){h===w?e=y:o==="down"?(e=y-1,a=h/m>8):e=o==="up"||h-m>w-h||h/m>2?y:y-1;break}m=w}}const f=e===0?r:l[e-1];return{pyramidLevel:e,pyramidResolution:new b({x:f.x,y:f.y,spatialReference:n.spatialReference}),excessiveReading:a}}const i=Math.log(t.x/r.x)/Math.LN2,c=Math.log(t.y/r.y)/Math.LN2,p=n.storageInfo.maximumPyramidLevel||0;e=o==="down"?Math.floor(Math.min(i,c)):o==="up"?Math.ceil(Math.max(i,c)):Math.round((i+c)/2),e<0?e=0:e>p&&(a=e>p+3,e=p);const g=2**e;return{pyramidLevel:e,pyramidResolution:new b({x:g*n.nativePixelSize.x,y:g*n.nativePixelSize.y,spatialReference:n.spatialReference}),excessiveReading:a}}let O=class extends Yt{get affectsPixelSize(){return!1}forwardTransform(t){return t}inverseTransform(t){return t}};C([$()],O.prototype,"affectsPixelSize",null),C([$({json:{write:!0}})],O.prototype,"spatialReference",void 0),O=C([Q("esri.layers.support.rasterTransforms.BaseRasterTransform")],O);const it=O;let z=class extends it{constructor(){super(...arguments),this.type="gcs-shift",this.tolerance=1e-8}forwardTransform(t){return(t=t.clone()).type==="point"?(t.x>180+this.tolerance&&(t.x-=360),t):(t.xmin>=180-this.tolerance?(t.xmax-=360,t.xmin-=360):t.xmax>180+this.tolerance&&(t.xmin=-180,t.xmax=180),t)}inverseTransform(t){return(t=t.clone()).type==="point"?(t.x<-this.tolerance&&(t.x+=360),t):(t.xmin<-this.tolerance&&(t.xmin+=360,t.xmax+=360),t)}};C([st({GCSShiftXform:"gcs-shift"})],z.prototype,"type",void 0),C([$()],z.prototype,"tolerance",void 0),z=C([Q("esri.layers.support.rasterTransforms.GCSShiftTransform")],z);const Zt=z;let B=class extends it{constructor(){super(...arguments),this.type="identity"}};C([st({IdentityXform:"identity"})],B.prototype,"type",void 0),B=C([Q("esri.layers.support.rasterTransforms.IdentityTransform")],B);const Dt=B;function ot(t,n,o){const{x:s,y:r}=n;if(o<2)return{x:t[0]+s*t[2]+r*t[4],y:t[1]+s*t[3]+r*t[5]};if(o===2){const h=s*s,d=r*r,u=s*r;return{x:t[0]+s*t[2]+r*t[4]+h*t[6]+u*t[8]+d*t[10],y:t[1]+s*t[3]+r*t[5]+h*t[7]+u*t[9]+d*t[11]}}const e=s*s,a=r*r,l=s*r,i=e*s,c=e*r,p=s*a,g=r*a;return{x:t[0]+s*t[2]+r*t[4]+e*t[6]+l*t[8]+a*t[10]+i*t[12]+c*t[14]+p*t[16]+g*t[18],y:t[1]+s*t[3]+r*t[5]+e*t[7]+l*t[9]+a*t[11]+i*t[13]+c*t[15]+p*t[17]+g*t[19]}}function Mt(t,n,o){const{xmin:s,ymin:r,xmax:e,ymax:a,spatialReference:l}=n;let i=[];if(o<2)i.push({x:s,y:a}),i.push({x:e,y:a}),i.push({x:s,y:r}),i.push({x:e,y:r});else{let g=10;for(let h=0;h<g;h++)i.push({x:s,y:r+(a-r)*h/(g-1)}),i.push({x:e,y:r+(a-r)*h/(g-1)});g=8;for(let h=1;h<=g;h++)i.push({x:s+(e-s)*h/g,y:r}),i.push({x:s+(e-s)*h/g,y:a})}i=i.map(g=>ot(t,g,o));const c=i.map(g=>g.x),p=i.map(g=>g.y);return new K({xmin:Math.min.apply(null,c),xmax:Math.max.apply(null,c),ymin:Math.min.apply(null,p),ymax:Math.max.apply(null,p),spatialReference:l})}function Vt(t){const[n,o,s,r,e,a]=t,l=s*a-e*r,i=e*r-s*a;return[(e*o-n*a)/l,(s*o-n*r)/i,a/l,r/i,-e/l,-s/i]}let E=class extends it{constructor(){super(...arguments),this.polynomialOrder=1,this.type="polynomial"}readForwardCoefficients(t,n){const{coeffX:o,coeffY:s}=n;if(o==null||!o.length||s==null||!s.length||o.length!==s.length)return null;const r=[];for(let e=0;e<o.length;e++)r.push(o[e]),r.push(s[e]);return r}writeForwardCoefficients(t,n,o){const s=[],r=[];for(let e=0;e<(t==null?void 0:t.length);e++)e%2==0?s.push(t[e]):r.push(t[e]);n.coeffX=s,n.coeffY=r}get inverseCoefficients(){let t=this._get("inverseCoefficients");const n=this._get("forwardCoefficients");return!t&&n&&this.polynomialOrder<2&&(t=Vt(n)),t}set inverseCoefficients(t){this._set("inverseCoefficients",t)}readInverseCoefficients(t,n){const{inverseCoeffX:o,inverseCoeffY:s}=n;if(o==null||!o.length||s==null||!s.length||o.length!==s.length)return null;const r=[];for(let e=0;e<o.length;e++)r.push(o[e]),r.push(s[e]);return r}writeInverseCoefficients(t,n,o){const s=[],r=[];for(let e=0;e<(t==null?void 0:t.length);e++)e%2==0?s.push(t[e]):r.push(t[e]);n.inverseCoeffX=s,n.inverseCoeffY=r}get affectsPixelSize(){return this.polynomialOrder>0}forwardTransform(t){if(t.type==="point"){const n=ot(this.forwardCoefficients,t,this.polynomialOrder);return new b({x:n.x,y:n.y,spatialReference:t.spatialReference})}return Mt(this.forwardCoefficients,t,this.polynomialOrder)}inverseTransform(t){if(t.type==="point"){const n=ot(this.inverseCoefficients,t,this.polynomialOrder);return new b({x:n.x,y:n.y,spatialReference:t.spatialReference})}return Mt(this.inverseCoefficients,t,this.polynomialOrder)}};C([$({json:{write:!0}})],E.prototype,"polynomialOrder",void 0),C([$()],E.prototype,"forwardCoefficients",void 0),C([ct("forwardCoefficients",["coeffX","coeffY"])],E.prototype,"readForwardCoefficients",null),C([ut("forwardCoefficients")],E.prototype,"writeForwardCoefficients",null),C([$({json:{write:!0}})],E.prototype,"inverseCoefficients",null),C([ct("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],E.prototype,"readInverseCoefficients",null),C([ut("inverseCoefficients")],E.prototype,"writeInverseCoefficients",null),C([$()],E.prototype,"affectsPixelSize",null),C([st({PolynomialXform:"polynomial"})],E.prototype,"type",void 0),E=C([Q("esri.layers.support.rasterTransforms.PolynomialTransform")],E);const tn=E,St={GCSShiftXform:Zt,IdentityXform:Dt,PolynomialXform:tn},nn=Object.keys(St);function pn(t){const n=t==null?void 0:t.type;return!t||nn.includes(n)}function mn(t){if(!(t!=null&&t.type))return null;const n=St[t==null?void 0:t.type];if(n){const o=new n;return o.read(t),o}return null}export{Kt as B,fn as D,rn as G,ln as K,N as L,an as N,xt as T,cn as V,Qt as X,un as Z,Zt as c,pn as e,mn as f,tn as m,Rt as y};
