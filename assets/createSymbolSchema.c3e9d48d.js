var x=Object.defineProperty,O=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var K=(e,r,t)=>r in e?x(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,a=(e,r)=>{for(var t in r||(r={}))z.call(r,t)&&K(e,t,r[t]);if(d)for(var t of d(r))F.call(r,t)&&K(e,t,r[t]);return e},u=(e,r)=>O(e,b(r));import{E as c}from"./Pipeline.1c52dca6.js";import{L as h}from"./SymbolProcessor.af9fc309.js";import"./index.6518a001.js";import"./TileInfo.62dd0bed.js";import"./aaBoundingRect.18bcc5e0.js";import"./featureConversionUtils.f41435b4.js";import"./OptimizedGeometry.caece4b3.js";import"./OptimizedFeatureSet.ec9a3456.js";import"./QueryEngine.e821ccdc.js";import"./normalizeUtils.8bc89086.js";import"./ItemCache.64b60134.js";import"./WhereClause.bcf023ba.js";import"./projection.e8ab4518.js";import"./json.da51edc4.js";import"./QueryEngineCapabilities.650d7541.js";import"./utils.a8efa1eb.js";import"./ClassBreaksDefinition.e5dafc13.js";import"./quickselect.02d2bace.js";import"./ogcFeatureUtils.f5780b75.js";import"./geojson.47c8536a.js";import"./clientSideDefaults.a8f605e0.js";import"./query.880e8a75.js";import"./pbfQueryUtils.231edae0.js";import"./pbf.e4c33ef6.js";import"./enums.94a84b2b.js";import"./enums.8acce53f.js";import"./Texture.f22f3452.js";import"./context-util.277a52bf.js";import"./TileKey.d9486464.js";import"./TileClipper.05a78f03.js";import"./Geometry.e891c191.js";import"./vec2.e6551521.js";import"./tileUtils.0ff102da.js";import"./earcut.91e104de.js";import"./devEnvironmentUtils.f51567b1.js";function y(e){if(e.type==="line-marker"){var r;return{type:"line-marker",color:(r=e.color)==null?void 0:r.toJSON(),placement:e.placement,style:e.style}}return e.constructor.fromJSON(e.toJSON()).toJSON()}function f(e){return hydrateKey(e)}function ce(e,r,t){if(!e)return null;switch(e.type){case"simple-fill":case"picture-fill":return E(e,r,t);case"simple-marker":case"picture-marker":return L(e,r,t);case"simple-line":return g(e,r,t);case"text":return N(e,r,t);case"label":return v(e,r,t);case"cim":return{type:"cim",rendererKey:r.vvFlags,data:e.data,maxVVSize:r.maxVVSize};case"CIMSymbolReference":return{type:"cim",rendererKey:r.vvFlags,data:e,maxVVSize:r.maxVVSize};case"web-style":return u(a({},y(e)),{type:"web-style",hash:e.hash(),rendererKey:r.vvFlags,maxVVSize:r.maxVVSize});default:throw new Error(`symbol not supported ${e.type}`)}}function v(e,r,t){const i=e.toJSON(),l=h(c.LABEL,u(a({},r),{placement:i.labelPlacement}));return u(a({materialKey:t?f(l):l,hash:e.hash()},i),{labelPlacement:i.labelPlacement})}function E(e,r,t){const i=r.supportsOutlineFills,l=h(c.FILL,u(a({},r),{isOutlinedFill:i})),o=t?f(l):l,m=e.clone(),n=m.outline;r.supportsOutlineFills||(m.outline=null);const V=a({materialKey:o,hash:m.hash(),isOutlinedFill:!!r.supportsOutlineFills},y(m));if(r.supportsOutlineFills)return V;const s=[];if(s.push(V),n){const p=h(c.LINE,u(a({},r),{isOutline:!0})),S=a({materialKey:t?f(p):p,hash:n.hash()},y(n));s.push(S)}return{type:"composite-symbol",layers:s,hash:s.reduce((p,S)=>S.hash+p,"")}}function g(e,r,t){const i=h(c.LINE,r),l=t?f(i):i,o=e.clone(),m=o.marker;o.marker=null;const n=[];if(n.push(a({materialKey:l,hash:o.hash()},y(o))),m){var V;const s=h(c.MARKER,r),p=t?f(s):s;m.color=(V=m.color)!=null?V:o.color,n.push(a({materialKey:p,hash:m.hash(),lineWidth:o.width},y(m)))}return{type:"composite-symbol",layers:n,hash:n.reduce((s,p)=>p.hash+s,"")}}function L(e,r,t){const i=h(c.MARKER,r),l=t?f(i):i,o=y(e);return u(a({materialKey:l,hash:e.hash()},o),{angle:e.angle,maxVVSize:r.maxVVSize})}function N(e,r,t){const i=h(c.TEXT,r),l=t?f(i):i,o=y(e);return u(a({materialKey:l,hash:e.hash()},o),{angle:e.angle,maxVVSize:r.maxVVSize})}export{ce as createSymbolSchema};
