import{bg as a,j as c,e_ as f,r as h,t as p,E as r,F as l,H as u}from"./index.6518a001.js";let s=class extends a(c){constructor(t){super(t),this.getCollections=null}initialize(){this.handles.add(f(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const t=h(this.getCollections)?this.getCollections():null;if(p(t))return void this.removeAll();let o=0;for(const n of t)h(n)&&(o=this._processCollection(o,n));this.splice(o,this.length)}_createNewInstance(t){return new c(t)}_processCollection(t,o){if(!o)return t;const n=this.itemFilterFunction?this.itemFilterFunction:e=>!!e;for(const e of o)if(e){if(n(e)){const i=this.indexOf(e,t);i>=0?i!==t&&this.reorder(e,t):this.add(e,t),++t}if(this.getChildrenFunction){const i=this.getChildrenFunction(e);if(Array.isArray(i))for(const d of i)t=this._processCollection(t,d);else t=this._processCollection(t,i)}}return t}};r([l()],s.prototype,"getCollections",void 0),r([l()],s.prototype,"getChildrenFunction",void 0),r([l()],s.prototype,"itemFilterFunction",void 0),s=r([u("esri.core.CollectionFlattener")],s);const F=s;export{F as p};
