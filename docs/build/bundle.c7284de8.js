!function(s){function n(r){for(var i,l,m=r[0],d=r[1],h=r[2],k=0,v=[];k<m.length;k++)l=m[k],Object.prototype.hasOwnProperty.call(c,l)&&c[l]&&v.push(c[l][0]),c[l]=0;for(i in d)Object.prototype.hasOwnProperty.call(d,i)&&(s[i]=d[i]);for(f&&f(r);v.length;)v.shift()();return p.push.apply(p,h||[]),t()}function t(){for(var s,r=0;r<p.length;r++){for(var i=p[r],l=!0,m=1;m<i.length;m++){var f=i[m];0!==c[f]&&(l=!1)}l&&(p.splice(r--,1),s=u(u.s=i[0]))}return s}var r={},c={main:0},p=[];function u(c){if(r[c])return r[c].exports;var p=r[c]={i:c,l:!1,exports:{}};return s[c].call(p.exports,p,p.exports,u),p.l=!0,p.exports}u.e=function(s){var r=[],p=c[s];if(0!==p)if(p)r.push(p[2]);else{var i=new Promise((function(r,i){p=c[s]=[r,i]}));r.push(p[2]=i);var l,m=document.createElement("script");m.charset="utf-8",m.timeout=120,u.nc&&m.setAttribute("nonce",u.nc),m.src=function o(s){return u.p+"build/"+({compiler:"compiler"}[s]||s)+"."+{compiler:"264253c1"}[s]+".js"}(s);var f=new Error;l=function(r){m.onerror=m.onload=null,clearTimeout(d);var p=c[s];if(0!==p){if(p){var i=r&&("load"===r.type?"missing":r.type),l=r&&r.target&&r.target.src;f.message="Loading chunk "+s+" failed.\n("+i+": "+l+")",f.name="ChunkLoadError",f.type=i,f.request=l,p[1](f)}c[s]=void 0}};var d=setTimeout((function(){l({type:"timeout",target:m})}),12e4);m.onerror=m.onload=l,document.head.appendChild(m)}return Promise.all(r)},u.m=s,u.c=r,u.d=function(s,r,c){u.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:c})},u.r=function(s){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},u.t=function(s,r){if(1&r&&(s=u(s)),8&r)return s;if(4&r&&"object"==typeof s&&s&&s.__esModule)return s;var c=Object.create(null);if(u.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:s}),2&r&&"string"!=typeof s)for(var p in s)u.d(c,p,function(r){return s[r]}.bind(null,p));return c},u.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return u.d(r,"a",r),r},u.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},u.p="",u.oe=function(s){throw console.error(s),s};var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=n,i=i.slice();for(var m=0;m<i.length;m++)n(i[m]);var f=l;p.push([0,"chunk-vendors"]),t()}({0:function(s,r,c){s.exports=c("0c47")},"32f5":function(s,r,c){var p=c("6473");"string"==typeof p&&(p=[[s.i,p,""]]),p.locals&&(s.exports=p.locals),(0,c("499e").default)("deea09ce",p,!0,{sourceMap:!1,shadowMode:!1})},"3dfd":function(s,r,c){"use strict";c.r(r);var p=(c("99af"),c("d81d"),c("b0c0"),c("ac1f"),c("841c"),c("96cf"),c("1da1")),i=(c("a9e3"),c("3835")),l=c("afaa"),m={version:"4.16"};Object(l.loadCss)("https://js.arcgis.com/".concat(m.version,"/esri/css/main.css"));var f=Object(p.a)(regeneratorRuntime.mark((function e(){var s,r,c,p,f,d;return regeneratorRuntime.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,Object(l.loadModules)(["esri/layers/FeatureLayer","esri/widgets/Search","esri/WebMap","esri/views/MapView"],m);case 2:return s=h.sent,r=Object(i.a)(s,4),c=r[0],p=r[1],f=r[2],d=r[3],h.abrupt("return",{FeatureLayer:c,Search:p,WebMap:f,MapView:d});case 9:case"end":return h.stop()}}),e)}))),d=Object(p.a)(regeneratorRuntime.mark((function e(){var s,r;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,f();case 2:return s=c.sent,r=s.FeatureLayer,c.abrupt("return",[{name:"Address",placeholder:"Street Address...",locator:{url:"https://maps.hillsboroughcounty.org/arcgis/rest/services/Geocoding/Composite_Address_Locator_Overall/GeocodeServer"},singleLineFieldName:"SingleLine",minSuggestCharacters:2},{name:"Folio Number",placeholder:"Folio Number...",layer:new r({url:"https://maps.hillsboroughcounty.org/arcgis/rest/services/InfoLayers/HC_Parcels/MapServer/0"}),searchFields:["FOLIO","FOLIO_NUMB"],displayField:"FOLIO",outFields:["FOLIO","SITE_ADDR"]}]);case 5:case"end":return c.stop()}}),e)}))),h={props:{value:Number},created:function(){var s=this;return Object(p.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,d();case 2:s.searchSources=r.sent;case 3:case"end":return r.stop()}}),n)})))()},data:function(){return{searchSources:[]}}},k=c("2877"),v=Object(k.a)(h,(function(){var s=this,r=s.$createElement,c=s._self._c||r;return c("div",{staticClass:"form-group mb-1"},[c("div",{staticClass:"font-weight-bold"},[s._v("Search by:")]),s._l(s.searchSources,(function(r,p){return c("div",{key:p,staticClass:"form-check form-check-inline"},[c("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"searchSources",id:"searchSource-"+s._uid+"-"+p},domProps:{value:s.value,checked:s.value==p},on:{change:function(r){return s.$emit("input",p)}}}),c("label",{staticClass:"form-check-label",attrs:{for:"searchSource-"+s._uid+"-"+p}},[s._v(s._s(r.name))])])}))],2)}),[],!1,null,null,null).exports,y=c("f7fe"),b=c.n(y),g={props:{value:String},data:function(){return{suggestions:[]}},methods:{suggest:b()(Object(p.a)(regeneratorRuntime.mark((function e(){var s,r,c,p;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return this.suggestions=[],i.prev=1,i.next=4,this.$parent.searchWidget();case 4:return s=i.sent,i.next=7,s.suggest(this.value);case 7:r=i.sent,c=r.numResults,p=r.results,this.suggestions=c?p[0].results:[],i.next=16;break;case 13:i.prev=13,i.t0=i.catch(1),console.error(i.t0.message);case 16:case"end":return i.stop()}}),e,this,[[1,13]])}))),300)},computed:{placeholder:function(){return this.$parent.activeSearchSource?this.$parent.activeSearchSource.placeholder:"Search..."},btnClass:function(){return this.$parent.loading?"btn-warning":"btn-secondary bg-secondary"},btnIcon:function(){return this.$parent.loading?"fa fa-fw fa-spinner fa-spin":"fa fa-fw fa-search"},btnText:function(){return"Find"}}},w=Object(k.a)(g,(function(){var s=this,r=s.$createElement,c=s._self._c||r;return c("div",{staticClass:"form-group mb-0"},[c("div",{staticClass:"input-group input-group-lg"},[c("input",{staticClass:"form-control data-hj-whitelist rounded-0",attrs:{placeholder:s.placeholder,list:"suggestions",autocomplete:"off",required:""},domProps:{value:s.value},on:{input:function(r){return s.$emit("input",r.target.value)},keyup:s.suggest}}),c("datalist",{attrs:{id:"suggestions"}},s._l(s.suggestions,(function(s,r){return c("option",{key:r,domProps:{value:s.text}})})),0),c("span",{staticClass:"input-group-append input-group-btn"},[c("button",{staticClass:"btn text-white rounded-0",class:s.btnClass,attrs:{type:"submit"}},[c("i",{class:s.btnIcon}),c("span",{staticClass:"d-none d-sm-inline-block"},[s._v(" "+s._s(s.btnText)+" ")])])])])])}),[],!1,null,null,null).exports,x=(c("4160"),c("159b"),{props:{showMap:Boolean,mapLayers:{type:Array,default:function(){return[]}}},data:function(){return{webmap:null,mapview:null}},mounted:function(){var s=this;return Object(p.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.initMap();case 2:s.$emit("mapready");case 3:case"end":return r.stop()}}),n)})))()},methods:{initMap:function(){var s=this;return Object(p.a)(regeneratorRuntime.mark((function n(){var r,c,p,i,l;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,f();case 2:r=m.sent,c=r.WebMap,p=r.MapView,i=r.FeatureLayer,l=new c({portalItem:{id:"b51fb4e76e154e1b93b630eac3ea94ae"}}),new p({map:l,container:s.$refs.webmap}).when((function(r){s.mapLayers.length&&s.mapLayers.forEach((function(s){l.add(new i(s))})),s.webmap=l,s.mapview=r}));case 9:case"end":return m.stop()}}),n)})))()},openMapPopup:function(s){this.mapview.popup.open({features:s,location:this.$parent.searchResult.feature.geometry})}},computed:{mapClass:function(){return this.showMap?null:"hide-map"}}}),S={name:"hc-esri-search-form",components:{Sources:v,Input:w,EsriMap:(c("b038"),Object(k.a)(x,(function(){var s=this,r=s.$createElement,c=s._self._c||r;return c("div",{staticClass:"embed-responsive embed-responsive-16by9 mb-3",class:s.mapClass},[c("div",{ref:"webmap",staticClass:"embed-responsive-item"})])}),[],!1,null,"624ee842",null)).exports},props:{sourceSelector:{type:Boolean,default:!1},showMap:{type:Boolean,default:!1},mapLayers:{type:Array,default:function(){return[]}}},data:function(){return{userInput:null,loading:!1,status:null,searchSourceIndex:0,searchResult:null}},methods:{search:function(){var s=this;return Object(p.a)(regeneratorRuntime.mark((function n(){var r,c,p,i;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return s.$emit("submit",s),s.searchResult=null,s.loading=!0,s.status="Searching for ".concat(s.activeSearchSource.name,": ").concat(s.userInput,"..."),l.next=6,s.searchWidget();case 6:return r=l.sent,l.next=9,r.search(s.userInput);case 9:c=l.sent,p=c.numResults,i=c.results,p?(s.status=null,s.searchResult=i[0].results[0],s.$emit("result",{result:s.searchResult,queryFeatures:s.queryFeatures})):s.status="No Search Results Found",s.loading=!1;case 14:case"end":return l.stop()}}),n)})))()},queryFeatures:function(s){var r=arguments,c=this;return Object(p.a)(regeneratorRuntime.mark((function a(){var p,i,l,m,d;return regeneratorRuntime.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return p=!(r.length>1&&void 0!==r[1])||r[1],h.next=3,f();case 3:return i=h.sent,l=i.FeatureLayer,h.next=7,new l(s).queryFeatures({returnGeometry:!0,outFields:s.outFields||["*"],geometry:c.searchResult.feature.geometry});case 7:if(m=h.sent,(d=m.features).length){h.next=11;break}return h.abrupt("return",p?null:[]);case 11:return c.showMap&&c.$refs.map&&c.$refs.map.openMapPopup(d),h.abrupt("return",p?d[0]:d);case 13:case"end":return h.stop()}}),a)})))()},searchWidget:function(){var s=this;return Object(p.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,f();case 2:return r=p.sent,c=r.Search,p.abrupt("return",new c({sources:s.$refs.sources.searchSources,activeSourceIndex:s.searchSourceIndex,includeDefaultSources:!1,view:s.$refs.map?s.$refs.map.mapview:null}));case 5:case"end":return p.stop()}}),n)})))()}},computed:{activeSearchSource:function(){return this.$refs.sources.searchSources[this.searchSourceIndex]}}},F=Object(k.a)(S,(function(){var s=this,r=s.$createElement,c=s._self._c||r;return c("form",{on:{submit:function(r){return r.preventDefault(),s.search(r)}}},[c("Sources",{directives:[{name:"show",rawName:"v-show",value:s.sourceSelector,expression:"sourceSelector"}],ref:"sources",model:{value:s.searchSourceIndex,callback:function(r){s.searchSourceIndex=r},expression:"searchSourceIndex"}}),c("Input",{ref:"input",model:{value:s.userInput,callback:function(r){s.userInput=r},expression:"userInput"}}),c("small",{staticClass:"small form-text text-muted d-block"},[s._v(" "+s._s(s.status)+" ")]),c("EsriMap",{ref:"map",attrs:{"show-map":s.showMap,"map-layers":s.mapLayers}})],1)}),[],!1,null,null,null);r.default=F.exports},"515f":function(s,r,c){s.exports={displayName:"hc-esri-search-form",exportName:"default",description:"",tags:{},props:[{name:"mapLayers",description:"Layers to add to the map",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"showMap",description:"Displays a map below the form",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"sourceSelector",description:"Displays the search source radio selector",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:{submit:{name:"submit",description:"Triggered once the form is submitted, returns the instance of the HcEsriSearchForm component",type:{names:["Event"]},properties:[{type:{names:["Object"]},name:"this",description:void 0}]},result:{name:"result",description:"Triggered when a search returns a result, returns a `Promise`&lt;[SearchResponse](https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-Search.html#SearchResponse)&gt; with the `queryFeatures` method added as a property.",type:{names:["Object"]},properties:[{type:{names:["Object"]},name:"results",description:void 0}]}},methods:[{name:"queryFeatures",description:"The `queryFeatures` fucntion accepts the following parameters and returns a `Promise`&lt;[FeatureSet](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-FeatureSet.html)&gt;.",params:[{name:"feature",type:{name:"FeatureLayer"},description:"an autocastable [Feature object](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-FeatureLayer.html#properties-summary)"},{name:"single",type:{name:"Boolean"},description:"retruns an array of features if set to false. defaults to true"}],tags:{params:[{title:"param",type:{name:"FeatureLayer"},name:"feature",description:"an autocastable [Feature object](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-FeatureLayer.html#properties-summary)"},{title:"param",type:{name:"Boolean"},name:"single",description:"retruns an array of features if set to false. defaults to true"}],access:[{description:"public",title:"access"}]}}],slots:void 0,examples:c("a703")}},6473:function(s,r,c){(r=c("24fb")(!1)).push([s.i,".hide-map[data-v-624ee842]{height:1px;margin-bottom:0!important;z-index:-999}",""]),s.exports=r},a703:function(s,r,c){var p=c("6f28").bind(null,{}),i=c("ee44").bind(null,"",null,null);s.exports=[{type:"code",content:'<HcEsriSearchForm\n  ref="searchForm"\n  source-selector="true"\n  show-map="true"\n  :map-layers="[featureLayer]"\n  @submit="reset"\n  @result="handleResult"\n/>',settings:{},evalInContext:i.bind(null,p.bind(null,null)),compiled:{script:";return {data:function(){return {};}}",style:void 0,template:'<HcEsriSearchForm\n  ref="searchForm"\n  source-selector="true"\n  show-map="true"\n  :map-layers="[featureLayer]"\n  @submit="reset"\n  @result="handleResult"\n/>'}},{type:"markdown",content:'```javascript\n<span class="token keyword">import</span> HcEsriSearchForm <span class="token keyword">from</span> <span class="token string">\'@hcflgov/esri-search-form\'</span>\n\n<span class="token comment">// esri FeatureLayer</span>\n<span class="token keyword">const</span> featureLayer <span class="token operator">=</span> <span class="token punctuation">{</span>\n  url<span class="token operator">:</span> <span class="token string">\'https://...\'</span><span class="token punctuation">,</span>\n  outFields<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">\'*\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token comment">// popupTemplate: {}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>\n  components<span class="token operator">:</span> <span class="token punctuation">{</span> HcEsriSearchForm <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\n  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// dynamically set form data for testing purposes</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>searchForm<span class="token punctuation">.</span>userInput <span class="token operator">=</span> <span class="token string">\'101 My Address\'</span>\n    <span class="token comment">// this.$refs.searchForm.sourceIndex = 1</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\n  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>\n    featureAttributes<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\n  methods<span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>featureAttributes <span class="token operator">=</span> <span class="token keyword">null</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token keyword">async</span> <span class="token function">handleResult</span><span class="token punctuation">(</span><span class="token parameter">results</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">try</span> <span class="token punctuation">{</span>\n        <span class="token keyword">const</span> <span class="token punctuation">{</span> attributes <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> results<span class="token punctuation">.</span><span class="token function">queryFeatures</span><span class="token punctuation">(</span>featureLayer<span class="token punctuation">)</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>featureAttributes <span class="token operator">=</span> attributes\n      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// no features</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n```'}]},b038:function(s,r,c){"use strict";var p=c("32f5");c.n(p).a}});